key: ML-51738
summary: Posidex refer workflow change for MEL Plus cases
description: nan
acceptance: nan

key: ML-51735
summary: Group Suraksha Insurance Opt out toggle for PL
description: *Device Compatibility* : Web / Mobile

*User Role :* IRO

*Stage:* Insurance

*Sub-stage:* Insurance Entry Pending

*Applicable BU :* Rural PL, Rural PL Repeat

*Current:* As per current process Group Suraksha is mandatory for applicant and non-mandatory for co-applicant in RPL journeys on SFDC.

*Proposed:*

* When user reaches the above-mentioned stage / sub-stage, then user should be able to view the insurance screen along with the necessary fields for group suraksha insurance
* Additionally, the user should also have a toggle button to opt - in or opt - out for group suraksha insurance process
* The toggle button should be placed in the extreme right of the “Insurance Detail” header as specified in below screenshot:

!image-20240902-093949.png|width=50%,alt="image-20240902-093949.png"!

* The toggle button should have two options “Opt-In” and “Opt-Out” respectively
* Below the toggle button, following static message should be visible to the user “Group Suraksha Insurance is completely voluntary and non-mandatory for availing RPL Loan. Applicant (or) Co-applicant can choose to not avail the loan-linked insurance product” (message to be kept configurable)
* In case user toggles to “Opt-Out” option, then all fields in Group Suraksha Insurance section should be erased and all fields should become non editable to user. No data capture to be done for Group Suraksha Insurance for applicant in this scenario. SFDC validations for mandatory Group Suraksha insurance field filling should not run for this scenario and user should be able to proceed ahead.
* “Opt-In” will be the default toggle option. Group Suraksha insurance related fields should be auto populated to the user as per the current process for this scenario until the user chooses opt out toggle. All fields related to Group Suraksha should be captured and validations for filling the fields should apply when the Opt-In toggle is enabled (As is current implementation)
* In both scenarios, hospi cash related cards and functionality should remain as - is

*Note -* In case customer opt-in for group suraksha insurance, existing functionality to run as-is (Emporhis Insurance doc generation, Charge creation on loan Asset and submit of charges to FinnOne)
acceptance: # Given that mentioned changes are done, when user reaches the said stage / sub-stage mentioned in description, then user should be able to view the toggle button with “Opt-In” and “Opt-Out” options respectively at the Insurance Details header in the extreme right position as specified in the description
# Given that mentioned changes are done, then below the toggle button, user should be able to view a static message stating “Group Suraksha Insurance is completely voluntary and non-mandatory for availing RPL Loan. Applicant (or) Co-applicant can choose to not avail the loan-linked insurance product” (message to be kept configurable)
# Given that mentioned changes are done, when user reaches the said stage / sub-stage mentioned in description, then group suraksha insurance should be made non-mandatory for both applicants or co-applicants respectively
# Given that mentioned changes are done, when user toggles to “Opt-In” option, then group suraksha insurance related fields should be available to the user and user should proceed by mandatorily opting for group suraksha insurance
# Given that user toggles to “Opt-Out” option, then all fields in Group Suraksha Insurance section should be erased and all fields should become non editable to user. No data capture to be done for Group Suraksha Insurance for applicant in this scenario. SFDC validations for mandatory Credit protect insurance field filling should not run for this scenario and user should be able to proceed ahead.
# Given that mentioned changes are done, when user reaches the said stage / sub-stage mentioned in description, then irrespective of the user selecting “Opt-In” or “Opt-Out” options, hospi cash related cards and functionality should remain as - is
# Given that User is in mentioned stage and sub-stage, “Opt-In” will be the default toggle option and Group Suraksha insurance related fields should be auto populated to the user as per the current process for this scenario until the user chooses opt out toggle.

*Note -* In case customer opt-in for group suraksha insurance, existing functionality to run as-is (Emporhis Insurance doc generation, Charge creation on loan Asset and submit of charges to FinnOne)

key: ML-51734
summary: Credit Protect Insurance Opt out toggle for MEL
description: *Device Compatibility* : Web / Mobile

*User Role :* IRO

*Stage:* Insurance

*Sub-stage:* Insurance Entry Pending

*Applicable BU :* Rural MEL, Rural MEL Repeat

*Current:* As per current process Credit Protect is mandatory for applicant and non-mandatory for co-applicant in RMEL journeys on SFDC.

*Proposed:*

* When user reaches the above-mentioned stage / sub-stage, then user should be able to view the insurance screen along with the necessary fields for credit protect insurance
* Additionally, the user should also have a toggle button to opt - in or opt - out for credit protect insurance process
* The toggle button should be placed in the extreme right of the “Insurance Detail” header as specified in below screenshot:

!image-20240902-093949.png|width=639,height=123!

* The toggle button should have two options “Opt-In” and “Opt-Out” respectively
* Below the toggle button, following static message should be visible to the user “Credit Protect Insurance is completely voluntary and non-mandatory for availing RMEL Loan. Applicant (or) Co-applicant can choose to not avail the loan-linked insurance product” (message to be kept configurable)
* In case user toggles to “Opt-Out” option, then all fields in Credit Protect Insurance section should be erased and all fields should become non editable to user. No data capture to be done for Credit Protect Insurance for applicant in this scenario. SFDC validations for mandatory Credit protect insurance field filling should not run for this scenario and user should be able to proceed ahead. 
* “Opt-In” will be the default toggle option. Credit Protect insurance related fields should be auto populated to the user as per the current process for this scenario until the user chooses opt out toggle. All fields related to credit protect should be captured and validations for filling the fields should apply when the Opt-In toggle is enabled (As is current implementation)
* In both scenarios, hospi cash related cards and functionality should remain as - is

*Note -* In case customer opt-in for credit protect insurance, existing functionality to run as-is (Emporhis Insurance doc generation, Charge creation on loan Asset and submit of charges to FinnOne)
acceptance: # Given that mentioned changes are done, when user reaches the said stage / sub-stage mentioned in description, then user should be able to view the toggle button with “Opt-In” and “Opt-Out” options respectively at the Insurance Details header in the extreme right position as specified in the description
# Given that mentioned changes are done, then below the toggle button, user should be able to view a static message stating “Credit Protect Insurance is completely voluntary and non-mandatory for availing RMEL Loan. Applicant (or) Co-applicant can choose to not avail the loan-linked insurance product” (message to be kept configurable)
# Given that mentioned changes are done, when user reaches the said stage / sub-stage mentioned in description, then Credit Protect insurance should be made non-mandatory for both applicants or co-applicants respectively
# Given that mentioned changes are done, when user toggles to “Opt-In” option, then Credit Protect insurance related fields should be available to the user and user should proceed by mandatorily opting for credit protect insurance
# Given that user toggles to “Opt-Out” option, then all fields in Credit Protect Insurance section should be erased and all fields should become non editable to user. No data capture to be done for Credit Protect Insurance for applicant in this scenario. SFDC validations for mandatory Credit protect insurance field filling should not run for this scenario and user should be able to proceed ahead.
# Given that mentioned changes are done, when user reaches the said stage / sub-stage mentioned in description, then irrespective of the user selecting “Opt-In” or “Opt-Out” options, hospi cash related cards and functionality should remain as - is
# Given that User is in mentioned stage and sub-stage, “Opt-In” will be the default toggle option and Credit Protect insurance related fields should be auto populated to the user as per the current process for this scenario until the user chooses opt out toggle.

*Note*: 

1. All fields related to credit protect should be captured and validations for filling the fields should apply when the Opt-In toggle is enabled (As is current implementation)

     2*.* In case customer opt-in for credit protect insurance, existing functionality to run as-is (Emporhis Insurance doc generation, Charge       creation on loan Asset and submit of charges to FinnOne)

key: ML-51730
summary: ROI Changes to MEL Plus TC offer journeys
description: *Applicable* : Schemes mentioned in the grid, these schemes are true for MEL Plus - TC+IRO Assisted Journeys

*Proposed*  : 

Update the rates as per the grid
acceptance: * Given that mentioned changes are done, when loan is puched in mentioned schemes in MEL Plus IRO Assisted or TC Journey as per grid , then Interest rates should be updated as per grid attached for all schemes MENTIONED
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then Should function as per grid for new cases.
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then WIP cases  will be submitted to FinnOne with old ROI
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then Updated ROI should be populated on front end and back end as per grid in Bank and IFBL Workflow
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then The Revised ROI should be flown to integrations
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then The loan should be properly disbursed
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then User should be able to submit the loan with new rate to FinnOne

key: ML-51719
summary: PSL Tag Related Changes in FinnOne submit Api for RMEL 
description: *Applicable BU:* Rural MEL, MEL Repeat, MEL Plus

*Device Compatibility* : Web / Mobile

*Integration Consideration:* FinnOne submit API

*Current flow*:

For RMEL cases in FinnOne submit API, PSL Classification and subclassification values are passed as-is, irrespective of “PSL Flag” being stamped “Y” or “N”

"PSLSubClassification" : "3",
"PSLInvestPlantMachine" : 0,
"PSLGrossNetBlock" : "",
"PSLFlag" : "N",
"PSLFinancialYear" : "",
"PSLClassification" : "1",

*Proposed Flow*:

If User has selected “PSL Flag” as “N”, PSL category and PSL subcategory values should flow blank value to  FinnOne.

"PSLSubClassification" : ““,
"PSLInvestPlantMachine" : 0,
"PSLGrossNetBlock" : "",
*"PSLFlag" : "N"*,
"PSLFinancialYear" : "",
"PSLClassification" : "",
acceptance: # Given that PSL Flag is stamped as N in Loan Application then in FinnOne submit API, PSLSubClassification & PSLClassification tag values to be passed as blank

key: ML-51705
summary: MEL Plus TC LAN ownership logic change basis last modified date
description: *Applicable BU:* MEL Plus-TC Journey

*Current Process*:

# After Tele-caller user takes ownership of offer and creates loan application, LAN drops off to IRO user after 7 days of Inacticity
# After Loan Application is created by Tele-caller user, ownership of the Loan Application remains with the Tele-caller and another Tele-caller cannot claim ownership of the Loan Application

*Process Flow*:

# After Tele-caller user has taken ownership of offer and creates loan application, if the loan is not modified by Tele-caller for 24 hours (Basis Last Modified Date) then the ownership of loan application and offer should be changed from Tele-caller to TC queue. 
# Loan Applications which are already moved to stage FinnOne- Submit to FinnOne and Disbursed-Disbursed should be excluded from this condition
# Loan Applications which are dropped off from Tele-caller to IRO Journey to be excluded from this condition
# After Tele-caller user has taken ownership of an offer but hasn’t clicked on Interested button for 24 hours then ownership of offer to be changed to queue

*Note*:

# The existing MEL Plus TC Loan Application inactivity drop off logic to IRO should not get impacted due to this change
# The existing logic for MEL Plus offers in case of no action by TC for 30 days should remain intact
# The 24 hour time period to be maintained as a configuration for point 1 and 4 (In seperate custom labels)
acceptance: # Given that Tele-caller user has taken ownership of offer and creates loan application, if the loan is not modified by Tele-caller for 24 hours (Basis Last Modified Date) then the ownership of loan application should be changed from Tele-caller to TC queue. 
# Given that Tele-caller user has taken ownership of offer and created loan application, when updates are being made to the loan application and the LAN is processed till disbursement without inactivity for 24 hours then the Loan Application ownership should remain with the Tele-caller who created the application
# Given that the Loan Application is Disbursed by Tele-caller then the above logic should not be applicable for changing ownership of loan application
# Given that the TC Loan Application is dropped off from Tele-caller to IRO Journey then the above logic for change of loan application ownership should not be applicable

*Note*:

# The existing MEL Plus TC Loan Application inactivity drop off logic to IRO should not get impacted due to this change
# The existing logic for MEL Plus offers in case of no action by TC for 30 days should remain intact
# The 24 hour time period to be maintained as a configuration.

key: ML-51557
summary: Stamp-duty Master Audit Trail Report
description: *Applicable BU:* Rural MEL and Rural PL

*Device Compatibility* : Web / Mobile

*Process Flow*:

# New report to be created with title- ‘Stamp Duty Audit Trail’ which will contain the following columns- Last Modified By, State, State Code, Stamp Duty ( Old Value ), Stamp Duty ( New Value ) , Last Modified Date, and SNOW Request ID.

|*Last Modified By*|*State*|*State Code*|*Stamp Duty ( Old Value )*|*Stamp Duty ( New Value )*|*Last Modified Date*|*SNOW Request ID*|
|shoeb Ansari|MADHYA PRADESH|13|-|0.25%|06/12/2022|INC000004915765|
|shoeb Ansari|GUJARAT|7|-|300|06/12/2022|INC000004915465|
|Online Integration1|HARYANA|8|-|100|06/12/2022|INC000004645765|
|shoeb Ansari|MADHYA PRADESH|13|-|0.25%|06/12/2022|INC000004914465|

# When any change is made to the stamp duty value for any state, SFDC to insert a new record to the Stamp duty Audit trail report encompassing the Last Modified By, State, State Code, Stamp Duty ( Old Value ), Stamp Duty ( New Value ) , Last Modified Date, and SNOW Request ID and records should be displayed in descending order of their timestamp i.e. the new values should appear on top and older values at the bottom.
acceptance: # Given changes have been made to the stamp of one or more states, system to update the report in real-time to consist of the following columns- Last Modified By, State, State Code, Stamp Duty ( Old Value ), Stamp Duty ( New Value ) , Last Modified Date, and SNOW Request ID.
# The report to be a consolidated report which displays the Stamp-duty Audit trail in descending order of time-stamp

key: ML-50986
summary: Stamp Duty Master Field Tracking Enablement
description: *Applicable BU:* Rural MEL and Rural PL

*Device Compatibility* : Web / Mobile

*Process Flow*:

# In Global Data Attribute object, field history to be enabled for the Stamp Duty field.
# Related List to be added for History to UI.
#* NOTE- Following fields should be visible on UI to track audit trail history whenever Stamp Duty is updated for a particular state-Date, Field ( Stamp Duty ), User, Original Value, and New Value. PFA a screenshot for the same.

|Date|Field|User|Original Value|New Value|
|06/12/2022|Stamp Duty|shoeb ansari|0.201|0.30%|
|06/12/2022|Stamp Duty|Online Integration1|0.30%|0.20%|
|06/12/2022|Stamp Duty|Umakant Gujar|200|202|
|06/12/2022|Stamp Duty|Ganesh Shetty|10|15|

# A new field ' SNOW Request ID' to be created on Global Data Attribute object 
# System should throw error "Please update SNOW Req ID to change Stamp Duty" when user clicks on Save button after changing the stamp duty value from old value to a new value without updating the SNOW Req ID
# In Global Data Attribute object, field history to be enabled for the ‘SNOW Request ID’ field as well.
#* Note- Similar to Stamp Duty, Audit trail will be visible for SNOW Request ID as well consisting of Date, Field ( SNOW Request ID ), user, Original Value, and New Value.



!Screenshot (2116).png|width=1920,height=1080,alt="Screenshot (2116).png"!
acceptance: # Given stamp duty is changed for a particular state, system to track changes for stamp duty on respective states' records in Global Data Attribute History.
# Given stamp duty is changed for a particular state, user to be able to view- Date, Field ( Stamp Duty ), User, Original Value, and New Value.
# Given Stamp Duty has been changed for a particular field, if the user tries to click on the Save button without updating SNOW Req ID, system to throw the following error- "Please update SNOW Req ID to change Stamp Duty"
# Given Stamp Duty has been changed for a particular state, if the user updates the Stamp Duty field and the SNOW Request ID field, then, on the click of the Save button, changes should get saved.
# Given stamp duty is changed for a particular state, system to track changes for 'SNOW Request ID' field on respective states' records in Global Data Attribute History.
#* Note- Similar to Stamp Duty, Audit trail will be visible for SNOW Request ID as well consisting of Date, Field ( SNOW Request ID ), user, Original Value, and New Value.

key: ML-50709
summary: Relationship of Nominee Field Configuration Change
description: nan
acceptance: nan

key: ML-50699
summary: Sanction Letter (English format) change in SFDC basis CGFMU charge collection
description: *User Role* : IRO

*Device Compatibility* : Web / Mobile

*Stage:* Document Generation

*Sub-stage :* Document Generation Pending

*Applicable BU*: Rural MEL, MEL Repeat, MEL Plus

*Process Flow*:

*Process 1-*

For Sanction Letter generated in English format in SFDC, below change to be implemented:

# Below PMJJBY Insurance premium line item in Sanction letter “Annual Guarantee Fee” charge to be Added and value to be displayed as per logic mentioned below:
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Loan
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
#* Value stamped in New AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked

!image-20240816-093957.png|width=1366,height=768,alt="image-20240816-093957.png"!

*Process 2-*

*MEL Repeat Loan/MEL Plus IRO Assisted Loan with CGFMU charged in base loan and Live Loan Flag true in base loan*

When Rural MEL Repeat Loan/MEL Plus IRO Assisted Loan is punched upon click of Next button in Sanction-Insurance Pending stage, if AGF/New AGF is stamped on base loan then below fields to be stamped in Loan Asset Object:

# *Base loan completed tenure*= Number of Months from Base Loan Created Date to today
Example : If Base loan was created on 14th Aug 2023 then Base loan completed tenor on 9th Sep 2024 will be 13 months (Rounded off to next month)
# *Base loan balance tenure*= Tenure - Base loan completed tenure
# *AGF* = AGF% in master as per tenure selected * MEL Repeat Loan Amount
# *Pro-rata AGF* = AGF % as per Base loan balance tenure * MEL Base Loan Amount
# *New AGF* = AGF - Pro-rata AGF
# New AGF charge to be deducted from Net Disbursal Amount field in Loan Asset Object and accordingly be passed in FinnOne submit API

netDisbursalAmount = loanAmount - (stampDutyAmount + igstAmount + processingFeeAmount + premiumAmount + foreclosureAmount + pos + New AGF)
acceptance: Given that Sanction Letter is generated in English format in SFDC, below change to be implemented:

# Below PMJJBY Insurance premium line item in Sanction letter “Annual Guarantee Fee” charge to be Added and value to be displayed as per logic mentioned below:
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Loan
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
#* Value stamped in New AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked

!image-20240816-093957.png|width=1366,height=768,alt="image-20240816-093957.png"!

key: ML-50694
summary: UI change for Annual Guarantee Field display in Front End
description: *Applicable BU:* Rural MEL

*Device Compatibility* : Web / Mobile

*Process Flow*:

*MEL, MEL Repeat, MEL Plus (IRO Journey)*

# For MEL & MEL Repeat Loans in Sanction Insurance Pending stage, New field *Annual Guarantee Fee* to be created in Loan Details Pop-up below Processing Fees field and display value as per below logic:

* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Loan
* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
* Value stamped in New AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked

Note: Annual Guarantee Fee Amount should be subtracted from Net Disbursal Amount and accordingly Net Disbursal value to be displayed on this screen

!image-20240814-221421.png|width=361,height=262,alt="image-20240814-221421.png"!

# *MEL Plus (TC Journey)*
#* For MEL Plus Loan TC Journey in LOAN SUMMARY tab, New field *Annual Guarantee Fee* to be created below Processing Fees field and display value as per below logic:
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Loan
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
#* Value stamped in New AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked

Note: Annual Guarantee Fee Amount should be subtracted from Net Disbursal Amount and accordingly Net Disbursal value to be displayed on this screen

!image-20240814-222411.png|width=611,height=307,alt="image-20240814-222411.png"!
acceptance: # Given that for MEL, MEL Repeat & MEL Plus TC Journey Loans are punched then in Sanction Insurance Pending stage, New field *Annual Guarantee Fee* to be created in Loan Details Pop-up below Processing Fees field and display value as per below logic:

* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Loan
* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
* Value stamped in New AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked
!image-20240814-221421.png|width=361,height=262,alt="image-20240814-221421.png"!

# Given that MEL Plus TC Journey Loan is punched then in LOAN SUMMARY tab, New field *Annual Guarantee Fee* (To be kept configurable) to be created below Processing Fees field and display value as per below logic:
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Loan
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
#* Value stamped in New AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked



!image-20240814-222411.png|width=611,height=307,alt="image-20240814-222411.png"!

key: ML-50646
summary: Live Loan Field stamping basis Loan Dedupe API response
description: *User Role* : IRO

*Applicable BU:* Rural MEL Plus, Rural MEL Repeat, Rural PL Repeat

*Device Compatibility* : Web / Mobile

*Process Flow*:

# For MEL Repeat, MEL Plus & PL Repeat Loans after Base Loan is identified as per [https://fincap.atlassian.net/browse/ML-48026|https://fincap.atlassian.net/browse/ML-48026|smart-link] or [https://fincap.atlassian.net/browse/ML-48491|https://fincap.atlassian.net/browse/ML-48491|smart-link] system to check if loanStatus tag value is A or C
# If loanStatus tag value in the particular array of base loan is A then Live Loan Flag in Base Loan Application should be ticked 
# If loanStatus tag value in the particular array of base loan is C then Live Loan Flag in Base Loan Application should be unticked 
acceptance: # Given that MEL Repeat, MEL Plus & PL Repeat Loans after Base Loan is identified as per [https://fincap.atlassian.net/browse/ML-48026|https://fincap.atlassian.net/browse/ML-48026|smart-link] or [https://fincap.atlassian.net/browse/ML-48491|https://fincap.atlassian.net/browse/ML-48491|smart-link] system to check if loanStatus tag value is A or C
# Given that loanStatus tag value in the particular array of base loan is A then Live Loan Flag in Base Loan Application should be ticked 
# Given that loanStatus tag value in the particular array of base loan is C then Live Loan Flag in Base Loan Application should be unticked 

key: ML-50480
summary: FinnOne submit API change basis CGFMU charge collection
description: *Applicable BU:* MEL*,* MEL Plus, MEL Repeat

*Device Compatibility* : Web / Mobile

*Integration Consideration:* FinnOne Submit API

*Process Flow*:

When MEL, MEL Repeat or MEL Plus loan has CGFMU charge collected then additional charge array to be passed in FinnOne submit API request for the AGF charge collected as per below field stamping logic:

||*FinnOne submit API Tag*||*Field Mapping*||*Comment*||
|service_tax|0|To be kept configurable|
|SGST_RATE|To be passed blank| |
|SGST_AMOUNT|To be passed blank| |
|IGST_RATE|To be passed blank| |
|IGST_AMOUNT|To be passed blank| |
|CGST_RATE|To be passed blank| |
|CGST_AMOUNT|To be passed blank| |
|funded_flag|To be passed as “N”|To be kept configurable|
|charge_Rate|To be passed as 0|To be kept configurable|
|charge_Id|“500093”|To be kept configurable (Correct value will be provided post charge creation on FinnOne)|
|charge_Amount|* Value stamped in AGF Field of Loan Asset Object to be passed in case of MEL Loan
* Value stamped in AGF Field of Loan Asset Object to be passed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
* Value stamped in AGF Field of Loan Asset Object to be passed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
* Value stamped in New AGF Field of Loan Asset Object to be passed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked| |

Eg:
"charge": [
  {
    "service_tax": 0,
    "GST_BREAKUP": {
      "SGST_RATE": "",
      "SGST_AMOUNT": "",
      "IGST_RATE": "",
      "IGST_AMOUNT": "",
      "CGST_RATE": "",
      "CGST_AMOUNT": ""
    },
    "funded_flag": "N",
    "charge_Rate": 0,
    "charge_Id": "500028",
    "charge_Amount": 2732.00
  },
]
acceptance: Given that MEL, MEL Repeat or MEL Plus loan has CGFMU charge collected then additional charge array to be passed in FinnOne submit API request for the AGF charge collected as per below field stamping logic:

||*FinnOne submit API Tag*||*Field Mapping*||*Comment*||
|service_tax|0|To be kept configurable|
|SGST_RATE|To be passed blank| |
|SGST_AMOUNT|To be passed blank| |
|IGST_RATE|To be passed blank| |
|IGST_AMOUNT|To be passed blank| |
|CGST_RATE|To be passed blank| |
|CGST_AMOUNT|To be passed blank| |
|funded_flag|To be passed as “N”|To be kept configurable|
|charge_Rate|To be passed as 0|To be kept configurable|
|charge_Id|“500093”|To be kept configurable (Correct value will be provided post charge creation on FinnOne)|
|charge_Amount|* Value stamped in AGF Field of Loan Asset Object to be passed in case of MEL Loan
* Value stamped in AGF Field of Loan Asset Object to be passed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
* Value stamped in AGF Field of Loan Asset Object to be passed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
* Value stamped in New AGF Field of Loan Asset Object to be passed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked| |

Eg:
"charge": [
  {
    "service_tax": 0,
    "GST_BREAKUP": {
      "SGST_RATE": "",
      "SGST_AMOUNT": "",
      "IGST_RATE": "",
      "IGST_AMOUNT": "",
      "CGST_RATE": "",
      "CGST_AMOUNT": ""
    },
    "funded_flag": "N",
    "charge_Rate": 0,
    "charge_Id": "500028",
    "charge_Amount": 2732.00
  },
]

key: ML-50479
summary: Application Form change basis CGFMU charge collection
description: *User Role* : IRO

*Device Compatibility* : Web / Mobile

*Stage:* Document Generation

*Sub-stage :* Document Generation Pending

*Applicable BU*: Rural MEL, MEL Repeat, MEL Plus

*Process Flow*:

# Below Part-payment charges in *Most Important Terms and Charges* section of Application Form, “Annual Guarantee Fee”(To be kept configurable) charge to be Added and value to be displayed as per logic mentioned below: 
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Loan
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
#* Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
#* Value stamped in New AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked and AGF/New AGF stamped in Base Loan
# 
*Reference UI:*

!image-20240814-211631.png|width=1098,height=301,alt="image-20240814-211631.png"!

# In Annexure A of KFS Document in Application Form, below PMSBY insurance premium entry, “Annual Guarantee Fee” (To be kept configurable) charge to be added and value to be displayed as per logic mentioned in point 1

!image-20240814-212919.png|width=718,height=470,alt="image-20240814-212919.png"!
acceptance: Given that Application Form is generated for MEL, MEL Plus or MEL Repeat Loans then:

# Below Part-payment charges in *Most Important Terms and Charges* section of Application Form, “Annual Guarantee Fee” charge to be Added and value to be displayed as per logic mentioned below: 
## Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Loan
## Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
## Value stamped in AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
## Value stamped in New AGF Field of Loan Asset Object to be displayed in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked and AGF/New AGF stamped in Base Loan

*Reference UI:*

!image-20240814-211631.png|width=1098,height=301,alt="image-20240814-211631.png"!

# In Annexure A of KFS Document in Application Form, below PMSBY insurance premium entry, “Annual Guarantee Fee” charge to be added and value to be displayed as per logic mentioned in point 1
!image-20240814-212919.png|width=718,height=470,alt="image-20240814-212919.png"!

key: ML-50478
summary: APR Calculation logic change basis CGFMU charge collection
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Document Generation

*Sub-stage :* Document Generation Pending

*Proposed:*

The APR Calculation to be done basis the calculator attached. Below field to be considered as part of APR calculation in other charges in addition to current charges as per logic mentioned below: 

* Value stamped in AGF Field of Loan Asset Object to be considered in case of MEL Loan
* Value stamped in AGF Field of Loan Asset Object to be considered in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
* Value stamped in AGF Field of Loan Asset Object to be considered in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
* Value stamped in New AGF Field of Loan Asset Object to be considered in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked

Note: 

For MEL Repeat and MEL Plus Loans if New AGF is present in Loan Asset Object then New AGF to be considered for APR calculation and if not AGF to be considered for calculation. 
acceptance: APR Calculation to be done basis the calculator attached. Below field to be considered as part of APR calculation in other charges in addition to current charges as per logic mentioned below: 

* Value stamped in AGF Field of Loan Asset Object to be considered in case of MEL Loan
* Value stamped in AGF Field of Loan Asset Object to be considered in case of MEL Repeat or Plus Loan with Base Loan Live Loan Flag as Unticked
* Value stamped in AGF Field of Loan Asset Object to be considered in case of MEL Repeat or Plus Loan with Base Loan without AGF stamping
* Value stamped in New AGF Field of Loan Asset Object to be considered in case of MEL Repeat or MEL Plus Loan with Base Loan Live Loan Flag as Ticked

key: ML-50469
summary: Emorphis API request change for Sanction Letter Document basis CGFMU charge collection
description: *Applicable BU:* Rural MEL, Rural MEL Plus, Rural MEL Repeat

*Device Compatibility* : Web / Mobile

*Integration Consideration:* Emorphis API

*Process Flow*:

annualGuaranteeFee tag to be created and passed in loanAsset array of Emorphis API request for Sanction Letter Document as per below logic:

||*Loan Type*||*Field Mapping*||
|MEL|AGF field in Loan Asset Object|
|MEL Repeat|AGF/New AGF Field stamped in Loan Asset Object|
|MEL Plus|AGF/New AGF Field stamped in Loan Asset Object|

Note: annualGuaranteeFee tag to be created and passsed in loanAsset array of emorphis API request in sanction letter for all MEL & PL loans, For PL loans the tag will be blank and for MEL Loans the value will be passed as per above logic
acceptance: Given that Emorphis API request is triggered for Sanction Letter Document then annualGuaranteeFee tag to be created and passed in loanAsset array as per below logic:

||*Loan Type*||*Field Mapping*||
|MEL|AGF field in Loan Asset Object|
|MEL Repeat|AGF/New AGF Field stamped in Loan Asset Object|
|MEL Plus|AGF/New AGF Field stamped in Loan Asset Object|

Note: annualGuaranteeFee tag to be created and passsed in loanAsset array of emorphis API request in sanction letter for all MEL & PL loans, For PL loans the tag will be blank and for MEL Loans the value will be passed as per above logic

key: ML-50468
summary: CGFMU Master creation
description: *AGF Master*:

||*Scheme*||*Loan Tenure*||*AGF %*||*AGF Enabled*||
|Scheme X|0 - 12 months|1%|Yes/No|
|Scheme X|12- 24 months|1.67%|Yes/No|
|Scheme X|24-36 months|2.27%|Yes/No|
|Scheme X|36-48 months|2.72%|Yes/No|

Loan Tenure range value & AGF % maintained against each scheme in AGF Master to be kept configurable 

*Note*:

# AGF build to be enabled if *AGF Enabled* field value against particular scheme entry is Yes and build to be in Mute if the value is No
# New field AGF Eligible loan amount to be created. CGFMU build to be kept configurable basis value maintained in this field

Eg: If value maintained in AGF Eligible loan amount is 2 lakhs then the build will be applicable for loan amount upto 2 Lakhs
acceptance: *AGF Master*:

AGF Master to be created as per below:

||*Scheme*||*Loan Tenure*||*AGF %*||*AGF Enabled*||
|Scheme X|0 - 12 months|1%|Yes/No|
|Scheme X|12- 24 months|1.67%|Yes/No|
|Scheme X|24-36 months|2.27%|Yes/No|
|Scheme X|36-48 months|2.72%|Yes/No|

Loan Tenure range value & AGF % maintained against each scheme in AGF Master to be kept configurable 

*Note*:

# AGF build to be enabled if *AGF Enabled* field value against particular scheme entry is Yes and build to be in Mute if the value is No
# New field AGF Eligible loan amount to be created. CGFMU build to be kept configurable basis value maintained in this field

Eg: If value maintained in AGF Eligible loan amount is 2 lakhs then the build will be applicable for loan amount upto 2 Lakhs

key: ML-50462
summary: CGFMU Field stamping logic for MEL Plus & Repeat LANs with Active base loan with CGFMU charge
description: *Applicable BU:* Rural MEL Plus, MEL Repeat

*Device Compatibility* : Web / Mobile

*Process Flow*:

*MEL Repeat Loan/MEL Plus IRO Assisted Loan with CGFMU charged in base loan and Live Loan Flag true in base loan*

When Rural MEL Repeat Loan/MEL Plus IRO Assisted Loan is punched upon click of Next button in Sanction-Insurance Pending stage, if AGF/New AGF  is stamped on base loan then below fields to be stamped in Loan Asset Object:

# *Base loan completed tenure*= Number of Months from Base Loan Created Date to today
Example : If Base loan was created on 14th Aug 2023 then Base loan completed tenor on 9th Sep 2024 will be 13 months (Rounded off to next month)
# *Base loan balance tenure*= Tenure - Base loan completed tenure
# *AGF* = AGF% in master as per tenure selected * MEL Repeat Loan Amount 
# *Pro-rata AGF* = AGF % as per Base loan balance tenure * MEL Base Loan Amount 
# *New AGF* = AGF - Pro-rata AGF
# New AGF charge to be deducted from Net Disbursal Amount field in Loan Asset Object and accordingly be passed in FinnOne submit API

netDisbursalAmount = loanAmount - (stampDutyAmount + igstAmount + processingFeeAmount + premiumAmount + foreclosureAmount + pos + New AGF)


# *Example*:
1^st^ cycle loan amount 1.5 lacs booked for 36 months;
AGF – 2.27% of 1,50,000 = INR *3405*
*Customer comes for MEL Repeat loan of INR 2,00,000 for 48 months < 12 months*
Base loan tenor – 36 months; balance tenor – 24 months
AGF – 2.72% of 2,00,000 = INR 5440
Pro-rata AGF = 1.67% for 24 months = 1.67% of 1,50,000 = 2505
New AGF = 5440– 2505= INR *2935*
*Customer comes for MEL repeat loan of INR 2,00,000 for 48 months < 24 months*
Base loan tenor – 36 months; balance tenor – 12 months
AGF – 2.72% of 2,00,000 = INR 5440
Pro-rata AGF = 1 % upto 12 months = 1 % of INR 150000 = 1500
New AGF = 5440 – 1500 = INR *3940*


*MEL Plus TC Loan with CGFMU charged in base loan and Live Loan Flag true in base loan*

When Rural MEL Plus Loan is punched upon click of PROCEED button in Insurance detail section of Confirm Details stepper, if AGF/New AGF is stamped on base loan then below fields to be stamped in Loan Asset Object:

# *Base loan completed tenure*= Number of Months from Base Loan Created Date to today
Example : If Base loan was created on 14th Aug 2023 then Base loan completed tenor on 9th Sep 2024 will be 13 months (Rounded off to next month)
# *Base loan balance tenure*= Tenure - Base loan completed tenure
# *AGF* = AGF% in master as per tenure selected * MEL Repeat Loan Amount 
# *Pro-rata AGF* = AGF % as per Base loan balance tenure * MEL Base Loan Amount 
# *New AGF* = AGF - Pro-rata AGF
# New AGF charge to be deducted from Net Disbursal Amount field in Loan Asset Object and accordingly be passed in FinnOne submit API

netDisbursalAmount = loanAmount - (stampDutyAmount + igstAmount + processingFeeAmount + premiumAmount + foreclosureAmount + pos + New AGF)
acceptance: # Given that Rural MEL Repeat Loan/MEL Plus IRO Assisted Loan is punched upon click of Next button in Sanction-Insurance Pending stage, if AGF/New AGF is stamped on base loan with live loan flag true then below fields to be stamped in Loan Asset Object:
## *Base loan completed tenure*= Number of Months from Base Loan Created Date to today
Example : If Base loan was created on 14th Aug 2023 then Base loan completed tenor on 9th Sep 2024 will be 13 months (Rounded off to next month)
## *Base loan balance tenure*= Tenure - Base loan completed tenure
## *AGF* = AGF% in master as per tenure selected * MEL Repeat Loan Amount
## *Pro-rata AGF* = AGF % as per Base loan balance tenure * MEL Base Loan Amount
## *New AGF* = AGF - Pro-rata AGF
## New AGF charge to be deducted from Net Disbursal Amount field in Loan Asset Object and accordingly be passed in FinnOne submit API
# *netDisbursalAmount* = loanAmount - (stampDutyAmount + igstAmount + processingFeeAmount + premiumAmount + foreclosureAmount + pos + New AGF)
# Given that Rural MEL Repeat Loan/MEL Plus IRO Assisted Loan is punched upon click of PROCEED button in Insurance detail section of Confirm Details stepper, if AGF/New AGF is stamped on base loan with live loan flag true then below fields to be stamped in Loan Asset Object:
## *Base loan completed tenure*= Number of Months from Base Loan Created Date to today
Example : If Base loan was created on 14th Aug 2023 then Base loan completed tenor on 9th Sep 2024 will be 13 months (Rounded off to next month)
## *Base loan balance tenure*= Tenure - Base loan completed tenure
## *AGF* = AGF% in master as per tenure selected * MEL Repeat Loan Amount
## *Pro-rata AGF* = AGF % as per Base loan balance tenure * MEL Base Loan Amount
## *New AGF* = AGF - Pro-rata AGF
## New AGF charge to be deducted from Net Disbursal Amount field in Loan Asset Object and accordingly be passed in FinnOne submit API
# *netDisbursalAmount* = loanAmount - (stampDutyAmount + igstAmount + processingFeeAmount + premiumAmount + foreclosureAmount + pos + New AGF)

key: ML-50458
summary: CGFMU Field stamping logic for MEL Plus & Repeat LANs with base loan without CGFMU charge or foreclosed base loan
description: *Applicable BU:* Rural MEL Plus, MEL Repeat

*Device Compatibility* : Web / Mobile

*Process Flow*:

*MEL Repeat Loan*

*Scenario 1:* MEL Repeat Loan, MEL Plus IRO Journey with CGFMU not charged in base loan

# When Rural MEL Repeat Loan/MEL Plus IRO Journey LAN is punched, upon click of Next button in Sanction-Insurance Pending stage, system to check if AGF field is blank on base loan and if blank then basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] system to stamp AGF % and AGF fields in Loan Asset Object basis which tenure range in the master that the tenure selected by User falls within
# AGF % & AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)

*Scenario 2*: MEL Repeat Loan, MEL Plus IRO Journey with Closed Base Loan

# When Rural MEL Repeat Loan is punched upon click of Next button in Sanction-Insurance Pending stage, system to check if Live Loan flag is unticked for base loan and if unticked then basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] system to stamp AGF % and AGF fields in Loan Asset Object basis which tenure range in the master that the tenure selected by User falls within
# AGF % & AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)

*Note*: The same flow to proceed if Base Loan is closed and AGF was not stamped on base loan as well 

*MEL Plus Loan*

*Scenario 1*: MEL Plus TC Loan with CGFMU not charged in base loan

# When Rural MEL Plus TC Loan is punched upon click of PROCEED button in Insurance detail section of Confirm Details stepper, system to check if AGF % field is blank on base loan and if blank then basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] system to stamp AGF % and AGF fields in Loan Asset Object basis which tenure range in the master that the tenure selected by User falls within
# AGF % & AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)

*Scenario 2*: MEL Plus TC Loan with Closed Base Loan

# When Rural MEL Plus TC Loan is punched upon click of PROCEED button in Insurance detail section of Confirm Details stepper, system to check if Live Loan flag is unticked for base loan and if unticked then basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] system to stamp AGF % and AGF fields in Loan Asset Object basis which tenure range in the master that the tenure selected by User falls within
# AGF % & AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)

*Note*: The same flow to proceed if Base Loan is closed and AGF was stamped on base loan as well 
acceptance: # Given that Rural MEL Repeat Loan/MEL Plus IRO Journey is punched upon click of Next button in Sanction-Insurance Pending stage, system to check if AGF % field is blank on base loan and if blank then basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] system to stamp AGF % and AGF fields in Loan Asset Object basis which tenure range in the master that the tenure selected by User falls within
## AGF % & AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)
# Given that Rural MEL Repeat Loan/MEL Plus IRO Journey is punched upon click of Next button in Sanction-Insurance Pending stage, system to check if Live Loan flag is unticked for base loan and if unticked then basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] system to stamp AGF % and AGF fields in Loan Asset Object basis which tenure range in the master that the tenure selected by User falls within
## AGF % & AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)

*Note*: The same flow to proceed if Base Loan is closed and AGF was stamped on base loan as well 

# Given that Rural MEL Plus TC Journey Loan is punched upon click of PROCEED button in Insurance detail section of Confirm Details stepper, system to check if AGF % field is blank on base loan and if blank then basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] system to stamp AGF % and AGF fields in Loan Asset Object basis which tenure range in the master that the tenure selected by User falls within
## AGF % & AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)
# Given that Rural MEL Plus TC Journey Loan is punched upon click of PROCEED button in Insurance detail section of Confirm Details stepper, system to check if Live Loan flag is unticked for base loan and if unticked then basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] system to stamp AGF % and AGF fields in Loan Asset Object basis which tenure range in the master that the tenure selected by User falls within
## AGF % & AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)

*Note*: The same flow to proceed if Base Loan is closed and AGF was stamped on base loan as well 

key: ML-50431
summary: CGFMU Field stamping logic for MEL 
description: *Applicable BU:* Rural MEL

*Stage*: Sanction

*Sub-stage*: Insurance Pending

*Device Compatibility* : Web / Mobile

*Process Flow*:

# When Rural MEL Loan is punched upon click of Next button in Sanction-Insurance Pending stage, system to check the AGF Master basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] and stamp AGF in Loan Asset Object basis below logic 

AGF= AGF% against which tenure range the Loan Tenure selected falls into * Loan Amount

Eg: If User selects 8 Months then AGF% to be considered as 1%, If User selects 24 months then AGF% to be considered as 1.67%
# AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)
# AGF charge to be deducted from Net Disbursal Amount field in Loan Asset Object and accordingly be passed in FinnOne submit API

netDisbursalAmount = loanAmount - (stampDutyAmount + igstAmount + processingFeeAmount + premiumAmount + foreclosureAmount + pos + AGF)
acceptance: # Given that Rural MEL Loan is punched upon click of Next button in Sanction-Insurance Pending stage, system to check the AGF Master basis the scheme and tenure combination mentioned in [https://fincap.atlassian.net/browse/ML-50468|https://fincap.atlassian.net/browse/ML-50468|smart-link] and stamp AGF in Loan Asset Object basis below logic :

AGF= AGF% against which tenure range the Loan Tenure selected falls into * Loan Amount
Eg: If User selects 8 Months then AGF% to be considered as 1%, If User selects 24 months then AGF% to be considered as 1.67%
# AGF field value stamping logic should be re-run every time User clicks on Next in Sanction Insurance Pending stage (Including Retrigger scenario and change of Loan Amount or tenure)
# AGF charge to be deducted from Net Disbursal Amount field in Loan Asset Object and accordingly be passed in FinnOne submit API

netDisbursalAmount = loanAmount - (stampDutyAmount + igstAmount + processingFeeAmount + premiumAmount + foreclosureAmount + pos + AGF)

key: ML-50415
summary: Validation on underwriting level and user profile respectively
description: *Device Compatibility* : Web / Mobile

*Stage:* Data Verification / Underwriting

*Sub-stage :* Data Verification Pending / Underwriting Pending

*Proposed:*

+_Profile level validation -_+

* When a user attempts to take ownership of a LAN which is currently in “Data Verification” or “Underwriting” stage to execute any data verification or underwriting related activity, then SFDC should be able to validate the profile of that particular user
* If the profile of that particular user is not an underwriting profile, then SFDC should show an error toast message to the user stating, “User’s profile is not eligible to perform this activity / stage” (message should be kept configurable)

+_User level validation -_+

* When a user attempts to take ownership of a LAN which is currently in “Data Verification” or “Underwriting” stage to execute any data verification or underwriting related activity, then SFDC should be able to validate if any underwriting level is mapped to that user for the particular BU or not
* If the user does not have any underwriting level mapped for the particular BU, then SFDC should show an error toast message to the user stating, “Underwriting Level (L1 - L5) is not mapped for the <BU Name>” (message should be kept configurable)
* _For example - If an user attempts to process the data verification or underwriting activity for MEL, then SFDC should validate the underwriting level mapped to that user for MEL. If the user does not have any underwriting level mapped for MEL, then SFDC should show above mentioned error toast message to the user. If the user has an underwriting level mapped for MEL, then SFDC should allow the user to proceed with processing the said case_
acceptance: # Given that mentioned changes are done, when a user attempts to take ownership of a LAN which is currently in “Data Verification” or “Underwriting” stage to execute any data verification or underwriting related activity, then SFDC should be able to validate the profile of that particular user
# Given that mentioned changes are done, when SFDC validates the user profile and if the profile of that particular user is not an underwriting profile, then SFDC should show an error toast message to the user stating, “User’s profile is not eligible to perform this activity / stage” (message should be kept configurable)
# Given that mentioned changes are done, when a user attempts to take ownership of a LAN which is currently in “Data Verification” or “Underwriting” stage to execute any data verification or underwriting related activity, then SFDC should be able to validate if any underwriting level for the particular BU is mapped to that user or not
# Given that mentioned changes are done, when SFDC validates the underwriting level of the user for the particular BU and if the user does not have any underwriting level mapped for the particular BU, then SFDC should show an error toast message to the user stating, “Underwriting Level (L1 - L5) is not mapped for the <BU Name>” (message should be kept configurable

key: ML-50414
summary: Logic change for access given to underwriting users other than BCM users
description: *User Role* : Underwriter user

*Device Compatibility* : Web / Mobile

*Stage:* Data Verification / Underwriting / Verification

*Sub-stage :* Data Verification Pending / Underwriting Pending | Hold | Forward | Recommended | Reject / Verification Pending

*Current:*

As per current process, only BCM users have the access to take ownership of LANs for doing data verification, CPV case verification and other related underwriting activities.

*Proposed:*

* For all underwriting user roles, SFDC should be able to check if an underwriting level (L1, L2, L3, L4 and L5) is mapped to that particular user role or not
* If in the underwriting user role, an underwriting level (L1, L2, L3, L4 and L5) is mapped, then SFDC should allow that particular user to take access of LANs for doing data verification, CPV case verification and other related underwriting activities

*Sample table for access:*

|*Profile*|*Underwriting Level*|*DV Access*|*CPV Access*|*Any other UW Activity*|*Reason for Access*|
|Branch Credit Manager / Cluster Credit Manager|L1|Yes|Yes|Yes|Access Allowed|
|Branch Credit Manager / Cluster Credit Manager|L2/L3/L4/L5|Yes|Yes|Yes|Access Allowed|
|Other than Branch Credit Manager / Cluster Credit Manager|L1|No|No|No|Profile is not UW|
|Branch Credit Manager / Cluster Credit Manager|Blank|No|No|No|UW level is blank|

*Note:*

Underwriting user role refers to - Branch Credit Manager (BCM) and Cluster Credit Manager (CCM)

The applicability of current logic should be checked and should be updated as per the proposed development wherever applicable in the underwriting stage.
acceptance: # Given that mentioned changes are done, for all underwriting user roles, SFDC should be able to check if an underwriting level (L1, L2, L3, L4 and L5) is mapped to that particular user role or not
# Given that mentioned changes are done, when in the underwriting user role, an underwriting level (L1, L2, L3, L4 and L5) is mapped, then SFDC should allow that particular user to take access of LANs for doing data verification, CPV case verification and other related underwriting activities
# Given that mentioned changes are done, the proposed changes should be made applicable across the underwriting stage

key: ML-50413
summary: Creation of two new underwriting roles
description: *Device Compatibility*: Web / Mobile

*Applicable BU:* All BU 

*Proposed:* 

Two new underwriting user roles namely, Credit Analyst and Credit Specialist to be created in SFDC.

The page layout for these user levels should have fields as mentioned in [[ML-20741] 1. Creation of Fields at User Level and Reports - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-20741] such that users will have the option to fix underwriting level, lending limit and other necessary details pertaining to underwriting users.

*Note:* 

* The user level page layout field logics should work as per the details mentioned in [[ML-20741] 1. Creation of Fields at User Level and Reports - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-20741]
* Profile level access to be provided for the above-mentioned user roles as per “Other Credit” users
acceptance: # Given that mentioned changes are done, two new underwriting user roles namely, Credit Analyst and Credit Specialist to be created in SFDC
# Given that mentioned changes are done, the user level page layout should have the fields mentioned in [[ML-20741] 1. Creation of Fields at User Level and Reports - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-20741]
# Given that mentioned changes are done, at user level page layout field logics should work as per the details mentioned in [[ML-20741] 1. Creation of Fields at User Level and Reports - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-20741] 

key: ML-50311
summary: Creation of Income Declaration Field at Consent Screen when user selects Form 60 in place of PAN - Handling for base loans of HL / LAP
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Applicant Detail Entry

*Sub-stage :* Applicant Detail Entry Pending

*Applicable BU:* Rural HL, Rural LAP, Gold Loan

*Proposed:*

At consent screen, when user selects “Form 60” radio button in place of PAN, then a field should be available to the user with name “Declare Total Annual Income”.

This field should be available to the user below the “Date of Birth” field currently available on the UI.

!image-20240429-101347.png|width=1457,height=626!

The field should accept numerical values only.

Post ticking the declaration check box on UI, then “Search” button is visible on the UI.

A validation to be built on this “Search” button, such that when the user clicks on this button, before initiating the KYC check process, SFDC should be able to validate that the value entered by the user against the field named “Declare Total Annual Income (Excluding Agri Income)” is not more that 2,50,000 (to be kept configurable).

In case the user enters a value more than 2,50,000, then basis the above-mentioned validation, SFDC should not initiate the KYC check process and show an error toast message to the user.

The error toast message should read “PAN is mandatory when Total Annual Income is more than Rs 2,50,000” (the message content to be kept configurable).

Post showing the said error toast message, user should be able to proceed with the journey by either selecting PAN or Form 60 radio button.

In case user selects Form 60 radio button again then process to be followed as mentioned above and in case user selects PAN radio button then as-is process to be followed.

*N.B.* The value of this field should also be stamped at back-end within the applicant object.
acceptance: # Given that mentioned changes are done, when the user selects Form 60 radio button, then user should be show the field named “Declare Total Annual Income” on the UI below the existing “Date of Birth” field
# Given that mentioned changes are done, when the user enters the value in the field named “Declare Total Annual Income”, then SFDC should only accept numerical value against this field
# Given that mentioned changes are done, when user clicks on “Search” button from the UI, then SFDC should be able to validate the amount entered by the user against the field named “Declared Total Income“Declare Total Annual Income (Excluding Agri Income)”” is not more that 2,50,000
# Given that mentioned changes are done, when user enters a value more than 2,50,000 against the field named “Declared Total Income”, then SFDC should show an error toast message stating “PAN is mandatory when Total Annual Income is more than Rs 2,50,000”
# Given that mentioned changes are done, when SFDC has showed the error toast message, then user should be able to proceed with the journey by either selecting PAN or Form 60 radio button as described in the description
# Given that mentioned changes are done, the validation value of 2,50,000 and error toast message are kept configurable such that same can be changed without any technical intervention

key: ML-50303
summary: Allied Agriculture Value for Re-triggered scenarios
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Loan Detailed Entry

*Sub-stage :* Loan Detailed Entry Pending

*Current:*

When a loan is re-triggered from any stage and lands on “Applicant Detailed Entry” stage, users are able to select the “Purpose of Loan” as “Allied Agriculture” even for cases where loan amount is more than Rs 2 lakhs.

*Proposed:*

When a loan is re-triggered from any stage and lands on “Applicant Detailed Entry” stage, users should not be able to view or select the option of “Allied Agriculture” against the “Purpose of Loan” field for cases where loan amount is more than Rs 2 lakhs.
acceptance: # Given that mentioned changes are done, when a case is re-triggered and lands on “Loan Detailed Entry” stage, then for cases where loan amount is more than Rs 2 lakhs, users should not get the option to select “Allied Agriculture” as an option against the field named “Purpose of Loan”

key: ML-50235
summary: Changes in "fCUAnalysis" array of the existing Perfios Inbound Response
description: *User Role* : IRO / MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*SVC Name:* INBOUND_PERFIOS_BANKING

*Proposed:*

The existing structure of tags available within the array named “fCUAnalysis” received in the Perfios Inbound API (SVC Name - INBOUND_PERFIOS_BANKING) is required to be revised.

Sample revised structure for tags within the array named “fCUAnalysis” is attached below:

[^FCU v3.0 (3a0a6a0d-67d3-4539-8ba2-b45e8914bbe7).txt]

Revised structure of Perfios Inbound Response API (SVC Name - INBOUND_PERFIOS_BANKING) is attached below:

[^perfioslateststructure.txt]

SFDC should be able to consume the revised structure of the array named “fCUAnalysis” received in Perfios Inbound Response API (SVC Name - INBOUND_PERFIOS_BANKING) and mark the said API as “success” with the revised tags and their values.

*Note:* The revised tag structure in the array named “fCUAnalysis” received in Perfios Inbound Response API (SVC Name - INBOUND_PERFIOS_BANKING) should not impact the existing stamping logics as mentioned in [https://fincap.atlassian.net/browse/ML-26000|https://fincap.atlassian.net/browse/ML-26000|smart-link] 
acceptance: # Given that mentioned changes are done, the tag structure received within the array named “fCUAnalysis” in Perfios Inbound Response API (SVC Name - INBOUND_PERFIOS_BANKING) is revised as per the details mentioned in the description
# Given that mentioned changes are done, when SFDC receives the Perfios Inbound Response API (SVC Name - INBOUND_PERFIOS_BANKING), then it should be able to consume the revised tag structure received within the array named “fCUAnalysis” in the said API
# Given that mentioned changes are done, when SFDC receives the Perfios Inbound Response API (SVC Name - INBOUND_PERFIOS_BANKING) with revised tag structure within the array named “fCUAnalysis”, then same should not impact the existing stamping logics mentioned in [https://fincap.atlassian.net/browse/ML-26000|https://fincap.atlassian.net/browse/ML-26000|smart-link] 

key: ML-49869
summary: CRN Data Updation
description: nan
acceptance: nan

key: ML-48923
summary: PSL Category and Subcategory values to be blank when PSL Flag is "NO"
description: Current:

PSL Category and PSL Subcategory tags are passed to FinnOne for all cases. 



Proposed:

PSL Category and Subcategory should be passsed as “null” values to FinnOne wherever when PSL Flag is selected as "NO" by user on SFDC front end.

PSL category/sub-category values to be stamped as is on SFDC.

 Change is expected only in FinnOne submit API request.  
acceptance: PSL Category/sub-category tags should be passed with “null” values when PSL Flag is “NO”.

If PSL Flag is “YES”, PSL category and Sub-category values to be passed as per current PSL Master

key: ML-48742
summary: CJ Journey handling for Dual disbursement
description: *User Role* : IRO

*Applicable BU:* Rural MEL Plus-CJ

*Device Compatibility* : Web / Mobile

*Process Flow*:

# When customer clicks on CJ link when creating a Top Up Loan, system should trigger Loan Dedupe Details API as per [https://fincap.atlassian.net/browse/ML-47813|https://fincap.atlassian.net/browse/ML-47813|smart-link] and after the API gets called, validations to be run as per [https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link]  
# If the validation in [https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link] is not satisfied then system to display error screen to customer with message “Sorry we could not process your Loan Application. Please reach out to your Relationship Officer.”
# In case of a technical or functional error, the following error message should be displayed on the screen-
#* “Sorry we could not process your Loan Application. Please reach out to your Relationship Officer.”
#* Please note, this error message on the error screen should be configurable.
acceptance: # Given that customer clicks on CJ Link when creating a Top Up Loan, system should trigger Loan Dedupe Details API and run system validations basis loan status
# Error screen to be shown to the customer with the following error message ( configurable ) in case of a technical or functional failure-
#* “Sorry we could not process your Loan Application. Please reach out to your Relationship Officer.”

key: ML-48544
summary: Base loan identification old code removal-Technical
description: Remove the logic written in [https://fincap.atlassian.net/browse/ML-21744|https://fincap.atlassian.net/browse/ML-21744|smart-link] where the base loan stamping was happening basis on the latest disbursed loan in the SFDC for that particular CRN.

Another logic handled in [https://fincap.atlassian.net/browse/ML-21744|https://fincap.atlassian.net/browse/ML-21744|smart-link] where the associated offer will not be inserted if the load file has blank CRN for any offer will not be removed.

IFB_All_CopyDataFromBaseLoan and IFB_ALl_createLoanApplication_cc classes will be affected.
acceptance: nan

key: ML-48492
summary: PL-System Validation for creating Top Up Loan basis loanStatus
description: *User Role* : IRO

*Applicable BU:* Rural PL Repeat

*Device Compatibility* : Web / Mobile

*Process Flow*:

#   When User selects PL Repeat drop down in the scheme and clicks on Create New loan application and Loan Dedupe details API has responded:
## System to check if there is more than 1 array where productFlag is RPL and loanStatus is returned as “A”
## If more than 1 array contains loanStatus tag value as A then system to throw error toast message to User: “More than 1 Active Loan present for Customer: loanId, loanId. Customer cannot have more than 1 Active loan to process Top Up Loan”
Note: 
### All Active FinnOne IDs should be displayed from the respsective arrays which satisfy condition 1 & 2 seperated by a comma
###  System should restrict User from creating a new loan application in this scenario
acceptance: # Given that Loan Dedupe Details API has responded, system to check if scheme selected is PL Repeat then in response in any of the arrays if productFlag is RPL:
#* System to check if there is more than 1 array where productFlag is RPL and loanStatus is returned as “A”
#* If more than 1 array contains loanStatus tag value as A then system to throw error toast message to User: “More than 1 Active Loan present for Customer: tuAgreementID, tuAgreementID. Customer cannot have more than 1 Active loan to process Top Up Loan”
#*Note*: All SFDC IDs should be displayed from the respsective arrays which satisfy condition 1 & 2 seperated by a comma


key: ML-48491
summary: PL-Base Loan Application stamping basis Loan Dedupe Details API response
description: *User Role* : IRO

*Applicable BU:* Rural PL Repeat

*Device Compatibility* : Web / Mobile

*Process Flow*:

*Scenario 1*: After Loan Details API has responded successfully, if the loan application satisfies condition in [https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link] and the scheme selected is PL Repeat then in the returned response for the arrays in which productFlag is RPL, if there is 1 array with loanStatus tag value returned as “A” then: 

# The tuAgreementID value returned in the array with the loanStatus as A should be stamped as Base Loan Application field on SFDC
# The loanId value returned in the array returned in the array with the loanStatus as A should be stamped in the Base loan Application Finnone ID field on SFDC
# TopUpFlag should be passed as Y and TopUpAgreementID tag will be the value stamped in Base loan Application Finnone ID field in the FinnOne submit API request

*Scenario 2*: After Loan Details API has responded successfully, if the loan application satisfies condition in [https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link] and the scheme selected is PL Repeat then in the returned response for the arrays in which productFlag is RPL, if there is no array with loanStatus tag value returned as “A” then: 

# The tuAgreementID value returned in the array which has the recent “disbursalDate” should be stamped as Base Loan Application field on SFDC
# The loanId value returned in the array which has the recent “disbursalDate” should be stamped in the Base loan Application Finnone ID field on SFDC
# TopUpFlag tag should be passed as N and TopUpAgreementID tag will be the value stamped in Base loan Application Finnone ID field in the FinnOne submit API request

*Note*:

# System to check if loanStatus tag value is X for any of the arrays returned in response and if returned then the array should not be considered as part of validation or base loan identification logic (X refers to loan status cancelled on FinnOne) [~accountid:60a75ab82009f10068dc8e18] [~accountid:626240696cb53d006a6ab5a4]
acceptance: # Given that Loan Details API has responded successfully, if the loan application satisfies condition in [https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link] and the scheme selected is PL Repeat then in the returned response for the arrays in which productFlag is RPL, if there is 1 array with loanStatus tag value returned as “A” then: 
#* The tuAgreementID value returned in the array with the loanStatus as A should be stamped as Base Loan Application field on SFDC
#* The loanId value returned in the array returned in the array with the loanStatus as A should be stamped in the Base loan Application Finnone ID field on SFDC
#* TopUpFlag should be passed as Y and TopUpAgreementID tag will be the value stamped in Base loan Application Finnone ID field in the FinnOne submit API request
# Given that  Loan Details API has responded successfully, if the loan application satisfies condition in 

[https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link] and the scheme selected is PL Repeat then in the returned response for the arrays in which productFlag is RPL, if there is no array with loanStatus tag value returned as “A” then: 

* The tuAgreementID value returned in the array which has the recent “disbursalDate” should be stamped as Base Loan Application field on SFDC
* The loanId value returned in the array which has the recent “disbursalDate” should be stamped in the Base loan Application Finnone ID field on SFDC
* TopUpFlag tag should be passed as N and TopUpAgreementID tag will be the value stamped in Base loan Application Finnone ID field in the FinnOne submit API request

*Note*:

# System to check if loanStatus tag value is X for any of the arrays returned in response and if returned then the array should not be considered as part of validation or base loan identification logic (X refers to loan status cancelled on FinnOne) [~accountid:60a75ab82009f10068dc8e18] [~accountid:626240696cb53d006a6ab5a4]

key: ML-48046
summary: Sanction screen live loan validation logic change
description: *Stage*: Sanction

*Sub-Stage*: Insurance Pending

*Reference UI:*

!image-20240716-135637.png|width=839,height=383,alt="image-20240716-135637.png"!

*Process Flow*:

# The Validation built as part of [https://fincap.atlassian.net/browse/ML-9299|https://fincap.atlassian.net/browse/ML-9299|smart-link] should be removed as part of this story
# When User clicks on Next in Sanction Insurance screen, system should not hardstop the user basis current validation 
# This validation removal should be applicable to all loans created post deployment of this build
acceptance: # The Validation built as part of [https://fincap.atlassian.net/browse/ML-9299|https://fincap.atlassian.net/browse/ML-9299|smart-link] should be removed as part of this story
# Given that User clicks on Next in Sanction Insurance screen, system should not hardstop the user basis current live loan validation 
# This validation removal should be applicable to all loans created post deployment of this build

key: ML-48027
summary: LOAN DEDUPE DETAILS API failure scenario handling 
description: *User Role* : IRO

*Applicable BU:* Rural MEL Plus, Rural MEL Repeat, Rural PL Repeat

*Device Compatibility* : Web / Mobile

*Process Flow*:

# When IRO/Tele-caller user clicks on CREATE NEW APPLICATION button when creating a Top Up Loan, if Loan Dedupe Details API does not return value equal to SUCCESS in “status” tag of API response then system should throw error toast message to user “Customer DEDUPE status check failed. Please retry” (Error toast message to be kept configurable)
# User should not be allowed to create top up loan without checking customer’s previous loan details by triggering Loan Dedupe Details API successfully
# If Loan Dedupe Details API remains in progress for more than 2 minutes then SFDC should treat it as a failure and same handling as point 1 to be extended 
# When Telecaller/IRO User clicks on clicks on CREATE NEW APPLICATION button if Loan Dedupe Details API returns success response and base loan identification is successful basis Loan Dedupe Details API response then user should be allowed to create new loan application as per current flow. Data cloning for Top Up loan should happen from base loan identified through Loan Dedupe Details API response instead of current logic. 
acceptance: # Given that IRO/Tele-caller user clicks on CREATE NEW APPLICATION button when creating a Top Up Loan, if Loan Dedupe Details API does not return value equal to SUCCESS in “status” tag of API response then system should throw error toast message to user “Customer DEDUPE status check failed. Please retry” (Error toast message to be kept configurable):
## User should not be allowed to create top up loan without checking customer’s previous loan details by triggering Loan Dedupe Details API successfully
# Given that Loan Dedupe Details API remains in progress for more than 2 minutes then SFDC should treat it as a failure and same handling as point 1 to be extended 
# Given that Telecaller/IRO User clicks on clicks on CREATE NEW APPLICATION button if Loan Dedupe Details API returns success response and base loan identification is successful basis Loan Dedupe Details API response then user should be allowed to create new loan application as per current flow. 
# Given that Data cloning happens for Top Up loan, it should happen from base loan identified through Loan Dedupe Details API response instead of current logic. 

key: ML-48026
summary: MEL-Base Loan Application stamping basis Loan Dedupe Details API response
description: *User Role* : IRO

*Applicable BU:* Rural MEL Plus, Rural MEL Repeat, Rural PL Repeat

*Device Compatibility* : Web / Mobile

*Process Flow*:

*Scenario 1*: After Loan Details API has responded successfully, if the CRN does not satisfy condition in [https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link] and the scheme selected is MEL Plus or MEL Repeat then in the returned response for the arrays in which productFlag is RMEL, if there is 1 array with loanStatus tag value returned as “A” then: 

# The tuAgreementID tag value returned in the array with the loanStatus as A should be stamped as Base Loan Application field on SFDC
# The loanId tag value returned in the array with the loanStatus as A should be stamped in the Base loan Application Finnone ID field on SFDC
# TopUpFlag should be passed as Y and TopUpAgreementID tag will be the value stamped in Base loan Application Finnone ID field in the FinnOne submit API request

*Scenario 2*: After Loan Details API has responded successfully, if the CRN does not satisfy condition in [https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link] and the scheme selected is MEL Plus or MEL Repeat then in the returned response for the arrays in which productFlag is RMEL, if there is no array with loanStatus tag value returned as “A” then: 

# The tuAgreementID tag value returned in the array which has the recent “disbursalDate” should be stamped as Base Loan Application field on SFDC
# The loanId tag value returned in the array which has the recent “disbursalDate” should be stamped in the Base loan Application Finnone ID field on SFDC
# TopUpFlag tag should be passed as N and TopUpAgreementID tag will be the value stamped in Base loan Application Finnone ID field in the FinnOne submit API request



Note: 

# System to check if scheme ID is 64707 for any of the arrays returned in response and if returned then the array should not be considered as part of validation or base loan identification logic (This should be maintained in custom label and going forward if product wants to add more schemes for exclusion then the same should be possible)
# System to check if loanStatus tag value is X for any of the arrays returned in response and if returned then the array should not be considered as part of validation or base loan identification logic (X refers to loan status cancelled on FinnOne) [~accountid:60a75ab82009f10068dc8e18] [~accountid:626240696cb53d006a6ab5a4] 
acceptance: # Given that Loan Details API has responded successfully, if the loan application satisfies condition in [https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link] and the scheme selected is MEL Plus or MEL Repeat then in the returned response for the arrays in which productFlag is RMEL, if there is 1 array with loanStatus tag value returned as “A” then: 
#* The tuAgreementID value returned in the array with the loanStatus as A should be stamped as Base Loan Application field on SFDC
#* The loanId value returned in the array returned in the array with the loanStatus as A should be stamped in the Base loan Application Finnone ID field on SFDC
#* TopUpFlag should be passed as Y and TopUpAgreementID tag will be the value stamped in Base loan Application Finnone ID field in the FinnOne submit API request

  2. Given that  Loan Details API has responded successfully, if the loan application satisfies condition in [https://fincap.atlassian.net/browse/ML-48025|https://fincap.atlassian.net/browse/ML-48025|smart-link] and the scheme selected is MEL Plus or MEL Repeat then in the returned response for the arrays in which productFlag is RMEL, if there is no array with loanStatus tag value returned as “A” then: 

* The tuAgreementID value returned in the array which has the recent “disbursalDate” should be stamped as Base Loan Application field on SFDC
* The loanId value returned in the array which has the recent “disbursalDate” should be stamped in the Base loan Application Finnone ID field on SFDC
* TopUpFlag tag should be passed as N and TopUpAgreementID tag will be the value stamped in Base loan Application Finnone ID field in the FinnOne submit API request

# System to check if scheme ID is 64707 for any of the arrays returned in response and if returned then the array should not be considered as part of validation or base loan identification logic (This should be maintained in custom label and going forward if product wants to add more schemes for exclusion then the same should be possible)
# System to check if loanStatus tag value is X for any of the arrays returned in response and if returned then the array should not be considered as part of validation or base loan identification logic (X refers to loan status cancelled on FinnOne) [~accountid:60a75ab82009f10068dc8e18] [~accountid:626240696cb53d006a6ab5a4] 

key: ML-48025
summary: MEL-System Validation for creating Top Up Loan basis loanStatus
description: *User Role* : IRO

*Applicable BU:* Rural MEL Plus, Rural MEL Repeat

*Device Compatibility* : Web / Mobile

*Process Flow*:

#  When User selects MEL Plus or MEL Repeat drop down in the scheme and clicks on Create New loan application and Loan Dedupe details API has responded:
## System to check if there is more than 1 array where productFlag is RMEL and loanStatus is returned as “A”
## If more than 1 array contains loanStatus tag value as A then system to throw error toast message to User: “More than 1 Active Loan present for Customer: loanId, loanId. Customer cannot have more than 1 Active loan to process Top Up Loan”

Note:
###  All Active FinnOne IDs should be displayed from the respsective arrays which satisfy condition 1 & 2 seperated by a comma
###  System should restrict User from creating a new loan application in this scenario
acceptance: #  Given that the User selects MEL Plus or MEL Repeat drop down in the scheme and clicks on Create New loan application and Loan Dedupe details API has responded:
#* System to check if there is more than 1 array where productFlag is RMEL and loanStatus is returned as “A”
#* If more than 1 array contains loanStatus tag value as A then system to throw error toast message to User: “More than 1 Active Loan present for Customer: tuAgreementID, tuAgreementID. Customer cannot have more than 1 Active loan to process Top Up Loan”
#*Note*: 
#** All SFDC IDs should be displayed from the respsective arrays which satisfy condition 1 & 2 seperated by a comma
#**  System should restrict User from creating a new loan application in this scenario



key: ML-47813
summary: LOAN DEDUPE Details API trigger
description: *User Role* : IRO

*Applicable BU:* Rural MEL Plus, Rural MEL Repeat, Rural PL Repeat

*Device Compatibility* : Web / Mobile

*Process Flow*:

# When IRO/Tele-caller user clicks on CREATE NEW APPLICATION button when creating a Top Up Loan, system should trigger Loan Dedupe Details API as per request structure mentioned below. 
# When Loan Dedupe Details API is triggered, informatory toast message to be displayed to User, “Customer Dedupe check in Progress” (Toast message to be kept configurable)

*Tele-caller*:

!image-20240716-101008.png|width=892,height=401,alt="image-20240716-101008.png"!

*IRO*:

!image-20240716-101049.png|width=890,height=377,alt="image-20240716-101049.png"!

||*Request Tag*||*Value to be passed*||
|entityCode|SFDCCRMORG (Value to be kept configurable)|
|crnNo|Customer CRN to be passed|

Note: mobileNo,dobDol,panNo tags to be passed as null

*Request:*

{ 

"entityCode": "SFDCCRMORG, 

"crnNo": "5214147627", 

"mobileNo": null, 

"dobDol": null 

" panNo": null 

} 



*Response:*

{

"metadata": {

"status": "SUCCESS",

"message": "Dedupe details retrieved successfully",

"version": "v1",

"time": "2023-12-15T14:00:53"

},

"resource_data": [

{

"crnNo": "5214147627",

"loanId": 24963619,

"customerId": 159627201,

"applicantType": "Individual",

"amtFin": 45406,

"schemeId": 175,

"productFlag": "TW",

"schemeName": "NO INCOME PROOF PROGRAM (NIP)",

"lob": "NON-DIGITAL",

"loanStatus": "A",

“tuAgreementID”: “0605389572”,  

“disbursalDate”: "20-JUN-2020", 

"nextEmiDate": "2021-07-02",

"nextEmiDue": "1783",

"emiOverdue": "14090.53",

"principalOverdue": "9660",

"interestOverdue": "4430.53",

"futurePrincipal": "0",

"bounceOverdue": "12272",

"lpiOverdue": "7080",

"otherChargesOverdue": "28404",

"dpd": 424,

"numberMissedEmi": 8,

"customerName": "Kumar Wahane",

"productName": "TWO WHEELER LOANS",

"kycType": "NA",

"sourcePartnerCode": null,

"npaStageId": "WRITEOFF",

"rbiNpaStageId": "SUBSTANDARD",

"email": ["test1@gmail.com|mailto:"test1@gmail.com]",

"mobileNo": "9420106561",

"aadhaarReferenceNo": null,

"aadharNo": null,

"dobDoi": "1986-10-01",

"panNo": "BVNPB1111G",

"passportNo": "215590",

"voterId": null,

"drivingLicence": "mp3567",

"cKycNo": null

}

]

}
acceptance: *Process Flow*:

# Given that IRO/Tele-caller user clicks on CREATE NEW APPLICATION button when creating a Top Up Loan, system should trigger Loan Dedupe Details API as per request structure mentioned below. 
# System to check if scheme ID is 64707 for any of the arrays returned in response and if returned then the array should not be considered as part of validation or base loan identification logic (This should be maintained in custom label and going forward if product wants to add more schemes for exclusion then the same should be possible)

||*Request Tag*||*Value to be passed*||
|entityCode|SFDCCRMORG (Value to be kept configurable)|
|crnNo|Customer CRN to be passed|

Note: mobileNo,dobDol,panNo tags to be passed as null

key: ML-47121
summary: Stamping of IFSC Code and MICR Code in Perfios Banking Details Object
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Proposed:*

Two new fields named “MICR Code” and “IFSC Code” to be created in “Perfios Bank Details” object against each banking record.

The Inbound API (SVC Name - INBOUND_PERFIOS_BANKING) response received contains two tags named "ifscCode" and "micrCode" within the "accountXns" array.

+_Sample “accountXns” array received in the said response as provided below-_+

"accountXns": [{"accountNo": "31250100017386","accountType": "","ifscCode": "BARB0BGGBXX","micrCode": "",

The value received against the tag named "ifscCode" to be used for stamping against the field named “IFSC Code”. 

Similarly, the value received against the tag named "micrCode" to be used for stamping against filed named “MICR Code”.
acceptance: # Given that mentioned changes are done, two new fields named “MICR Code” and “IFSC Code” to be created in “Perfios Bank Details” object against each banking record
# Given that mentioned changes are done, when Inbound API (SVC Name - INBOUND_PERFIOS_BANKING) responds successfully, then the value received against the tag named "ifscCode" to be used for stamping against the field named “IFSC Code”
# Given that mentioned changes are done, when Inbound API (SVC Name - INBOUND_PERFIOS_BANKING) responds successfully, then the value received against the tag named "micrCode" to be used for stamping against filed named “MICR Code”

key: ML-47120
summary: Addition of New Fields related to Inbound Perfios status in Perfios Bank Details with Loan Application Report
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Report Name :* Perfios Bank Details with Loan Application

*Proposed:*

# Two new fields to be created in the report named “Perfios Bank Details with Loan Application”. After Inbound perfios has responded the below fields should be stamped in “Perfios Bank Details with Loan Application” report.

* Inbound Perfios Error Code
* Inbound Perfios reason

+_Stamping Logic for the above-mentioned fields -_+

|*Field Name*|*Stamping Logics*|
|Inbound Perfios Error Code|Value stamped against tag named "errorCode"|
|Inbound Perfios reason|Value stamped against tag named "reason"|

+_Sample Response -_+

{"RESPONSEID": "544014","ISSUCCESS": "false","ERROR": {"ERRORSYSID": null,"ERRORCODE": null,"ERRORDESC": null},"RESPONSE": {"PROCESSOR": null,"DATA": {"status": "failure","perfiosTransactionId": "RAP81716550544778","LoanNo": "9601981831","errorCode": "E_STATEMENT_POOR_QUALITY","reason": "Poor Quality: Tilted pages - Unable to recognize the description and values"}}}

# In Applicant record below fields to be stamped:

Perfios Status - Latest perfios status for last perfios attempt

Inbound Perfios Error Code - Value stamped against tag named "errorCode" for last perfios attempt

Inbound Perfios reason- Value stamped against tag named "reason" for last perfios attempt
acceptance: # Given that mentioned changes are done, two new fields named “Inbound Perfios Failure Error Code” and “Inbound Perfios Failure Reason” respectively to be created in the report named “Perfios Bank Details with Loan Application” so as to store the value received against the tags named "errorCode" and “reason” respectively when Perfios Inbound API response is received
# Given that In Applicant record below fields to be stamped after perfios attempt:

Perfios Status - Latest perfios status for last perfios attempt

Inbound Perfios Error Code - Value stamped against tag named "errorCode" for last perfios attempt

Inbound Perfios reason- Value stamped against tag named "reason" for last perfios attempt

key: ML-47119
summary: CD rule split API
description: CD rule split API to be used instead of CD rule API for Org 3.

New Mule endpoints:

UAT:

[https://apiext.uat.idfcfirstbank.com/sfdc-router/api/v1/apirouter|https://apiext.uat.idfcfirstbank.com/sfdc-router/api/v1/apirouter]

PROD:

[https://apiext.retailassets.idfcfirstbank.com/sfdc-router/api/v1/apirouter|https://apiext.retailassets.idfcfirstbank.com/sfdc-router/api/v1/apirouter]



SVC Name : CDRULE_SPLIT

Version : 1.0
acceptance: The request should be sent in the form of attachment.

key: ML-47047
summary: Removal of "Khadi and Village Industies" from PSL Subclassification Picklist for RMEL 
description: Removal of "Khadi and Village Industies" from PSL SubCategory Picklist for RMEL 
acceptance: “Khadi & Village Industies” should not be displayed in the picklist.

key: ML-46116
summary: Perfios Product type configuration change
description: Product type configuration field for below records should be updated with values mentioned below and Perfios build to be switched on: 

RMEL- hl

RPL-hl

RHL-hl

RLAP-lap

*Configuration Name :*

PERFIOS_UPLOADSTART_RMEL

PERFIOS_UPLOADSTART_RPL

PERFIOS_UPLOADSTART_RHL

PERFIOS_UPLOADSTART_RLAP
acceptance: Product type configuration field for below records should be updated with values mentioned below: 

RMEL- hl

RPL-hl

RHL-hl

RLAP-lap

key: ML-46096
summary: Handling of Failure Scenarios for MicrositeNetbankingAPI 
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Proposed:*

+_Handling for Technical Failure-_+

When MicrositeNetbankingAPI responds with value against the tag named “ISSUCCESS” as “False” or MicrositeNetbankingAPI doesnot responds within pre-defined time period of 2 minutes then same to be considered as technical failure.

In case of technical failure, customer should be shown an error toast message stating “Request cannot be completed. Please retry by clicking the “Proceed” button” (message to be kept configurable)

For technical failure, customer showed to be given three attempts to click the “Proceed” button.

If after 3rd attempt, again technical failure is received, then a generic error message should be shown to the customer stating “We cannot process your request. Please contact branch official for assistance.” (message to be kept configurable).

Post showing the error message, customer should be disallowed to proceed from that stage.

+_Handling for Functional Failure-_+

When MicrositeNetbankingAPI responds with value against the tag named “ISSUCCESS” as “True” but without the transaction call back URL, i.e., the tag named {{<transactionCompleteCallbackUrl>}} is returned as blank or is not present in the response, then same to be considered as functional failure.

In case of functional failure, SFDC should not allow customer to have any further attempts to proceed with the account aggregator process and should show a generic error message stating “We cannot process your request. Please contact branch official for assistance.” (message to be kept configurable).

Post showing the error message, customer should be disallowed to proceed from that stage.

*N.B.* In case of technical failure if customer has exhausted all attempts, then IRO user should proceed by cancelling the existing link by clicking on “Cancel Link” button and proceed by sharing a fresh link to the customer by clicking the “Send Link” button

In case of functional failure IRO user should proceed by cancelling the existing link by clicking on “Cancel Link” button and proceed by sharing a fresh link to the customer by clicking the “Send Link” button
acceptance: # Given that mentioned changes are done, when MicrositeNetbankingAPI responds with value against the tag named “ISSUCCESS” as “False” or MicrositeNetbankingAPI doesnot responds within pre-defined time period of 2 minutes, then same to be considered as technical failure
# Given that mentioned changes are done, when technical failure is encountered, then customer should be shown an error toast message stating “Request cannot be completed. Please retry by clicking the “Proceed” button” (message to be kept configurable)
# Given that mentioned changes are done, when technical failure is encountered and customer exhausts three attempts, then a generic error message should be shown to the customer stating “We cannot process your request. Please contact branch official for assistance.” (message to be kept configurable) and customer should be disallowed to proceed further
# Given that mentioned changes are done, when MicrositeNetbankingAPI responds with value against the tag named “ISSUCCESS” as “True” but without the transaction call back URL, i.e., the tag named {{<transactionCompleteCallbackUrl>}} is returned as blank or is not present in the response, then same to be considered as functional failure
# Given that mentioned changes are done, when functional failure is encountered, then SFDC should not allow customer to have any further attempts to proceed with the account aggregator process and should show a generic error message stating “We cannot process your request. Please contact branch official for assistance.” (message to be kept configurable) and disallow the customer from proceeding further

*N.B.* In case of technical failure if customer has exhausted all attempts, then IRO user should proceed by cancelling the existing link by clicking on “Cancel Link” button and proceed by sharing a fresh link to the customer by clicking the “Send Link” button

In case of functional failure IRO user should proceed by cancelling the existing link by clicking on “Cancel Link” button and proceed by sharing a fresh link to the customer by clicking the “Send Link” button

key: ML-46082
summary: Refresh Scenario Handling
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Proposed:*

+_Scenario 1 - When IRO refreshes the screen post landing on the Account Aggregator page:_+

When IRO user lands on the Account Aggregator page by clicking the “Select” button available on the Account Aggregator card from Perfios screen and refreshes the page, then user should stay on the same Account Aggregator page.

+_Scenario 2 - When IRO refreshes the screen post clicking “Send Link” button on the Account Aggregator page:_+

When IRO user refreshes the screen post clicking the “Send Link” button, then user should remain on the same screen and refreshing should not impact other functionalities.

+_Scenario 3 - When customer refreshes the screen after clicking the Account Aggregator Link:_+

When customer clicks on the Account Aggregator link, customer is redirected to the community page and BrowserStart API is triggered as per the details mentioned in [https://fincap.atlassian.net/browse/ML-33297|https://fincap.atlassian.net/browse/ML-33297|smart-link] and [https://fincap.atlassian.net/browse/ML-33296|https://fincap.atlassian.net/browse/ML-33296|smart-link] respectively. In such scenario, if customer refreshes the UI and BrowserStart API is “In Progress” status, then customer should be shown an error message stating “Request cannot be processed. Please contact branch official” (message to be kept configurable) and customer should not be able to land on the community page.

+_Scenario 4 - When customer refreshes the screen after landing on the community page:_+

When customer lands on the community page and refreshes the screen before clicking the “Proceed” button, then post refreshing customer should stay on the same page.

+_Scenario 5 - When customer refreshes the screen post clicking the “Proceed” button:_+

When customer clicks on the “Proceed” button from the community page, MicrositeNetBankingAPI is triggered [https://fincap.atlassian.net/browse/ML-33298|https://fincap.atlassian.net/browse/ML-33298|smart-link] and customer is re-directed to Anumati Page [https://fincap.atlassian.net/browse/ML-45309|https://fincap.atlassian.net/browse/ML-45309|smart-link]. In such scenario if MicrositeNetBankingAPI is “In Progress” status and customer refresh the screen, then customer should be shown an error message stating “Request cannot be processed. Please contact branch official” (message to be kept configurable) and customer should not be able to land on Anumati page.

+_Scenario 6 - When customer refreshes the screen and TransStatus API is “In Progress” status:_+

When TransStatus API is “In Progress” status and customer refresh the screen, then customer should be shown an error message stating “Request cannot be processed. Please contact branch official” (message to be kept configurable) and customer should not be able to land on community page.

+_Scenario 7 - When customer refreshes the screen and TransStatus API has responded successfully:_+

When TransStatus API [[ML-34633] S12-A: Account Aggregator - TransStatusAPI Trigger - Part 1 - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-34633] has responded successfully and customer refresh the screen, then customer should be allowed to remain on the same screen within the community page.

+_Scenario 8 - When IRO user refreshes the screen post clicking the “Check Status” button:_+

When IRO user clicks the “Check Status” button and IRO user refreshes the screen before SFDC completes the handling as per the scenarios mentioned in [[ML-39437] S15-AA Functionality to Check Inbound Response Status - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-39437], then user should be shown an error toast message stating “Process cannot be completed. Please click on “Check Status” button again and do not click on refresh before the process is completed.” (message to be kept configurable). Post showing the toast message, user should be re-directed to the Account Aggregator screen so as to continue by clicking the “Check Status” button.
acceptance: # Given that mentioned changes are done, when IRO user lands on the Account Aggregator page by clicking the “Select” button available on the Account Aggregator card from Perfios screen and refreshes the page, then user should stay on the same Account Aggregator page
# Given that mentioned changes are done, when IRO user refreshes the screen post clicking the “Send Link” button, then user should remain on the same screen and refreshing should not impact other functionalities
# Given that mentioned changes are done, when customer refreshes the UI and BrowserStart API is “In Progress” status, then customer should be shown an error message stating “Request cannot be processed. Please contact branch official” (message to be kept configurable) and customer should not be able to land on the community page
# Given that mentioned changes are done, when customer lands on the community page and refreshes the screen before clicking the “Proceed” button, then post refreshing customer should stay on the same page
# Given that mentioned changes are done, when MicrositeNetBankingAPI is “In Progress” status and customer refresh the screen, then customer should be shown an error message stating “Request cannot be processed. Please contact branch official” (message to be kept configurable) and customer should not be able to land on Anumati page
# Given that mentioned changes are done, when TransStatus API is “In Progress” status and customer refresh the screen, then customer should be shown an error message stating “Request cannot be processed. Please contact branch official” (message to be kept configurable) and customer should not be able to land on community page
# Given that mentioned changes are done, when TransStatus API [[ML-34633] S12-A: Account Aggregator - TransStatusAPI Trigger - Part 1 - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-34633] has responded successfully and customer refresh the screen, then customer should be allowed to remain on the same screen within the community page
# Given that mentioned changes are done, when IRO user clicks the “Check Status” button and IRO user refreshes the screen before SFDC completes the handling as per the scenarios mentioned in [[ML-39437] S15-AA Functionality to Check Inbound Response Status - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-39437], then user should be shown an error toast message stating “Process cannot be completed. Please click on “Check Status” button again and do not click on refresh before the process is completed.” (message to be kept configurable). Post showing the toast message, user should be re-directed to the Account Aggregator screen so as to continue by clicking the “Check Status” button.

key: ML-46074
summary: Creation of Income Declaration Field for Agriculture Income at Consent Screen when user selects Form 60
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Applicant Detail Entry

*Sub-stage :* Applicant Detail Entry Pending

*Applicable BU:* Rural MEL, Rural PL, Rural HL, Rural LAP, Gold Loan

*Proposed:*

At consent screen, when user selects “Form 60” radio button in place of PAN, then a field should be available to the user with name “Declare Total Agriculture Annual Income” along with “Declare Total Annual Income (Excluding Agri Income)”.

This field should be available to the user below the “Declare Total Annual Income” field currently available on the UI:

!image-20240429-101347.png|width=1457,height=626!

The field should accept numerical values only.

*N.B.* No validation should be applied for the value entered against the field named “Declare Total Agriculture Annual Income”. Validation should be applied only for the value entered against the field named “Declare Total Annual Income” as mentioned in [https://fincap.atlassian.net/browse/ML-41007|https://fincap.atlassian.net/browse/ML-41007|smart-link](atlassian.net).
acceptance: # Given that mentioned changes are done, when the user selects Form 60 radio button, then user should be show the field named “Declare Total Agriculture Annual Income” on the UI below the existing “Declare Total Annual Income” field
# Given that mentioned changes are done, when the user enters the value in the field named “Declare Total Agriculture Annual Income”, then SFDC should only accept numerical value against this field

key: ML-45732
summary: IFBL Flow Mandate screen validation for Disbursement Account setup
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Sanction

*Sub-stage :* Disbursement Details Pending

*Proposed:*

When a LAN where Account Aggregator process has been completed and is created in IFBL flow reaches the above-mentioned stage and sub-stage, then user is required to setup the disbursement details by either entering IFSC Code or MICR Code of the disbursement account.

A validation should be built on the “Next” button available on the UI at the above-mentioned stage and sub-stage such that SFDC is able to validate the IFSC or MICR code entered by the user in this stage and sub-stage with the ones received in the Inbound API (SVC Name - INBOUND_PERFIOS_BANKING) response.

!image-20240705-102852.png|width=1539,height=724,alt="image-20240705-102852.png"!

The IFSC and MICR code received in the Inbound API (SVC Name - INBOUND_PERFIOS_BANKING) response are stamped against the fields named “IFSC Code” and “MICR Code” respectively as mentioned in [[ML-47121] Stamping of IFSC Code and MICR Code in Perfios Banking Details Object - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-47121].

+_Logic for application of the said Validation-_+

* In the above-mentioned stage and sub-stage if the user enters IFSC code details for verification of the disbursement account, then SFDC should refer the value stamped against the field named “IFSC Code” available in Perfios Bank Details object.
** If the value entered by the user matches with the value stamped against the field named “IFSC Code”, then the user should be allowed to proceed as per process by clicking the “Next” button (as highlighted in red on above screenshot) available on the UI
** If the value entered by the user does not match with the value stamped against the field named “IFSC Code”, then upon clicking of “Next” button (as highlighted in red on above screenshot) SFDC should show an error toast message to the user stating, “Please use the same account as done in Account Aggregator process” (toast message to be kept configurable) and SFDC should not allow the user to proceed into next stage
*** Post showing the error toast message, user should be able to change the bank account & IFSC code details and proceed by again clicking the “Next” button (above-mentioned validation should be applied whenever user clicks on the “Next” button) available on UI
* In the above-mentioned stage and sub-stage if the user enters MICR code details for verification of the disbursement account, then SFDC should refer the value stamped against the field named “MICR Code” available in Perfios Bank Details object.
** If the value entered by the user matches with the value stamped against the field named “MICR Code”, then the user should be allowed to proceed as per process by clicking the “Next” button (as highlighted in red on above screenshot) available on the UI
** If the value entered by the user does not match with the value stamped against the field named “MICR Code”, then upon clicking of “Next” button (as highlighted in red on above screenshot) SFDC should show an error toast message to the user stating, “Please use the same account as done in Account Aggregator process” (toast message to be kept configurable) and SFDC should not allow the user to proceed into next stage
*** Post showing the error toast message, user should be able to change the bank account & MICR code details and proceed by again clicking the “Next” button (above-mentioned validation should be applied whenever user clicks on the “Next” button) available on UI
acceptance: # Given that mentioned changes are done, when an IFBL LAN where Account Aggregator process has been completed successfully and has reached sanction stage and disbursement details pending sub-stage, then SFDC should be able to validate the IFSC or MICR code entered by the user for the disbursement account is same as the one received against Inbound API (SVC Name - INBOUND_PERFIOS_BANKING) response
# Given that mentioned changes are done, when the user enters IFSC code details for verification of the disbursement account, then SFDC should refer the value stamped against the field named “IFSC Code” available in Perfios Bank Details object.
#* If the value entered by the user matches with the value stamped against the field named “IFSC Code”, then the user should be allowed to proceed as per process by clicking the “Next” button (as highlighted in red on above screenshot) available on the UI
#* If the value entered by the user does not match with the value stamped against the field named “IFSC Code”, then upon clicking of “Next” button (as highlighted in red on above screenshot) SFDC should show an error toast message to the user stating, “Please use the same account as done in Account Aggregator process” (toast message to be kept configurable) and SFDC should not allow the user to proceed into next stage
#** Post showing the error toast message, user should be able to change the bank account & IFSC code details and proceed by again clicking the “Next” button (above-mentioned validation should be applied whenever user clicks on the “Next” button) available on UI
# Given that mentioned changes are done, when the user enters MICR code details for verification of the disbursement account, then SFDC should refer the value stamped against the field named “MICR Code” available in Perfios Bank Details object.
#* If the value entered by the user matches with the value stamped against the field named “MICR Code”, then the user should be allowed to proceed as per process by clicking the “Next” button (as highlighted in red on above screenshot) available on the UI
#* If the value entered by the user does not match with the value stamped against the field named “MICR Code”, then upon clicking of “Next” button (as highlighted in red on above screenshot) SFDC should show an error toast message to the user stating, “Please use the same account as done in Account Aggregator process” (toast message to be kept configurable) and SFDC should not allow the user to proceed into next stage
#** Post showing the error toast message, user should be able to change the bank account & MICR code details and proceed by again clicking the “Next” button (above-mentioned validation should be applied whenever user clicks on the “Next” button) available on UI

key: ML-45316
summary: 6. Aadhar Linkage flow handling for CKYC LANs with Aadhar Identifier in CKYC Download response
description: *Stage*: Applicant Detail Entry

*Sub-Stage*: Applicant Detail Entry pending

*Applicable BU*: Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP

*Process Flow*:

# If the KYC mode for the particular applicant is CKYC successful then system should check if CKYCIDType received in CKYCIdentity array is E or I and if neither E nor I is not received then Aadhar linked with mobile field should be stamped as False and Aadhar validation will not apply to such LANs 
# If the KYC mode for the particular applicant is CKYC successful then system should check if CKYCIDType received in CKYCIdentity array is E or I and if E/I is received then check if in CKYCIDNumber tag last 4 digits of Aadhar is received, if both conditions are satisfied then in the Applicant detail entry screen system should display Enter Aadhar Number number field with Validate Aadhar button to the right of the field. 
# Validate Aadhar button should be disabled by default when Enter Aadhar number field is disabled
# After User enters 12 Digit Aadhar Number, Validate Aadhar button should get enabled
# When User enters 12 Digit Aadhar Number and clicks on Validate Aadhar button, system should first check if last 4 digits of Aadhar received in CKYCIDNumber tag matches with the last 4 digits of entered Aadhar
## If the last 4 digits do not match then system should throw error toast message “Aadhar entered is not matching with CKYC returned Aadhar Number” (Toast Message to be kept configurable)
# If Last 4 digits match then, EKYC NSDL Authentication API should be triggered and uid tag should pass Aadhar value entered by User in the field 
# When EKYC NSDL Authentication API is in progress, system should display processing screen
# Post this response and UI handling to be as per the details mentioned in [[ML-44881] 9. ADV_GENVALUE & EKYC NSDL Authentication API failure scenario handling - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44881]
acceptance: # Given that the KYC mode for the particular applicant is CKYC successful then system should check if CKYCIDType received in CKYCIdentity array is E or I and if neither E nor I is not received then Aadhar linked with mobile field should be stamped as False and Aadhar validation will not apply to such LANs 
# Given the KYC mode for the particular applicant is CKYC successful then system should check if CKYCIDType received in CKYCIdentity array is E or I and if E/I is received then check if in CKYCIDNumber tag last 4 digits of Aadhar is received, if both conditions are satisfied then in the Applicant detail entry screen system should display Enter Aadhar Number number field with Validate Aadhar button to the right of the field. 
## Validate Aadhar button should be disabled by default when Enter Aadhar number field is disabled
## After User enters 12 Digit Aadhar Number, Validate Aadhar button should get enabled
## When User enters 12 Digit Aadhar Number and clicks on Validate Aadhar button, system should first check if last 4 digits of Aadhar received in CKYCIDNumber tag matches with the last 4 digits of entered Aadhar
## If the last 4 digits do not match then system should throw error toast message “Aadhar entered is not matching with CKYC returned Aadhar Number” (Toast Message to be kept configurable)
## If Last 4 digits match then, EKYC NSDL Authentication API should be triggered and uid tag should pass Aadhar value entered by User in the field 
## When EKYC NSDL Authentication API is in progress, system should display processing screen
## When EKYC NSDL Authentication API returns error code 200 in response then Aadhar linked with mobile field should be stamped as True then success toast message to be displayed to User “Aadhar validation successful” (Message to be kept configurable) and the Enter Aadhar Number field should disappear from the UI
## When EKYC NSDL Authentication API returns error code 401 in response then Aadhar linked with mobile field should be stamped as False and error toast message to be displayed to User “Aadhar Validation Failed” (Message to be kept configurable) 
## When EKYC NSDL Authentication API returns error code other than 200 or 401 then system should display error toast message to User “Aadhar Validation failed. Please retry” (Toast message to be kept configurable) and Aadhar Linked with Mobile field should be stamped as False, Aadhar Mobile linkage technical failure field should be stamped as True
## When EKYC NSDL Authentication API returns error code 200 or 401 then Aadhar Mobile linkage techincal failure field should be stamped as False
## If User clicks on Next button in the screen without Aadhar Validation then system should throw error toast message “Please Validate Aadhar to proceed further” (Before the other validations are run on the screen)
## User should not be allowed to proceed without Aadhar Validation from Applicant Detail entry screen unless technical failure of EKYC NSDL Authentication API occurs for the 3rd time. When User clicks on Next button without Aadhar validation, system should display error toast message “Please Validate Aadhar to Proceed Further” (Message to be kept configurable)
## If EKYC NSDL Authentication API returns technical failure for the 3rd time then error toast message to be displayed to User “Aadhar Validation Failed, Please proceed” and post this user should be allowed to proceed to the next screen upon click of Next button. (Existing Validations in Next button to run post Aadhar Validation check)

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-45315
summary: 7. Aadhar Linkage flow handling for Physical KYC LANs
description: *Stage*: Applicant Detail Entry

*Sub-Stage*: Applicant Detail Entry pending

*Applicable BU*: Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Existing Flow*:

When the KYC Mode for the particular applicant fails SKYC, EKYC & CKYC and moves to Physical KYC then when the User selects Identifier as Aadhar & Proof of Identity as Aadhar then upon click of Add identifier enters Aadhar Number, system triggers ADV_Insert token API to retrieve Aadhar reference number and pop-up closes.

*Proposed Flow*: 

# When the KYC Mode for the particular applicant fails SKYC, EKYC & CKYC and moves to Physical KYC then when the User selects Identifier as Aadhar & Proof of Identity as Aadhar then upon click of Add identifier enters Aadhar Number, system should trigger ADV_Insert token API and upon success of ADV_Insert token API trigger EKYC NSDL Authentication API. 
# Aadhar linked with mobile field should be stamped as True if code value is received as 200 in resource data array of EKYC NSDL Authentication API response
# Aadhar linked with mobile field should be stamped as False if code value is received as 401 in resource data array
# “Aadhar Mobile linkage technical failure” field to be stamped as True if error code received is any value other than 200 or 401 in resource Data array 
# “Aadhar Mobile linkage technical failure” field to be stamped as False if error code received is 200 or 401 in resource data array 
# User will be displayed in progress screen when EKYC NSDL Authentication API is in progress and after the API has responded successfully, the Aadhar number pop-up will auto close. 
# If EKYC NSDL Authentication API remains in progress for more than 2 minutes, the API should be treated as failure and Aadhar linked with mobile field should be stamped as false and Aadhar Mobile linkage technical failure should be stamped as True



*Request*:

{{{ "ekycAuthenticationReq": { "uid": "Bw4ffddsdsTA==", "phone": "Cwgjedsdfsd==" } }}}

|*Field Name*|*Mandatory*|*Data Type*|*Remarks*|
|{{uid }}|Yes|String|uid entered by the User in Aadhar number pop-up (Aadhar Number encrypted with aes key to be shared)|
|{{phone }}|Yes|String|PhoneNumber entered in consent screen  (Phone Number encrypted with aes key to be shared)|

*Response*:

{noformat}Resp:
--------------------
{
    "ekycAuthenticationResp": {
        "metadata": {
            "status": "SUCCESS",
            "message": "Request processed successfully",
            "version": "v1",
            "code": "200",
            "time": "2023-07-24T07:28:17"
        },
        "resource_data": [
            {
                "code": "200",
                "status": "Authenticated Successfully"
            }
        ]
    }
}{noformat}





Note: For GL, above Physical KYC scenario will occur in case of Technical failure of EKYC and SKC failure as per current implementation. 

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story
acceptance: # Given that the KYC Mode for the applicant fails SKYC, EKYC & CKYC and moves to Physical KYC then when the User selects Identifier as Aadhar & Proof of Identity as Aadhar then upon click of Add identifier enters Aadhar Number, system should trigger ADV_Insert token API and upon success of ADV_Insert token API trigger EKYC NSDL Authentication API:
## Aadhar linked with mobile field should be stamped as True if code value is received as 200 in resource data array of EKYC NSDL Authentication API response
## Aadhar linked with mobile field should be stamped as False if code value is received as 401 in resource data array
## “Aadhar Mobile linkage technical failure” field to be stamped as True if error code received is any value other than 200 or 401 in resource Data array 
## “Aadhar Mobile linkage technical failure” field to be stamped as False if error code received is 200 or 401 in resource data array 
## User will be displayed in progress screen when EKYC NSDL Authentication API is in progress and after the API has responded successfully, the Aadhar number pop-up will auto close. 
## If EKYC NSDL Authentication API remains in progress for more than 2 minutes, the API should be treated as failure and Aadhar linked with mobile field should be stamped as false and Aadhar Mobile linkage technical failure should be stamped as True

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-45309
summary: Redirection from Community Page to Anumati Page
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow :*

When MicroSiteNetbankingFetchAPI responds successfully, then SFDC should re-direct the user from the community page to the Anumati page.

!image-20240610-111559.png|width=1540,height=667,alt="image-20240610-111559.png"!

SFDC should refer the URL mentioned against the tag named {{<transactionCompleteCallbackUrl>}} in the response of MicroSiteNetbankingFetchAPI for re-directing the user to the community page.

If the user refreshes the community screen, then system should not consider the same as a fresh click on the Account Aggregator link and allow user to proceed by clicking the “Proceed” button as part of the earlier attempt.
acceptance: # Given that mentioned changes are done, when MicroSiteNetbankingFetchAPI responds successfully, then user should be re-directed to the community page

key: ML-45227
summary: Pre-EMI Calculator
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Document Generation

*Sub-stage :* Document Generation Pending

*Proposed:*

A new field named “Pre-EMI” to be created at loan application level to stamp the Pre-EMI value.

The Pre-EMI Calculation to be done basis the calculator attached below:

[^Pre-EMI Treatment _MEL PL (14196e42-9ed7-4838-8840-99ec3f93b9a8).xlsx]

Pre-EMI amount calculated basis the calculator to be stamped against the “Pre-EMI” field
acceptance: # Given that mentioned changes are done, a new field named “Pre-EMI” to be created at loan application level to stamp the Pre-EMI value
# Given that mentioned changes are done, Pre-EMI amount to be calculated basis the attached calculator

key: ML-45104
summary: Copy Address functionality handling for MEL/PL Top up Journeys
description: *User Role* : IRO/MRO

Applicable for all MEL & PL BU where employment type of applicant/co-applicant is salaried

*Device Compatibility* : Web / Mobile

*Stage:* Employment Detailed Entry

*Sub-stage :* Employment Detailed Entry Pending

*Current:*

In Repeat or Top Up loans, where base loan was created prior to deployment of [[ML-12956] Drop down to copy residence/Permanent address as office address to be disabled - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-12956] i.e., before 3rd December 2022 office address is copied from permanent or residence address. 

This was because, in Office Address section of such base loans the “Copy Address Form” field was enabled for user in the form of drop down and users were able to select either permanent or residence address details to populate the office address related fields. 

Accordingly, as per existing functionality, when Repeat or Top-Up LANs are created against such base loans, the office address field is auto populated with permanent or residence address from base loan.

*Proposed:*

A validation should be built in SFDC, such that when a Repeat or Top-Up LAN is created, SFDC should be able to identify the base loan creation date.

If the base loan creation date is prior to deployment of [[ML-12956] Drop down to copy residence/Permanent address as office address to be disabled - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-12956], then SFDC should keep the office address related fields in the above-mentioned stage and substage for such Repeat or Top-Up loans as blank and in editable form (When the particular applicant/co-applicant is salaried)

As per existing functionality, SFDC should not enable the “Copy Address Form” field to the user on the UI.

User should be able to fill the details against the Office Address related fields and proceed as per process.
acceptance: # Given that mentioned changes are done, when a Repeat or Top-Up LAN is created, then SFDC should be able to identify the base loan creation date
# Given that mentioned changes are done, when the base loan creation date is prior to deployment of [[ML-12956] Drop down to copy residence/Permanent address as office address to be disabled - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-12956], then SFDC should keep the office address related fields in the above-mentioned stage and substage for such Repeat or Top-Up loans as blank and in editable form
# Given that mentioned changes are done, SFDC should not enable the “Copy Address Form” field to the user on the UI
# Given that mentioned changes are done, when base loan creation date is prior to deployment of [[ML-12956] Drop down to copy residence/Permanent address as office address to be disabled - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-12956], then user should be able to fill the details against the Office Address related fields and proceed as per process

key: ML-44921
summary: Handling for cases stamped as Existing Account Flow in Data Entry Stage
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Device Compatibility* : Web / Mobile

*Stage:* Sanction

*Sub-stage :* New Account Opening Pending

*Proposed:*

When CBS_Searchcustomer_Attach API responds with existing ALSA account details at customer at Data Entry stage and user selects the existing account to proceed by clicking the “Next” button, the “Bank Account Flow” field in back end is stamped as “Existing Account Flow”.

For such cases, at Sanction Stage CBS_Searchcustomer_Attach API is not called. The handling for such cases to be as per one of the following scenarios:

+_Scenario 1:_+

At the above-mentioned stage and sub-stage, if the field “Aadhar linked with Mobile” is stamped as “True” then, New Account Opening pop up should be displayed to the User (The previous User action in data entry stage should not be considered)

On this above-mentioned pop-up:

* If the user selects “Yes” from the above-mentioned pop-up, then user should be allowed to open a new account at this stage.
* If the user selects “No” from the above-mentioned pop-up, then user should be re-directed to the other account flow.

+_Scenario 2:_+

At the above-mentioned stage and sub-stage, if the field “Aadhar linked with Mobile” is stamped as “False” then, user should be re-directed to other bank account flow screen.
acceptance: # Given the mentioned changes are done, when the “Bank Account Flow” field in back end is stamped as “Existing Account Flow” and in the above-mentioned stage and sub-stage, if the field “Aadhar linked with Mobile” is stamped as “True” then, New Account Opening pop up should be displayed to the User (The previous User action in data entry stage should not be considered)
# Given the mentioned changes are done, when the new account opening pop-up is enabled, then:
## If the user selects “Yes” from the above-mentioned pop-up, then user should be allowed to open a new account at this stage.
## If the user selects “No” from the above-mentioned pop-up, then user should be re-directed to the other account flow.
# Given the mentioned changes are done, when the “Bank Account Flow” field in back end is stamped as “Existing Account Flow” and in the above-mentioned stage and sub-stage, if the field “Aadhar linked with Mobile” is stamped as “False”, then at the above-mentioned stage and sub-stage, if the field “Aadhar linked with Mobile” is stamped as “False” then, user should be re-directed to other bank account flow screen

key: ML-44920
summary: Emorphis API request change
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL, Rural MEL+, Rural MEL Repeat, Rural PL, Rural PL Repeat

*Device Compatibility* : Web / Mobile

*Stage:* Document Generation

*Sub-stage :* Document Generation Pending

*Document Name*: Credit Protect Insurance form

*Proposed:*

For Emorphis API, with SVC Name - EMORPHIS_FILENET_UPLOAD, following tags are required to be added within the “applicant” and “offers” array respectively.

+*Following tags are to be added within the array named “applicant” and stamping against the said tags to be as per the below mentioned logics:*+

|*Tag Name*|*Stamping Logics for Applicant* ("applicantType" : "Applicant")|*Stamping Logics   for Co-Applicant* ("applicantType" : "Co-Applicant")|
|education|Value   stamped against field named "Educational Qualification" in the   “Applicant” record available under “Applicants” object|Value   stamped against field named "Educational Qualification" in the   “Co-Applicant” record available under “Applicants” object|
|occupation|Value   stamped against field named "Employment Type" in the “Employment   Details” object available in the “Applicant” record under “Applicants” object|Value   stamped against field named "Employment Type" in the “Employment   Details” object available in the “Co-Applicant” record under “Applicants”|
|grossAnnualIncome|* If there are multiple income types available, SFDC should compare the value stamped against the field named “Total Income” in “Income Details” object against each “Income Type” record and stamp the highest income amongst them
* If there is only one income type, then the value stamped against the field named “Total Income” in “Income Details” object against the “Income Type” record should be used for stamping against the tag|* If there are multiple income types available, SFDC should compare the value stamped against the field named “Total Income” in “Income Details” object against each “Income Type” record and stamp the highest income amongst them
* If there is only one income type, then the value stamped against the field named “Total Income” in “Income Details” object against the “Income Type” record should be used for stamping against the tag|

+*Following tags are to be added within the array named “offer” when the tag named “offerType” is stamped as “Credit” and stamping against the said tags to be as per the below mentioned logics:*+

|*Tag Name*|*Stamping Logics   for Applicant*|*Stamping Logics   for Co-Applicant*|
|riderSumAssured|Value   stamped against field named "Sum Assured" in the "Loan   Application Details"|Value   stamped against field named "Sum Assured" in the "Loan   Application Details"|
|premiumPaymentTerm|Loan   Tenure to be stamped against this tag|Loan   Tenure to be stamped against this tag|



*Note*: Emorphis API is triggered seperately for co-applicant if User opts for co-applicant as well and in that scenario logic tags should be passed as per logic mentioned in last column. 
acceptance: # Given the mentioned changes are done, the tags are added to the existing emorphis API with SVC name EMORPHIS_FILENET_UPLOAD

key: ML-44910
summary: 8. Aadhar linked with mobile field stamping logic for SKYC (Where EKYC was not done for previous LAN)
description: *Stage*: Applicant Detail Entry

*Sub-Stage*: Applicant Detail Entry pending

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Applicable BU*: ALL BU

*Process Flow*:

# In consent screen if LAN is SKYC successful but EKYC is not performed on the previously punched LAN due to which Aadhar reference number is not present on Applicant object then Aadhar linked with mobile field should be stamped as False and Aadhar Validation will not apply for the LANs

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story
acceptance: # Given that User is in consent screen when SKYC is successful but EKYC is not performed on the previously punched LAN due to which Aadhar reference number is not present on account object then Aadhar linked with mobile field should be stamped as False

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-44909
summary: 11. CBS Search API failure scenario handling in Sanction screen
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Device Compatibility* : Web / Mobile

*Stage:* Sanction

*Sub-stage :* New Account Opening Pending

*Proposed:*

* If CBS_Searchcustomer_Attach API responds with a failure (i.e., technical failure), then user should be provided with three retry option.
* A “Retry” button should be enabled on the UI, clicking which CBS_Searchcustomer_Attach API to be called again.
* After the 3 attempts, if CBS_Searchcustomer_Attach API does not respond, then “Retry” button should not be enabled for the 4th attempt.
* Post the three attempts, if CBS_Searchcustomer_Attach API does not respond for more than 2 mins or returns error response then user should be able to click the “Next” button available on the UI and upon clicking the “Next” button user should be directed to other account flow

*Note:* If CBS_Searchcustomer_Attach API responds successfully in any one of the three attempts, then user should be able to process as per the pre-defined process.

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story
acceptance: # Given that mentioned changes are done, when CBS_Searchcustomer_Attach API responds with a failure (i.e., technical failure), then user should be provided with three retry option.
# Given that mentioned changes are done, when CBS_Searchcustomer_Attach API responds with a failure (i.e., technical failure), then a “Retry” button should be enabled on the UI, clicking which CBS_Searchcustomer_Attach API to be called again.
# Given that mentioned changes are done, when 3 attempts are exhausted by the user and if  CBS_Searchcustomer_Attach API still does not responds, then “Retry” button should not be enabled for the 4th attempt.
# Given that mentioned changes are done, when 3 attempts are exhausted by the user and if  CBS_Searchcustomer_Attach API still does not responds, then user should be able to click the “Next” button available on the UI and upon clicking the “Next” button user should be directed to other account flow
# Given the mentioned changes are done, when CBS_Searchcustomer_Attach API responds successfully in any one of the three attempts, then user should be able to proceed as per pre-defined process

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-44905
summary: 15. Sanction screen handling for Aadhar Mob linkage success scenario when customer has multiple previous IDFC Accounts
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Device Compatibility* : Web / Mobile

*Stage:* Sanction

*Sub-stage :* New Account Opening Pending

*Proposed:*

If the field named “Aadhar linked with Mobile” stamped as “True” and CBS_Searchcustomer_Attach API responds successfully with multiple existing account details then SFDC should be able to compare the mobile number received from the above-mentioned API and the one entered by the user in the consent screen against the field named “Aadhar Linked Mobile Number” [[ML-44358] Consent screen UI changes for Aadhar Mob no linkage - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44358] for all the accounts fetched through the above-mentioned API.

* For accounts, where both mobile numbers are same, SFDC should allow the user to select the radio button against one such account. Once user selects one radio button and clicks on “Next” button, SFDC should allow user to proceed as per existing process with selected account. 
* For accounts where mobile number is different from the one entered in field named “Aadhar Linked Mobile Number”, then SFDC should not allow the user to select the radio button against all such accounts and show the error message “IDFC Account not linked with Aadhar linked mobile” (Message to be kept configurable. The radio button against such accounts should be disabled.
* If the CBS fetched mobile number of all accounts returned from CBS search attach API are not matching with the Aadhar linked mobile number field from consent screen then Radio buttons against all such accounts should be disabled and upon click of Next button, User should be navigated to Other account flow. 

*Note*:

# -If CBS search is skipped in Sanction screen because User has selected New Account Opening flow in Data entry, then mobile number match should be done basis CBS search ATTACH API triggered in Data Entry stage (For all MEL PL & HL LAP flows-

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story
acceptance: # Given that mentioned changes are done, when the field named “Aadhar linked with Mobile” stamped as “True” and CBS_Searchcustomer_Attach API responds successfully with multiple existing account details, then SFDC should be able to compare the mobile numbers received from the above-mentioned API and the one entered by the user in the consent screen against the field named “Adhaar Linked Mobile Number” [[ML-44358] Consent screen UI changes for Aadhar Mob no linkage - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44358]
## For accounts, where both mobile numbers are same, SFDC should allow the user to select the radio button against one such account. Once user selects one radio button and clicks on “Next” button, SFDC should allow user to proceed as per existing process with selected account.
## For accounts where mobile number is different from the one entered in field named “Aadhar Linked Mobile Number”, then SFDC should not allow the user to select the radio button against all such accounts and show the error message “IDFC Account not linked with Aadhar linked mobile” (Message to be kept configurable. The radio button against such accounts should be disabled.
## If the CBS fetched mobile number of all accounts returned from CBS search attach API are not matching with the Aadhar linked mobile number field from consent screen then Radio buttons against all such accounts should be disabled and upon click of Next button, User should be navigated to Other account flow.

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-44904
summary: 14. Sanction screen handling for Aadhar Mob linkage success scenario when customer is not having previous IDFC Account
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Device Compatibility* : Web / Mobile

*Stage:* Sanction

*Sub-stage :* New Account Opening Pending

*Proposed:*

If CBS_Searchcustomer_Attach API responds successfully but without existing account details (customer not having any existing IDFC Account), then SFDC should refer the stamping against the field named “Aadhar linked with Mobile” and handling should be done as follows:

When the stamping against the field named “Aadhar linked with Mobile” is “True” then upon clicking the “Next” button on UI, “New Account Opening” related pop-up should be shown to the user.

* If the user selects “Yes” from the above-mentioned pop-up, then user should be allowed to open a new account at this stage.
* If the user selects “No” from the above-mentioned pop-up, then user should be re-directed to the other account flow.

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story
acceptance: # Given that mentioned changes are done, when CBS_Searchcustomer_Attach API responds successfully but without existing account details (customer not having any existing IDFC account) and if the stamping against the field named “Aadhar linked with Mobile” is “True”, then upon clicking the “Next” button on UI, “New Account Opening” related pop-up should be shown to the user where:
## If the user selects “Yes” from the above-mentioned pop-up, then user should be allowed to open a new account at this stage
## If the user selects “No” from the above-mentioned pop-up, then user should be re-directed to the other account flow

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-44881
summary: 9. ADV_GENVALUE & EKYC NSDL Authentication API failure scenario handling 
description: *Stage*: Applicant Detail Entry

*Sub-Stage*: Applicant Detail Entry pending

*Applicable BU*: Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Process Flow*:

# New field to be created in Applicant record called “Aadhar validation attempt” 
# Default value of Aadhar validation attempt field to be kept as 0
# When User clicks on Validate Aadhar button, Aadhar validation attempt should be counted 
# When ADV_GENVALUE API or EKYC NSDL Authentication API fail as mentioned in [https://fincap.atlassian.net/browse/ML-44360|https://fincap.atlassian.net/browse/ML-44360|smart-link] & [https://fincap.atlassian.net/browse/ML-44779|https://fincap.atlassian.net/browse/ML-44779|smart-link] then User should be provided 3 attempts before being allowed to proceed to the next screen
# When ADV_GENVALUE API or EKYCNSDLAuthentication API fail for first 2 times error toast message to be displayed to the User “Aadhar Validation Failed, Please re-attempt Aadhar Validation” (Toast message to be kept configurable)
# When ADV_GENVALUE API or EKYCNSDLAuthenticatoin API fails the 3rd time then error toast message to be displayed to the User “Something went wrong-Please proceed without Aadhar Validation” and Aadhar linked with Mobile field should be stamped as False
# When ADV_GENVALUE API or EKYCNSDLAuthenticatoin API responds successfully, then user should be shown a toast message stating “Aadhar Validation done successfully. Please proceed with the same.” (message content to be kept configurable)
# When ADV_GENVALUE API or EKYCNSDLAuthenticatoin API responds with functional failure, then user should be shown a toast message stating “Aadhar cannot be validated. Please proceed without aadhar validation.” (message content to be kept configurable)

Note: In case of Technical Failure scenario, User should be allowed to Proceed from Applicant Detail Entry screen only if the User has attempted Aadhar Validation for 3 times and in the 3rd attempt as well ADV_GENVALUE API or EKYCNSDLAuthentication API have faced technical failure

# New field named “Aadhar Mobile linkage technical failure” to be created in Applicant record. In case the user exhausts the 3 attempts and ADV_GENVALUE API or EKYCNSDLAuthentication API still responds with technical failure, then the field named “Aadhar Mobile linkage technical failure” should be stamped as “True”. Post 3 attempts, the “Validate Aadhar” button should get disabled on the UI. In case if ADV_GENVALUE API or EKYCNSDLAuthentication API responds successfully in any attempt then “Aadhar Mobile linkage technical failure” field should be stamped as “False”
# In case ADV_GENVALUE API or EKYCNSDLAuthentication API responds with a functional failure, then the field named “Aadhar Linked with Mobile” should be stamped as “False” and user should not be provided any retry attempts in this scenario. In this scenario the “Validate Aadhar” button should get disabled after API responds with a functional failure
# After User clicks on Validate Aadhar button, system should display processing screen Until ADV_GETVALUE API and EKYC NSDL Authentication API respond successfully or error response is received from one of the APIs. 

*Note*: 

# If EKYC NSDL Authentication API fails then system upon click of Validate Aadhar button should trigger ADV_GENVALUE API again and post success of the API trigger EKYC NSDL Authentication API
# If ADV_GENVALUE API or EKYC NSDL Authentication API remains in progress for more than 2 minutes then system should be consider the same to be a technical failure and same handling as technical error should be extended
# In case ADV_GENVALUE API or EKYC NSDL Authentication API responds with a technical failure for 3 times, then user should be allowed to proceed by clicking the “Next” button
# In case ADV_GENVALUE API or EKYC NSDL Authentication API responds with a functional failure, then user should be allowed to proceed by clicking the “Next” button

*Logic for identifying technical failure and functional failure basis response received in ADV_GENVALUE and EKYC NSDL Authentication API respectively:*

# When the value received against the tag named “ISSUCCESS” is “False” in the response of ADV_GENVALUE API [https://fincap.atlassian.net/browse/ML-44360|https://fincap.atlassian.net/browse/ML-44360|smart-link] then SFDC should consider the case as a technical failure case and proceed as per process
# When the value received against the tag named “ISSUCCESS” is “False” in the response of EKYC NSDL Authentication API [[ML-44779] 4. EKYCNSDL Authentication API trigger - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44779], then SFDC should consider the case as a technical failure case and proceed as per process
# When the value received against the tag named “ISSUCCESS” is “True” in the response of ADV_GENVALUE API [https://fincap.atlassian.net/browse/ML-44360|https://fincap.atlassian.net/browse/ML-44360|smart-link], then SFDC should check the value received against the tag named "aadharNo" in the said response. Basis the response received, handling should be as follows:
## If blank value is received against the tag named "aadharNo", then SFDC should consider the case to be a functional failure case and proceed as per process
## If the tag named "aadharNo" is not received in the response of ADV_GENVALUE API [https://fincap.atlassian.net/browse/ML-44360|https://fincap.atlassian.net/browse/ML-44360|smart-link], then SFDC should consider the case to be a functional failure case and proceed as per process
# When the value received against the tag named “ISSUCCESS” is “True” in the response of EKYC NSDL Authentication API [[ML-44779] 4. EKYCNSDL Authentication API trigger - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44779], then SFDC should check the value received against the tag named “code” in the said response. Basis the code received, handling should be as follows:
## If the value received in the tag named “code” is “200”, then SFDC should consider the case to be a success and allow the user to proceed as per process
## In case the value received against the tag named “code” is anything other than the error codes mentioned in [[ML-44779] 4. EKYCNSDL Authentication API trigger - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44779], then SFDC should consider the case to be a functional failure case and proceed as per process

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story
acceptance: Given that User is in Applicant Detail entry stage:

# New field to be created in Applicant record called “Aadhar validation attempt” 
# Default value of Aadhar validation attempt field to be kept as 0
# When User clicks on Validate Aadhar button, Aadhar validation attempt should be counted 
# When ADV_GENVALUE API or EKYC NSDL Authentication API fail as mentioned in [https://fincap.atlassian.net/browse/ML-44360|https://fincap.atlassian.net/browse/ML-44360|smart-link] & [https://fincap.atlassian.net/browse/ML-44779|https://fincap.atlassian.net/browse/ML-44779|smart-link] then User should be provided 3 attempts before being allowed to proceed to the next screen
# When ADV_GENVALUE API or EKYCNSDLAuthentication API fail for first 2 times error toast message to be displayed to the User “Aadhar Validation Failed, Please click on re-attempt Aadhar Validation”
# When ADV_GENVALUE API or EKYCNSDLAuthenticatoin API fails the 3rd time then error toast message to be displayed to the User “Something went wrong-Please proceed without Aadhar Validation” and Aadhar linked with Mobile field should be stamped as False
# When ADV_GENVALUE API or EKYCNSDLAuthenticatoin API responds successfully, then user should be shown a toast message stating “Aadhar Validation done successfully. Please proceed with the same.” (message content to be kept configurable)
# When ADV_GENVALUE API or EKYCNSDLAuthenticatoin API responds with functional failure, then user should be shown a toast message stating “Aadhar cannot be validated. Please proceed without aadhar validation.” (message content to be kept configurable)
# New field named “Aadhar Mobile linkage technical failure” to be created in Applicant record which should be stamped as “True” when user exhausts 3 attempts and ADV_GENVALUE API or EKYCNSDLAuthentication API still responds with technical failure. Post 3 attempts, “Validate Aadhar” button should get disabled on the UI
# If ADV_GENVALUE API or EKYCNSDLAuthentication API responds with a functional failure, then field named “Aadhar Linked with Mobile” should be stamped as “False” and user should not be provided any retry attempts in this scenario. Post receiving functional failure response the “Validate Aadhar” button should get disabled
# When the value received against the tag named “ISSUCCESS” is “False” in the response of ADV_GENVALUE API [https://fincap.atlassian.net/browse/ML-44360|https://fincap.atlassian.net/browse/ML-44360|smart-link] then SFDC should consider the case as a technical failure case and proceed as per process
# When the value received against the tag named “ISSUCCESS” is “False” in the response of EKYC NSDL Authentication API [[ML-44779] 4. EKYCNSDL Authentication API trigger - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44779], then SFDC should consider the case as a technical failure case and proceed as per process
# When the value received against the tag named “ISSUCCESS” is “True” in the response of ADV_GENVALUE API [https://fincap.atlassian.net/browse/ML-44360|https://fincap.atlassian.net/browse/ML-44360|smart-link], then SFDC should check the value received against the tag named "aadharNo" in the said response. Basis the response received, handling should be as follows:
## If blank value is received against the tag named "aadharNo", then SFDC should consider the case to be a functional failure case and proceed as per process
## If the tag named "aadharNo" is not received in the response of ADV_GENVALUE API [https://fincap.atlassian.net/browse/ML-44360|https://fincap.atlassian.net/browse/ML-44360|smart-link], then SFDC should consider the case to be a functional failure case and proceed as per process
# When the value received against the tag named “ISSUCCESS” is “True” in the response of EKYC NSDL Authentication API [[ML-44779] 4. EKYCNSDL Authentication API trigger - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44779], then SFDC should check the value received against the tag named “code” in the said response. Basis the code received, handling should be as follows:
## If the value received in the tag named “code” is “200”, then SFDC should consider the case to be a success and allow the user to proceed as per process
## In case the value received against the tag named “code” is anything other than the error codes mentioned in [[ML-44779] 4. EKYCNSDL Authentication API trigger - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44779], then SFDC should consider the case to be a functional failure case and proceed as per process

*Note*: 

# If EKYC NSDL Authentication API fails then system upon click of Validate Aadhar button should trigger ADV_GENVALUE API again and post success of the API trigger EKYC NSDL Authentication API
# If ADV_GENVALUE API or EKYC NSDL Authentication API remains in progress for more than 2 minutes then system should be consider the same to be a technical failure and same handling as technical error should be extended
# In case ADV_GENVALUE API or EKYC NSDL Authentication API responds with a technical failure for 3 times, then user should be allowed to proceed by clicking the “Next” button
# In case ADV_GENVALUE API or EKYC NSDL Authentication API responds with a functional failure, then user should be allowed to proceed by clicking the “Next” button

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-44880
summary: 10. Is Aadhar linked CBS Mobile number field stamping logic
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, Gold Loan 

*Device Compatibility* : Web / Mobile

*Stage:* Sanction

*Sub-stage :* New Account Opening 

*Process Flow*:

When User clicks on Next button in Sanction-Insurance Pending stage, system should stamp Is Aadhar linked CBS Mobile field as per below logic:

* If Mobile number returned from CBS search API response is same as Mobile number validated in consent screen then to be stamped as True 
* If Multiple IDFC Accounts are returned from CBS search API response, system should compare the mobile numbers of all the accounts returned from CBS search API and if one of the mobile numbers is equal to the mobile validated in consent screen should be stamped as True, if the mobile numbers of none of the accounts received from CBS search API response is equal to the mobile number validated in consent screen then to be stamped as False
* If Mobile number returned from CBS search API response is not equal to mobile number validated in consent screen then to be stamped as False in Applicant Object
* If Aadhar linked mobile field is stamped as False and CBS search API is skipped in Sanction stage then to be stamped as NA
* If customer does not have existing ALSA account with IDFC Bank, then in such cases as well then stamping to be NA

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story
acceptance: Given that User clicks on Next button in Sanction-Insurance Pending stage, system should stamp Is Aadhar linked CBS Mobile field as per below logic:

* If Mobile number returned from CBS search API response is same as Mobile number validated in consent screen then to be stamped as True
* If Multiple IDFC Accounts are returned from CBS search API response, system should compare the mobile numbers of all the accounts returned from CBS search API and if one of the mobile numbers is equal to the mobile validated in consent screen should be stamped as True
* If Multiple IDFC Accounts are returned from CBS search API response, system should compare the mobile numbers of all the accounts returned from CBS search API and if the mobile numbers of none of the accounts received from CBS search API response is equal to the mobile number validated in consent screen then to be stamped as False
* If Mobile number returned from CBS search API response is not equal to mobile number validated in consent screen then to be stamped as False
* If Aadhar linked mobile field is stamped as false and CBS search API is skipped in Sanction stage then to be stamped as NA

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-44782
summary: 13. Sanction screen handling for Aadhar Mob linkage failure scenario
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Device Compatibility* : Web / Mobile

*Stage:* Sanction

*Sub-stage :* Insurance Pending 

*Proposed:*

In case the field named “Aadhar linked with Mobile” stamped as “False”, then when User clicks on Next button in Sanction Insurance Pending stage then SFDC should skip calling CBS_Searchcustomer_Attach API and New account opening screen and move to Other account flow directly.  

Note: System should not consider the user action on Data entry stage

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story
acceptance: # Given that mentioned changes are done, when field named “Aadhar linked with Mobile” stamped as “False”, then at the above-mentioned stage / sub-stage, SFDC should skip calling CBS_Searchcustomer_Attach API and re-direct the user directly to other bank account flow screen from Sanction Insurance pending stage.

Note: System should not consider the user action on Data entry stage

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-44781
summary: 12. Sanction screen handling for Aadhar Mob linkage success scenario when customer has previous IDFC Account
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, Gold Loan

*Device Compatibility* : Web / Mobile

*Stage:* Sanction

*Sub-stage :* New Account Opening Pending

*Proposed:*

If “Aadhar linked with Mobile” field is stamped as “True” and CBS_Searchcustomer_Attach API responds successfully with existing account details, then SFDC should compare the mobile number received from the above-mentioned API and the one entered by the user in the consent screen against the field named “Adhaar Linked Mobile Number” [[ML-44358] Consent screen UI changes for Aadhar Mob no linkage - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44358] and handling to be made as per below mentioned scenarios:

+_Scenario 1-_+ 

*  If both the mobile numbers are same, then SFDC should allow the user to select the radio button available against this account number available on the UI.
** When user clicks on “Next” button available on UI, SFDC should allow user to proceed with existing account. If user does not select the radio button and clicks on next then User should be moved to Other account flow. 

+_Scenario 2-_+

* If both mobile numbers are different, then SFDC should show an error message to the user below the account fetched stating “IDFC Account not linked with Aadhar linked mobile number” (message content to be kept configurable) and shall keep the radio button available against the retrieved account number frozen such that user is not able to select the same. Upon click of Next button, the User should be directed to other account flow. 

*Note*: 

# If system receives 12 digit in the CBS search attach response, then system should not consider the 91 prefix and consider only the remaining 10 digits when comparing with aadhar linked mobile number. 
# If system receives 10 digits, then comparison to happen directly with aadhar linked mobile number

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story
acceptance: # Given that mentioned changes are done, when the field named “Aadhar linked with Mobile” stamped as “True” and CBS_Searchcustomer_Attach API responds successfully with existing account details, then SFDC should be able to compare the mobile number received from the above-mentioned API and the one entered by the user in the consent screen against the field named “Aadhaar Linked Mobile Number” [[ML-44358] Consent screen UI changes for Aadhar Mob no linkage - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44358] and below flow to proceed:
## when both the mobile numbers are similar, then SFDC should allow user to proceed as per existing process by clicking the “Next” button
# Given that mentioned changes are done, when the field named “Aadhar linked with Mobile” stamped as “True” and CBS_Searchcustomer_Attach API responds successfully with existing account details, then SFDC should be able to compare the mobile number received from the above-mentioned API and the one entered by the user in the consent screen against the field named “Aadhaar Linked Mobile Number” [[ML-44358] Consent screen UI changes for Aadhar Mob no linkage - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44358] and below flow to proceed:
## when both mobile numbers are different, then SFDC should show an error toast message to the user stating “IDFC Account not linked with Aadhar linked mobile number” and shall keep the radio button available against the retrieved account number frozen such that user is not able to select the same (error message to be kept configurable)
## Given that mentioned changes are done, SFDC post showing the error toast message, when the user clicks on “Next” button available on UI, then User should be directed to Other account flow. 

*N.B.* The build should be kept configurable, i.e., the switch on and switch off functionality to be added in this story

key: ML-44780
summary: 5. CDRULE Split tag Addition for Aadhar linkage & Phone type 
description: *Integration consideration*: CDRULE SPLIT API

*Applicable BU*: Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Process Flow*:

# isFeaturephone tag & isMobileNoLinkedWithAadhar tag to be added to all CDRULE split requests in Journey and value to be passed as per below logic. 

|Field Names|Data Type|Logic for stamping|
|application-->applicants-->isFeaturePhone ("Yes"/"No")|String|* To be passed as Yes if Feature phone radio button is selected in Consent screen
* To be passed as No if Smart phone radio button is selected in consent screen|
|application-->applicants-->isMobileNoLinkedWithAadhar("Yes"/"No")|String|* To be passed as Yes if Aadhar linked with mobile field is stamped as True
* To be passed as No if Aadhar linked with mobile field is stamped as False|

Note- Build to be kept configurable. If build is switched off then the tags should not pass values to FICO in CDRULE Split request 
acceptance: # Given that CDRULE Split API is triggered, isFeaturePhone & isMobileNoLinkedWithAadhar tag to be passed in passed in applicants array as per logic mentioned in description

key: ML-44779
summary: 4. EKYCNSDL Authentication API trigger
description: *Stage*: Applicant Detail Entry

*Sub-Stage*: Applicant Detail Entry pending

*Applicable BU*: Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Process Flow*:

# After ADV_GETVALUE API responds successfully, system should trigger EKYC NSDL Authentication API with request as mentioned below. 

* Aadhar linked with mobile field should be stamped as True if code value is received as 200 in resource data array and success toast message to be displayed to User “Aadhar Validated Successfully” (Toast message to be kept configurable) 
** Validate Aadhar button should be disabled to the User after Aadhar linked with mobile field is stamped as True
* Aadhar linked with mobile field should be stamped as False if code value is received as 401 in resource data array

# If code value in resource data is received as any value other than 200 or 401 in code tag of resource data array then system should treat it as a API failure.
# After User clicks on Validate Aadhar button, system should display processing screen Until ADV_GETVALUE API and EKYC NSDL Authentication API respond successfully or error response is received from one of the APIs. 

*Request*: 

{{{ "ekycAuthenticationReq": { "uid": "Bw4ffddsdsTA==", "phone": "Cwgjedsdfsd==" } }}}

|*Field Name*|*Mandatory*|*Data Type*|*Remarks*|
|{{uid }}|Yes|String|uid (Aadhar Number encrypted with aes key to be shared) 
Received from ADV_GETVALUE API under aadharNo Tag in response|
|{{phone }}|Yes|String|PhoneNumber entered in consent screen  (Phone Number encrypted with aes key to be shared)|

*Response*:

{noformat}Resp:
--------------------
{
    "ekycAuthenticationResp": {
        "metadata": {
            "status": "SUCCESS",
            "message": "Request processed successfully",
            "version": "v1",
            "code": "200",
            "time": "2023-07-24T07:28:17"
        },
        "resource_data": [
            {
                "code": "200",
                "status": "Authenticated Successfully"
            }
        ]
    }
}{noformat}

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default","localId":"4e727fb4-f058-4c90-bba1-c2c4ac827a35"},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"Possible Error Messages","marks":[{"type":"strong"}]},{"type":"text","text":" "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"HTTP Status Codes","marks":[{"type":"strong"}]},{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Scenario","marks":[{"type":"strong"}]},{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Messages","marks":[{"type":"strong"}]},{"type":"text","text":" "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"200 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Success "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"400 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"  "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bad Request "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"401 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"  "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Unauthorized "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"404 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Resource not found "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"405 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Unsupported Method "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"406 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Unsupported Content Type "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"407 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Proxy Authentication required "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"415 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Unsupported Request Content Type "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"429 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Rate Limiting "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Too Many requests "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"500 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"  "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Internal Server Error "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"503 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"  "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Source Unavailable "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"504 "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"  "}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Endpoint Request Timed Out "}]}]}]}]}
{adf}

Note - Adding error code received during QA testing - Code =100 , Message = PI Mismatch handled in [https://fincap.atlassian.net/browse/ML-44881|https://fincap.atlassian.net/browse/ML-44881|smart-link] as functional error code.



*Note:*

# If ADV_GENVALUE API or EKYC NSDL Authentication API remains in progress for more than 2 minutes then system should be consider the same to be a technical failure and same handling as technical error should be extended
# Error codes to be kept configurable and maintained in metadata. 

Eg: 200 is defined as success error code now, if mule changes this to 300 later then we should be able to change it to 300 in our metadata and if 300 is passed in error code sfdc should treat it as success and accordingly Aadhaar mobile linkage field should be stamped and UI should display success toast message.  
acceptance: # Given that ADV_GETVALUE API responds successfully, system should trigger EKYC NSDL Authentication API with request as mentioned above
# Given that EKYC NSDL Authentication API in response returns code tag in resource data array as 200 then Aadhar linked with mobile field should be stamped as True 
## Validate Aadhar Button should be disabled to user after Aadhar linked with mobile field is stamped as True
# Given that EKYC NSDL Authentication API in response returns code tag in resource data array as 401 then Aadhar linked with mobile field should be stamped as False
# Given that EKYC NSDL Authentication API in response returns code tag in resource data array as any value other than 200 or 401 then system should consider it as API failure

key: ML-44360
summary: 3. ADV_GETVALUE API trigger
description: *Stage*: Applicant Detail Entry

*Sub-Stage*: Applicant Detail Entry pending

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Process Flow*:

Upon click of VALIDATE AADHAR Button, ADV_GETVALUE API request to be triggered.

If Aadhar no is not received in response then system should treat it as API failure. 

*Scenario 1*:

If the LAN is EKYC success then Aadhar reference number received from EKYC Biometric API response should be passed in the request. 

*Scenario 2*:

If the LAN is SKYC success and EKYC was successful on the previous LAN then Aadhar reference number stamped on the previous LAN should be queried and passed in the request.

*Sample Request*:

{"GetValue":{"aadharRefNo":"PVTEigwexNw4T+ZtxjQ+iA=="}}


*Sample* *Response*:

{
"RESPONSEID": 95281525,
"ISSUCCESS": "True",
"ERROR": {
"ERRORSYSID": null,
"ERRORCODE": null,
"ERRORDESC": null
},
"RESPONSE": {
"PROCESSOR": null,
"DATA": {
"GetValueResponse": {
"aadharNo": "wJakwKeHx9zgyTAtVI0sbQ=="
}
}
}
}
acceptance: # Given that User clicks on Validate Aadhar button when EKYC is successful for the case Aadhar reference number received from EKYC should be passed in request for ADV_GETVALUE API. 
# Given that User clicks on Validate Aadhar button when SKYC is successful for the case and Aadhar reference number stamped from previous EKYC successful LAN for the customer then it should be passed in request for ADV_GETVALUE API. 

key: ML-44359
summary: 2. Applicant Detail Entry stage UI handling for Validate Aadhar Button
description: *Stage*: Applicant Detail Entry

*Sub-Stage*: Applicant Detail Entry pending

*Applicable BU*: Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Process Flow*:

# New button VALIDATE AADHAAR should be visible in Personal Identifier section to the right of VIEW AADHAR NUMBER Button under the below scenarios:
## EKYC is successful for the LAN and Aadhar reference number is available
## SKYC was successful and Aadhar reference number is present on the Applicant object for the customer
# The button should be enabled to the User by default
# If User clicks on Next button in the screen without clicking on VALIDATE AADHAAR button then system should throw error toast message “Please Validate Aadhaar to proceed further” (Before the other validations are run on the screen)

Note: VALIDATE AADHAAR button should be enabled for WIP cases

!image-20240531-122614.png|width=1340,height=476!



*Note*- Build to be kept configurable. When build is muted, Validate Aadhar button should not be visible on screen. 
acceptance: # Given that EKYC is successful for a LAN and Aadhar reference number is available then VALIDATE AADHAAR should be visible in Personal Identifier section to the right of VIEW AADHAR NUMBER Button
# Given that SKYC is successful for a LAN and Aadhar reference number is available then VALIDATE AADHAAR should be visible in Personal Identifier section to the right of VIEW AADHAR NUMBER Button
# Given that User clicks on Next button in the screen without clicking on VALIDATE AADHAAR button then system should throw error toast message “Please Validate Aadhar to proceed further” (Before the other validations are run on the screen)

key: ML-44358
summary: 1. Consent screen UI changes for Aadhaar Mob no linkage
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Applicant Detail Entry

*Sub-stage :* Applicant Detail Entry Pending

*Applicable BU:* Rural MEL (Base Loan, PM Swanidhi, Surrogate), Rural PL (Base Loan, Prime, Enterprise), Rural HL, Rural LAP, GL

*Proposed:*

+_Aadhaar Linked Mobile Number Field: -_+

In consent screen, the current field named “Mobile Number” available on UI is to be renamed as “Aadhaar Linked Mobile Number”

!image-20240530-061840.png|width=1599,height=462,alt="image-20240530-061840.png"!

+_Device Type Field: -_+

Below the field name “Aadhaar Linked Mobile Number”, user should be provided with a new field named “Device Type”.

User should be provided with two options i.e., “Android / I-phone” and “Featured Phone” respectively against the field named “Device Type”.

The options should be provided to the user in form of radio buttons.

Placement of this field should be as highlighted with red box in the below snapshot:

!image-20240530-062239.png|width=1599,height=462,alt="image-20240530-062239.png"!

!image-20240604-111424.png|width=418,height=44,alt="image-20240604-111424.png"!

In back-end a new field named “Device Type” to be created to store the radio button option selected by the user on front end UI against the “Device Type” field.

+_Validation to be built on “Send OTP” button: -_+

A validation to be built on “Send OTP” button such that before sending the OTP, SFDC should be able to validate that user has selected any one radio button option against the field named “Device Type”.

!image-20240530-065049.png|width=1600,height=540,alt="image-20240530-065049.png"!

In case user has not selected any radio button option against the field named “Device Type” then SFDC should validate the same and show an error toast message to the user stating, “Please select relevant option against Device Type” (content for error message to be kept configurable).

Post showing the error toast message user should be allowed to select one of the radio button options against the field named “Device Type” and also, user should be able to edit the value against “Aadhaar Linked Mobile Number” field.

After making the modification (if any) and selecting one of the radio button options, then validation should be applied again on the field named “Get OTP” and user should be allowed to proceed as per process.

Note:

Device Type field to be captured on the Applicant record
acceptance: # Given that mentioned changes are done, when user reaches the consent screen, then user should be able to view the existing field named “Mobile Number” renamed as “Aadhaar Linked Mobile Number”
# Given that mentioned changes are done, when user reaches the consent screen, then below the “Aadhaar Linked Mobile Number” field user should be able to view the new field named “Device Type” with two radio button options named “Android / I-phone” and “Featured Phone” respectively
# Given that mentioned changes are done, when the user clicks on “Send OTP” button on consent screen, then SFDC should be able to validate that user has selected one of the radio button options against the field named” Device Type”

key: ML-44354
summary: Change in Application form to Inculcate KFS
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Document Generation

*Sub-stage :* Document Generation Pending

*Proposed:*

Addition of new section i.e., Key Facts Statement in the existing Rural MEL and PL application forms respectively.

This new section is required to be added below the existing “Insurance Details for Applicant / Co-Applicant” sections available on the application form.

Please refer the below screenshot for reference:



!image-20240627-062827.png|width=944,height=220,alt="image-20240627-062827.png"!



+*Key Facts Statement Format:*+

The new “Key Facts Statement” section to have the following content as per the format shared below:

*Part 1 (Interest rate and fees/charges)*

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default","localId":"67081565-e104-4969-8cbf-f03b37c15d04"},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"1","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"Loan proposal/ account No.","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":" SFDC ID"}]}]},{"type":"tableCell","attrs":{"colspan":5},"content":[{"type":"paragraph","content":[{"type":"text","text":"Type of Loan","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"RMEL/RPL"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"2","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":7},"content":[{"type":"paragraph","content":[{"type":"text","text":"Sanctioned Loan amount (in Rupees)","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":8},"content":[{"type":"paragraph","content":[{"type":"text","text":" <Sanctioned Amount> (variable value)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"3","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":7},"content":[{"type":"paragraph","content":[{"type":"text","text":"Disbursal schedule","marks":[{"type":"strong"}]}]},{"type":"paragraph","content":[{"type":"text","text":"(i)    Disbursement in stages or 100% upfront."}]},{"type":"paragraph","content":[{"type":"text","text":"(ii)  If it is stage wise, mention the clause of loan agreement having relevant details"}]}]},{"type":"tableCell","attrs":{"colspan":8},"content":[{"type":"paragraph","content":[{"type":"text","text":"(i)              Disbursement upfront – 100% of Sanctioned amount. (To be kept configurable)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"4","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":7},"content":[{"type":"paragraph","content":[{"type":"text","text":"Loan term (year/months/days)","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":8},"content":[{"type":"paragraph","content":[{"type":"text","text":"<Loan tenure in Months> (variable value)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"5","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":15},"content":[{"type":"paragraph","content":[{"type":"text","text":"Instalment details","marks":[{"type":"strong"}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"Type of instalments"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Number of EPIs"}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"EPI (₹)"}]}]},{"type":"tableCell","attrs":{"colspan":7},"content":[{"type":"paragraph","content":[{"type":"text","text":"Commencement of repayment, post sanction"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":" Monthly (EMI)"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"<No. of Installments to be populated>(variable value)"}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"<EMI amount to be populated>"}]},{"type":"paragraph","content":[{"type":"text","text":"(variable value)"}]}]},{"type":"tableCell","attrs":{"colspan":7},"content":[{"type":"paragraph","content":[{"type":"text","text":" (3 or 5"},{"type":"text","text":"th","marks":[{"type":"subsup","attrs":{"type":"sup"}}]},{"type":"text","text":" of subsequent month)"}]},{"type":"paragraph","content":[{"type":"text","text":"<EMI start date> (variable value)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"6","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":10},"content":[{"type":"paragraph","content":[{"type":"text","text":"Interest rate (%) and type (fixed or floating or hybrid)","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":5},"content":[{"type":"paragraph","content":[{"type":"text","text":"ROI; Fixed (To be kept configurable)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"7","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":15},"content":[{"type":"paragraph","content":[{"type":"text","text":"Additional Information in case of Floating rate of interest","marks":[{"type":"strong"}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":2,"rowspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Reference Benchmark"}]}]},{"type":"tableCell","attrs":{"rowspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Benchmark rate (%) (B)"}]}]},{"type":"tableCell","attrs":{"colspan":2,"rowspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Spread (%) (S)"}]}]},{"type":"tableCell","attrs":{"colspan":2,"rowspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Final rate (%) R = (B) + (S)"}]}]},{"type":"tableCell","attrs":{"colspan":5},"content":[{"type":"paragraph","content":[{"type":"text","text":"Reset periodicity"},{"type":"text","text":"2","marks":[{"type":"link","attrs":{"href":""}}]}]},{"type":"paragraph","content":[{"type":"text","text":"(Months)"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"Impact of change in the reference benchmark"}]},{"type":"paragraph","content":[{"type":"text","text":"(for 25 bps change in ‘R’, change in:"},{"type":"text","text":"3","marks":[{"type":"link","attrs":{"href":""}}]},{"type":"text","text":")"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"B"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"S"}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"EPI (₹)"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"No. of EPIs"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"NA"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"NA"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"NA"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"NA"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"NA"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"NA"}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"NA"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"NA"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"8","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":15},"content":[{"type":"paragraph","content":[{"type":"text","text":"Fee/ Charges","marks":[{"type":"strong"}]},{"type":"text","text":"4","marks":[{"type":"link","attrs":{"href":""}},{"type":"strong"},{"type":"subsup","attrs":{"type":"sup"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{"colspan":6},"content":[{"type":"paragraph","content":[{"type":"text","text":"Payable to the RE (A)"}]}]},{"type":"tableCell","attrs":{"colspan":6},"content":[{"type":"paragraph","content":[{"type":"text","text":"Payable to a third party through RE (B)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"One-time/ Recurring"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"Amount (in ₹) or"}]},{"type":"paragraph","content":[{"type":"text","text":"Percentage"}]},{"type":"paragraph","content":[{"type":"text","text":"(%) as applicable"},{"type":"text","text":"5","marks":[{"type":"link","attrs":{"href":""}}]}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"One- time/Recurring"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Amount (in ₹) or Percentage"}]},{"type":"paragraph","content":[{"type":"text","text":"(%) as applicable"},{"type":"text","text":"5","marks":[{"type":"link","attrs":{"href":""}},{"type":"subsup","attrs":{"type":"sup"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(i)"}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"Processing fees"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"One-time"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"<From Loan asset> (variable value)"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(ii)"}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"Credit Protect Insurance premium"}]},{"type":"paragraph","content":[{"type":"text","text":"(applicant + co-applicant)"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"One-time"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"<From Loan asset>"}]},{"type":"paragraph","content":[{"type":"text","text":"(variable value)"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(iii)"}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"Hospicash Insurance premium"}]},{"type":"paragraph","content":[{"type":"text","text":"(Applicant + Co-applicant)"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"One-time"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"<From Loan asset>"}]},{"type":"paragraph","content":[{"type":"text","text":"(variable value)"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(iv)"}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"PMJJBY insurance premium"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"One time"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"<From Loan asset> (variable value)"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(v)"}]}]},{"type":"tableCell","attrs":{"colspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"PMSBY insurance premium"}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"One time"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"<From Loan asset> (variable value)"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"9","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":5},"content":[{"type":"paragraph","content":[{"type":"text","text":"Annual Percentage Rate (APR) (%)","marks":[{"type":"strong"}]},{"type":"text","text":"6","marks":[{"type":"link","attrs":{"href":""}},{"type":"strong"},{"type":"subsup","attrs":{"type":"sup"}}]}]}]},{"type":"tableCell","attrs":{"colspan":10},"content":[{"type":"paragraph","content":[{"type":"text","text":" To be calculated and populated basis logic defined in "},{"type":"inlineCard","attrs":{"url":"https://fincap.atlassian.net/browse/ML-44353"}},{"type":"text","text":" "}]}]}]}]}
{adf}

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default","localId":"b32de8a4-4294-4797-b6ed-8034e7859460"},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"10","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Details of Contingent Charges (in ₹ or %, as applicable) (excluding GST)","marks":[{"type":"strong"}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(i)"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Penal charges, if any, in case of delayed payment"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"2% per month of unpaid EMI or (INR) 300, whichever is higher (To be kept configurable)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(ii)"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Other penal charges, if any"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Cheque bounce charges – INR 500"}]},{"type":"paragraph","content":[{"type":"text","text":"ECS Swap charges – INR 500 "}]},{"type":"paragraph","content":[{"type":"text","text":"(To be kept configurable)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(iii)"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Foreclosure charges (after Lock-in period of 180 days)"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"5% of Principal outstanding"}]},{"type":"paragraph","content":[{"type":"text","text":"(% to be kept configurable)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(iv)"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Part-Payment Charges"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"4% of Principal outstanding"}]},{"type":"paragraph","content":[{"type":"text","text":"(% to be kept configurable)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"(v)"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Overdue Handling Charges"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"orderedList","attrs":{"order":1},"content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"INR 750 where notice has been delivered at communication address and paper publication is not required"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"INR 1700 where no notice has been delivered at communication address and paper publication is being done"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"INR 300 charge for sending notice over preceding points 1 & 2"}]}]},{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"INR 200 charge for sending loan recall notice over and above preceding points 1 & 2"}]}]}]},{"type":"paragraph","content":[{"type":"text","text":"(Content to be kept configurable)"}]}]}]}]}
{adf}

Note:

# Disbursal Date, Loan Tenure, Pre-EMI amount, Insurance Fee, Processing Fee, Annual Percentage Rate (APR), stamp duty (wherever applicable) and Net Disbursal Amount shall be communicated at the time of disbursal. 
# If loan disbursal is between 1st to 20th of the month (M0), 1st EMI starts from immediate next month (M1), but if loan disbursal is after 20th of the month (M0), then 1st EMI starts from subsequent to immediate next month (M2).
# Pre-EMI amount, if applicable, is computed from disbursal date till the commencement of the 1st EMI on pro-rata basis.
# Pre-EMI, if applicable will be deducted from the disbursal amount at the time of disbursement.
# EMI will be due between 2nd to 10th of every month
# Repayment schedule will be available post disbursal

(Content to be kept configurable)

*Part 2 (Other qualitative information)*

|1|Clause of Loan agreement relating to engagement of recovery agents relating to|Clause 16 (To be kept configurable)
Max character limit: 200|
|2|Clause of Loan agreement grievance redressal mechanism which details|Clause 21 (To be kept configurable)
Max character limit: 200|
|3|Phone  number  and  email  id of  the nodal grievance redressal officer^7^|[pno@idfcfirstbank.com|mailto:pno@idfcfirstbank.com]
1800 209 9771 
(Kept configurable)
Max character limit: 200|
|4|Whether the loan is, or in future maybe, subject to transfer to other REs or securitisation (Yes/ No)|Yes(To be kept configurable)|



                                                                                                                                                     *ANNEXURE B*

                                          *lllustration for computation of APR for Retail and MSME loans*

|S.No|Parameter|Details|
|1|Sanctioned Loan amount (in Rupees) ( Sl no. 2 of the KFS template – Part 1|<Sanctioned loan amount to be populated>|
|2|Loan Term (in years/ months/ days) (Sl No.4 of the KFS template – Part 1)|<Loan tenure in months>|
|a)|No. of instalments for payment of principal, in case of non-equated periodic loans|“-”|
|b)|Type of EPI 
Amount of each EPI (in Rupees) and                                          nos. of EPIs (e.g., no. of EMIs in case of monthly     instalments)
 (Sl No. 5 of the KFS template – Part 1)|<Monthly EMI Amount> 
Tenure in months|
|c)|No. of instalments for payment of capitalised interest, if any|-|
|d)|Commencement of repayments, post sanction (Sl No. 5 of the KFS template – Part 1)|30 days (To be kept configurable)|
|3|Interest rate type (fixed or floating or hybrid) (Sl No. 6 of the KFS template – Part 1)|Fixed (To be kept configurable)|
|4|Rate of Interest (Sl No. 6 of the KFS template – Part 1)|Sl. No 6 of KFS template|
|5|Total Interest Amount to be charged during the entire tenor of the loan as per the rate prevailing on sanction date (in Rupees)|Sum of Interest in Repayment schedule + Pre-EMI|
|6|Fee/ Charges payable (in Rupees)|Sum of all charges from Annexure A (Excluding Pre-EMI)|
|A|Payable to the RE (Sl No.8A of the KFS template-Part 1)|Sl. No 8 A of KFS template part 1|
|B|Payable to third-party routed through RE (Sl No.8B of the KFS template – Part 1)|Sl. No 8 B of KFS template Part 1|
|7|Net disbursed amount (1-6) (in Rupees)|1-6|
|8|Total amount to be paid by the borrower (sum of 1 and 5) (in Rupees)|Sum of 1 and 5 in table|
|9|Annual Percentage rate- Effective annualized interest rate (in percentage)10 (Sl No.9 of the KFS template-Part 1)|Sl No.9 of the KFS template-Part 1|
|10|Schedule of disbursement as per terms and conditions|Detailed schedule to be provided (To be kept configurable)|
|11|Due date of payment of instalment and interest|DDMMYYYY|

*Repayment Schedule (To be generate basis APR calculation sheet* [[ML-44353] APR Calculator - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44353]) 

|*Instalment No.*|*Outstanding Principal (in Rupees)*|*Principal (in Rupees)*|*Interest (in Rupees)*|*Instalment (in Rupees)*|
|1|20,000|720|250|970|
|2|19,280|729|241|970|
|3|18,552|738|232|970|
|4|17,814|747|223|970|
|5|17,067|756|213|970|
|6|16,310|766|204|970|
|7|15,544|775|194|970|
|8|14,769|785|185|970|
|9|13,984|795|175|970|
|10|13,189|805|165|970|
|11|12,384|815|155|970|
|12|11,569|825|145|970|
|13|10,744|835|134|970|
|14|9,909|846|124|970|
|15|9,063|856|113|970|
|16|8,206|867|103|970|
|17|7,339|878|92|970|
|18|6,461|889|81|970|
|19|5,572|900|70|970|
|20|4,672|911|58|970|
|21|3,761|923|47|970|
|22|2,838|934|35|970|
|23|1,904|946|24|970|
|24|958|958|12|970|

*N.B.*

# The “Key Facts Statement” section should also include the content mentioned as “Part 1”; “Part 2” and “Repayment Schedule” respectively in above format
# In the above format, field values which are marked in angular brackets <> are variable values, to be populated as per the mentioned details within the angular bracket
# The data presented in “Repayment Schedule” is only for representation purpose, it should be populated as per calculation for the particular loan (Calculator attached)

*Attachments for reference purpose:*

* Key Fact Statement document
* Rural MEL and PL application forms respectively
acceptance: # Given that mentioned changes are done, when Application Form document is generated against a LAN, then the Application Form should have the “Key Facts Statement” section with the content as mentioned in description
# Given that mentioned changes are done, when Application Form document is generated against a LAN, then the “Key Facts Statement” section should be added in the location as mentioned in description 

key: ML-44353
summary: APR Calculator
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Document Generation

*Sub-stage :* Document Generation Pending

*Proposed:*

The APR Calculation to be done basis the calculator attached below:

[^APR Calculator_Final.xlsx]

*N.B.* 

# In the given calculator, “Other Charges” refer to sum total of all charges mentioned in Part 1 clause 8 of Key Facts Statement except for processing fees, in %
# In the given calculator, PF % to be referred as maintained against particular scheme

The Annual Percentage Rate (APR) calculated basis the attached calculator to be utilized for stamping the value against the field in Sr. No. 9 named as “*Annual Percentage Rate (APR) (%)*”.



Note: GST is not included as part of APR calculation [~accountid:633fe428f568615bdc811e0d] [~accountid:60a75ab82009f10068dc8e18] 
acceptance: # Given that mentioned changes are done, when Application Form is generated, then SFDC should be able to calculate the APR % basis the calculator attached in the description

key: ML-44340
summary: Applicant Detail Entry screen handling for Repeat Loans
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Applicant Detail Entry

*Sub-stage :* Applicant Detail Entry Pending

*Applicable BU:* Rural MEL Repeat, Rural PL Repeat

*Proposed:*

In Repeat loans, when user has edited or entered the income value against the field named “Declare Total Annual Income” as per the details mentioned in [[ML-44333] Total Annual Income Declaration field for Repeat loans - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44333], then SFDC should be able to validate that the value entered against the said field is not more than 2,50,000.

The validation to be built on “Next” button available on the UI at the bottom of the page in “Applicant Detailed Entry” stage as highlighted in “red” against below screenshot:

!image-20240522-095205.png|width=1600,height=381,alt="image-20240522-095205.png"!

Once the user clicks on “Next” button, SFDC should be able to validate the value entered against the field named “Declare Total Annual Income”.

If the value is more than 2,50,000, user should be shown a toast message stating “PAN is mandatory when Total Annual Income is more than Rs 2,50,000” (Content to be kept configurable)

Post showing the toast message, user should be able to modify the income value against the field named “Declare Total Annual Income” and proceed as per process.

*Note:* 

# The validation amount of 2,50,000 to be kept configurable.
# No validation to be applied for the value entered against field named “Declare Total Agriculture Annual Income”
acceptance: # Given that mentioned changes are done, when user has edited or entered the income value against the field named “Declare Total Annual Income” as per the details mentioned in [[ML-44333] Total Annual Income Declaration field for Repeat loans - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-44333] and clicked on “Next” button available on the UI at the bottom of the page, then SFDC should be able to validate that the value entered against the said field is not more than 2,50,000
# Given that mentioned changes are done, the content of error toast message and validation amount are kept configurable

key: ML-44333
summary: Total Annual Income Declaration field for Repeat loans
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Applicant Detail Entry

*Sub-stage :* Applicant Detail Entry Pending

*Applicable BU:* Rural MEL Repeat, Rural PL Repeat

*Proposed:*

In Repeat Loans two fields named “Declare Total Annual Income (Excluding Agri Income)” and “Declare Total Agriculture Annual Income” to be available on the UI, when user clicks the “Form 60” check box available on the UI. The field should be available on the UI in the location highlighted as “red” box in below screenshot:

!image-20240522-080912.png|width=1386,height=198!

The field should be available only when user clicks on “Form 60” check box.

*Data Population Logic against the field named “Declare Total Annual Income” in Repeat Loans”:*

+_Scenario 1_+

In base loan, if an income value is already available against the fields named “Declare Total Annual Income” and “Declare Total Agriculture Annual Income” as per the requirement and validation mentioned in [https://fincap.atlassian.net/browse/ML-41007|https://fincap.atlassian.net/browse/ML-41007|smart-link] and [https://fincap.atlassian.net/browse/ML-46074|https://fincap.atlassian.net/browse/ML-46074|smart-link] respectively, then same should be auto populated in editable format for repeat loan against the fields as mentioned above in “Applicant Detailed Entry” stage.

The user should be able to edit the value in case of any changes.

+_Scenario 2_+

In base loan, if there is no value against the field named “Declare Total Annual Income”and “Declare Total Agriculture Annual Income”, then in repeat loan the said fields should be available to the user as “blank” in “Applicant Detailed Entry” stage as mentioned above.

The user should be able to enter the value in numerical format against the said field.

*Note:* 

# “Scenario 2” to be applicable for cases where base loan has been created prior to deployment of [https://fincap.atlassian.net/browse/ML-41007|https://fincap.atlassian.net/browse/ML-41007|smart-link]
# In repeat loans, when user adds a new Co-Applicant then, user is re-directed to the consent screen and as per existing process “Declare Total Annual Income” and “Declare Total Agriculture Annual Income” fields should be visible to the user in the consent screen and validations should be applicable as per the logic mentioned in  [https://fincap.atlassian.net/browse/ML-41007|https://fincap.atlassian.net/browse/ML-41007|smart-link] and [https://fincap.atlassian.net/browse/ML-46074|https://fincap.atlassian.net/browse/ML-46074|smart-link] respectively. In such cases the above-mentioned scenario 1 or scenario 2 shall not be applicable
acceptance: # Given that mentioned changes are done, when in Repeat loans “Applicant Detailed Entry” stage user selects “Form 60” check box, then the field named “Declare Total Annual Income (Excluding Agri Income)” and “Declare Total Agriculture Annual Income” should be available to the user on the UI
# Given that mentioned changes are done, when income value is already available against the field named “Declare Total Annual Income (Excluding Agri Income)” and “Declare Total Agriculture Annual Income” as per the requirement and validation mentioned in [https://fincap.atlassian.net/browse/ML-41007|https://fincap.atlassian.net/browse/ML-41007|smart-link] and [https://fincap.atlassian.net/browse/ML-46074|https://fincap.atlassian.net/browse/ML-46074|smart-link] , then same should be auto populated in editable format for repeat loan against the field as mentioned in description and user should be able to edit the said field
# Given that mentioned changes are done, when there is no value against the field named “Declare Total Annual Income (Excluding Agri Income)” and “Declare Total Agriculture Annual Income”, then in repeat loan the said field should be available to the user as “blank” in “Applicant Detailed Entry” stage as mentioned in description and user should be able to edit the said field
# Given that mentioned changes are done, when in repeat loans, users add a new co-applicant, then the existing validations mentioned in [[https://fincap.atlassian.net/browse/ML-41007|https://fincap.atlassian.net/browse/ML-41007|smart-link] should be applicable for the new co-applicant in consent screen

key: ML-44327
summary: Relationship with Applicant field configuration change
description: Below Values to be removed from “Relationship with Applicant” field in Reference details section custom metadata for MEL and PL: 

# Spouse 
# Children 
# Parent 
# Relative 
# Sibling 
acceptance: Given that Relationship with Applicant field drop-down is selected in MEL or PL journeys, values mentioned in description should not be visible. 

key: ML-44303
summary: MEL PM Swanidhi scheme loan amount change
description: MEL PM Swanidhi scheme loan amount to be updated to 50000 in custom metadata. 
acceptance: MEL PM Swanidhi scheme loan amount to be updated to 50000 in custom metadata. 

key: ML-43929
summary: KYC Document type field stamping logic change for SKYC and CKYC cases
description: *Applicable BU*: All BU

*Process Flow*:

# If SKYC/CKYC is successful and customer makes edit to only populated POI data in Applicant screen due to which POI capture becomes mandatory then KYCDocumentType to be passed as D in FinnOne submit API request
# If SKYC/CKYC is successful and customer makes edit to only populated POA data in Applicant screen due to which POA capture becomes mandatory then KYCDocumentType to be passed as D in FinnOne submit API request
# If SKYC/CKYC is successful and customer makes edit to populated POI and POA data in Applicant screen due to which POI and POA capture becomes mandatory then KYCDocumentType to be passed as D in FinnOne submit API request

*Note*:

# The stamping as per logic mentioned above to be done for KYC Document Type field in SFDC and passed in KYCDocumentType tag in FinnOne submit API request.
# This logic is applicable only to FinnOne submit request, SFDC field stamping should not be impacted
# Above logic is applicable for Top up Journey as well 
# CKYC change not applicable to Gold
acceptance: # Given that SKYC/CKYC is successful and customer makes edit to only populated POI data in Applicant screen due to which POI capture becomes mandatory then KYCDocumentType to be passed as D in FinnOne submit API request
# Given that SKYC/CKYC is successful and customer makes edit to only populated POA data in Applicant screen due to which POA capture becomes mandatory then KYCDocumentType to be passed as D in FinnOne submit API request
# Given that SKYC/CKYC is successful and customer makes edit to populated POI and POA data in Applicant screen due to which POI and POA capture becomes mandatory then KYCDocumentType to be passed as D in FinnOne submit API request

*Note*:

# The stamping as per logic mentioned above to be done for KYC Document Type field in SFDC and passed in KYCDocumentType tag in FinnOne submit API request.
# This logic is applicable only to FinnOne submit request, SFDC field stamping should not be impacted
# Above logic is applicable for Top up Journey as well 
# CKYC change not applicable to Gold

key: ML-43927
summary: KYC Document type field stamping logic change for EKYC cases
description: *Applicable BU*: All BU

*Process Flow*:

# If EKYC is successful and customer makes edit to only populated POI data in Applicant screen due to which POI capture becomes mandatory and POI uploaded is Aadhar then KYCDocumentType to be passed as BE in FinnOne submit API request
# If EKYC is successful and customer makes edit to only populated POA data in Applicant screen due to which POA capture becomes mandatory and POA uploaded is Aadhar then KYCDocumentType to be passed as BE in FinnOne submit API request
# If EKYC is successful and customer makes edit to both populated POI & POA data in Applicant screen due to which POI & POA capture becomes mandatory, when POI & POA uploaded is Aadhar then KYCDocumentType to be passed as BE in FinnOne submit API request
# If EKYC is successful and customer makes edit to only populated POI data in Applicant screen due to which POI capture becomes mandatory and POI uploaded is any document other than Aadhar then KYCDocumentType to be passed as D in FinnOne submit API request
# If EKYC is successful and customer makes edit to only populated POA data in Applicant screen due to which POA capture becomes mandatory and POA uploaded is any document other than Aadhar then KYCDocumentType to be passed as D in FinnOne submit API request
# If EKYC is successful and customer makes edit to both populated POI & POA data in Applicant screen due to which POI & POA capture becomes mandatory, when POI/POA or  both POI & POA uploaded is any document other than Aadhar then KYCDocumentType to be passed as D in FinnOne submit API request

Note: 

The stamping as per logic mentioned is applicable only to FinnOne submit API request
acceptance: # Given that EKYC is successful and customer makes edit to only populated POI data in Applicant screen due to which POI capture becomes mandatory and POI uploaded is Aadhar then KYCDocumentType to be passed as BE in FinnOne submit API request
# Given that EKYC is successful and customer makes edit to only populated POA data in Applicant screen due to which POA capture becomes mandatory and POA uploaded is Aadhar then KYCDocumentType to be passed as BE in FinnOne submit API request
# Given that EKYC is successful and customer makes edit to both populated POI & POA data in Applicant screen due to which POI & POA capture becomes mandatory, when POI & POA uploaded is Aadhar then KYCDocumentType to be passed as BE in FinnOne submit API request
# Given that EKYC is successful and customer makes edit to only populated POI data in Applicant screen due to which POI capture becomes mandatory and POI uploaded is any document other than Aadhar then KYCDocumentType to be passed as D in FinnOne submit API request
# Given that EKYC is successful and customer makes edit to only populated POA data in Applicant screen due to which POA capture becomes mandatory and POA uploaded is any document other than Aadhar then KYCDocumentType to be passed as D in FinnOne submit API request
# Given that EKYC is successful and customer makes edit to both populated POI & POA data in Applicant screen due to which POI & POA capture becomes mandatory, when POI/POA or both POI & POA uploaded is any document other than Aadhar then KYCDocumentType to be passed as D in FinnOne submit API request

key: ML-43749
summary: Validation to ensure users make 1 Account Aggregator attempt
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow:*

* When user lands on the Perfios screen, then user should be able to see the three cards related to Account Aggregator, E-Statement and Scanned Statement respectively
* Of these three cards, only Account Aggregator card should be enabled for the user and other two cards (i.e., E-Statement and Scanned Statement related cards) should remain disabled
* Once user lands on the Perfios screen, then along with the three cards, user should also see a static message placed above the cards (as highlighted in below screenshot). The static message should read “It is mandatory to attempt Account Aggregator process” (message to be kept configurable)

!image-20240627-112205.png|width=1512,height=410,alt="image-20240627-112205.png"!

* When user enters the Account Aggregator screen and continues by clicking the “Send Link” button, then SFDC should be able to verify the number of Account Aggregator attempts made by the user as per the logic mentioned in [[ML-43747] Handling for buttons available on Account Aggregator Screen - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-43747]
* When user has made 3 mandatory attempts (number of mandatory attempts to be kept configurable), then a button named “Proceed with Bank Statement” should be enabled on the UI
* Upon clicking the button named “Proceed with Bank Statement”, then user should be re-directed to the Perfios screen, where all the 3 cards related to Account Aggregator, E-Statement and Scanned Statement should get enabled and user should be able to proceed as per process by selecting any one card
* In case user encounters a technical error due to which the user is re-directed to Perfios screen as per the logic mentioned in [[ML-39437] S15-AA Functionality to Check Inbound Response Status - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-39437], then user should find the three cards namely Account Aggregator, E-Statement and Scanned Statement enabled, and user should be able to proceed by selecting any one card as per process
acceptance: # Given that mentioned changes are done, when user lands on the Perfios screen, then user should find only the Account Aggregator related card enabled and other two cards (i.e., E-Statement and Scanned Statement) should remain disabled
# Given that mentioned changes are done, when user lands on the Perfios screen, then user should be able to view a static message stating “It is mandatory to attempt Account Aggregator process” (message to be kept configurable) above the cards as mentioned in description
# Given that mentioned changes are done, when user enters the Account Aggregator screen and continues by clicking the “Send Link” button, then SFDC should be able to verify the number of Account Aggregator attempts made by the user as per the logic mentioned in [[ML-43747] Handling for buttons available on Account Aggregator Screen - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-43747]
# Given that mentioned changes are done, when user has made 3 mandatory attempts (number of mandatory attempts to be kept configurable), then a button named “Proceed with Bank Statement” should be enabled on the UI
# Given that mentioned changes are done, when user clicks on button named “Proceed with Bank Statement”, then user should be re-directed to the Perfios screen, where all the 3 cards related to Account Aggregator, E-Statement and Scanned Statement should get enabled and user should be able to proceed as per process by selecting any one card
# Given that mentioned changes are done, when user encounters a technical error due to which the user is re-directed to Perfios screen as per the logic mentioned in [[ML-39437] S15-AA Functionality to Check Inbound Response Status - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-39437], then user should find the three cards namely Account Aggregator, E-Statement and Scanned Statement enabled, and user should be able to proceed by selecting any one card as per process

key: ML-43747
summary: Handling for buttons available on Account Aggregator Screen
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow:*

+_Handling of “Bank Not Available” button_+ 

* In continuation to [[ML-29519] 3. Account Aggregator- AA eligible bank selection and UI handling - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-29519], when user clicks on “Bank Not Available” button, then user should be re-directed to the Perfios screen where all cards related to Account Aggregator, E-Statement and Scanned Statements respectively should be enabled to the user.
* Once user gets redirected to the Perfios screen, then user can proceed by clicking the “Select” button available on any of the cards. 
* After User clicks on SEND LINK button, the Bank Not Available button should get disabled to the User
* A new field named “Bank Not Available” to be created within the banking record available in Perfios Bank Details object
* When user clicks on the “Bank Not Available” button on UI, the said field named “Bank Not Available” should be stamped as “True”
* In case user proceeds by clicking “Send Link” button, then the field named “Bank Not Available” should be stamped as “False”

+_Additional handling for “Send Link” button_+

* When user clicks on the “Send Link” button, SFDC should be able to consider the same as 1 Account Aggregator attempt by the user against the particular bank selected from the drop down.
* The number of attempts made by the user for Account Aggregator against a particular bank should be stored against a field named “Account Aggregator Attempts” within “Banking Records” available in the “Perfios Banking Details” object in back end. 
* When user does not click on the Account Aggregator link for 24 hours, then “Send Link” button should be enabled on the UI post 24 hours [https://fincap.atlassian.net/browse/ML-33295|https://fincap.atlassian.net/browse/ML-33295|smart-link]
* Link gets expired post 24 hours if user does not actions on the same. The 24 hours to be kept configurable. [https://fincap.atlassian.net/browse/ML-33295|https://fincap.atlassian.net/browse/ML-33295|smart-link]
acceptance: # Given that mentioned changes are done, when user clicks on the “Bank Not Available” button, then user should be re-directed to the Perfios screen where all cards related to Account Aggregator, E-Statement and Scanned Statements respectively should be enabled to the user
# Given that mentioned changes are done, when user gets re-directed to the Perfios screen by clicking on “Bank Not Available” button, then user should be able to proceed by clicking the “Select” button available on any of the cards
# Given that mentioned changes are done, a new field named “Bank Not Available” is created within the banking records available in the Perfios Bank Details object
# Given that mentioned changes are done, when user clicks on the “Bank Not Available” button from the UI, then SFDC should stamp the field named “Bank Not Available” as “True”
# Given that mentioned changes are done, when user proceeds by clicking the “Send Link” button available on the UI, then the field named “Bank Not Available” should be stamped as “False”
# Given that mentioned changes are done, when user clicks on “Send Link” button, then “Bank Not Available” should get disabled
# Given that mentioned changes are done, when user clicks on the “Send Link” button, then SFDC should be able to consider the same as 1 Account Aggregator attempt by the user against the particular bank selected by the user from the available drop down
# Given that mentioned changes are done, when user clicks on the “Send Link” button, then SFDC should be able to store the number of attempts made by the user for Account Aggregator against a particular bank against a field named “Account Aggregator Attempts” within “Banking Records” available in the “Perfios Banking Details” object in back end
# Given that mentioned changes are done, when user clicks on SEND LINK button, then Bank Not Available button should get disabled to the User
# Given that mentioned changes are done, when user does not click on the Account Aggregator link for 24 hours, then “Send Link” button should be enabled on the UI post 24 hours [https://fincap.atlassian.net/browse/ML-33295|https://fincap.atlassian.net/browse/ML-33295|smart-link]
# Given that mentioned changes are done, when Link gets expired post 24 hours if user does not actions on the same. The 24 hours is kept configurable. [https://fincap.atlassian.net/browse/ML-33295|https://fincap.atlassian.net/browse/ML-33295|smart-link]

key: ML-43741
summary: Community page UI display basis Trans status API response
description: *User Role* : Customer 

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow:*

As a customer, the user should be able to see proper error screen on the community page, so that the user understands the issue and can share the error with IRO/MRO.

# If Trans status API returns a value {{"E_NO_ERROR"}} in {{errorCode}} tag then below below UI to be displayed:
!image-20240619-081510.png|width=323,height=572,alt="image-20240619-081510.png"!
N.B. Tick mark to be shown on green background

# If Trans status API returns any value other than {{"E_NO_ERROR"}} in {{errorCode}} tag then below below UI to be displayed:
## The details above Error code to be kept configurable
## Mapping for variable fields to be as per below: 


||*Field Name*||*Tag from Trans Status API to be mapped*||
|Error Code|{{errorCode}}|
|Transction ID|{{txnId}}|
|Perfios Transaction ID|{{perfiosTransactionId}}|

!image-20240515-102347.png|width=25%,alt="image-20240515-102347.png"!

# When the customer clicks on More Details CTA then popup should be displayed with the following details Bank name transaction, ID Perfios transaction ID, error code and error reason as per UI below

!image-20240515-103131.png|width=25%,alt="image-20240515-103131.png"!

# In cases where we get two or multiple error codes, scenarios where with the same transaction ID customer has done two or multiple different journeys, then UI to be displayed basis latest response. 

When the customer clicks on ok close CTA the community page should close

When the customer clicks on the CTA and there is any issue with the API callout, either unable to parse the response or response not received or any unknown error then display the default error screen to the customer

Similarly, if Transstatus API responds witha technical failure, i.e., ISSUCCESS tag is stamped as “False”, then customer should be shown the below UI

!image-20240515-102905.png|width=25%,alt="image-20240515-102905.png"!



When the customer clicks on the community page and the page has expired then the following screen has to be displayed with the text link expired



!image-20240515-103335.png|width=25%,alt="image-20240515-103335.png"!
acceptance: Given that the customer is in AA community screen and Trans status API response is received then the user should be able to see proper error screen on the community page for user to understand the issue and can share the error with IRO/MRO.

# If Trans status API returns a value {{"E_NO_ERROR"}} in {{errorCode}} tag then below below UI to be displayed:

!image-20240619-081526.png|width=323,height=572,alt="image-20240619-081526.png"!



# If Trans status API returns any value other than {{"E_NO_ERROR"}} in {{errorCode}} tag then below below UI to be displayed:
## The details above Error code to be kept configurable
## Mapping for variable fields to be as per below: 

||*Field Name*||*Tag from Trans Status API to be mapped*||
|Error Code|{{errorCode}}|
|Transction ID|{{txnId}}|
|Perfios Transaction ID|{{perfiosTransactionId}}|

!image-20240515-102347.png|width=25%,alt="image-20240515-102347.png"!

# When the customer clicks on More Details CTA then popup should be displayed with the following details Bank name transaction, ID Perfios transaction ID, error code and error reason as per UI below

!image-20240515-103131.png|width=25%,alt="image-20240515-103131.png"!

# In cases where we get two or multiple error codes, scenarios where with the same transaction ID customer has done two or multiple different journeys, please refer the latest one

When the customer clicks on ok close CTA the community page should close

When the customer clicks on the CTA and there is any issue with the API callout, either unable to parse the response or response not received or any unknown error then display the default error screen to the customer



!image-20240515-102905.png|width=25%,alt="image-20240515-102905.png"!



# When the customer clicks on the community page and the page has expired then the following screen has to be displayed (Content to be kept configurable):



!image-20240515-103335.png|width=25%,alt="image-20240515-103335.png"!

key: ML-43731
summary: Increase in timer duration for MEL+ SMS validity for SI SMS and SI OTP SMS
description: # *Post SI mandate confirmation “ I hereby”  currently OTP can be generated within 5 mins. This timer needs to be increased to 10 mins.*

 

# *Post OTP is triggered, the time limit to receive the OTP and enter it is to be increase to 5 minutes (currently 50 sec)*

This will be applicable for both Telecaller and Branch MEL+ journeys.
acceptance: Validity should be revised from:

# *5 mins to 10 mins : SI link and OTP generation.*
# *50 secs to 5 mins for OTP Validation for SI.*

key: ML-43663
summary: Handling of EUC Cases in 2nd attempt
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL, Rural MEL+, Rural MEL Repeat

*Device Compatibility* : Web / Mobile

*Stage:* Disbursed

*Sub-stage :* Disbursed

*Proposed:*

In continuation to [[ML-43655] Handling of EUC Cases in 1st attempt - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-43655] 

Post 14 days when a WIP EUC case gets re-assigned to the queue of the concerned user, then the user should be able to action on that case as part of 2nd attempt.

+_Scenario 1_+ _:-_

In 2nd attempt when user selects the option “Yes” from the drop down against the field named “Loan Purpose Met” and fills the details against all mandatory fields available to the user on UI as per the logic defined in [[ML-43615] Revised Logic for viewing fields in EUC Screen - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-43615] then the said case should be marked as “Closed”. (Such cases to be considered as completed and no further actionable is expected here)

+_Scenario 2_+ _:-_

In 2nd attempt if user marks the field named “Loan Purpose Met” as “No”, then following questionnaires along with the choice of answers should be visible to the user on the UI: 

|*Questionnaires*|*Choice of Answer*|
|Did the customer communicate the loan purpose and intended use accurately?|Yes / No|
|Was the customer counselled before disbursal on importance of End Use Check?|Yes / No|
|Does the customer understand they will be ineligible to avail business loans from IDFC First bank because of failure to use funds for loan purpose|Yes / No|

Questionaries to be available on UI as highlighted by “red” box in below screenshot:

!image-20240521-091225.png|width=1593,height=853!

*N.B.* The choice of answer should be available to the user on the UI against each question in the form of drop down

By default, the option should be “No” for all three questionaries 

User should be able to submit the EUC case after the three questions are answered with No (or) Yes

The questionnaires to be kept configurable such that same can be changed later stage without technical interventions.

Post answering the questionnaires successfully when user submits the case by clicking the “Submit” button, then the said case should be marked as “Closed”. (Such cases to be considered as completed and no further actionable is expected here)

When user selects marks the field named “Loan Purpose Met” as “No”, then PSL flag should be marked as “No” and when field named “Loan Purpose Met” is marked as “Yes”, then PSL flag should be marked as “Yes”

The above-mentioned questionnaires are required to be stored in back-end as per the field mapping and field stamping logic mentioned in the following chart within the EUC Case record:

|*Question*|*Field Mapping in back-end*|*Field Stamping*|
|Did the customer communicate the loan purpose and intended use accurately?|EUC_Q1|Yes / No - basis the option selected by the user on front end|
|Was the customer counselled before disbursal on importance of End Use Check?|EUC_Q2|Yes / No - basis the option selected by the user on front end|
|Does the customer understand they will be ineligible to avail business loans from IDFC First bank because of failure to use funds for loan purpose|EUC_Q3|Yes / No - basis the option selected by the user on front end|
acceptance: # Given that mentioned changes are done, when WIP EUC case gets assigned to user for 2nd attempt where user selects the option “Yes” from the drop down against the field named “Loan Purpose Met” and fills the details against all mandatory fields available to the user on UI as per the logic defined in [[ML-43615] Revised Logic for viewing fields in EUC Screen - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-43615] then the said case should be marked as “Closed”
# Given the mentioned changes are done, when WIP EUC case gets assigned to user for 2nd attempt where user selects the option “No” from the drop down against the field named “Loan Purpose Met”, then in such scenario user should be shown the list of questionnaires along with choice of answers as mentioned in description
# Given the mentioned changes are done, when WIP EUC case gets assigned to user for 2nd attempt where user selects the option “No” from the drop down against the field named “Loan Purpose Met” and user selects “Yes” or “No” as a choice of answer against all questionnaires, then “Submit” button should be enable on the UI and user should be allowed to submit the case by clicking on the “Submit” button
# Given the mentioned changes are done, when WIP EUC case gets assigned to user for 2nd attempt where user selects the option “No” from the drop down against the field named “Loan Purpose Met” and user submits the case by clicking on the “Submit” button post satisfactorily answering all the questionnaires, then said case should be marked as “Closed”
# Given that mentioned changes are done, When user selects marks the field named “Loan Purpose Met” as “No”, then PSL flag should be marked as “No” and when field named “Loan Purpose Met” is marked as “Yes”, then PSL flag should be marked as “Yes”
# Given that mentioned changes are done, when WIP EUC case gets assigned to user for 2nd attempt where user selects the option “No” from the drop down against the field named “Loan Purpose Met” and user submits the case by clicking on the “Submit” button post satisfactorily answering all the questionnaires, then the choice of answer selected by the user should be stored in back-end within EUC Case record as per the field mapping and logic mentioned in the description
# Given that mentioned changes are done, the questionnaires mentioned in description are kept configurable

key: ML-43655
summary: Handling of EUC Cases in 1st attempt
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL, Rural MEL+, Rural MEL Repeat

*Device Compatibility* : Web / Mobile

*Stage:* Disbursed

*Sub-stage :* Disbursed

*Proposed:*

+_Scenario 1_+ _:-_

Post loan is disbursed and EUC case is created, then in 1st attempt when user selects the option “Yes” from the drop down against the field named “Loan Purpose Met” and fills the details against all mandatory fields available to the user on UI as per the logic defined in [[ML-43615] Revised Logic for viewing fields in EUC Screen - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-43615] then the said case should be marked as “Closed”. (Such cases to be considered as completed and no further actionable is expected here)

+_Scenario 2_+ 

In 1st attempt if user marks the field named “Loan Purpose Met” as “No” and submits the same, then in such scenario the case should be kept open, and status should be marked as “In Progress”.

Such cases to be kept open for a period of 14 days from the date when user submits the case by selecting “No” as an option against the field named “Loan Purpose Met” and for this period of 14 days, the said case should not be visible to the user in their queue.

No. of days i.e.,”14” should be kept configurable.

Post completion of 14 days, this case should be available in the queue such that the concerned user can execute the said case through second attempt [[ML-43663] Handling of EUC Cases in 2nd attempt - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-43663].

The number of attempts should be stored at applicant level against a field name “EUC Attempts”
acceptance: # Given that mentioned changes are done, when user makes the first attempt to execute the EUC case by selecting the option “Yes” from the drop down against the field named “Loan Purpose Met” and fills the details against all mandatory fields available to the user on UI as per the logic defined in [[ML-43615] Revised Logic for viewing fields in EUC Screen - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-43615] then the said case should be marked as “Closed”
# Given that mentioned changes are done, when user makes the first attempt to execute the EUC case by selecting the option “No” from the drop down against the field named “Loan Purpose Met” and submits the same, then in such scenario the case should be kept open and the status should be marked as “In Progress”
# Given that mentioned changes are done, when a EUC case is marked as “WIP”, then such cases should be kept open for a period of 14 days and same should not be visible on user’s queue during this period
# Given that mentioned changes are done, when a “WIP” cases has completed the period of 14 days, then such cases to be visible in the concerned user’s queue such that same can be executed by the user through the second attempt
# Given that mentioned changes are done, the no. of days “14” to be kept configurable 

key: ML-43615
summary: Revised Logic for viewing fields in EUC Screen
description: *User Role* : IRO/MRO

*Applicable BU:* Rural MEL, Rural MEL+, Rural MEL Repeat

*Device Compatibility* : Web / Mobile

*Stage:* Disbursed

*Sub-stage :* Disbursed

*Current:*

As per current process when user selects “Yes” as an option from the dropdown available against field named “Loan Purpose Met” then mandatory field named “Proof of EUC” is made available to the user on the UI where user has to upload the proof of EUC document.

Other mandatory fields are available to the user on the EUC screen basis the logic defined in [[ML-11336] New fields to be created to capture URC details - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-11336].

*Proposed:*

The field named “Proof of EUC” should not be shown to the user on UI irrespective of the option selected by the user from the dropdown available against fields named “Loan Purpose Met” and “Eligible for URC” respectively.

Mandatory URC related fields to be available for the user on UI as per the revised logic mentioned below:

|*Loan Purpose Met*|*Eligible for URC*|*URC No.*|*URC Generation date*|*Upload URC Certificate*|
|No|No|Not visible|Not visible|Not visible|
|Yes|No|Not visible|Not visible|Not visible|
|Yes|Yes|Mandatory|Mandatory|Visible|

 *Field Visibility logic on UI:* 

When user lands on EUC screen, the user should be shown both “Loan Purpose Met” and “Eligible for URC” fields on the UI. 

However, only “Loan Purpose Met” field should be editable and “Eligible for URC” field should not be editable. 

In case user selects “Yes” as an option from the drop down against “Loan Purpose Met” field, the “Eligible for URC” field should become editable. 

When user selects “No” as an option from the dropdown available against field named “Loan Purpose Met”, then the field named “Eligible for URC” should be populated as “No” by default and user should not be able to edit the field named “Eligible for URC” without selecting the dropdown as “Yes” against the field named “Loan Purpose Met”.

*N.B.*

The “Submit” button should be enabled as per above grid and only if the mandatory inputs are entered by the user

*Note:*

# In case of CJ / Telecaller, the fields named “Eligible for URC” ;  “URC No.” and “URC Generation Date” should be auto populated from the base loan in editable format when the value against “Loan Purpose Met” field is marked as “Yes” in base loan
# In case these details are not available in base loan, then the fields should be available to the user on the UI as per the logic mentioned above and user should be able to fill the details
# In case of CJ / Telecaller, the fields named “URC No.” and “URC Generation Date” should not be shown to the user on UI when the “Loan Purpose Met” is selected as “No” in base loan. For this scenario, user should be shown “Loan Purpose Met” on UI pre-filled as “No” from base loan in editable form and as per above mentioned logic, “Eligible for URC” field should be populated as “No” in non-editable format, which can be edited once user selects “Yes” from drop down against “Loan Purpose Met” field
acceptance: # Given that mentioned changes are done, when user reaches the EUC screen, then the field named “Proof of EUC” should not be available to the user on UI irrespective of the option selected by the user from the dropdown available against fields named “Loan Purpose Met” and “Eligible for URC” respectively
# Given that mentioned changes are done, when user reaches the EUC screen, then mandatory URC related fields to be available for the user on UI as per the revised logic mentioned in the description
# Given that mentioned changes are done, when mandatory inputs are provided by the user against the fields which would be available on UI as per logic defined in description, then SFDC should enable the “Submit” button on the UI
# Given that mentioned changes are done, when “Loan Purpose Met” field is marked as “Yes” in base loan, then in CJ / Telecaller, the fields named “URC No.” and “URC Generation Date” should be auto populated from the base loan in editable format
# Given that mentioned changes are done, when “Loan Purpose Met” field is marked as “No” in base loan, then in CJ / Telecaller, the field named “Loan Purpose Met” should be pre-filled as “No” from base loan in editable form and as per logic mentioned in description, “Eligible for URC” field should be populated as “No” in non-editable format, which can be edited once user selects “Yes” from drop down against “Loan Purpose Met” field
# Given that mentioned changes are done, when these details are not available in base loan, then the fields should be available to the user on the UI as per the logic mentioned in description and user should be able to fill the details accordingly

key: ML-41976
summary: App/Co-app Geo Tag to be captured post eKYC
description: Proposed flow:

* SFDC should capture lat/lon for applicant and co-applicant from browser (post eKYC on SO app)
* User should get prompt on browser if “Location access” is not enabled by default
* SFDC should capture and pass geotags to FICO and PD app 
* SFDC should capture geo-tag from PD app and pass to FICO under seperate tags
* FICO to compare geotags and trigger L2 deviation 

acceptance: * SFDC should capture lat/long from browser with atleast 200 mtr accuracy for GPS/GLONASS (decimals in lat/lon)
* 


key: ML-41499
summary: Stamping of Total Annual Income in Form 60 Document
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Document Generation

*Sub-stage :* Document Generation Pending

*Applicable BU:* Rural MEL, Rural PL, Rural HL, Rural LAP, Gold Loan

*Proposed:*

The validation built in Loan Detailed Entry stage as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-41008|https://fincap.atlassian.net/browse/ML-41008|smart-link] should be removed.

When user selects the option of Form 60 radio button at the consent screen then Form 60 document is required to be generated.

+_Logic for stamping against field numbered 22 (a) in form 60 i.e., against “Agricultural Income (Rs)” field:_+

+_For Base Loan_+ (MEL, PL, HL, LAP, GL)- Once form 60 document is generated then SFDC should be able to stamp the income declared in consent screen against the field named Declare Total Agriculture Annual Income” by the user as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-46074|https://fincap.atlassian.net/browse/ML-46074|smart-link] and stamp the value against the field numbered 22 (a) i.e., against “Agricultural Income (Rs)” field in the Form 60 document as specified in below screen shot.

+_For MEL Repeat loans_+ - Once form 60 document is generated then SFDC should be able to stamp the income declared in “Applicant Detail Entry” stage against the field named “Declare Total Agriculture Annual Income” by the user as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-44333|https://fincap.atlassian.net/browse/ML-44333|smart-link] and stamp the value against the field numbered 22 (a) i.e., against “Agricultural Income (Rs)” field in the Form 60 document as specified in below screen shot.

!image-20240615-082802.png|width=882,height=82!

+_Logic for stamping against field numbered 22 (b) in form 60 i.e., against “Other than agricultural Income (Rs)” field:_+

+_For Base Loan_+ (MEL, PL, HL, LAP, GL) - Once form 60 document is generated then SFDC should be able to stamp the income declared in consent screen against the field named “Declare Total Annual Income” by the user as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-41007|https://fincap.atlassian.net/browse/ML-41007|smart-link] and stamp the value against the field numbered 22 (b) i.e., against “Other than agricultural income (Rs.)” field in the Form 60 document as specified in below screen shot.

+_For MEL Repeat loans_+ - Once form 60 document is generated then SFDC should be able to stamp the income declared in “Applicant Detail Entry” stage against the field named “Declare Total Annual Income” by the user as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-44333|https://fincap.atlassian.net/browse/ML-44333|smart-link] and stamp the value against the field numbered 22 (b) i.e., against “Other than agricultural income (Rs.)” field in the Form 60 document as specified in below screen shot.

!image-20240615-082848.png|width=882,height=82!
acceptance: # Given that the mentioned changes are done when form 60 document is generated for MEL, PL, HL, LAP or GL,SFDC should stamp the income declared in consent screen against the field named Declare Total Agriculture Annual Income” by the user as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-46074|https://fincap.atlassian.net/browse/ML-46074|smart-link] and stamp the value against the field numbered 22 (a) i.e., against “Agricultural Income (Rs)” field in the Form 60 document as specified in below screen shot.
# Given that mentioned changes are done when form 60 document is generated for MEL, PL, HL, LAP or GL, SFDC should stamp the income declared in consent screen against the field named “Declare Total Annual Income (Excluding Agri Income)” by the user as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-41007|https://fincap.atlassian.net/browse/ML-41007|smart-link] and stamp the value in the field numbered 22 (b) i.e., against “Other than agricultural income (Rs.)” field in the Form 60 document 
# Given that form 60 document is generated for MEL Repeat loan then SFDC should stamp the income declared in “Applicant Detail Entry” stage against the field named “Declare Total Agriculture Annual Income” by the user as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-44333|https://fincap.atlassian.net/browse/ML-44333|smart-link] and stamp the value against the field numbered 22 (a) i.e., against “Agricultural Income (Rs)” field in the Form 60 document as specified in below screen shot.
# Given that form 60 document is generated for MEL Repeat Loan then SFDC stamp the income declared in “Applicant Detail Entry” stage against the field named “Declare Total Annual Income” by the user as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-44333|https://fincap.atlassian.net/browse/ML-44333|smart-link] and stamp the value against the field numbered 22 (b) i.e., against “Other than agricultural income (Rs.)” field in the Form 60 document as specified in below screen shot.

key: ML-41492
summary: AA-Allowing user to enter other mobile number
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow:*

Once user enters the Account Aggregator screen, user should be able to view a field named “Mobile Number for Account Aggregator”.

This field value should be populated with the registered mobile number.

The field should be kept editable such that the user should be able to change the mobile number if required.

When user clicks on the “Send Link” button, the SENDSMS API should be triggered [[ML-29521] 5: Account Aggregator - Send Link Button - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-29521] to the mobile number mentioned against the above mentioned field.

The said field named “Mobile Number for Account Aggregator” should be available above the “Select Bank” field as highlighted with red box in below screenshot:

!image-20240521-091652.png|width=1593,height=806,alt="image-20240521-091652.png"!
acceptance: # Given that mentioned changes are done, when user enters the Account Aggregator screen, then user should be able to view the field named “Mobile Number for Account Aggregator”
# Given that mentioned changes are done, when user enters the Account Aggregator screen, then user should be able to view the registered mobile number against the field named “Mobile Number for Account Aggregator”
# Given that mentioned changes are done, when user enters the Account Aggregator screen, user should be able to edit the mobile number available in the field named “Mobile Number for Account Aggregator”
# Given that mentioned changes are done, when user clicks on the “Send Link” button, then SFDC should be able to trigger the SENDSMS API to the mobile number mentioned against the above mentioned field

key: ML-41008
summary: Calculation of annual income and total annual income at Income Details Section
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Loan Detail Entry

*Sub-stage :* Loan Detail Entry Pending

*Applicable BU:* Rural MEL, Rural MEL+, Rural MEL Repeat, Rural PL

*Proposed:*

+Annual Income Field+ - 

A new field named “Annual Income” to be added against each income type at the “Income Details” section in the above-mentioned stage and sub-stage.

Reference UI provided below:

!image-20240429-110759.png|width=1418,height=288,alt="image-20240429-110759.png"!

+_Logic for populating the “Annual Income” field against each Income Type:_+

The monthly income entered by the user should be multiplied by 12 and the calculated value should be auto-populated against the field named “Annual Income”.

This “Annual Income” value should be stamped in back end in the “Income Details” object against each income type record.

+Total Income Field+ -

A new field named “Total Income” to be added on the “Income Section” in the above-mentioned stage and sub-stage.

Reference UI provided below:

!image-20240429-111003.png|width=1295,height=458,alt="image-20240429-111003.png"!

+_Logic for populating the “Total Income” field:_+

The “Total Income” field should be populated as sum total of “Annual Income” for all income types *except for Agricultural Income* which is calculated as per above mentioned logic.

This “Total Income” value should be stamped in back end within the applicant object.

+Examples:+

* For Business Income, user enters “Monthly Income” value against existing field as Rs 1000, then basis the above mentioned logic “Annual Income” should be 1000*12 = 12000
* For Household Income, user enters “Monthly Income” value against existing field as Rs 2000, then basis the above mentioned logic “Annual Income” should be 2000*12 = 24000
* For Dairy Income, user enters “Animal” as Buffalo ; “Breed” as Hybrid ; “No. of Animals” as 2 and “Income per Animal” gets populated as Rs 6840 basis existing logic, then the monthly income gets calculated to Rs 13680. Hence, basis the above mentioned logic “Annual Income” should be 13680*12 = 164160
* So, the “Total Income” should be calculated as  - 12000+24000+164160 = 200160 and accordingly this value should be populated against the field named “Total Income”

+Validation to be applied on Total Income Field+

A validation to be built on “Total Income” field, such that when the value against the said field obtained basis the above mentioned logic is more than 2,50,000 (to be kept configurable) then SFDC should show an error message to the user stating “For Form 60, Total Income should not be more than 2,50,000” (the message content to be kept configurable).

This validation to be applicable only when user has selected the “Form 60” radio button on the consent screen.

*Note:* Post showing the error message, if the user does not change the income value, then user should not be proceed to next stage by clicking the “Next” button available at the bottom of the UI.
acceptance: # Given that mentioned changes are done, when user adds the income type in the “Income Details” section, then SFDC should show “Annual Income” field with value as per logic defined in description to the user
# Given that mentioned changes are done, when SFDC calculates the “Annual Income”, then basis the calculated annual income of each income type, SFDC should be able to calculate the “Total Income” and populate that value against the “Total Income” field on UI in the “Income Details” section
# Given that mentioned changes are done, when the “Total Income” value is calculated to be more than 250000, then SFDC should be able to apply the validation as mentioned above and show error message to the user
# Given that mentioned changes are done, when user closes the error message, then user should be allowed to edit / delete and enter new values against each income type
# Given that mentioned changes are done, the threshold value of 2,50,000 against the field named “Total Income” and the error message as mentioned in description are configurable such that same can be modified without any technical intervention

key: ML-41007
summary: Creation of Income Declaration Field at Consent Screen when user selects Form 60 in place of PAN - Handling for base loans of MEL / PL
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Applicant Detail Entry

*Sub-stage :* Applicant Detail Entry Pending

*Applicable BU:* Rural MEL, Rural PL

*Proposed:*

At consent screen, when user selects “Form 60” radio button in place of PAN, then a field should be available to the user with name “Declare Total Annual Income”.

This field should be available to the user below the “Date of Birth” field currently available on the UI.

!image-20240429-101347.png|width=1457,height=626,alt="image-20240429-101347.png"!

The field should accept numerical values only.

Post ticking the declaration check box on UI, then “Search” button is visible on the UI.

A validation to be built on this “Search” button, such that when the user clicks on this button, before initiating the KYC check process, SFDC should be able to validate that the value entered by the user against the field named “Declare Total Annual Income” is not more that 2,50,000 (to be kept configurable).

In case the user enters a value more than 2,50,000, then basis the above mentioned validation, SFDC should not initiate the KYC check process and show an error toast message to the user.

The error toast message should read “PAN is mandatory when Total Annual Income is more than Rs 2,50,000” (the message content to be kept configurable).

Post showing the said error toast message, user should be able to proceed with the journey by either selecting PAN or Form 60 radio button.

In case user selects Form 60 radio button again then process to be followed as mentioned above and in case user selects PAN radio button then process as-is process to be followed.

*N.B.* The value of this field should also be stamped at back-end within the applicant object.
acceptance: # Given that mentioned changes are done, when the user selects Form 60 radio button, then user should be show the field named “Declare Total Annual Income” on the UI below the existing “Date of Birth” field
# Given that mentioned changes are done, when the user enters the value in the field named “Declare Total Annual Income”, then SFDC should only accept numerical value against this field
# Given that mentioned changes are done, when user clicks on “Search” button from the UI, then SFDC should be able to validate the amount entered by the user against the field named “Declared Total Income” is not more that 2,50,000
# Given that mentioned changes are done, when user enters a value more than 2,50,000 against the field named “Declared Total Income”, then SFDC should show an error toast message stating “PAN is mandatory when Total Annual Income is more than Rs 2,50,000”
# Given that mentioned changes are done, when SFDC has showed the error toast message, then user should be able to proceed with the journey by either selecting PAN or Form 60 radio button as described in the description
# Given that mentioned changes are done, the validation value of 2,50,000 and error toast message are kept configurable such that same can be changed without any technical intervention

key: ML-40974
summary: Addition of two fields in Data Verification, Underwriter and DVOps stages respectively for Co-Applicant in HL and LAP 
description: *User Role* : IRO/MRO/BCM/DVOps user

*Device Compatibility* : Web

*Stage:* Data Verification / Underwriting /  Verification / DV Ops

*Sub-stage :* Data Verification Pending / Underwriting Pending / Verification Pending / Maker Pending / Checker Pending

*User Roles:* BCM user / DVOps User

*Applicable:* Rural HL

*Current:* Currently in HL for co-applicants the fields named “Employed With” is not available in Data Verification / Underwriting /  Verification / DV Ops stages respectively.

*Proposed:* “Employed With” field to be made available for Co-Applicants  in Data Verification / Underwriting /  Verification / DV Ops stages respectively.

The value against this field should be same as that entered by IRO user in Applicant Detailed Entry Stage [https://fincap.atlassian.net/browse/ML-28987|https://fincap.atlassian.net/browse/ML-28987|smart-link].

*Applicable:* Rural LAP

*Current:* Currently in LAP for co-applicants the fields named “Salary Mode” is not available in Data Verification / Underwriting /  Verification / DV Ops stages respectively.

*Proposed:* “Salary Mode” field to be made available for Co-Applicants in Data Verification / Underwriting /  Verification / DV Ops respectively.

The value against this field should be same as that entered by IRO user in Applicant Detailed Entry Stage [https://fincap.atlassian.net/browse/ML-28987|https://fincap.atlassian.net/browse/ML-28987|smart-link].

*Note:* 

# The fields should be in Read Only mode.
# These two fields should also be made applicable for applicant in Data Verification stage
acceptance: # Given that mentioned changes are done, when HL LAN reaches Data Verification / Underwriting /  Verification / DV Ops stages respectively, then the respective users should be able to view the “Employed With” field on UI under Co-Applicant with value stamped as per data entered by IRO user in Applicant Detailed Entry stage
# Given that mentioned changes are done, when LAP LAN reaches Data Verification / Underwriting /  Verification / DV Ops stages respectively, then the respective users should be able to view the “Salary Mode” field on UI under Co-Applicant with value stamped as per data entered by IRO user in Applicant Detailed Entry stage
# Given that mentioned changes are done, the said fields should also be visible on UI for applicants in Data Verification stage

key: ML-40905
summary: Addition of New Fields in Hub Ops Report
description: Following fields are required to be added to the existing report type - “Loan Application with Reporting Data”:

|*Field Name*|*Logic for data population*|
|Latest DVOPs Checker Landing time|Latest time when loan is submitted to checker|
|First DVOPs Checker Landing time|Initial time when loan is submitted to checker|
|Latest DVOPs Checker Start Date & Time|When user Assigns case for Last time|
|First DVOPs Checker Retrigger Date Time|First date and time when DVOps Checker retrigger|
|Latest DVOPs Checker Hold End Date Time|When user un-holds the case|

*Note* - The said report is attached with the story for reference
acceptance: # Given that mentioned changes are done, the fields mentioned in description are added to the existing report type - “Loan Application with Reporting Data”

key: ML-39437
summary: S15-AA Functionality to Check Inbound Response Status
description: *User Role* : IRO/MRO

*Device Compatibility* : Web

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Proposed:*

A button named “Check Status” to be enabled on the Account Aggregator related UI:

!image-20240611-085348.png|width=1297,height=246,alt="image-20240611-085348.png"!

Upon clicking the said button, SFDC should be able to verify the status of TransStatusAPI [https://fincap.atlassian.net/browse/ML-34633|https://fincap.atlassian.net/browse/ML-34633|smart-link] and post that should be able to verify the status of inbound response.

Handling for the “Check Status” button to be as per one of the below mentioned scenarios:

+_Scenario 1-_+

When TransStatusAPI has responded successfully, then SFDC should check the status of inbound response. If SFDC receives the inbound response successfully, then user should be re-directed to the Perfios screen where user should be able to view the “Banking” and “Banking Details” screen respectively and user should be allowed to proceed as per existing process.

+_Scenario 2 -_+

When TransStatusAPI responded with a failure or was not triggered initially, then when user clicks on “Check Status” button, SFDC should be able to identify the same and retrigger the TransStatusAPI again.

Post retriggering of TransStatusAPI: 

# If successful response is received, then SFDC should check the status of inbound response. When inbound response is received successfully, SFDC should re-direct the user to the Perfios screen where user should be able to view the “Banking” and “Banking Details” screen respectively as per existing process.
# When TransStatusAPI responds with a failure - _Handling 1_: If failure response is received, then SFDC should be able to identify the error value received against the tag named {{<Part errorCode=}}> 
## When TransStatus API responds with any one of the error values mentioned in the below chart against the tag named {{<Part errorCode=}}>, then SFDC should show the error toast message as provided in the said chart (all error toast messages provided in below chart to be kept configurable).
## Post showing the error toast message, “Check Status” button should get disabled and SFDC should mark the earlier link as expired and allow user to select bank name and send new link to the customer
## In this scenario, if user selects the same bank name as earlier, then SFDC should again create a new bank record with the same bank’s name in Perfios Bank Details object and allow the user to proceed as per process

|*Error (Value received against tag named* {{<Part errorCode=}}>*)*|*UC, PL DST/DSA/Telecaller Communication (Error Toast Message to be shown)*|
|E_OTHER|Some error has occurred in the Account Aggregator journey
Please resend a fresh AA link|
|E_USER_SESSION_EXPIRED|Customer did not take any action in Account Aggregator journey and session has expired
Please resend a fresh AA link and guide the customer|
|INVALID_REQUEST_TO_AA|There was some issue with the link shared previously with the customer
Please resend a fresh AA link|
|E_AA_OTHER|Some error has occurred in the Account Aggregator journey
Please resend a fresh AA link|
|E_AA_SESSION_EXPIRY|Customer might not have entered OTP received from Anumati (ANUMTI)
Please resend a fresh AA link and guide the customer|
|E_AA_USER_AUTHENTICATION_FAILED|There was some issue with the OTP validation which was received from Anumati (ANUMTI)
Please resend a fresh AA link|
|E_AA_USER_CANCELLED|Customer might have closed the browser or dropped off from the Account Aggregator journey
Please resend a fresh AA link and guide the customer|
|E_AA_ACCOUNT_NOT_DISCOVERED_AND_USER_CANCELLED|Please check with the Customer if they have given the mobile number which is linked with the customer's bank account
Please resend a fresh AA link with the updated mobile number|
|E_AA_ACCOUNT_NOT_DISCOVERED_DUE_TO_FIP_ERROR|There was some issue to find the bank accounts details for this transaction
Please resend a fresh AA link|
|ACCT_NOT_LINKED_DUE_TO_SESSION_TIMEOUT|Customer has not clicked on "Proceed" button and session has expired
Please resend a fresh AA link and guide the customer|
|E_AA_ACCOUNT_LINK_OTP_NOT_ENTERED_AND_SESSION_EXPIRY|Customer might not have entered the OTP received from the bank and session has expired
Please resend a fresh AA link and guide the customer|
|E_AA_ACCOUNT_LINK_OTP_AUTH_FAILED_AND_SESSION_EXPIRY|Customer might have faced an issue with validating the OTP received from the bank
Please resend a fresh AA link|
|E_AA_CONSENT_REJECTED|There was an issue with the Account Aggregator consent at the bank end
Please resend a fresh AA link|
|E_CONSENT_NOT_AVAILABLE_TO_AA|Some error has occurred in the Account Aggregator journey
Please resend a fresh AA link|
|DATAFETCH_ERROR|There was an issue retrieving the customer bank statement
Please resend a fresh AA link|
|E_AA_DATA_FETCH_REQUEST_DENIED|We have not received the account statement for the customer from the selected bank
Please resend a fresh AA link|
|E_AA_DATA_FETCH_NOTIFICATION_TIMEOUT|We have not received the account statement for the customer from the selected bank
Please resend a fresh AA link|
|E_FILE_UNSUPPORTED_FORMAT|There was some issue with the bank account report generated at Account Aggregator end
Please resend a fresh AA link|
|E_STATEMENT_ERRONEOUS_DATA|There was an issue with the Customer bank account report generated
Please resend a fresh AA link|
|E_STATEMENT_WRONG_INSTITUTION|There was an issue with the Customer bank account report generated
Please resend a fresh AA link|
|E_DATE_RANGE|There was an issue with the Customer bank account report generated
Please resend a fresh AA link|
|E_SYSTEM|There was some issue with the report generation or Account Aggregator journey
Please resend a fresh AA link after sometime|

# When TransStatusAPI responds with a failure - _Handling 2_: If failure response is received, then SFDC should be able to identify the error value received against the tag named {{<Part errorCode=}}> 
## When TransStatus API responds with any one of the error values mentioned in the below chart against the tag named {{<Part errorCode=}}>, then SFDC should show the error toast message as provided in the said chart (all error toast messages provided in above chart to be kept configurable)
## Post showing the error toast message, SFDC should redirect the user to the Perfios screen where all three cards (Account Aggregator, E-Statement and Scanned Statement) should be enabled, and user should be allowed to proceed by selecting any one card

|*Error (Value received against tag named* {{<Part errorCode=}}>*)*|*UC, PL DST/DSA/Telecaller Communication (Error Toast Message to be shown)*|
|E_NOT_ACCEPTED|The Account Aggregator response is not as per the IDFC FIRST bank policy
Please move ahead with the loan journey by uploading the bank statement|
|E_STATEMENT_NO_TRANSACTIONS|The Account Aggregator response is not as per the IDFC FIRST bank policy
Please move ahead with the loan journey by uploading the bank statement|
|E_AMOUNT_BALANCE_MISMATCH|The Account Aggregator response is not as per the IDFC FIRST bank policy
Please move ahead with the loan journey by uploading the bank statement|

+_Scenario 3 -_+

When TransStatusAPI has responded successfully but inbound response is not received within pre-defined time or is received with a technical failure, then user should be shown an error message stating, “Inbound response failed, please retry” (message to be kept configurable).

Post showing the error message, “Check Status” button should be replaced with “Retry” button on the UI and all other buttons should be disabled on the UI.

User should be provided with three attempts to click the retry button as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-26004|https://fincap.atlassian.net/browse/ML-26004|smart-link].

After clicking the “Retry” button, if inbound response is received successfully, then SFDC should re-direct the user to the Perfios screen where user should be able to view the “Banking” and “Banking Details” screen respectively.

If user exhausts the three attempts to click the “Retry” button, then user should be shown an error message stating “Account Aggregator process cannot be completed successfully” (message to be kept configurable) and user should be re-directed to the Perfios screen.

In such scenario, at backend field named “AA_Data_Fetch_Done__c” to be stamped as “False”.

Once user is re-directed to the Perfios screen, user should be allowed to proceed with any of the three options i.e., Account Aggregator, E-Statement or Scanned Statement as per process.
acceptance: # Given that mentioned changes are done, when TransStatusAPI has responded successfully, then SFDC should check the status of inbound response and if inbound response is received successfully, then user should be re-directed to the Perfios screen where user should be able to view the “Banking” and “Banking Details” screen respectively and user should be allowed to proceed as per existing process
# Given that mentioned changes are done, when TransStatusAPI responded with a failure or was not triggered initially, then when user clicks on “Check Status” button, SFDC should be able to identify the same and retrigger the TransStatusAPI again and post re-triggering the said API:
## If successful response is received, then SFDC should check the status of inbound response. When inbound response is received successfully, SFDC should re-direct the user to the Perfios screen where user should be able to view the “Banking” and “Banking Details” screen respectively and user should be allowed to proceed as per existing process
## If failure response is received, then SFDC should proceed as per the two handlings mentioned in description (under scenario 2) and show an error toast message to the user basis the chart mentioned in the description. The error would be received in the response against the tag named {{<Part errorCode=}}>
# Given that mentioned changes are done, when TransStatusAPI has responded successfully but inbound response is not received within pre-defined time or is received with a technical failure, then user should be shown an error message stating, “Inbound response failed, please retry”
# Given that mentioned changes are done, when error message has been shown to the user, then “Check Status” button should be replaced with “Retry” button on the UI and all other buttons should remain disabled on UI
# Given that mentioned changes are done, when “Retry” button is showed to the user, then user should be provided with three attempts to click the retry button as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-26004|https://fincap.atlassian.net/browse/ML-26004|smart-link]
# Given that mentioned changes are done, when user exhausts the three attempts to click the “Retry” button, then user should be shown an error message stating “Account Aggregator process cannot be completed successfully” (message to be kept configurable) and user should be re-directed to the Perfios screen
# Given that mentioned changes are done, when inbound response is received with failure, then at backend field named “AA_Data_Fetch_Done__c” to be stamped as “False”
# Given that mentioned changes are done, when inbound response is received with failure and user is re-directed to the Perfios screen, then user should be allowed to proceed with any of the three options i.e., Account Aggregator, E-Statement or Scanned Statement as per process

key: ML-39435
summary: AA Reporting - Error Codes
description: +Requirement+

# When SFDC initiate TransStatusAPI then all Success and failure responses should be stamped on Loan application Report object

When SFDC initiate TransStatusAPI then all Success and failure responses should be stamped on Loan application Report object

|Sr#|Scenario|API Tag|Sample Response|SFDC Object|Field NAme|Values to be stamped|
|1|Single Error received|processing|Sample 1
 
<Status files="notavailable" parts="1" processing="completed" txnId="400401947587D14042023T1447"> <Part errorCode="E_AA_CONSENT_REJECTED" perfiosTransactionId="CTT81681463840398" reason="CONSENT_REJECTED" status="failure"/> </Status>
 
Sample 2
 
<Status files="available" parts="1" processing="completed" txnId="400401922050D14042023T1448"> <Part errorCode="E_NO_ERROR" perfiosTransactionId="PQCZ1681463946533" reason="" status="success"/> </Status>|*Perfios Bank Detail*|AA_Processing__c|For given sample value stamped will be "completed"
There should not be hardcoding value received in processing will be stamped|
|2|Single Error received|errorCode|Same as above|*Perfios Bank Detail*|AA_errorCode__c|For given sample value stamped will be "E_AA_CONSENT_REJECTED"
There should not be hardcoding value received in errorCode will be stamped|
|3|Single Error received|Reason|Same as above|*Perfios Bank Detail*|AA_Reason__c|For given sample value stamped will be "CONSENT_REJECTED"
There should not be hardcoding value received in reason will be stamped|
|4|Single Error received|Status|Same as above|*Perfios Bank Detail*|AA_Status__c|For given sample value stamped will be "success"
There should not be hardcoding value received in reason will be stamped|
|5|Different Structure|code|<Error> *<code>TransactionNotFound</code>* <message>We could not find the Perfios Transaction referred to by the Client</message> </Error>|*Perfios Bank Detail*|AA_errorCode__c|For given sample value stamped will be "*TransactionNotFound*"
There should not be hardcoding value received in code will be stamped|
|6|Different Structure|message|<Error> <code>TransactionNotFound</code> *<message>We could not find the Perfios Transaction referred to by the Client</message>* </Error>|*Perfios Bank Detail*|AA_Reason__c|For given sample value stamped will be "*We could not find the Perfios Transaction referred to by the Client*"
There should not be hardcoding value received in message will be stamped|
|7|Multiple errors received, Response should be stamped comma separated|errorCode|<Status files="notavailable" parts="2" processing="completed" txnId="400401920737D14042023T1255"> <Part *errorCode="E_USER_SESSION_EXPIRED"* perfiosTransactionId="73TP1681457113306" reason="Session expired." status="failure"/> <Part *errorCode="E_NOT_ACCEPTED"* perfiosTransactionId="33Y81681457139885" reason="Insufficient data to generate report. There are no transactions for Jan 2023" status="failure"/> </Status>|*Perfios Bank Detail*|AA_errorCode__c|For given sample value stamped will be "*E_USER_SESSION_EXPIRED , E_NOT_ACCEPTED*"
There should not be hardcoding value received in errorCode will be stamped|
|8|Multiple errors received, Response should be stamped comma separated|Reason|Same as above|*Perfios Bank Detail*|AA_Reason__c|For given sample value stamped will be "Session expired., Insufficient data to generate report. There are no transactions for Jan 2023"
There should not be hardcoding value received in Reason will be stamped|
|9|Multiple errors received, Response should be stamped comma separated|Status|Same as above|*Perfios Bank Detail*|AA_Status__c|For given sample value stamped will be "Failure , Failure"
There should not be hardcoding value received in Status will be stamped|

 

 
acceptance: # When SFDC call Transaction status API then response will be read and reason, errorcode, status etc should be stamped on above mentioned fields
# If Account aggregator initiated multiple times the latest values should be updated on mentioned fields
# In Point 2, if AA initiated again then all above fields should be stamped for latest AA and previously stamped values should become null or blank

key: ML-39434
summary: AA Reporting - Consent and Success
description: +Requirement+

# We need to stamp the below fields on Loan application object for Collection use case
## Consent registered successfully
## Data Fetched Successfully
# Refer below table

|*Sr. No.*|*Object*|*Field Name*|*API Name*|*Possible Values*|*Field Logic*|*Comments*|
|1|*Perfios Bank Details*|AA Consent status|AA_Consent_Done_c|TRUE/FALSE|* If during   customer AA workflow , Customer has crossed the Bank account OTP and Consent registered with Perfios then mentioned filed will be stamped as true
* This value will be derived basis Error code and status received in Transaction Status API
* These conditions will be configurable and if new error codes introduced then same should be added to stamp value
* Configuration should be created and if Error code in SVCNAME__c = 'TransStatusAPI' api is any value from below list then TRUE will be stamped else false
* E_AA_DATA_FETCH
E_AMOUNT_BALANCE_MISMATCH
E_DATE_RANGE
E_FILE_UNSUPPORTED_FORMAT
E_NO_ERROR
E_NOT_ACCEPTED
E_OTHER
E_STATEMENT_WRONG_INSTITUTION
E_SYSTEM
* 
*# Above table should be configurable
*# Patrh to read this value is as follows for errorCode="E_NO_ERROR"
* <payload><apiVersion>2.1</apiVersion><vendorId>capitalFirst</vendorId><txnId>0390494991D05102022T1608</txnId></payload>
<Status files="available" parts="1" processing="completed" txnId="0390494991D05102022T1608">
  <Part errorCode="E_NO_ERROR" perfiosTransactionId="YN4K1664966335653" reason="" status="success"/>
</Status>
 
*# If multiple attempts are there then latest value should get updated
*# Same Value need to be created in person Account object and should be maintained there|This is required by BIU and collection for Loan management|
|2|*Perfios Bank Details*|AA Consent status|AA_Consent_Done_c|TRUE/FALSE|On disbursal when Person account is updated same value will be updated from loan application object. If on latest loan AA_Consent__c is not null then same should get updated on Person account|Sample record for person account
001Bk0000051YEq|
|3|*Perfios Bank Details*|AA DataFetch status|AA_DataFetch_Done_c|TRUE/FALSE|* If in 'TransStatusAPI' api we received no error the this value will be set as TRUE else False
* Patrh to read this value is as follows for errorCode="E_NO_ERROR"
* <payload><apiVersion>2.1</apiVersion><vendorId>capitalFirst</vendorId><txnId>0390494991D05102022T1608</txnId></payload>
<Status files="available" parts="1" processing="completed" txnId="0390494991D05102022T1608">
  <Part errorCode="E_NO_ERROR" perfiosTransactionId="YN4K1664966335653" reason="" status="success"/>
</Status>
*# Value will beE_NO_ERROR
*# This will be configurable|This is required by BIU and collection for Loan management|

 



Error Code and Consent Success/Data Fetch Success Mapping:

|*Errors*|*AA Consent Status*|*AA Data fetch Status*|
|E_AA_OTHER|No|No|
|E_AA_CONSENT_REJECTED|No|No|
|E_AA_USER_CANCELLED|No|No|
|E_AA_SESSION_EXPIRY|No|No|
|E_AA_INVALID_HANDLE|No|No|
|E_OTHER|No|No|
|E_USER_CANCELLED|No|No|
|E_USER_SESSION_EXPIRED|No|No|
|E_AA_DATA_FETCH_REQUEST_FAILED|Yes|No|
|E_AA_DATA_FETCH_REQUEST_TIMEOUT|Yes|No|
|E_AA_DATA_FETCH_REQUEST_DENIED|Yes|No|
|E_AA_DATA_FETCH_NOTIFICATION_TIMEOUT|Yes|No|
|E_AA_DATA_FETCH|Yes|No|
|E_AMOUNT_BALANCE_MISMATCH|Yes|No|
|E_NOT_ACCEPTED|Yes|No|
|E_STATEMENT_NO_TRANSACTIONS|Yes|No|
|E_DATE_RANGE|Yes|No|
|E_FILE_UNSUPPORTED_FORMAT|Yes|No|
|E_STATEMENT_ERRONEOUS_DATA|Yes|No|
|E_STATEMENT_WRONG_INSTITUTION|Yes|No|
|E_NO_ERROR|Yes|Yes|
acceptance: # All fields mentioned in above table should work as per Field Logic
# If multiple attempts are there then latest value should be available
# Above fields should be available for Reporting
# Above fields should be available on Reporting profile, admin profiles, policy user  profiles

key: ML-39420
summary: AA Reporting - Eligibility and Success
description: # We need to stamp the below fields for Perfios AA,Netbanking and Estatement as logic mentioned below
# These fields should be available for reporting on *Loan Application Report or Loan Application* objects

 

|*Sr. No.*|*Object*|*Field Name*|*API Name*|*Possible Values*|*Field Logic*|
|1|*Perfios Bank Detail*|Eligible for AA|Eligible_AA_WF__c|TRUE/FALSE|* If Selected Bank is part of AA Eligible Bank, then this flag needs to be set as TRUE
* This need to be checked on Entire Bank Masters (Perfios Bank Metadata where AA eligibility flag maintained) if AA Eligible marked as true then same value to be set a s TRUE on Bank Name selection|
|2|*Perfios Bank Detail*|Account Aggregator Bank Name|Account_Aggregator_Bank_Name__c| |* Bank Name selected under Point 1 should be populated here.
* Once AA option selected and User moved ahead after selecting bank name same should remain stamped and should not get overwritten or blank in any condition
* If on retry new bank name selected then only this value should get updated
* IRO/MRO has sent the AA link then this value cant be null|
|3|*Perfios Bank Detail*|AA Attempted SFDC|AA_Attempted_SFDC__c|Date/Time|* If Bank Name is selected and "Send Link" is clicked, then Date/Time should get stamped
* If multiple attempts are there then value should get overwritten with latest values/attempt|
|4|*Perfios Bank Detail*|AA Attempt Count|AA_Attempt_Count__c|1 or 2 or 3 etc|* Every Incremental attempt on SFDC should get updated|
|5|*Perfios Bank Detail*|AA Attempted Customer|AA_Attempted_Cust__c|Date/Time|* If Customer clicks on the link and community page invoked, then Date/Time should get stamped
* If multiple attempts are there then value should get overwritten with latest values/attempt|
|6|*Perfios Bank Detail*|AA Cust Attempt Perfios|AA_Cust_Attempt_per__c|Date / Time|* If the Customer clicks on the "Proceed" button on the landing Page, then Date/Time should get stamped
* If same action is performed on multiple times through multiple SMS then value should get overwritten with latest values/attempt|
|7|*Perfios Bank Detail*|yearMonthTo|yearMonthTo__c| |* To be stamped for all modes (e-statement upload)
* The value sent basis logic maintained in metadata in Upload start
* If Multiple attempts are there then overwrite values and stamp latest|
|8|*Perfios Bank Detail*|yearMonthFrom|yearMonthFrom__c| |* To be stamped for all modes (e-statement upload)
* The value sent basis logic maintained in metadata in Upload start
* If Multiple attempts are there then overwrite values and stamp latest|
|9|*Perfios Bank Detail*|DIY_yearMonthTo|DIY_yearMonthTo__c| |* To be stamped for all modes ( Netbanking/AA)
* The value sent basis logic maintained in metadata in Upload start or MicrositeAPI
* If Multiple attempts are there then overwrite values and stamp latest|
|10|*Perfios Bank Detail*|DIY_yearMonthFrom|DIY_yearMonthFrom__c| |* To be stamped for all modes ( Netbanking/AA)
* The value sent basis logic maintained in metadata in Upload start or MicrositeAPI
* If Multiple attempts are there then overwrite values and stamp latest|
|11|*Perfios Bank Detail*|PERFIOS_STATEMENTDONE_APP|INBOUND_PERFIOS_BANKING| |* If INBOUND_PERFIOS_BANKING is received then this Flag needs to be set as TRUE
* This is for all workflow where we receive 
INBOUND_PERFIOS_BANKING|
|12|*Perfios Bank Detail*|Is Digitization Successful|Is_digi_success__c|true/false|* This flag should be set as TRUE whenever API of 
INBOUND_PERFIOS_BANKING for AA, Net Banking and estatement is successful
* i.e. we have received bank statement analysis and not any error in response|
acceptance: # All fields mentioned in above table should work as per Field Logic
# If multiple attempts are there then latest value should be available
# Above fields should be available for Reporting
# Above fields should be available on Reporting profile, admin profiles, policy user  profiles

key: ML-39412
summary: Sanction Insurance screen Live Loan notification change
description: *Stage*: Sanction

*Sub-Stage*: Insurance Pending

*Reference UI:*

!image-20240423-132855.png|width=843,height=386,alt="image-20240423-132855.png"!

*Process Flow*:

# When IRO user is in Sanction stage & Insurance Pending sub-stage,  In Insurance Details screen header the current notification in [https://fincap.atlassian.net/browse/ML-9299|https://fincap.atlassian.net/browse/ML-9299|smart-link] upon click of Next button when the CRN of Primary applicant in loan application has more than 1 Live loan including current loan to be replaced with below notification: 

“Customer has following active loans:”

||*LAN No*||*Stage*||*Sub-Stage*||*Live Loan*||*Owner Name*||
| | | | | |

# Stage, Sub-stage, Live Loan, Owner Name to be displayed against the LAN no in above format.
# The Base Loan and the Current Loan no should be excluded from this notification.
acceptance: # Given that IRO user is in Sanction stage & Insurance Pending sub-stage, In Insurance Details screen header the current notification in [https://fincap.atlassian.net/browse/ML-9299|https://fincap.atlassian.net/browse/ML-9299|smart-link] upon click of Next button when the CRN of Primary applicant in loan application has more than 1 Live loan including current loan to be replaced with below notification:

“Customer has following active loans:”

||*LAN No*||*Stage*||*Sub-Stage*||*Owner Name*||
| | | | |

# Given that the user has clicked on Next button when CRN of primary applicant in loan application has more than 1 live loan including current loan then Stage, Sub-stage and Owner Name to be displayed against the LAN no in above format.

Note:

# The Base Loan and the Current Loan no should be excluded from this notification.
# The Validations in [https://fincap.atlassian.net/browse/ML-9299|https://fincap.atlassian.net/browse/ML-9299|smart-link] to remain as is, this change is applicable only to the Notification displayed. 

key: ML-39099
summary: Loan Stage and Sub-Stage validation for already Disbursed Loans
description: *Business Case:* When the loan stage is updated as “Disbursed” in the loan journey, then front end user should not be able to update the LAN to any other stage or sub-stage.

*Proposed:* 

Post user submits the loan to Finone, API is triggered for submitting the loan data to Finone.

Subsequently, the loan stage and sub-stage is updated in SFDC to “Disbursed” basis the ODS sync.

In this point a validation to be built in SFDC, such that when loan stage and sub-stage is updated as “Disbursed” and the response from Finone submit API is received after a delay of more than 2 minutes, then SFDC should not modify the stage and sub-stage of the LAN again to “Finone” and “Submit to Finone” respectively basis the earlier triggered FinnOne submit API. 
acceptance: # Given that mentioned changes are done, when the loan stage is updated as “Disbursed” in SFDC basis syncing with ODS and Finone submit API responds after a delay of more than 2 minutes, then SFDC should not be able to update the LAN to any other stage or sub-stage

key: ML-39098
summary: Validation for manually updating Disbursed Date and Time
description: *Business Case:* To add a validation in SFDC for checking when disbursed date / time is getting update through a load file or at individual level no fields are missed to update. This is to be made applicable when non 

*Proposed:* 

Following validations to be added -

# When only Disbursed Date is being updated, then timestamp to be updated as 00:00:00 in Disbursed Date Time field
# When Disbursed Date Time field is being updated, then SFDC should truncate the timestamp and update the date only in Disbursed Date field
# In case neither Date nor Date Time values are available, then SFDC should be able to validate the same and show a generic error message to the user asking them to update the Date and Date Time fields. The content of this message should be kept configurable.
acceptance: # Given that mentioned changes are done, when only Disbursed Date is being updated, then timestamp to be updated as 00:00:00 in Disbursed Date Time field
# Given that mentioned changes are done, when Disbursed Date Time field is being updated, then SFDC should truncate the timestamp and update the date only in Disbursed Date field
# Given that mentioned changes are done, when user neither provides the Date nor the Date Time values, then SFDC should be able to validate the same and show a generic error message to the user asking them to update the Date and Date Time fields
# Given that mentioned changes are done, the generic error message is configurable and should be editable without any technical interventions.
# Given that mentioned changes are done, when L1 or system admin users update the date field, then SFDC should apply these validations mentioned in the description
# Given that mentioned changes are done, when Finone sync user updates the date field, then SFDC should not apply these validations mentioned in the description

key: ML-38009
summary: Handling of WIP Cases post deployment of Perfios Build
description: *Applicable* : MEL-PL-HL-LAP ( applicable schemes)

*Business Case:*

In case a LAN is created post Perfios build is deployed then Perfios stage should only be applicable to such LANs and not for LANs which were created prior to deployment of Perfios.

*Proposed:*

A validation to be built in SFDC that can compare the LAN creation date and the date on which Perfios is made applicable for all schemes.

Basis this validation, Perfios stage and its subsequent logics should only be applicable for cases where LAN creation date is post Perfios deployment date.

For cases where LAN creation date is prior to Perfios deployment date, then in such cases Perfios stage should not be applicable.

In such cases Perfios Screen [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link] & [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link] and the subsequent logics [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link] should not be applicable.

For LANs which have been re-triggered from Data Verification, Underwriting or DVOps stage and have LAN creation date prior to Perfios Deployment Date, then Perfios should not be made applicable in such scenario basis the validation mentioned above.

Similarly, for LANs which are currently in Applicant Detailed Entry stage and were created prior to Perfios deployment, then Perfios will not be applicable for such cases as well.

Any case where LAN creation date is post Perfios deployment date, then in such cases Perfios will be applicable as per the logics defined in [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link] irrespective of stage and sub-stage of that case. 
acceptance: # Given that mentioned changes are done, when Perfios is made applicable for all schemes, then SFDC should be able to validate the LAN creation date and Perfios deployment date.
# Given that mentioned changes are done, when LAN creation date is prior to Perfios deployment date, then Perfios related screen and logics should not be applicable for such cases.
# Given that mentioned changes are done, when a case is retriggered from Data Verification, Underwriting or DVOps stage post deploying Perfios, then SFDC should be able to apply the validation as mentioned in description and Perfios should not be applicable for such cases.
# Given that mentioned changes are done, when a case is in Applicant Detailed Entry Stage and Perfios is deployed at a date post the LAN creation date of such cases, then basis the validation mentioned in the description Perfios screen and logic should not be applicable for such cases.
# Given that mentioned changes are done, when a case is created post deploying Perfios, then in such cases Perfios should be made applicable as per the logics defined in [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link].
# Given that mentioned changes are done, when Perfios is disabled and enabled multiple times, then SFDC should be able to apply the validation based on latest enabling date.

key: ML-37490
summary: Turbo Integration with Telecaller Workflow
description: *Current:*

For MEL Top up loans, when an offer is created for a customer, telecaller users uses the associated offer ID from CRM to find the offer in SFDC.

The telecaller user takes the Associated Offer ID from CRM and then logs in SFDC to search the offer there through global search.

Once the user is able to identify the offer in SFDC, the request for top up MEL loan is processed by the user in the SFDC. 

*Proposed:*

When user clicks on the “Offer” button from CRM, then SSO should get triggered through Azzure.

Basis the Unique ID i.e., the Associated Offer ID available against the customer, user upon clicking the “Offer” button should land on the loan application screen or DDE screen through the SSO.

Once the user lands on the loan application or DDE screen, then user should follow the as-is process to create the MEL+loan for the customer.
acceptance: # Given that mentioned changes are done, when user clicks on the “Offer” button from CRM, then user should be redirected from CRM to SFDC through Azure SSO to land on the loan application or DDE screen.
# Given that mentioned changes are done, when user is redirected to SFDC loan application screen, then user should be able to process the MEL+ loan as per existing process.

key: ML-37459
summary: Live Loan Updation report for Manually upated LANs
description: New report titled “Live Loan Updation report” with below columns to be created:

* LAN no
* Business Unit
* Stage
* Sub-Stage
* Live Loan flag
* Disbursed Date
* Disbursed Date and Time
acceptance: # Given that the above report is created, mentioned columns should be visible on the report. 

key: ML-35227
summary: Multiple Browser Issue Handling
description: *Current:* In case of IRO / Telecaller / Customer Journeys, users are able to execute a single loan journey multiple times through multiple browsers while the loan is at different stage in each of the browsers.

*Proposed:* Validation should be built at SFDC end, such that when the user is executing a loan journey from one browser should not be able to execute a separate journey for the same loan by opening it in a different browser.

SFDC should allow the user to execute the loan journey in only one browser i.e., the initial browser. 

In case the user attempts to open the same loan parallelly in a different browser at the same time, then SFDC should restrict the user on accessing the loan in the subsequent browsers and show a generic error message to the user. 
acceptance: # Given that mentioned changes are done, when user attempts to open the same loan parallelly in a different browser at the same time, then SFDC should restrict the user on accessing the loan in the subsequent browsers and show a generic error message to the user.

key: ML-35226
summary: Stamping of Live Loan basis changes done to loan Stage and Sub-Stage
description: *Current:* When the loan stage is updated as “Cancel” or “Closed” then the “Live Loan” field is updated as “False” in the back end through a batch.

Subsequently, when the loan stage is updated to “Disbursed” or any other stage except for “Cancel” or “Closed”  stage through manual process or through integration user / ODS, then the “Live Loan” field is required to be updated as “True” in the back-end manually.

*Proposed:* Whenever the loan stage is changed to “Disbursed” or any other stage except for “Cancel” or “Closed” stage through manual process or through integration user / ODS, then the “Live Loan” field in the back end should be updated as “True”.
acceptance: # Given that mentioned changes are done, when the loan stage is updated to any stage except for “Cancel” or “Closed” stage, then the “Live Loan” field in the back-end should be updated as “True”.

key: ML-34675
summary: Turbo Integration for Tele-caller workflow 
description: nan
acceptance: nan

key: ML-34641
summary: Creation of Custom Report for User with Loan Application
description: New custom report to join “user” details and “loan application” objects.

 

Report should have the below fields/columns:

||*Fields to be added in report*||
|Loan Application ID|
|User Name|
|External code|
|Profile name|
|Stage|
|substage|
|Created by|
|created date|
|Disbursed date & time|
|is telecaller flow|
|Is telecaller drop off|
|drop-off reason|
|, adb flag|
|, adb failure reason|
|IRO name|
|IRO emp ID|
|Customer name|
|Workflow|
|Location|
|Branch|
|Loan amount|
acceptance: Given that Custom loan application report is created, it should have columns as mentioned in description. 

key: ML-34633
summary: S12-A: Account Aggregator - TransStatusAPI Trigger - Part 1
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow*:

Once transaction is completed, callback url (return url in the MicrositeNetbankingFetchAPI payload) is called, If the status under Part node is true, SFDC will call transaction status api and get success, txnId will be transaction id.

If the status received in the callback url is true, we directly call the transaction status API, below are the details follows:

SVCNAME : TransStatusAPI

*Request Structure:*

{noformat}<payload>
  <apiVersion>2.1</apiVersion>
  <vendorId>capitalFirst</vendorId>
  <txnId>90001667398D21022023T1004</txnId>
</payload>{noformat}

*Success Response:*

{noformat}<Status files="available" parts="1" processing="completed" txnId="90001667398D21022023T1004">
<Part errorCode="E_NO_ERROR" perfiosTransactionId="2P2R1676954100545" reason="" status="success"/>
</Status>{noformat}

*Failure Response*:

{noformat}<Status files="notavailable" parts="1" processing="completed" txnId="90001667398D20022023T1800">
<Part errorCode="E_AA_SESSION_EXPIRY" perfiosTransactionId="JZ461676896251359" reason="AA_PAGE_SESSION_TIMED_OUT" status="failure"/>
</Status>{noformat}

TransStatus Mule Endpoint URL{color:#403294} -{color}

[https://apiexts.uat.idfcfirstbank.com/sfdc-router/api/v1/txn/status|https://apiext.uat.idfcfirstbank.com/generic-stmt-analyzer/api/v1/txn/status]

Below 2 fields to be stamped.

AA_Consent_Done__c

AA_Data_Fetch_Done__c

Also attaching error code mapping sheet from the Jira mentioned in comment ML-39434 for consent and data fetch done. :
acceptance: # Given that transaction is completed when callback url (return url in the MicrositeNetbankingFetchAPI payload) is called, then the status under Part node is true, SFDC will call transaction status api and get success, txnId will be transaction id.

key: ML-34544
summary: Live Loan Updation report for Manual updation LANs
description: *Process Flow*: 

# SFDC should create a auto mailer report with below columns on a daily basis to fetch all LANs disbursed within a duration of 30 days (To be kept configurable) in Org 3 for which -Disbursed date and time field is blank and- Live loan flag is false:            

* LAN no 
* Business Unit 
* Stage
* Sub-Stage 
* Live Loan flag 
* Disbursed Date 
* Disbursed Date and Time 

2. The Auto mailer should be sent to list of Users maintained in custom label and should be kept configurable  
acceptance: # Given that LANs were transitioned to Stage and Sub-Stage Disbursed Disbursed in Rural Org within 30 days (Configurable) when Disbursed date and time field is blank and live loan field is stamped as false then SFDC should send automailer everyday to list of recipients maintained in custom label (To be kept configurable) 

key: ML-34358
summary: Changes in MEL Application Form
description: Following clauses are needed to be added as per the attached Application form of MEL in accordance with the new RBI Order and our Legal Team
acceptance: Given that mentioned changes are done, when the case is processed in MEL, the customer would be clearly able to know his/her rights and wont have to escalate further

key: ML-33298
summary: 10: Account Aggregator - Proceed Button: MicrositeNetbankingAPI triggers 
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow :*

!image-20240322-103336.png|width=534,height=470!

On clicking the “Proceed” button from the microsite page, MicroSiteNetbankingFetchAPI will be triggered.

*SVC Name -*  MicroSiteNetbankingFetchAPI

*Sample Request Structure -*

{
"yearMonthTo":"[https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link] 
"yearMonthFrom":"[https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link] 
"vendorID":"capitalFirst", //hardcoded
"txnId":"420358971908D09062023T1357", _Logic for Transaction ID -_ LAN+”D”+DDMMYYYY+”T”+*HHMM*
"transactionCompleteCallbackUrl":"<<[https://apiext.uat.idfcfirstbank.com/generic-stmt-analyzer/api/v1/perfios/txn/status</transactionCompleteCallbackUrl>",>|https://apiext.uat.idfcfirstbank.com/generic-stmt-analyzer/api/v1/perfios/txn/status%3C/transactionCompleteCallbackUrl%3E%22,%3E] // hardcoded
"returnUrl":"<[https://capitalfirst--org1uat.sandbox.my.site.com/perfios/s/bilpl?recordID=5npa2p7rHYIASoRDi0kqIB3F2YuvzkFkDKPl1LedBQ=<\![CDATA[&]]>>CHANNEL=SMS<\![CDATA[&]]>netbankFetch=true<\![CDATA[&]]>txnid=%s<\![CDATA[&]]>status=%s",|https://capitalfirst--org1uat.sandbox.my.site.com/perfios/s/bilpl?recordID=5npa2p7rHYIASoRDi0kqIB3F2YuvzkFkDKPl1LedBQ=%3C!%5BCDATA%5B&%5D%5D%3E%3ECHANNEL=SMS%3C!%5BCDATA%5B&%5D%5D%3EnetbankFetch=true%3C!%5BCDATA%5B&%5D%5D%3Etxnid=%25s%3C!%5BCDATA%5B&%5D%5D%3Estatus=%25s%22,] // Community URL
"productType":"variable", [https://fincap.atlassian.net/browse/ML-26511|https://fincap.atlassian.net/browse/ML-26511|smart-link] 
"orgName":"Org Name" //to be changed as required
"mobileNumber":"Variable",
"institutionId":"998", [https://fincap.atlassian.net/browse/ML-22565|https://fincap.atlassian.net/browse/ML-22565|smart-link] 
"employmentType":"Salaried", [https://fincap.atlassian.net/browse/ML-26511|https://fincap.atlassian.net/browse/ML-26511|smart-link] 
"employerName":"Variable",
"destination":"accountAggregator", //hardcoded
"[customerEmail":"vtrdcr@gmail.com|mailto:customerEmail%22:%22vtrdcr@gmail.com]", (to be kept blank if email ID is not provided by the customer)
"acceptancePolicy":"atLeastOneTransactionPerMonthInRange", //one transaction in range
"crnNumber":"87276872633" (CRN Number tagged against the LAN to be passed here)
}

The above tags to be encrypted using AES 128 from the SFDC end and is sent to Microservices via Mule

*Sample Encrypted Request -*

{
"yearMonthTo":"BRGuVUwjouPulDfSu/E4GA==",
"yearMonthFrom":"NptzQfktg7osNyhShwCa6w==",
"vendorID":"qFFsYqJozXxDXsuYyfhLgw==",
"txnId":"WRavpsGScwqLaYCaofSMq1l81XtxNkk0xM50j3eu+Do=",
"transactionCompleteCallbackUrl":"t60YIfiALnBfnRYU5Xra735JEcQWXtge7KYvOwfYUzUSa713OEPs+J8DLbytFb/sa9O05mrA0+vEY73l4pSiXh6QL03WDYhuy2Yziea9zfOYZOHqaPdY85en6DatnfYH",
"returnUrl":"zAQ8tBrguI5iizvaoyI5yZTnqEvQw0uVXvis+uz1QbJwBnDfs+1V69WDCOvSEFkMP+PDd6GzhjNstmpFxZoUdKEn8flfHm+KTe+qXr04FzQ5RekG+8u/5J3WTiwKmrUijqR3L6wQ50sm2gf6/lhKxF4YkMg60n1Jy0gQ4MBnhqIBQ9Rl8FrWGyUIoksbayIwCEdBQfW5mBLpa5B/8iujWgu3dxJMwWR+f1758ew5C5AgFi5TolKbXSf9j4VvbgBHofggI6YO5c8OZbsq0iHbM2MF3lKDbiH5DlXN2fGz1zA=",
"productType":"pl",
"orgName":"Org1qa"
"mobileNumber":"9685481180",
"institutionId":"8hMHS/jYa3gbwErv2D6XGQ==",
"employmentType":"riY5zDay1VaWul6nXiAP1w==",
"employerName":"V+2bdfYT7YuCvdy74Xb8wpUmIrzInq8xt+FW/2jP6RA=",
"destination":"accountAggregator",
"customerEmail":"6cqPcNZJzrdLFyYZmqWdVJCr9O9TI4qnXf80N23FHiE=",
"acceptancePolicy":"OFPqoGXuKwzCBRVOjQebdwgJERn8rEGWb+u9tq3Kq8Ft4uzQblJF3Y0QAaAROkOh",
"crnNumber":"87276872633"
}

*Sample Success Response -*

<html>
        <head>
        </head>
        <body>
              <form name="myform"  method="post"
              action ="[https://demo17.perfios.com/KuberaVault/insights/start|https://demo17.perfios.com/KuberaVault/insights/start]">

{noformat}          <input type="hidden" name = "payload" 
          value="<payload>
                  <emailId>649b6f5a1ef89792e7a02f3c2780c02ee351ed44481bf88fd2aeac89fd3ddf342c5c4e894a4d0d76f20413aaa2215c80e579ca8aa66f653cdbfb51709a73bdcab646d2913ebd7c393cde790386362611e29bc8805a8d9676fecaa97b6f7f51307220852ac9ec1c846a88091b0a2bcf13b696d6c8e59bad46461aa3494940f176421d04c51468b55b0e5871a8bff4ba726f544d16b50cdd8b6c7ca0e8e31fff04265fac3b386e4467228a514e4a6371114afd66395b6959f80a5627e6e9cca1d552446cb7c2eff1024c193ed1792d0efc22fd19dc101c442e468df83002de9acb9775b193cab5a2971619c90ccbccd9a38f32f716348d4867e39f279b367c9a2f</emailId>
                  <vendorId>capitalFirst</vendorId>
                  <destination>accountAggregator</destination>
                  <txnId>420358971908D09062023T1357</txnId>
                  <apiVersion>2.1</apiVersion>
                  <yearMonthFrom>2023-03</yearMonthFrom>
                  <yearMonthTo>2023-06</yearMonthTo>
                  <returnUrl><https://capitalfirst--org1uat.sandbox.my.site.com/perfios/s/bilpl?recordID=5npa2p7rHYIASoRDi0kqIB3F2YuvzkFkDKPl>  1LedBQ=<![CDATA[&]]>CHANNEL=SMS<![CDATA[&]]>netbankFetch=true<![CDATA[&]]>txnid=%s<![CDATA[&]]>status=%s</returnUrl>
                  <transactionCompleteCallbackUrl><<https://apiext.uat.idfcfirstbank.com/generic-stmt-analyzer/api/v1/perfios/txn/status</transactionCompleteCallbackUrl>>
                  <employmentType>Salaried</employmentType>
                  <productType>pl</productType>
                  <employerName>ADANI> ENTERPRISES LIMITED</employerName>
                  <institutionId>998</institutionId>
                  <mobileNumber>9685481180</mobileNumber>
                  <crnNumber>87276872633</crnNumber>
                  </payload>"/>
          
          <input type="hidden" name = "signature" 
          value="0bf11a6430b40bc49c7af227a3535c6fadda64631261faa15fec62ec5ca4104830f31c2aae14fb6f997a94960301a6658a3aa8d3d3c0a0e5a9af23d42f466aeeb854c9652216eedf7f374ac01c9a5be7c866bf3cc2e93da980e5d1370ea0aa3e02286dfd9bba63a52dc18074a3bcac22f1aa1443da7bb4aee8e0f5a44554222a849fa6c0771ea3d1b843caaa4823bf3c776b792d47f8f48bbd8be58abce4379c4e727125a345d578ee8088b1c621d608da605081997bdb871e9ae120352bb7e8fb769af9c50e8e58a813eb51478caf55dea90e51da317cc0804e5e9cd0acb56b066a9775270b5165a4ddde5520786a54b39b3906957d56b7cef1bc86b5cb4208"/>
    
    </body>{noformat}

</html>
        <script>document.myform.submit();</script>

“YearMonthFrom” and “YearMonthTo” logic to be kept same as mentioned in [https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link].
acceptance: # Given that mentioned changes are done, when the user clicks on “Proceed” button, then SFDC should be able to trigger MicrositeNetbankingAPI.
# Given that mentioned changes are done, when MicrositeNetbankingAPI is triggered from SFDC, then same should be shared to Mulesoft in AES 128 encrypted format.
# Given that mentioned changes are done, when MicrositeNetbankingAPI is triggered from SFDC, then the request and response should be as mentioned in the description.

key: ML-33297
summary: 9: Account Aggregator - BrowserStartAPI Integration
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow:*

When the customer is re-directed to the microsite by clicking on the link, BrowserStartAPI to be triggered.

SFDC will call *BrowserStartAPI* and send *unique transaction id* which will get inserted in Database

*SVC Name -* BrowserStartAPI

*Sample Request Headers -*

Content-Type: application/xml; charset=UTF-8

Content-Length: 55

LoanNo: XX (Loan No. - Variable Field)

orgName: {ORGNAME}

productType: [https://fincap.atlassian.net/browse/ML-26511|https://fincap.atlassian.net/browse/ML-26511|smart-link]

 clientId: SFDC

|*Sr#*|*Tag*|*Expected value*|
|1|Content-Type|application/xml; charset=UTF-8|
|2|Content-Length|55|
|3|LoanNo|<Variable> (Loan No.)|
|4|orgName : {ORGNAME}|Basis the Orgname configuration at Mule end
// {color:#0747a6}Refer digital perfios integration for Org name of different env{color}|
|5|productType|BU wise basis [https://fincap.atlassian.net/browse/ML-26511|https://fincap.atlassian.net/browse/ML-26511|smart-link]|
|6|clientId|SFDC|

*Sample Request -*

<payload><txnId>420358971908D09062023T1357</txnId></payload>

_Logic for Transaction ID -_ LAN+”D”+DDMMYYYY+”T”+*HHMM*

*Sample Response -*

<Response>
  <Status>Success</Status>
  <message>Record inserted into database successfully</message>
</Response>

*Sample Failure Responses*

cvc-complex-type.2.4.d: Invalid content was found starting with element 'txnId'. No child element is expected at this point.

HTTP Method get not allowed for : /netbanking/browser-start

503 bad gateway during Mule downtime

Generic Error Message to be displayed in case of Browser Start API Failure
acceptance: # Given that mentioned changes are done, when the user is re-directed to the microsite, then SFDC should be able to trigger “BrowserStartAPI”.
# Given that mentioned changes are done, when BrowserStartAPI is triggered, then request and response should be as described in the description.

key: ML-33296
summary: 8: Account Aggregator - Redirection to community page
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow:*

Once customer receives the link for Account Aggregator via SMS and clicks the same, then customer should be re-directed to a microsite page where the bank name earlier selected by the user as mentioned in [https://fincap.atlassian.net/browse/ML-29519|https://fincap.atlassian.net/browse/ML-29519|smart-link] will be populated along with LAN.

_Reference UI from other Orgs:_

!image-20240322-092158.png|width=534,height=470!

*Note -* 

# UI/UX to be reference as per above screenshot.
# In case the link expires and user clicks on the same expired link again, then user should be shown a generic error message stating that link has expired.
# User should be able to click on the SMS link only once, post the click the SMS link should be de-activated and customer should not be able to re-click on the link.
acceptance: # Given that mentioned changes are done, when the customer clicks on the Account Aggregator link from the SMS, then the customer should be redirected to a microsite page.
# Given that mentioned changes are done, when the customer reaches the microsite page, then the customer should be able to view the name of the bank that was earlier selected by the user.
# Given that mentioned changes are done, then UI/UX should be as mentioned in the description.

key: ML-33295
summary: 7: Account Aggregator - Cancel Link & Timer changes
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow:*

On click of “Send link” button SENDSMS API to be triggered to send the link to the customer.

Once the SENDSMS API responds successfully a timer should be started on front-end for 30 seconds. 

“Send Link” button should be kept frozen until the completion of timer. 

On completion of 30 seconds the “Cancel Link” button should be enabled and this timer will be applicable for all the account aggregator attempts.

The time of 30 seconds should be kept configurable such that same can be changed at later stage without any technical interventions.

Number of attempts to click on “Send Link” button should not be limited. 

+_The link sent to customer should get expired under following scenarios:_+

* 24 hours post sending the link to the customer.
* When customer reopens the link after clicking on the “Proceed” button[https://fincap.atlassian.net/browse/ML-33298|https://fincap.atlassian.net/browse/ML-33298|smart-link].
* If the user clicks on the “Cancel Link” button.

+_Upon clicking the “Cancel Link” button, following actions to happen:_+

* The previous link sent to customer should get expired.
* “Send Link” button should get re-enabled.

*Note:* The link sent to the customer should be disabled once customer clicks on the same.
acceptance: # Given that mentioned changes are done, when the user clicks on “Send Link” button, then the timer should be shown to the user in the front-end.
# Given that mentioned changes are done, when the user clicks on “Send Link” button, then the said button should get disabled unless the time is exhausted or the user clicks on “Cancel Link” button.
# Given that mentioned changes are done, then the timer to be kept configurable.
# Given that mentioned changes are done, then the number of attempts to click the “Send Link” button should not be restricted for the user.
# Given that mentioned changes are done, when the customer receives the links, then same to get expired under following scenarios:
## 24 hours post sending the link to the customer.
## When customer reopens the link after clicking on the “Proceed” button[https://fincap.atlassian.net/browse/ML-33298|https://fincap.atlassian.net/browse/ML-33298|smart-link].
## If the user clicks on the “Cancel Link” button.
# Given the mentioned changes are done, when the user clicks on “Cancel Link” button, then following actions to be executed:
## The previous link sent to customer should get expired.
## “Send Link” button should get re-enabled.
# Given the mentioned changes are done, when the customer clicks on the link, then same should get disabled.

key: ML-30769
summary: 1. Account Aggregator: Logic to determine Perfios applicability for applicants and co-applicants respectively
description: *User Role* : IRO/MRO

*Device Compatibility* : Web

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow:*

Basis the logics defined in [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link] user should be able to identify if Perfios is mandatory or optional for applicant and co-applicant respectively.

Once an applicant is identified to be Perfios Mandatory or Optional then the same should be indicated through a graphical icon as documented in [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link]. Please refer below screenshot for the same.

!68dd36fc-6aef-4d08-9351-ebe2a16d65a5#media-blob-url=true&id=392b2a08-1962-4c1f-9aeb-253bee56a85c&collection=&contextId=1062753&height=158&width=1119&alt=|width=1399,height=198!

User should be able to navigate in each applicant tab and select the desired Account Aggregator card and proceed ahead with the Account Aggregator process as defined in [https://fincap.atlassian.net/browse/ML-29518|https://fincap.atlassian.net/browse/ML-29518|smart-link] when an applicant is identified to be Perfios Mandatory basis logic defined in [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link].

In case for an applicant if Perfios is identified to be optional, then Skip and Proceed logic to be applied as per the logic defined in [https://fincap.atlassian.net/browse/ML-24664|https://fincap.atlassian.net/browse/ML-24664|smart-link].
acceptance: # Given that mentioned changes are done , when user lands on Perfios , then user should view Perfios Mandatory / Optional icon for each applicant type on Perfios screen , also should work for applicable scheme records of MEL-PL-HL-LAP
# Given that mentioned changes are done , when user lands on Perfios , User should be able to understand for which applicant Perfios is mandatory/optional
# Given that mentioned changes are done , when user lands on Perfios , then , UI/UX of Perfios Mandatory/Perfios Optional is as per description
# Given that mentioned changes are done , when user lands on Perfios , the Logic to show Perfios mandatory/optional should be as per description and should work for applicable applicant types only.
# Given that mentioned changes are done , when user lands on Perfios , then in all the cases where Perfios is mandatory for 1 or more applicant type , Skip and Proceed button [https://fincap.atlassian.net/browse/ML-24664|https://fincap.atlassian.net/browse/ML-24664|smart-link] will not be visible on UI and case would not be allowed to move ahead , RO would be forced to attempt Perfios
# Given that mentioned changes are done , when user lands on Perfios, then where Perfios is optional, IRO would not be forced to attempt Perfios and case should be allowed to move forward by click of Skip and Proceed
# Given that mentioned changes are done, when customer land on Perfios screen, user should be able to find Skip and Proceed at bottom of the screen if applicable as per the logics available in the description for each Business unit and their scheme records as per the Perfios master [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link]

key: ML-30496
summary: Tenure change validation for Tele-caller user
description: *Current:* -TC- Tele Caller user can Increase the tenure of the loan upto 48 months for all cases.

*Proposed:* -TC- Tele Caller user should not be able to change the tenure of the loan from 36 months irrespective of loan amount, i.e., irrespective of any loan amount the default tenure should be 36 months and user should not be able to change the same unless the loan amount is greater that 2,00,000.

For loan amount greater than 2,00,000 option to increase the tenure should be available upto 60 months i.e., when loan amount is more than Rs 2,00,000 maximum tenure applicable should be 60 months.

The minimum tenure of 36 months and maximum tenure of 60 months to be kept configurable such that same can be changed without any technical intervention.

Also, the threshold loan amount of Rs 2,00,000 for applying tenure of more than 36 months should be kept configurable, 

*Note -* 

# The said changes to be applicable for both Tecle Caller and IRO journeys of MEL+ 
acceptance: MEL+ loans sohuld be processed under below tenure range only:·       

Loans upto Rs. 2,00,000 = 36 months (by default)

Loans > Rs. 2,00,000 = 36 to 60 months

# Given that mentioned changes are done, irrespective of any loan amount, SFDC should not allow user to lower the tenure from 36 months
# Given that mentioned changes are done, when the loan amount in more than Rs 2,00,000, then SFDC should not allow users to apply tenure for more than 60 months
# Given that mentioned changes are done, the maximum loan amount and maximum tenure period to be kept configurable 
# Given that mentioned changes are done, the threshold amount of Rs 2,00,000 for applying tenure upto 60 months to be kept configurable
# Given that mentioned changes are done, the said changes should be applicable in both Tele Caller and IRO journeys for MEL+

key: ML-30493
summary: 6:Account Aggregator - Shortening URL in SMS
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow:* Once user clicks on “Send Link” button, GETSHORTURL API to be called so that customer can receive SMS with the shorten link.

_Sample Short URL -_ https://[idfcfir.st/h466lvq|https://idfcfir.st/h466lvq]

* In request, SFDC will share the URL as input, GETSHORTURL API service would generate a shorter link for sending it to the customer.

*API SVC Name:* GETSHORTURL

*Sample Request Structure:*

{ "URL":" https://capitalfirst--org1uat.sandbox.my.site.com/perfios/s/bilpl?
?recordID=5npa2p7rHYIASoRDi0kqIB3F2YuvzkFkDKPl+1LedBQ=&CHANNEL=SMS"} // MBL community URL page  

*Sample Response Structure:*

{
"RESPONSEID": 47740432,
"ISSUCCESS": "True",
"ERROR":  {
"ERRORSYSID": null,
"ERRORCODE": null,
"ERRORDESC": null
          },
"RESPONSE": {
    "PROCESSOR": null,
    "DATA":     {
    "ShortURL": "https://[idfcfir.st/h466lvq|https://idfcfir.st/h466lvq] "
                }
            }
}

-In case if value of "ISSUCCESS" is received as “False” in the response structure, then same to be considered as a failure and existing long URL to be shared with the customer in the SMS.-

In case if value of “ISSUCCESS” is received as “False” in the response structure, then the user should be shown a generic error message and link should not be shared with customer through the SMS.
acceptance: # Given that mentioned changes are done, when GETSGORTURL API is called, then the request and response should be generated as mentioned in the description
# Given that mentioned changes are done, when GETSHORTURL API is triggered, then API should convert longer link to shortened link
# Given that mentioned changes are done, when SMS is triggered to customer, then customer should be able to view the shortened URL received on SMS 
# Given that mentioned changes are done, when GETSHORTURL API is triggered, then Existing validation of new url will remain same
# Given that mentioned changes are done, when GETSHORTURL API fails to respond successfully, then user should be shown a generic error and link should not be sent to customer through SMS.

key: ML-30487
summary: Inbound API Handling for Scanned Statements
description: *Proposed:* In continuation to [https://fincap.atlassian.net/browse/ML-30486|https://fincap.atlassian.net/browse/ML-30486|smart-link].

For scanned statements post triggering API 3 [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] inbound API response to be received from Perfios within 1 hour.

Until the Inbound API [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] response is received for scanned statements, the user to be shown an informatory message on the screen stating that response may be received in 1 hour (Content to be kept configurable).

Post receiving the Inbound API [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] response, the fields on the UI for Banking Screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link] ; Banking Details Screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] and Category Screens [https://fincap.atlassian.net/browse/ML-25997|https://fincap.atlassian.net/browse/ML-25997|smart-link] to be stamped as per the logic defined in [https://fincap.atlassian.net/browse/ML-26000|https://fincap.atlassian.net/browse/ML-26000|smart-link].

In case the response is not received within the period of 1 hour, then user to be shown a failure pop-up with message stating response not received, kindly re-initiate Perfios process (Content to be kept configurable)

Note: The 1 hour waiting time to be kept configurable. 

The pop-up should have an “Ok” button.

Upon clicking the “Ok” button, user should be redirected to the Perfios screen for re-initiating Perfios process. 

*Note:* Perfios Retry functionality [https://fincap.atlassian.net/browse/ML-26004|https://fincap.atlassian.net/browse/ML-26004|smart-link] not to be applicable for Scanned Statements. 
acceptance: # Given that mentioned changes are done, when API 3 is triggered for scanned statements, then Inbound API response to be received within 1 hour.
# Given that mentioned changes are done, when API 3 is triggered for scanned statements, then SFDC should ensure that Informatory Message is shown to the user as mentioned in the description until the Inbound API response is received.
# Given that mentioned changes are done, when API 3 is triggered for scanned statements and Inbound API response is not received within 1 hour, then SFDC should show the pop-up message to the user as mentioned in description with an “Ok” button.
# Given that mentioned changes are done, when API 3 is triggered for scanned statements and Inbound API response is not received within 1 hour, then SFDC should re-direct the user to Perfios screen when “Ok” button is clicked by the user.

key: ML-30486
summary: Scanned Statements - Logic for calling the APIs
description: *Proposed:* When the user selects the “Scanned Statement” card from the Perfios Screen [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link], the user would identify the bank name and click on “Initiate Upload” button to view the statement upload pop-up on the UI[https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link].

Post selecting the statement, when user clicks on “Upload” button from the pop-up, API 1 [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link]  and DMS API to be called as per process defined in [https://fincap.atlassian.net/browse/ML-25902|https://fincap.atlassian.net/browse/ML-25902|smart-link].

As defined in [https://fincap.atlassian.net/browse/ML-25902|https://fincap.atlassian.net/browse/ML-25902|smart-link] once successful response is received from API 1, then post that API 2 [https://fincap.atlassian.net/browse/ML-24263|https://fincap.atlassian.net/browse/ML-24263|smart-link]to be triggered.

_Sample API 2 response structure for scanned statement -_

{

"RESPONSEID": 92733337,

"ISSUCCESS": "True",

"ERROR": {

"ERRORSYSID": null,

"ERRORCODE": null,

"ERRORDESC": null

},

"RESPONSE": {

"PROCESSOR": null,

"DATA": {

"Accepted": {

"statementId": "190520"

}

}

}

}

Transaction Start Date & End Date will not be obtained from Perfios API 2 in case of scanned statements.

Subsequently, date validation logics [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link] and [https://fincap.atlassian.net/browse/ML-25556|https://fincap.atlassian.net/browse/ML-25556|smart-link] will not be applicable for scanned statements.

Post receiving successful response from API 2, “Submit to Perfios” button should be enabled on the UI. 

Once the user clicks on “Submit to Perfios” button, API 3 [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link]  to be triggered from SFDC.

Post triggering API 3, the inbound API [https://fincap.atlassian.net/browse/ML-28864|https://fincap.atlassian.net/browse/ML-28864|smart-link]  to come from Perfios with a delay. The handling for the same is continued in [https://fincap.atlassian.net/browse/ML-30487|https://fincap.atlassian.net/browse/ML-30487|smart-link].
acceptance: # Given that mentioned changes are done, when the user selects the “Scanned Statement” card from Perfios screen, then the logics for calling the APIs to be as mentioned in the description.
# Given that mentioned changes are done, when the user selects the “Scanned Statement” card from Perfios screen, then date validation logic should not be applicable.
# Given that mentioned changes are done, when the API 2 responds successfully for scanned statements, then “Submit to Perfios” button to be enabled on the screen.
# Given that mentioned changes are done, when the user clicks on “Submit to Perfios” button, then SFDC should be able to trigger API 3. 

key: ML-30469
summary: New placeholder/buttons for non-adb documents- KYC (POI/POA) and Bank Statement
description: Current: 

At DV Ops screen, “hold” button is not available next to Non-adb documents - KYC and Bank Statement.



Proposed:

New non-mandatory Document placeholders to be provided for sales user on Document Upload screen for KYC Document (POI/POA) and Bank Statement Document / SPD. 

{color:#006644}Placeholders to be named as “KYC Document (POI / POA)” and “Bank Statement Document”{color}

New “Hold” buttons to be made available next to POI/POA and Bank Statement for DVOps user UI.

{color:#006644}Once the user reaches the DVOps stage, the DVOps user should be able to view these new documents.{color}

{color:#006644}A “Hold” button to be available next to these documents in the DVOps stage such that when the user clicks on the “Hold” button, the case is put on hold for sales user to re-upload the said documents.{color}

DVOps user should be able to put the new discrepant non-adb docs on hold and enter hold comments/remarks. 

{color:#006644}Upon clicking on the “Hold” button, DVOps user should mandatorily be allowed to enter the remarks for holding the document. {color}

Sales user should be able to view the comments/remarks at Hold-Doc Verification stage (Document Upload 2  screen). 

Sales user should upload new document mandatorily  if DVOps user has returned case due to Hold on KYC Doc or Bank Statement doc.

{color:#006644}Once sales user has reuploaded the correct documents, the user should be able to reshare the case with DVOps for further processing as is currently done for other documents.{color}





 
acceptance: * Given that User is in Document Upload screen, 2 non-mandatory placeholders for KYC Document (POI / POA)” and “Bank Statement Document” should be available to sales User for doc upload
* Given that LAN has moved to DVOPS stage and the 2 non-mandatory documents are uploaded by sales user then the same to be visible to DVOPS User 
* Given that DVOPS User identifies discrepancy in any of the above 2 documents then a “Hold” button to be available next to these documents in the DVOps stage such that when the user clicks on the “Hold” button, the case is put on hold for sales user to re-upload the said documents
* Given that DVOPS User marks any of the 2 documents as discrepant then Hold Comment should be mandatory for User to enter
* Given that DVOPS User has marked any of the 2 documents as discrepant then Sales user should be able to view the comments/remarks at Hold-Doc Verification stage (Document Upload 2 screen)
* Given that Sales user has uploaded the discrepant document when DVOps user has returned case due to Hold on KYC Doc or Bank Statement doc then the user re-eshare the case with DVOps for further processing as is currently done for other documents.



*Note*:

* Current Hold functionality should work as-is when DVOps user puts clicks on Hold document button. 
* Hold comments should be available on Loan Application object UI layout for All profiles. 

key: ML-30455
summary: MEL Repeat - Income Value Considered for FICO
description: *Current:* As per current process in case of MEL Repeat scheme, if IRO and BCM user adds new Income value, then only the Base Loan income value is getting passed to FICO for eligibility calculations. Ideally, the income value to be passed as a summation of IRO income, BCM income and Base Loan income.

*Proposed:* 

* In case of MEL Repeat Loans, the final income which is considered for eligibility in base loan should flow to the repeat loan as well.
* The BCM user should have the rights to edit/modify the base loan income and changes should only be applicable exclusively to Repeat Loan and not on Base Loan.
* The income value passed to FICO should be a summation of income added by IRO user; income added by BCM user and income received from Base Loan in case PD case is not generated for MEL Repeat loan. *Value flowing to FICO should match with CAM report and Income details available in underwriting page in UI.*
* In case PD Income is available in the Repeat Loan then logic should work As-Is, i.e., IRO / Base Loan income to be overridden by PD Income.
* The final come which is considered for eligibility in base loan should flow to repeat loan and the value stamped in “Income Details” object at the back end in Repeat Loan.
* Similarly the new income added by IRO or BCM user should be stamped in “Income Details” object at the back end in Repeat Loan.
* In case if PD income is available in Repeat Loan same should be stamped in PD Income Detail object in back end.
* UI handling to be As-Is.
* In case there is a PD income, then value against “Total Income of App/Co-App” field to be replaced with the value received in PD Income and same to be used for Incremental Cash flow calculation.
acceptance: # Given that mentioned changes are done, when MEL Repeat Loans are created, then the final income which is considered for eligibility in base loan should flow to the repeat loan as well.
# Given that mentioned changes are done, in case of MEL Repeat Loans, BCM user should have the rights to edit/modify the base loan income.
# Given that mentioned changes are done, when BCM edits/modifies the income of Base Loan, then the changes should only be replicated in Repeat Loan and not in base loan.
# Given that mentioned changes are done, when income value is passed to FICO for MEL Repeat loans, then same should be a summation of income added by IRO user; income added by BCM user and income received from Base Loan in case PD case is not generated for MEL Repeat loan.
# Given that mentioned changes are done, when PD is available in Repeat Loans, then logic should work As-Is, i.e., IRO / Base Loan income to be overridden by PD Income.
# Given that mentioned changes are done, when base loan final income is received, then same should be stamped in “Income Details” object in the back end along with the income details added by IRO or BCM user in the Repeat Loan.
# Given that mentioned changes are done, when PD income is available in MEL Repeat Loan, then same to be stamped in “PD Income Details” object in the back end.
# Given that mentioned changes are done, when PD income is available in MEL Repeat Loan, then the value available in “Total Income of App/Co-App” field to be replaced with the value received in PD Income and same to be used for Incremental Cash flow calculation.

key: ML-30453
summary: Hospicash Insurance Option - Changes in Flow and Placement on UI - Part 3
description: In continuation to [https://fincap.atlassian.net/browse/ML-28243|https://fincap.atlassian.net/browse/ML-28243|smart-link]and [https://fincap.atlassian.net/browse/ML-30452|https://fincap.atlassian.net/browse/ML-30452|smart-link] 

In case the concerned loan is having both applicant and co-applicant details added, then in such case the nominee details field should be auto populated with the details of co-applicant and similarly for co-applicant the nominee details to be auto populated with the details of the applicant. 

All fields related to nominee details to be kept editable post auto populating them. 

Similarly, all fields related to nominee details to be kept mandatory as done in the current process.

In case there is only applicant and no co-applicant available in a particular loan then in such cases, the mandatory nominee details field to be kept blank and editable so that the user is able to fill the nominee details.

*Note:* The changes described in [https://fincap.atlassian.net/browse/ML-28243|https://fincap.atlassian.net/browse/ML-28243|smart-link] ; [https://fincap.atlassian.net/browse/ML-30452|https://fincap.atlassian.net/browse/ML-30452|smart-link] and  [https://fincap.atlassian.net/browse/ML-30453|https://fincap.atlassian.net/browse/ML-30453|smart-link] to be applicable on insurance screen wherever the same is applicable in the entire journey.
acceptance: # Given that mentioned changes are done, when there are applicant and co-applicant for a loan, then in such case the nominee details for applicant should be populated with co-applicant details and remain editable.
# Given that mentioned changes are done, when there are applicant and co-applicant for a loan, then in such case the nominee details for co-applicant should be populated with applicant details and remain editable.
# Given that mentioned changes are done, when there are no co-applicant available, then the mandatory Nomination Details section should be left blank and editable
# Nominee details population should work for Repeat and MEL Plus TC journey in case of co-applicant changes (replace/remove co-applicant)

key: ML-30452
summary: Hospicash Insurance Option - Changes in Flow and Placement on UI - Part 2
description: In continuation to [https://fincap.atlassian.net/browse/ML-28243|https://fincap.atlassian.net/browse/ML-28243|smart-link] 

Hospicash option to be shown to the user in the form of a card below the “Nominee Details” section of the mandatory insurance type as shown in below snap-shot:

!image-20240228-121958.png|width=1422,height=756!

Seperate cards to be available for each applicants.

The card should have toggle button with “Yes” and “No” options respectively.

The toggle value on the card should be on “Yes” option by default.

In case the user selects “No” option from the toggle button, then in such scenario the user should be allowed to proceed without completing the Hospicash Insurance process.

When the toggle value is kept at “Yes” and the user clicks on the card, then the user should be allowed to fill the details related to Hospicash Insurance. Accordingly, the user should be able to view the existing fields as shown on the below snapshot.

!image-20240228-113433.png|width=1422,height=756!

Note - The default option for the toggle button to be made configurable such that the default option for the toggle button can be changed from backend without any technical intervention.
acceptance: # Given that mentioned changes are done, when the user lands on the “Insurance” stage with sub stage “Insurance Entry Pending”, then user should view the Hospicash cards for each applicant with the toggle button placed on “Yes” button by default.
# Given that mentioned changes are done, when the toggle button is on “Yes” option and user clicks on the card, then user should be able to view the fields related to Hospicash.
# Given that mentioned changes are done, when the user clicks on the Hospicash card, then user should be able to view the associated fields related to Hospicash along with the mandatory Nominee Details section.

key: ML-29521
summary: 5: Account Aggregator - Send Link Button
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow*:

# After User selects the bank, SEND LINK button should be enabled on screen
# Once user clicks on send link below actions to be initiated:
## SENDSMS API to be triggered and be sent to particular applicant or co-applicant in -registered- the mobile number available against field named “Mobile Number for Account Aggregator” [[ML-41492] Allowing user to enter other mobile number - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-41492] with content as mentioned below
## Success message to be shown to user after SENDSMS API returns success response “Account Aggregator link successfully sent to Mob no XXXXXXXXX at 11th March 2024- 8.04 PM” (Mob no of particular applicant or co-applicant should be displayed along with Date and time) 
#*Note*: Content to be kept configurable

SMS Template:

|*Whitelisted message content*|*Sample message content*|*Message Category*|
|Dear {#var#} {#var#} !\nTo proceed with your {#var#} application no.\r{#var#}\r,\rplease provide your bank statement using RBI approved account Aggregator process by clicking on\r{#var#}\r\n
Regards,\n IDFC FIRST Bank|Dear Ms KAVITA DHANANJAY JADHAV!
To proceed with your Micro Enterprise Loan application no. <SFDC ID>, please provide your bank statement using RBI approved Account Aggregator process by clicking on [https://idfcfir.st/h466lvq|https://idfcfir.st/h466lvq] 
Regards,
IDFC FIRST Bank|Service Implicit|

*Mandatory data points:*

* Type of Communication: SMS
* Sent To: Customer
* This template should be configurable
* For Customer Name, below objects to be fetched
acceptance: # Given that User selects the bank, SEND LINK button should be enabled on screen
# Given that user clicks on send link below actions to be initiated:
## SENDSMS API to be triggered and be sent to particular applicant or co-applicant in -registered- the mobile number available against field named “Mobile Number for Account Aggregator” [[ML-41492] Allowing user to enter other mobile number - Jira (atlassian.net)|https://fincap.atlassian.net/browse/ML-41492] mobile number with content as mentioned below
## Success message to be shown to user after SENDSMS API returns success response “Account Aggregator link successfully sent to Mob no XXXXXXXXX at 11th March 2024- 8.04 PM” (Mob no of particular applicant or co-applicant should be displayed along with Date and time) 
#*Note*: Content to be kept configurable

key: ML-29520
summary: 4. Account Aggregator - Perfios Bank Master changes and SFDC AA selection
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow*:

When User selects Account Aggregator option in Perfios stepper:

# User should be able to select a specific bank to link it with from the dropdown available. The drop down which is currently displayed would retrieve the values basis on the Perfios bank master with the value as TRUE
# Master will have additional following columns:
## Bank - Name of Bank as per mandate master
## Eligible for Account Aggregator
# New column “Is Eligible for Account Aggregator?” to be added to the Perfios Upload Statement Bank Name Master Perfiosbank__mdt
# Is Eligible for Account Aggregator? column to be marked No for all the other banks which are not eligible for AA
# Section on the right side of the page to contain below details -

*Note*: 

*  By default no bank should be selected in dropdown
*  Send Link Button should be disabled until user selects a bank from dropdown.

!image-20240311-141637.png|width=725,height=239!
acceptance: Given that User selects Account Aggregator option in Perfios stepper:

# User should be able to select a specific bank to link it with from the dropdown available. The drop down which is currently displayed would retrieve the values basis on the Perfios bank master with the value as TRUE
# Master will have additional following columns:
## Bank - Name of Bank as per mandate master
## Eligible for Account Aggregator
# New column “Is Eligible for Account Aggregator?” to be added to the Perfios Upload Statement Bank Name Master Perfiosbank__mdt
# Is Eligible for Account Aggregator? column to be marked No for all the other banks which are not eligible for AA
# Section on the right side of the page to contain below details -

*Note*: 

*  By default no bank should be selected in dropdown
*  Send Link Button should be disabled until user selects a bank from dropdown.

!image-20240311-141637.png|width=725,height=239!

key: ML-29519
summary: 3. Account Aggregator- AA eligible bank selection and UI handling
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow*:

# After User clicks on Account Aggregator option in Perfios stepper and is navigated to Account Aggregator section then below information to be displayed on the right hand slide of the screen:
## “Please select your bank from the below drop down” should be displayed to the user
# Below the above information, dropdown field to be displayed with Select Bank mentioned on the dropdown UI
# Below the dropdown field, the information mentioned below to be displayed:

”Note - If you cannot find your bank in the dropdown, please click on BANK NOT AVAILABLE button and upload bank statement using other 2 options”
# Below the above information 3 buttons to be visible to the User when User lands on the screen:
## BANK NOT AVAILABLE
## CANCEL LINK
## SEND LINK
acceptance: # Given that User clicks on Account Aggregator option in Perfios stepper and is navigated to Account Aggregator section then below information to be displayed on the right hand slide of the screen:
## “Please select your bank from the below drop down” should be displayed to the user
## Below the above information, dropdown field to be displayed with Select Bank mentioned on the dropdown UI
## Below the dropdown field, the information mentioned below to be displayed:
”Note - If you cannot find your bank in the dropdown, please click on BANK NOT AVAILABLE button and upload bank statement using other 2 options”
## Below the above information 3 buttons to be visible to the User when User lands on the screen:
### BANK NOT AVAILABLE
### CANCEL LINK
### SEND LINK

key: ML-29518
summary: 2. Enabling Account Aggregator option in Perfios stepper and User Navigation to Account Aggregator screen
description: *User Role* : IRO/MRO

*Device Compatibility* : Web / Mobile

*Stage:* Perfios

*Sub-stage :* Perfios Pending

*Process Flow*:

# When User clicks on Account Aggregator option in Perfios stepper user should be redirected to Account Aggregator screen and below information to be displayed to User on left hand side as per UI attached: 
## Screen to be split into 2 sections and below information to be displayed in the left side of the screen “Account aggregator is a financial entity which has been authorized by RBI to provide a consolidated financial information on various accounts held by the customer.
Top banks supporting account aggregator are as follows-
A. IDFC FIRST Bank
B. HDFC Bank
C. ICICI Bank,
D. SBI
E. AXIS Bank
#*Reference UI*:

!image-20240319-175343.png|width=1012,height=272!

*Note*: Dev to check if above content can be kept configurable
acceptance: # Given that the User clicks on Account Aggregator option in Perfios stepper user should be redirected to Account Aggregator screen and below information to be displayed to User on left hand side as per UI attached: 
## Screen to be split into 2 sections and below information to be displayed in the left side of the screen “Account aggregator is a financial entity which has been authorized by RBI to provide a consolidated financial information on various accounts held by the customer.
Top banks supporting account aggregator are as follows-
A. IDFC FIRST Bank
B. HDFC Bank
C. ICICI Bank,
D. SBI
E. AXIS Bank

#*Note*: Dev to check if above content can be kept configurable 
#*Reference UI*:

!image-20240319-175343.png|width=1012,height=272!

key: ML-28987
summary: Addition of two fields for Co-Applicant in HL and LAP
description: *Applicable:* Rural HL

*Current:* Currently in HL for co-applicants the fields named “Employed With” is not available. Due to this the Perfios Mandatory / Optional logic as mentioned in [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link]  is not getting applied correctly for co-applicant in HL.

*Proposed:* “Employed With” field to be made applicable for Co-Applicants with same drop down values as available in case of Applicants for HL product and this field to be available both in front end as well as in back end.

Basis the dropdown option selected by the user, Perfios Mandatory / Optional logic [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link] for HL to be applied for identifying the co-applicant to be either Perfios Mandatory / Optional.



*Applicable:* Rural LAP

*Current:* Currently in LAP for co-applicants the fields named “Salary Mode” is not available. Due to this the Perfios Mandatory / Optional logic as mentioned in [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link]  is not getting applied correctly for co-applicant in LAP.

*Proposed:* “Salary Mode” field to be made applicable for Co-Applicants with same drop down values as available in case of Applicants for LAP product and this field to be available both in front end as well as in back end.

Basis the dropdown option selected by the user, Perfios Mandatory / Optional logic [https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link] for LAP to be applied for identifying the co-applicant to be either Perfios Mandatory / Optional.
acceptance: # Given that mentioned changes are done, when the user adds details of Co-Applicants in case of HL, then user should be given the field named “Employed With” to be filled mandatorily.
# Given that mentioned changes are done, when the user adds details of Co-Applicants in case of LAP, then user should be given the field named “Salary Mode” to be filled mandatorily.
# Given that mentioned changes are done, when the user fills the Co-Applicant details for HL / LAP, then the above mentioned fields to be kept mandatory.
# Given that mentioned changes are done, when the user fills details against the above mentioned fields for co-applicant in HL / LAP, then the same value to be stamped in back end as well.

key: ML-28876
summary: Karza name match drop off to be paused in Top up journeys
description: *Current:* Currently, for MEL+ and MEL Repeat loans & for non-IDFC FIRST Bank a/cs, KARZA IMPS and KARZA Name match APIs are called.

Basis the response, system prompts the user to upload additional Banking proof.

*Proposed:* In MEL+ and MEL Repeat loans, if the user does not change the bank details during the journey i.e., keeps the banking details as is from the base loan, then Karza Name Match API is not required to be called in such scenario.

Accordingly, in such scenarios the validation based on the response received from Karza Name Match API to be omitted and only IMPS Fund Transfer API to be initiated.

In case, the user modifies the bank details in MEL+ and MEL Repeat loans then in such scenarios both Karza Name Match API and IMPS Fund Transfer API should be triggered.

For loans which are dropped off due to failure of IMPS check done through IMPS Fund Transfer API, then in such cases failure reason to be stamped as “Karza penny check fail”.

*Note:* If in base loan the user uploads a Karza Document due to the failure of IMPS check and same is validated by DVOps user and loan is disbursed, then in such loan’s repeat or topup journey if the user keeps the same bank details as that of base loan then such repeat or topup loans to be considered as ADB loans.
acceptance: # Given that mentioned changes are done, when the user proceeds with same bank details as of Base Loan in MEL topup or repeat journeys, then in such scenario Karza Name Match API to be not called and IMPS Fund Transfer API to be called.
# Given that mentioned changes are done, when the user proceeds by adding bank details different from Base Loan in MEL topup or repeat journeys, then in such scenario Karza Name Match API should be called along with IMPS Fund Transfer API.
# Given that mentioned changes are done, when the loans are dropped off due to failure of IMPS check done through IMPS Fund Transfer API, then in such cases failure reason to be stamped as “Karza penny check fail”.
# Given that mentioned changes are done, if in base loan the user uploads a Karza Document due to the failure of IMPS check and same is validated by DVOps user and loan is disbursed, then in such loan’s repeat or topup journey if the user keeps the same bank details as that of base loan then such repeat or topup loans to be considered as ADB loans.

key: ML-28872
summary: Configuration of Maximum Loan Amount Value
description: *Current:* As per [https://fincap.atlassian.net/browse/RMP-468|https://fincap.atlassian.net/browse/RMP-468|smart-link] the maximum loan amount for MEL+ loans is Rs 3 lakhs and validations are applied accordingly.

*Proposed:* The maximum loan amount to be made configurable such that the maximum loan amount can be configured by Admin User as per Business Requirement without any technical intervention.

Existing validations to be applied basis the maximum loan amount configured by the Admin User.
acceptance: # Given that mentioned changes are done, then the maximum loan amount value to be made configurable.
# Given that mentioned changes are done, when the maximum loan amount is configured by admin user, then the existing validations to be applicable on the same loan amount.

key: ML-28864
summary: Inbound Perfios API - To receive Perfios Analysis
description: *Proposed:* Once API 3 is called and responds successfully [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link], the analysis from Perfios to be received through inbound API call.

Inbound Perfios API SVC Name - INBOUND_PERFIOS_BANKING

The -request- response to be saved in the form of json attachment as shown in below snapshot.

!a73faa59-48ae-4b43-87c4-3ad7510e71b3#media-blob-url=true&id=9e03cd02-8518-46ec-b473-fbfe3db9963a&collection=&contextId=1039661&height=127&width=1119&alt=|width=1625,height=184!
acceptance: # Given that mentioned changes are done, when API 3 responds successfully, then Mule would share the perfios analysis after a delay, SFDC should be able to consume the update the response from Mule and perfios analysis- JSON format should be saved in attachments as described.

key: ML-28851
summary: Addition of Profiles for HL & LAP
description: Two new profiles created in the Rural Org. Kindly map these profiles to PD app.

      i. *Senior BCM*

      ii. *Senior CCM*

These profiles need to be given similar access as BCM and CCM
acceptance: Two new profiles should be able to access PD app and submit cases.

      i. *Senior BCM*

      ii. *Senior CCM*

These profiles need to be given similar access as BCM and CCM

key: ML-28838
summary: Changing the Default Value of Toggle Button for Nominee Details
description: *Current:* As per current process, when the user requests for opening a new account with IDFC Bank, then the toggle button currently available against the field named as “Do You Want to Add a Nominee” is kept on “No” option by default.

*Proposed:* When the user proceeds towards opening a new account, the toggle button available against the field named “Do You Want to Add a Nominee” should be kept as “Yes” by default.

The button should be editable, such that user should have the option to select “No” option as well.

!image-20240229-105940.png|width=622,height=211!

When the toggle button is in “Yes” option then the user should be able to view the mandatory fields required to be filled to add nominee details.

The default option for the toggle button to be made configurable such that the default option for the toggle button can be changed from backend without any technical intervention.
acceptance: # Given that mentioned changes are done, when the user selects to create a new account, then the toggle button should be placed on “Yes” option by default.
# Given that mentioned changes are done, when the user selects to create a new account, then the toggle button should be placed on “Yes” option by default and kept editable, i.e., user should also have the option to select the “No” button.
# Given that mentioned changes are done, when the user selects to create a new account and the toggle button is on “Yes” option, then the user should be able to view the mandatory fields required to be filled to add new nominee. 

key: ML-28832
summary: Hospicash Insurance - Modification of Logic for Updating Premium Amount and Tenure respectively
description: *Current:* As per current process, in Rural MEL+ or Rural MEL Repeat loans, the Hospicash Insurance amount is considered same as that of Base Loan.

*Proposed:* In case of all MEL and PL loans where Hospicash is applicable the premium amount and tenure should only be considered from the applicable Master so as to always consider the correct premium amount and tenure.
acceptance: # Given that mentioned changes are done, when Hospicash Insurance is opted by the user for an applicant, then the insurance premium and tenure to be considered from the Master values.
# Given that mentioned changes are done, when Hospicash Insurance is opted by the user for an applicant in Top-Up or Repeat Journeys, then insurance premium and tenure to be considered from the Master values and not from the base loan.

key: ML-28827
summary: PSL Flag to be editable and Default "Yes"
description: Currently, under PSL details screen,

PSL Flag is non editable and Default "Yes".



Proposed: 

PSL flag should be editable (Yes/No LOVs) and default value should be “Yes”.

{color:#006644}On selecting the “No” option from the drop down, user should not be shown the mandatory fields to fill the URC details i.e., “URC Number” and “URC Generation Date” fields respectively on UI and user should be able to proceed as per process.{color}

{color:#bf2600}*Note:* {color}{color:#bf2600}When user selects “No” option from the drop down all fields to be shown on the UI which is same as Yes.{color}
acceptance: PSL Flag should be editabe

If user does not enter URC details, user can opt to select PSL category MSME and PSL Flag “No” and proceed with the journey.

key: ML-28243
summary: Hospicash Insurance Option - Changes in Flow and Placement on UI - Part 1
description: *Current:* As per existing process users are given the option to select the Insurance Type as a drop down on the UI from where the user selects the Hospicash option and enters the required details to add Hospicash insurance for the particular applicant / co-applicant.

!image-20240228-110326.png|width=1422,height=800!

*Proposed:* 

When the user lands on the “Insurance” stage with sub stage “Insurance Entry Pending” then user should be able to view only the mandatory insurance name on the “Insurance Type” field along with other fields as shown in the below snapshot with an option to select the applicant and co-applicant name from the drop-down.

Note - No dropdown option to be made available to the user in the “Insurance Type” field for selecting “Hospicash” insurance option.

!image-20240228-120612.png|width=1421,height=759!

Additionally, the user should also be able to view the “Nominee Details” section by scrolling down as shown in below snap-shot:

!image-20240228-120941.png|width=1422,height=759!
acceptance: # Given that mentioned changes are done, when the user lands on the “Insurance” stage with sub stage “Insurance Entry Pending”, then user should be able to view only the mandatory insurance type and the subsequent fields along with the Nominee Details section.

key: ML-27940
summary: 29. Handling of Refresh Scenarios
description: *Proposed:* In continuation to [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link], if the user attempts for a hard refresh post uploading the account statement, then the scenarios to be handled as mentioned below:

# If the hard refresh is done post calling API 1 but before receiving successful response from API 1, then the process to be re-initiated as done from before uploading the account statement.
# If the hard refresh is done post calling API 1 and after receiving successful response from API 1, then the process to be re-initiated from calling API 2 and not from the initial statement uploading stage.

The values available on Pop-Up table to be displayed post successful completion of API 2 and not prior to that.

Note - If the user makes a hard refresh post API 1 is triggered but before API 1 responds and SFDC receives a successful response from API 1 after landing on the statement upload screen, then SFDC should not consume this response and allow the user to proceed by uploading fresh account statement and re-trigger API 1.
acceptance: # Given that mentioned changes are done, when the user clicks on the refresh button in between the processing of API 1, then user should be able to re-initiate the process from uploading the account statement.
# Given that mentioned changes are done, when the user clicks on the refresh button in between the processing of API 1, then user should be able to re-initiate the process from calling of API 2 and not from the initial stage of uploading the account statement.

key: ML-27937
summary: Changes in RPL Application Form
description: Following clauses are needed to be added as per the attached Application form of RPL in accordance with the new RBI Order and our Legal Team

{color:#006644}+*Note:-*+{color}

{color:#006644}Following changes are required to be done:{color}

* {color:#006644}Version Control text - “LD/PL- Rural/Jan 2024/v2” to be added at header of the application form. {color}
* {color:#006644}In the Declaration Section, 1st para, the following statement to be added at the end of the para: “I/We undertake and declare that if there are any changes in the particulars and information given by me/us while availing the Loan facility, I/We shall within 30 days from the date of any such change in the particulars and information shall disclose the details of such changes to the Bank without withholding the same.”{color}
* {color:#006644}In Declaration Section, 3rd para, the following statement to be added at the end of the para: “Borrower agrees that if he/ she avails any loan from the Bank then the PDC/SI/ ECS/NACH mandates issued under the said loan shall continue and remain in force till such time all other dues under the Loan Agreement and in respect of all other loan/facility obtained/to be obtained by the Borrower from the Bank/group companies are fully discharged and the Bank and/or its affiliates issue a certificate of discharge. The PDC/SI/ECS/NACH mandate issued under any Loan Agreement and the liability of the Borrower shall not be affected impaired or discharged. The Borrower covenants that the PDC/SI/ECS/NACH provided by the Borrower shall remain valid for the balance due to the Bank, or any other financial benefits obtained by the Borrower from any of the affiliates of the Bank.”{color}
* {color:#006644}In Declaration Section, 4th para, the following statement to be added at the end of the para: “The Borrower understands, acknowledges and agrees that the Facilities are uncommitted facilities, are recallable by IDFC Bank on demand and may be cancelled and repudiated in part or in entirely by IDFC Bank at any time without notice and without giving any reason. Sanction or part disbursal of the facility should not be construed as giving rise to binding obligations on the part of IDFC FIRST Bank to provide the facility mentioned aforesaid. The Facility mentioned aforesaid will be available solely at IDFC FIRST Bank’s discretion and IDFC FIRST Bank will not be liable for any action taken by the borrower on the basis of this sanctioned facility.”{color}
* {color:#006644}In Declaration Section, Note sub-section, 1st para, the following statement to be added at the end of the para: “"Penal charges" means the charges which the Bank shall impose upon the borrower for non-compliance of loan terms and conditions by the borrower. Said charges shall be over and above the applicable charges and interest rates as specified in the Schedule of Charges/Key Fact Statement and the same may be amended from time to time by the Bank”{color}
* {color:#006644}In Declaration Section, Note sub-section, 2nd para, the following statement to be added at the end of the para: “Borrower agrees that Bank shall be entitled to charge penal charges as mentioned in Schedule of charges/KFS. It is further specified that penal charges as set out in the schedule are without prejudice to the Bank’s right to recall the entire loan or to initiate any recovery action.”{color}
* {color:#006644}In Most Important Terms and Charges section, the term Penal to be replaced with “Penal Charges” in 2nd row.{color}
* {color:#006644}In Most Important Terms and Charges section, “Foreclosure Charges (Wherever applicable)” to be updated as “5% of Principal Outstanding + GST as applicable”.{color}
* {color:#006644}In Most Important Terms and Charges section, Note sub-section at the end of the sentence, following statement to be added: “Notwithstanding anything contained in the loan transaction documents, IDFC FIRST Bank hereby confirms that IDFC shall not levy any penal interest.{color}
{color:#006644}Bank shall levy only penal charges as mentioned in Schedule of charges/KFS.”{color}

{color:#006644}*N.B. Please refer the attached application form, where all changes are highlighted in yellow for reference.*{color}
acceptance: Given that mentioned changes are done, when the case is processed in PL, the customer would be clearly able to know his/her rights and wont have to escalate further

key: ML-27895
summary: Changes in Charges Section of the Application Form 
description: As per the new Pricing Policy for Rural Asset Products, modifications are required in the following areas of the application form:

# The charges will be revised and standardized across products
# New section on delinquent charges for RMEL and RPL to be added on Loan application form

*Charges to be revised -*

+Current:+ 

|Cheque Bounce Charges|INR 400 + GST|

+Proposed:+

|Cheque Bounce Charges|INR 500 + GST|

*New Charges Section to be introduced -*

|Overdue Handling Charges (Delinquent Accounts)|# ₹750 (Excluding GST) where a notice has been delivered at the communication address and a paper publication is not required;
# ₹1,700 (Excluding GST) where no notice has been delivered at the communication address and the paper publication is to be done;
# ₹300 (Excluding GST) charge for sending auction notice over and above the preceding points 1 and 2;
# ₹200 (Excluding GST) for sending Loan Recall notice over and above the preceding points 1 and 2;|

|Part-payment charges|4% of Principal Loan Outstanding + GST as applicable|

Charges section on RMEL/RPL application forms is as below

!9d54120e-25ff-484f-961a-8db2a1a63385#media-blob-url=true&id=1c46f548-ad77-4c13-bef4-44f32652cc03&collection=&contextId=1127598&height=126&width=830&alt=|width=830,height=126!

Overdue Handling Charges (Delinquent Accounts) section to be added below the existing PMSBY Policy Charges Section and Part-payment Charges section to be added below the existing PMJJBY Policy Charges Section

Note - Dependency on Emorphis to replicate changes to charges section on sanction letter
acceptance: # Given that mentioned changes are done, then SFDC should be able to replicate the changes as mentioned in the description when the said application from is generated.

key: ML-27865
summary: Bank Details page changes
description: *User Role* : Tele Caller

*Device Compatibility* : Web

*Screen:* Banking Details

*Current process:*

When Existing Bank details are shown, agent has to select a check box to validate the account number post which again the same account details are shown and ‘Next’ option is visible.

Post clicking on ‘Proceed’, tele caller is asked to select the EMI date (3/5) to move further. 

*Proposed process:*

-To show directly the EMI date option and account details. Post validating the account details skipping the account details page which is again shown.-

In case of Existing Bank Details, once user validates the account number, then additional steps showing the account details and subsequent “Next” button post account validation to be skipped. 

Once user clicks the check box to validate the account number, then user should be shown the EMI date field directly along with the drop down values.
acceptance: # Given that mentioned changes are done, when user validates the account number, then additional steps showing the account details and subsequent “Next” button post account validation should not be required to be completed by the tele caller user.
# Given that mentioned changes are done, when user clicks the check box to validate the account number, then user should be shown the EMI date field directly along with the drop down values.

key: ML-27856
summary: 3lac to 5lac ticket size slab to be configured in ROI grind for MEL PLUS Schemes
description: Configuration changes to be done in Pre-prod for MEL PLUS Bank and MEL PLUS IFBL scheme for below ROI slab to be added in the grid:

* 3,00,001 to 5,00,000 - MEL PLUS Bank - 22%
* 3,00,001 to 5,00,000 - MEL PLUS IFBL - 22.5%
acceptance: ROI configured for 3lac to 5lac loan amount should be 22% for MEL+ Bank scheme and 22.5% for MEL+ IFBL scheme

key: ML-27789
summary: Loan Summary to be populated on the Loan Details page
description: *User Role* : Telecaller

*Device Compatibility* : Web

*Screen:* Loan Details (Loan Amount)

*Current:*

On the Loan Details page, telecaller can view and modify Approved loan amount and Tenure of the loan processed. There is no visibility on the net amount disbursed after adjusting the POS of the base loan, etc.

!image-20240426-094556.png|width=976,height=496,alt="image-20240426-094556.png"!

*Proposed:*

On the Loan Details (Loan Amount) page, tele caller should be able to view the Loan Summary (currently getting populated after Confirm Details page).

Following fields and subsequent values against these fields to be showed to the tele caller user:

|*Approved Loan Amount*|Should be as per the offer amount|
|Monthly EMI|Existing logic derived basis approved loan amount and tenure should be applied to determine the monthly EMI amount|
|Loan Tenure|This should be a variable field, where Tele Caller user should be able to select the tenure as per the validations and logic mentioned in [https://fincap.atlassian.net/browse/ML-30496|https://fincap.atlassian.net/browse/ML-30496|smart-link] 
Applicable UI for tenure change should be kept as showcased in below screenshot:
!image-20240426-102153.png|width=608,height=35,alt="image-20240426-102153.png"!|
|Annual Interest Rate|To be populated basis the logic with which the same field is stamped in “Loan Summary” section available post “Confirm Details”|
|Previous Loan Due|To be populated basis the logic with which the same field is stamped in “Loan Summary” section available post “Confirm Details”|
|*One Time Fees (OTF)*|To be populated basis the logic with which the same field is stamped in “Loan Summary” section available post “Confirm Details”|
|Processing Fees|To be populated basis the logic with which the same field is stamped in “Loan Summary” section available post “Confirm Details”|
|SGST|To be populated basis the logic with which the same field is stamped in “Loan Summary” section available post “Confirm Details”|
|CGST|To be populated basis the logic with which the same field is stamped in “Loan Summary” section available post “Confirm Details”|
|Stamp Duty|To be populated basis the logic with which the same field is stamped in “Loan Summary” section available post “Confirm Details”|
|Total Premium Amount|In Loan Detail (Loan Amount) page, this value to be kept as 0|
|*Net Disbursement Amount*
*Approved Loan Amount - OTF - Previous Loan Due*|To be populated basis the logic with which the same field is stamped in “Loan Summary” section available post “Confirm Details”|

 In the Loan Summary, shown the Total Premium Amount should be 0, as the same is selected on the Confirm details page.

Further, the Loan Summary shown after that (i.e. after Confirm Details page) should remain AS-IS.

!image-20240426-094428.png|width=405,height=346,alt="image-20240426-094428.png"!



!image-20240426-094447.png|width=410,height=348,alt="image-20240426-094447.png"!

*Note:*

Below fields shown currently should be removed from the -Confirm- Loan Details (Loan Amount) page:

* Approved Loan Amount session along with “+” and “-” option.
* -Your Monthly EMI-
* -Tenure session along with “+” and “-” option-
acceptance: # Given that mentioned changes are done, when tele caller initiates the journey, then at Loan Details (Loan Amount) page, tele caller user should be able to view the loan summary details with the fields and its subsequent values as mentioned in the description
# Given that mentioned changes are done, when tele caller initiates the journey, then at Loan Details (Loan Amount) page, then Current fields of Approved Loan Amount along with “+” and “-”, -Tenure along with “+” and “-”- option should not be visible to the tele caller

key: ML-27786
summary: SI Link visible on Bank Details page to be removed
description: *User Role* : Tele Caller

*Device Compatibility* : Web

*Screen:* Banking Details

*Current:* 

Telecaller is able to view the SI Mandate Link which is sent to the customer in the SMS for confirmation on the Bank Details page.



!image-20240426-092016.png|width=1805,height=830,alt="image-20240426-092016.png"!

*Proposed:*

SI Mandate Link sent to the customer should not be visible to the telecaller on the Bank Details Page.

“Copy Link” button currently available on UI should not be visible to the telecaller user.

*N.B.* The said link is highlighted by red box in attached image
acceptance: # Given that mentioned changes are done, when tele caller user reaches the banking details screen, then tele caller user should not be able to view the link which is shared to the customer for SI Mandate confirmation on Bank Details page along with “Copy Link” button 

key: ML-27683
summary: Confirm Details page - Personal Details , Income Details & Insurance details to be shown horizontally
description: *User Role* : Tele Caller

*Device Compatibility* : Web

*Screen:* Confirm Details

*Current:* 

On ‘Confirm details’ page there are three different segments *Personal Details , Income Details , Insurance details* for which tele callers has a different click to proceed.

*Proposed:*

* On the Confirm details page displays the above three segments: *Personal Details , Income Details and Insurance details* horizontally one below the other at the same time once the customers clicks on ‘Proceed’ on ‘Loan Amount’ page. All three segments can be kept as scrollable option on a single page instead of making tele callers to click on confirm for every segment.
* Further, "Income Details" entire segment can be hidden and made a collapsible value with details. If the telecaller required he can click on the drop down arrow to expand and view the fields in the Income details segment.

*Note -* Sample UI provided in attachment for reference.
acceptance: Given that mentioned changes are done, when tele caller user reaches the “Confirm Details” screen in the journey, then tele caller user should be able to view all three segments : *Personal Details , Income Details and Insurance details* on Confirm details page horizontally one below the other at the same time without the need to click on each segment on the top separately.

key: ML-27680
summary: Option to trigger E-sign link thrice to the customer
description: *User Role* : Tele Caller

*Device Compatibility* : Web

*Screen:* Banking Details

*Current:*

There is no option to re-trigger the E-sign Link (Loan Documents shared with the customer for e-signing through the OTP). Loan application gets dropped off in case of E-sign not completed due to SMS with link details not received to the customer..

*Proposed:*

Similar to SI Link re-trigger, there should be an option available with the tele caller to re-trigger the E-sign link SMS to be customer. 

Users should be provided a maximum of 3 attempts to re-trigger the E-sign link SMS to be customer. 

Once user exhausts all the 3 attempts to re-trigger the E-sign link, the case should be dropped off for further processing.
acceptance: -Telecaller should have an option to re-trigger the E-sign link to the customer maximum 3 times before Loan application getting dropped off.- 

# Given that mentioned changes are done, when tele caller user reaches the banking screen, then user should have 3 attempts for re-triggering the E-sign link to the customer
# Given that mentioned changes are done, when tele caller user has exhausted 3 attempts to re-trigger the E-sign link and customer has still not completed the E-sign process, then case should be dropped for further processing

key: ML-27677
summary: Remove the Send OTP option visible on the Telecaller user frontend.
description: *User Role* : Tele Caller

*Device Compatibility* : Web / Mobile

*Screen:* Bank Details

*Current:* 

On Review Details Page, below the list of documents, there is an option to “SEND OTP” available to the tele caller user on frontend.

*Proposed:*

The “SEND OTP” button should not be available to the tele caller user on the SFDC frontend such that the tele caller user should not be able to generate OTP on behalf of the customer. 

*N.B.* The said OTP should be generated only by the customer through clicking the “SEND OTP” button which is already available to the customer on the front end.
acceptance: Given that mentioned changes are done, when tele caller user reaches the “Banking Details” screen, then tele caller user should not be able to trigger E-sign OTP option to the customer.

key: ML-27674
summary: Increase the font size for SI Mandate confirmation and E-sign OTP generate options in SMS link
description: *User Role* : Tele Caller

*Device Compatibility* : Web / Mobile

*Stage:* Bank Details

Font size to be increased for the below:

# SI Mandate SMS sent to the customer contains link, which the customer needs to open and confirm. For doing the same, there is a checkbox available at the bottom of the page. However, the size of the *checkbox and the sentence* *_“I hereby agree to the above repayment terms to set up the Standing instruction for the loan account”_* is barely visible. Accordingly, the font size for the quoted text has to be increased such that it is clearly visible to the customer.
# E-sign required on the documents: For doing the same, the SMS triggered to the customer has link to download all the loan documents and same needs to be signed via OTP. For this, there is an option given to the customer on the page to *“Generate OTP”* which is barely visible. Hence, the font size of the quoted text is required to be increased such that it is clearly visible to the customer.

*Note -* Required font size for the above points: The font style should be same as current font style and the font size should be increased and kept at par with other texts.
acceptance: Wherever applicable, the checkbox for SI mandate confirmation and E-sign OTP Generation option should be easily visible.

Given that mentioned changes are done, the font size of the texts mentioned in quotes in the description to be increased and should be at par with other texts.

key: ML-27246
summary: 26. Handling of retriggered scenarios related to Perfios
description: *Applicable:* MEL-PL-HL-LAP (applicable schemes)

*Proposed:* Following handling should be done for various retriggered scenarios -

+Pre Perfios Stage - Employment and Loan & Product Stage:-+

As-Is process to be followed i.e., on retriggering from the above mentioned stages user will land on applicant detailed entry stage and follow the current process. 

+Post Perfios Stage - Data Verification; Underwriting and DvOps Stage:-+

In case the loan is retriggered from any of the above mentioned stages user will land on the applicant detailed entry stage and following logics to be applied across various scenarios:

+_Scenario 1_+ - For a Perfios mandatory retriggered case, if the user does not make any changes to the existing data {color:#bf2600}which is impacting the Perfios Master Logic {color}[https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] in the applicant detailed entry {color:#bf2600}or Employment{color} stage then at Perfios stage, user should be allowed to proceed without reinitiating the Perfios process and details entered prior to retriggering in the Perfios stage would remain As-Is.

In such cases, a “Next” button to be available on the Perfios Screen UI on clicking which the user will be allowed to proceed ahead without reinitiating the Perfios process. 

+_Scenario 2_+ - For a Perfios optional retriggered case, if the user does not make any changes to the existing data {color:#bf2600}which is impacting the Perfios Master Logic {color}[https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] in the applicant detailed entry {color:#bf2600}or Employment{color} stage then at Perfios stage, user should be allowed to proceed ahead by clicking on the existing “Skip and Proceed” button available on the UI.

+_Scenario 3_+ - For a Perfios optional retriggered case, if the user makes any changes to the existing data like Scheme, Loan Amount, applicant employment type, Salary Mode, Employed With, etc., then as per the logic defined in Perfios Master [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link], the case will be determined to be Perfios Mandatory or Perfios Optional. 

In case basis the new details entered if the case is identified to be Perfios Mandatory then user should mandatorily complete the entire Perfios process from the Perfios Screen [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link]. 

In case basis the new details entered if the case is identified to be Perfios Optional then user should be allowed to proceed by clicking the “Skip and Proceed” button from the Perfios Screen [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link].

+_Scenario 4_+ - For either Perfios Mandatory or Optional retriggered case, if a new co-applicant is added post retriggering then Perfios logic based on Perfios Master [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] will be applicable to the co-applicant as well and the user post identifying the co-applicant to be Perfios Mandatory or Optional shall follow the as-is process applicable in Perfios Stage.

In such scenarios, post retriggering if Perfios is applicable only for identified applicants then Perfios process should be initiated for the identified applicant only.

For instance - In case of Perfios mandatory retriggered case, if no changes are done for the existing applicants and only new applicants are added, then basis the logic of Perfios Master [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] if the newly added applicant is identified as Perfios Mandatory then Perfios to be initiated for that applicant only and not for other applicants.

+_Scenario 5 retriggering from Perfios Screen_+ -

Introduce retrigger button at the Perfios Screen below the cards.

Upon clicking on this retrigger button, user will land on the applicant data entry stage where if the user does not make any changes to the existing data, then the user will be allowed to proceed as per the as-is flow.

If there is any changes done to the existing data then basis the logic identified from Perfios Master [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] user will be allowed to proceed the case as Perfios Mandatory or Optional as per the scenarios defined above.
acceptance: # Given that mentioned changes are done, when the user retriggers a case prior reaching the Perfios stage, then user should land on Applicant Detailed Entry stage.
# Given that mentioned changes are done, when the user retriggers a case post the Perfios stage, i.e., from Data Verification, Underwriting and DvOps stage respectively then the scenarios to be handled as mentioned in description.
# Given that mentioned changes are done, when the user retriggers a cast from the Perfios screen, then the scenarios to be handled as mentioned in description. 

key: ML-27234
summary: DvOps - Enabling View/Upload Document button in Document Upload Tab for DvOps User
description: *Current:* As per current flow, when user lands on the Documents Tab in the DvOps stage then user can view the documents by clicking the URL on the document name available in the document list and “VIEW / UPLOAD DOCUMENT” on the UI is kept deactivated [https://fincap.atlassian.net/browse/ML-21644|https://fincap.atlassian.net/browse/ML-21644|smart-link] 

*Applicability:* Rural MEL / Rural PL / Gold Loan

*Proposed:* Upon clicking the “VIEW / UPLOAD DOCUMENT” on the DvOps screen, user should be redirected to the Filenet for viewing all documents that are uploaded for the particular applicant.

The said “VIEW / UPLOAD DOCUMENT” is to be placed as highlighted in below snapshot. 

!image-20240214-083108.png|width=1422,height=800!
acceptance: # Given that mentioned changes are done, when the user lands on the Document Tab in DvOps stage, the “VIEW / UPLOAD DOCUMENT” to be placed as shown in the snapshot provided in the description. 
# Given the mentioned changes are done, when user clicks on “VIEW / UPLOAD DOUMENT” button from the Document Tab in DvOps stage then user should be redirected to Filenet for documents uploaded for the particular applicant.
# Given the mentioned changes are done, there is no change in the existing flow.

key: ML-27221
summary: Geo Tagging for Rural Cases
description: While clicking a photo, In case of latlongs not captured, users should get a pop up stating “ Location not captured, do you want to proceed ?. 

After clicking all photos, if no photos have lat longs, then during final submit, user shoul dget a pop up saying “ location not captured for any photo, do you want to proceed?”

SFDC should be able to handle the case if location is not captured. 
acceptance: Users should be able to submit cases in case of location not captured

key: ML-26511
summary: 21. Creation of Employment Type against each product code for Perfios to share the respective reports
description: *Applicable:* MEL-PL-HL-LAP (applicable schemes)

*Business Case:* Perfios Team will add new product codes namely rhllapse, rhllapsa, rmelplse and rmelplsa respectively which is to be shared as part of the API response structure mentioned in [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link] so as to obtain the correct report from Perfios.

*Current:* Currently there are 6 employment types i.e., Corporate, Self-Employed, Pensioner, Salaried, Pensionar and Self-employed professional respectively which is shared as part of API response structure in [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link] basis which it is expected that Perfios will share the respective report in output.

*Proposed:* As mentioned above in the Business Case section, Perfios team will create new product types i.e., rhllapse, rhllapsa, rmelplse and rmelplsa respectively against which only two types of Employment Type i.e., Self-Employed and Salaried to be shared as part of the API response structure in [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link].

The following chart to be referred for mapping the respective product type with employment type:

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default","localId":"6682eb63-77bc-4db8-9ded-a96891a5d59a"},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"New Perfios “Product Type”","marks":[{"type":"strong"},{"type":"textColor","attrs":{"color":"#006644"}}]}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Current Employment Type","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Updated Employment Type","marks":[{"type":"strong"},{"type":"textColor","attrs":{"color":"#006644"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"rhllapse","marks":[{"type":"textColor","attrs":{"color":"#006644"}}]}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Corporate"}]}]},{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"Self Employed","marks":[{"type":"textColor","attrs":{"color":"#006644"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Self-Employed"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Self-employed Professional"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"rhllapsa","marks":[{"type":"textColor","attrs":{"color":"#006644"}}]}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Pensioner"}]}]},{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"Salaried","marks":[{"type":"textColor","attrs":{"color":"#006644"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Salaried"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Pensionar"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"rmelplse","marks":[{"type":"textColor","attrs":{"color":"#006644"}}]}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Corporate"}]}]},{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"Self Employed","marks":[{"type":"textColor","attrs":{"color":"#006644"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Self-Employed"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Self-employed Professional"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"rmelplsa","marks":[{"type":"textColor","attrs":{"color":"#006644"}}]}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Pensioner"}]}]},{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"Salaried","marks":[{"type":"textColor","attrs":{"color":"#006644"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Salaried"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Pensionar"}]}]}]}]}
{adf}

Product Type & Employment Type to be shared as part of the API response structure in [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link] against the following tags:

Product Type - "productType": "Variable", Variable

Employment Type - "employmentType": "Variable", Variable
acceptance: # Given that mentioned changes are done, when API 1 [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link] is triggered from SFDC, then the “product type” and “employment type” in the API request structure should have the new values as mentioned in the description.

key: ML-26007
summary: 28. Perfios Analysis Reset Functionality
description: *Applicable:* MEL-PL-HL-LAP (applicable schemes)

*Proposed:* Once API 3 responds successfully [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] and the fields on Banking Screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link] and Banking Details Screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] are populated basis the logic defined in [https://fincap.atlassian.net/browse/ML-26000|https://fincap.atlassian.net/browse/ML-26000|smart-link] then the user should be provided with an additional “Reset” button on UI as shown in below snapshot:

!image-20240221-121408.png|width=696,height=339!

Upon clicking the “Reset” button, user should be shown a pop up with the following message:

“{color:#ff5630}*Warning*{color}*: By clicking on "*{color:#ff5630}*Reset*{color}*," you will be redirected to the Perfios screen to start Perfios activities anew.*

*Do you want to continue?*” 

The pop up should also have “yes” and “No” buttons respectively.

Upon clicking the “Yes” button user would be redirected to Perfios Screen [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link] and [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link].

Once the user lands on the Perfios screen, then the cards available on the screen should be clickable and user should be allowed to proceed as per process by clicking on any of the cards.

In case the user clicks on the “No” button, user will have to proceed to the next stage by clicking on the “Next” button as mentioned in [https://fincap.atlassian.net/browse/ML-26000|https://fincap.atlassian.net/browse/ML-26000|smart-link]  

+Scenarios for Back end stamping when the user clicks on “Reset” button on the UI:+

# The user post landing on the Perfios Screen by clicking the “Reset” button proceeds with either “E-Statement” or “Scanned Statement” options and selects a new bank name from the available options [https://fincap.atlassian.net/browse/ML-24868|https://fincap.atlassian.net/browse/ML-24868|smart-link] then the stamping to be done as per the logics defined in [https://fincap.atlassian.net/browse/ML-24871|https://fincap.atlassian.net/browse/ML-24871|smart-link] by creating a new bank record within the object named “Perfios Bank Details”.
# The user post landing on the Perfios Screen by clicking the “Reset” button proceeds with either “E-Statement” or “Scanned Statement” options and selects the same bank name as done earlier from the available options then the earlier values stamped as per the logic defined in [https://fincap.atlassian.net/browse/ML-24871|https://fincap.atlassian.net/browse/ML-24871|smart-link] -to- should not be overwritten with the new values derived from the new statement uploaded by applying the logics mentioned in [https://fincap.atlassian.net/browse/ML-24871|https://fincap.atlassian.net/browse/ML-24871|smart-link] and a separate bank record to be created in back end to save details.
acceptance: # Given that mentioned changes are done, when the fields on Banking and Banking Details screen are populated basis the logic defined in [https://fincap.atlassian.net/browse/ML-26000|https://fincap.atlassian.net/browse/ML-26000|smart-link], then SFDC should provide the user with a “Reset” button on the UI.
# Given that mentioned changes are done, when the user clicks on the “Reset” button, then user should be shown the Pop-Up as mentioned in the description.
# Given that mentioned changes are done, when user clicks on the “Yes” button from the Pop-Up user should be redirected to the Perfios Screen showing the Cards.
# Given that mentioned changes are done, when user lands on the Perfios Screen, then user should be able to proceed as per the expected process by clicking on the available cards.
# Given that mentioned changes are done, when user selects a new bank name from the available options, then SFDC should be able to save the details by creating a new banking record in the object “Perfios Bank Details”.
# Given that mentioned changes are done, when user selects the same bank name as earlier, then SFDC should be able to overwrite the existing values with new values against the fields in the banking record within the object “Perfios Bank Details”.

key: ML-26004
summary: 27. Allowing users to have 3 attempts for completing Perfios Analysis - API 3 Error Handling
description: *Applicable:* MEL-PL-HL-LAP (applicable schemes)

*Proposed:* In continuation to [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] if the response from API 3 is not received successfully, then the fields on Banking Screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link] and Banking Details Screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] will not be populated and will remain blank.

In such scenarios, a “Retry” button to be available for the user on the UI in place of “View” button.

!image-20240217-142715.png|width=719,height=113!

In such cases, on the Banking Screen user should be shown a toast message stating “Perfios Response Failed, Please click "Retry" to attempt again. You have <N> attempts remaining.” In this “N” should be kept as a variable field and will get updated with every click as per the sequence mentioned below:

Before 1st click, the toast message should show - “Perfios Response Failed, Please click "Retry" to attempt again. You have 3 attempts remaining.”

Before 2nd click, the toast message should show - “Perfios Response Failed, Please click "Retry" to attempt again. You have 2 attempts remaining.”

Before 3rd click, the toast message should show - “Perfios Response Failed, Please click "Retry" to attempt again. You have 1 attempts remaining.”

Upon clicking this “Retry” button, API 3 to be called [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] and the response received from API 3 will be used to stamp the fields on Banking Screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link] and Banking Details Screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] respectively basis the logic mentioned in [https://fincap.atlassian.net/browse/ML-26000|https://fincap.atlassian.net/browse/ML-26000|smart-link].

User should be provided with 3 attempts to click the “Retry” button for recalling API 3 [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link]. In case API 3 does not responds successfully after the third attempt, then user should be allowed to proceed for next stage without completing the Perfios stage {color:#bf2600}by clicking “Next” button on the UI. This “Next” button should be enabled only when user has completed checking API 3 status for all applicants.{color}

{color:#bf2600}In case of multiple applicants, when API 3 responds successfully for one applicant and not for other applicant, then user should be allowed to proceed into next stage by clicking the “Next” button. {color}

Subsequently, the user should be shown a toast message informing the user of Perfios failure and to proceed without Perfios.
acceptance: # Given that mentioned changes are done, when API 3 [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] fails to respond successfully, then user should be provided with “Retry” button on the UI in place of “View” button as mentioned in the description.
# Given that mentioned changes are done, when the user clicks on the “Retry” button, SFDC should be able to call API 3 [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link].
# Given that mentioned changes are done, when API 3 fails to respond successfully, user should be provided with 3 attempts to click on the “Retry” button for successfully calling API 3.
# Given that mentioned changes are done, when user completes 3 attempts of clicking the “Retry” button and if API 3 still not responds successfully, then SFDC should allow user to proceed into next stage while showing the toast message as mentioned in the description.
# Given that mentioned changes are done, when API 3 fails to respond successfully, then the user should be shown the toast message as per the sequence mentioned in the description.
# {color:#bf2600}Given that mentioned changes are done, when API 3 fails to respond successfully, then the user should be allowed to proceed into next stage by clicking the “Next” button.{color}
# {color:#bf2600}Given that mentioned changes are done, when there are multiple applicants and API 3 responds successfully for one applicant and fails for other applicant then user should be allowed to proceed into next stage by clicking the “Next” button.{color}

key: ML-26000
summary: 25. Logic for populating the respective fields in banking and banking details screen respectively
description: *Applicable:* MEL-PL-HL-LAP (applicable schemes)

*Proposed:* 

Basis the account statement uploaded through API 2 [https://fincap.atlassian.net/browse/ML-24263|https://fincap.atlassian.net/browse/ML-24263|smart-link], Perfios will share the analysis in JSON format to SFDC.

Following JSON tags to be used to populate the respective fields on Banking [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link] and Banking Details [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] screens respectively.

Attached JSON response file from Perfios for reference.

+For Banking Screen+ [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link]+:+

|*Field Name*|*JSON Tag*|
|Eligibility|{color:#bf2600}Value to be replicated from “Consider for Eligibility” field{color}|
|Bank Name|"customerInfo": {
    "bank": "XXXXXXXXXXXXX",  *(variable field)*|
|Branch|"accountXns": [
       "location": "XX", *(variable field)*|
|Account Type|"statementdetails": [
           "statementAccounts": [
                     "accountType": "XX", *(variable field)*|
|Account No.|"statementdetails": [
           "statementAccounts": [
                     "accountNo": "XX", *(variable field)*|
|Avg. Bank Balance|"summaryInfo": {
    "average": {
      "balAvg": XX, *(variable field)*|
|Avg. Credit Balance|"summaryInfo": {
    "average": {
      "totalCredit": XX, *(variable field)*|
|Perfios Status|-TBD- {color:#bf2600}“Success” to be stamped when response is received successfully from Inbound Perfios API {color}[https://fincap.atlassian.net/browse/ML-28864|https://fincap.atlassian.net/browse/ML-28864|smart-link] {color:#bf2600}else “Unsuccessful” to be stamped.{color}|

+For Banking Details screen+ [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link]: 

|*Field Name*|*JSON Tag*|
|Name as per Bank Account|"customerInfo": {
    "name": "XXXXXXXXXXXXXXXX", *(variable field)*|
|Bank Name|"customerInfo": {
    "bank": "XXXXXXXXXXXXX", *(variable field)*|
|Bank Branch|"accountXns": [
       "location": "XX", *(variable field)*|
|Account Type|"statementdetails": [
           "statementAccounts": [
                     "accountType": "XX", *(variable field)*|
|Account No.|"statementdetails": [
           "statementAccounts": [
                     "accountNo": "XX", *(variable field)*|
|No. of Months Held|TBD|
|No. of EMI Bounces|"total": {
       "inwEMIBounces": XX, *(variable field)*|
|Outward Cheque Bounce|"total": {
       "outwChqBounces": XX, *(variable field)*|
|Inward Cheque Bounce|"total": {
       "inwChqBounces": XX, *(variable field)*|
|Consider for Eligibility|To be kept as a dummy field - Ticking functionality to be given to the user|
|One Month Prior to Eighteen Month Prior|"eODBalances":|

+For Category Screens+ [https://fincap.atlassian.net/browse/ML-25997|https://fincap.atlassian.net/browse/ML-25997|smart-link]+:+

Credit & Debit Entry Screen -

|*Field Name*|*JSON Tag*|
|No. of Credit Entries|"summaryInfo": {
   "total": {
      "credits": XX, *(variable field)*|
|No. of Debit Entries|"summaryInfo": {
   "total": {
      "debits": XX, *(variable field)*|
|Total Entries|Summation of Credit & Debit Entries|
|Total Credit Current Month|"monthlyDetails": [
   "totalCredit": XX, *(variable field)*|
|Total Credit One Month Prior|"monthlyDetails": [
   "totalCredit": XX, *(variable field)*|
|Total Credit Two Months Prior|"monthlyDetails": [
   "totalCredit": XX, *(variable field)*|
|Avg. Quaterly Balance|TBD|

Balance Screen -

|*Field Name*|*JSON Tag*|
|Minimum Balance|"summaryInfo": {
    "total": {
        "balMin": XX, *(variable field)*|
|Maximum Balance|"summaryInfo": {
    "total": {
        "balMax": XX, *(variable field)*|

Same tags to be used to save the details in Back End under “Perfios Bank Details” Object [https://fincap.atlassian.net/browse/ML-24871|https://fincap.atlassian.net/browse/ML-24871|smart-link]. New fields to be created with the field names as mentioned above within the record to save the details. 

Sample JSON response attached for reference.

[^R29Z1700159457480.json]

Once, the fields on Banking Screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link] ; Banking Details Screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] and the Category Screens [https://fincap.atlassian.net/browse/ML-25997|https://fincap.atlassian.net/browse/ML-25997|smart-link] are populated basis the logic defined above, then user should be provided with a “Next” button on the UI.

!image-20240221-121839.png|width=696,height=339!

Upon clicking this “Next” button user should be allowed to proceed into next stage.

{color:#bf2600}When Inbound API 3 responds success or fail then upload pop-up should get closed user will come on card items screen where he started the journey and Banking screen should be visible to him, {color}{color:#bf2600}-same scenario has to be done when user hard refresh the screen when API 3 inprogress bases on API 3 status.-{color}
acceptance: # Given that mentioned changes are done when Perfios shares the JSON response, SFDC should be able to accept the response.
# Given that mentioned changes are done when SFDC receives the JSON response from Perfios, it should be able to identify the correct tag for populating the respective field.
# Given that mentioned changes are done when the user lands on the screens mentioned above i.e., [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link] ; [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] and [https://fincap.atlassian.net/browse/ML-25997|https://fincap.atlassian.net/browse/ML-25997|smart-link] respectively, they should be able to view the  correct value against each field.
# Given that mentioned changes are done similar fields to be created under the record in Back End Object “Perfios Bank Details” to save the details received in JSON response from Perfios [https://fincap.atlassian.net/browse/ML-24871|https://fincap.atlassian.net/browse/ML-24871|smart-link].
# Given that mentioned changes are done when Perfios shares the JSON response, similar logic to be used to populate the fields in Back End “Perfios Bank Details” object.
# {color:#bf2600}Given that mentioned changes are done when Perfios analysis is completed and all fields are populated with the desired tags and user reaches the next stage of the journey then user should not have the option to re-initiate or click on any editable fields in Perfios Stage by coming back to the Perfios screen after clicking the Perfios button from the stage ribbon.{color}
# {color:#bf2600}Given that mentioned changes are done when user reaches the Perfios stage then user should not be able to edit or change the details entered in the previous stages by going back to those stages through stage ribbon.{color}
# {color:#bf2600}Given that mentioned changes are done when Inbound API 3 responds success or fail then upload pop-up should get closed user will come on card items screen where he started the journey and Banking screen should be visible to him, same scenario has to be done when user hard refresh the screen when API 3 inprogress bases on API 3 status.{color}

key: ML-25997
summary: 24. Creation of two Category screens within the Banking Details screen
description: *Applicable* : MEL-PL-HL-LAP ( applicable schemes)

*Proposed:* Creation of two category screens namely “Credit and Debit Entries” & “Balance” screens respectively within the banking details screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link].

In continuation to [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] the two category screens should appear within the second section of banking details screen when the user clicks on “view” button from the banking screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link].

+In the first category screens i.e., Credit and Debit Entries screen following fields to be visible:+

* No. of credit entries
* No. of debit entries
* Total entries
* Total credit current month
* {color:#bf2600}Total credit XX month prior (Here XX month is the period derived basis the logic defined in {color}[https://fincap.atlassian.net/browse/ML-24859|https://fincap.atlassian.net/browse/ML-24859|smart-link]{color:#bf2600}).{color}
** {color:#bf2600}For example, if XX value is determined to be 3, then the fields to be added as “Total Credit One Month Prior” ; “Total Credit Two Month Prior” and “Total Credit Three Month Prior” respectively.{color}
** {color:#bf2600}For example, if XX value is determined to be 6, then the fields to be added as “Total Credit One Month Prior” ; “Total Credit Two Month Prior” ; “Total Credit Three Month Prior” ; “Total Credit Four Month Prior” ; “Total Credit Five Month Prior” and “Total Credit Six Month Prior” respectively.{color}
** {color:#bf2600}For example, if XX value is determined to be 12, then the fields to be added as “Total Credit One Month Prior” ; “Total Credit Two Month Prior” ; “Total Credit Three Month Prior” ; “Total Credit Four Month Prior” ; “Total Credit Five Month Prior” ; “Total Credit Six Month Prior” till “Total Credit Twelve Month Prior”.{color}
** {color:#bf2600}For example, if XX value is determined to be {color}{color:#bf2600}-12-{color}{color:#bf2600} 18, then the fields to be added as “Total Credit One Month Prior” ; “Total Credit Two Month Prior” ; “Total Credit Three Month Prior” ; “Total Credit Four Month Prior” ; “Total Credit Five Month Prior” ; “Total Credit Six Month Prior” till “Total Credit Eighteen Month Prior”.{color}
* Average Quarterly Balance

+In the second category screens i.e., Balance screen following fields to be visible:+

* Minimum Balance
* Maximum Balance

Both these category screens should be available one after the other as shown in the below screenshot.

UI/UX for this screen should be same as per the snapshot shown below:

!24 (cfc23da2-1e0c-45e1-9a14-6ebf19a9ff19).jpg|width=940,height=457!

The screen should have a “Close” button placed at the bottom right corner on clicking which the Banking Details Screen along with the section and category screen should collapse and user should be able to view the Banking Screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link].
acceptance: # Given that mentioned changes are done, when the user lands on banking details screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] then the screen should also show the two categories namely, credit and debit entries & balance respectively.
# Given that mentioned changes are done, when the user lands on the banking details screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] then the two category screen should have the fields as mentioned in the above description.
# Given that mentioned changes are done, when the user lands on banking details screen the UI/UX of both the categories should be as per the screenshot provided in the description.
# Given that mentioned changes are done, when the user clicks the “Close” button on the UI, the Banking Details Screen should collapse and user should only be able to see the Banking Screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link].
# {color:#bf2600}Given that mentioned changes are done, when the user lands on this screen, then basis the XX value derived, SFDC should be able to add Total Credit XX Month prior field as mentioned in the description.{color}

key: ML-25994
summary: 23. Creation of Banking Details screen
description: *Applicable* : MEL-PL-HL-LAP ( applicable schemes)

*Proposed:* Creation of a screen to show the customer’s banking details. 

In continuation to [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link] this screen should appear when the user clicks “View” button from the banking screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link].

This screen should be available below the banking screen [https://fincap.atlassian.net/browse/ML-25714|https://fincap.atlassian.net/browse/ML-25714|smart-link].

The screen will comprise two sections with multiple fields.

+In the first section, following fields to be displayed:+

* Name as per Bank Account
* Bank Name
* Bank Branch
* Account Type
* Account No.
* No. of Months Held
* No. of EMI Bounces
* Outward Cheque Bounce
* Inward Cheque Bounce
* Consider for Eligibility

+In the second section following fields to be displayed:+

* {color:#bf2600}EOD Balance on Day 1, Day 7, Day 14, Day 21 and Day 28 respectively for the period determined basis the XX value which is derived basis the logic defined in {color}[https://fincap.atlassian.net/browse/ML-24859|https://fincap.atlassian.net/browse/ML-24859|smart-link]{color:#bf2600}.{color}
** {color:#bf2600}For example, if XX value is 3, then EOD balance to be shown from 1st month to 3rd month against the fields “One Month Prior” ; “Two Month Prior” and “Three Month Prior” respectively.{color}
** {color:#bf2600}For example, if XX value is 6, then EOD balance to be shown from 1st month to 6th month against the fields “One Month Prior” ; “Two Month Prior” ; “Three Month Prior” respectively” ; “Four Month Prior” ; “Fifth Month Prior” and “Six Month Prior” respectively.{color}
** {color:#bf2600}For example, if XX value is 12, then EOD balance to be shown from 1st month to 12th month against the fields “One Month Prior” ; “Two Month Prior” ; “Three Month Prior” respectively” ; “Four Month Prior” ; “Fifth Month Prior” ; “Six Month Prior” ; “Seven Month Prior” till “Twelve Month Prior”.{color}
** {color:#bf2600}For example, if XX value is 18, then EOD balance to be shown from 1st month to 18th month against the fields “One Month Prior” ; “Two Month Prior” ; “Three Month Prior” respectively” ; “Four Month Prior” ; “Fifth Month Prior” ; “Six Month Prior” ; “Seven Month Prior” till “Eighteen Month Prior”.{color}
* Here the fields for Day 1, Day 7, Day 14, Day 21 and Day 28 should be shown vertically and the month period horizontally as shown in the below screenshot.

UI/UX for this screen should be same as per the snapshot shown below:

!23.jpg|width=50%!

Within the banking details screen there should be two additional category screens namely, “Credit and Debit Entry” screen and “Balance” screen respectively [https://fincap.atlassian.net/browse/ML-25997|https://fincap.atlassian.net/browse/ML-25997|smart-link].

{color:#bf2600}*Note -* {color}{color:#bf2600}Screen to be made mobile compatible.{color}
acceptance: # Given that mentioned changes are done, when the user clicks on the “View” button from the banking screen then they should land on the Banking Details screen as per details mentioned in the description.
# Given that mentioned changes are done, when user land on banking details screen, they should be able to view the fields as mentioned in description.
# Given that mentioned changes are done, when the user lands on banking details screen the UI/UX should be as per the screenshot provided in the description.
# {color:#bf2600}Given that mentioned changes are done, when the user lands on this screen, then basis the XX value derived, SFDC should be able to add more rows for  XX Month prior field as mentioned in the description.{color}

key: ML-25902
summary: 15. Logic for calling the APIs
description: *Business Case:* To define the logic calling APIs in the process flow.

*Proposed:* On click of Upload button from story [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link] Upload start API will be called [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link]

When API 1 is triggered, parallely the DMS API should also be triggered to insert the document i.e., account statement in the Filenet [https://fincap.atlassian.net/browse/ML-25899|https://fincap.atlassian.net/browse/ML-25899|smart-link].

+Logic to trigger API 2+ 

Once API 1 and DMS APIs are called and API 1 has responded successfully then API 2 is to be triggered [https://fincap.atlassian.net/browse/ML-24263|https://fincap.atlassian.net/browse/ML-24263|smart-link]  API 2 will be triggered at each document level

In case user chooses to upload additional account statements, then API 2 to be called whenever user clicks on “Upload Another Statement” button [https://fincap.atlassian.net/browse/ML-25588|https://fincap.atlassian.net/browse/ML-25588|smart-link] 
acceptance: # Given that mentioned changes are done, when user clicks on “Upload” button on Pop up , SFDC should be able to call API 1.
# Given that mentioned changes are done, when upload is clicked, DMS should be called to inser t the document on filenet 
# Given that mentioned changes are done, when user clicks on Upload Another Statement , DMS will be called out to insert the new document on Filenet. this logic will work whenever a new document is uploaded from popup.

key: ML-25899
summary: 14. Technical story- DMS callout
description: *Business Case:* To create a new sub object named “Bank Document Details” under the object “Perfios Bank Details” [https://fincap.atlassian.net/browse/ML-24871|https://fincap.atlassian.net/browse/ML-24871|smart-link].

*Proposed:* In continuation to [https://fincap.atlassian.net/browse/ML-24871|https://fincap.atlassian.net/browse/ML-24871|smart-link] f

Once a document is uploaded , DMS API will be called to insert the document on Filenet. Existing document type and document name to be used for uploading bank statements. Once a document is uploaded corresponding to a Bank Record , then that document will be visible in the bank document details object 

File Name : File name of the document

Bank Name : Bank name as chosen by user

Transaction start date : As received from API 2 response

Transaction end date : As received from API 2 response

{color:#bf2600}Assumption {color}

{color:#bf2600}Existing API request and response to be used, Dev team will technical modifications in the code to save the document record in the new object {color}
acceptance: # Given that mentioned changes are done, when the document is uploaded then the same should be saved in Filenet successfully with the help of DMS API.
# Given that mentioned changes are done, when the document is uploaded successfully then the user should be able to view the toast message as mentioned in [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link]
# Given that mentioned changes are done, placement of objects and sub-objects to be as per the images in description.
# {color:#bf2600}Given that mentioned changes are done, existing functionality of Document upload in the journey should not be impacted on front end and back end except for mentioned changes{color}

key: ML-25714
summary: 22. Creation of Banking Screen
description: *Applicable* : MEL-PL-HL-LAP ( applicable schemes)

*Proposed:* Creation of a screen to show the banking of the customer. The screen will appear once the user clicks on “Submit to Perfios” button and after receiving successful response from API 3 [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link].

{color:#bf2600}In case API 3 fails to respond successfully then the handling should be as per the details mentioned in {color}[https://fincap.atlassian.net/browse/ML-26004|https://fincap.atlassian.net/browse/ML-26004|smart-link].

The screen will be available below the cards screen which is built in [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link]. Once the user lands on this banking screen, the cards should remain disabled.

This screen will comprise of the following fields:

* Eligibility
* Bank Name
* Branch
* Account Type
* Account No.
* Average Bank Balance
* Average Credit Balance
* Perfios Status

UI/UX for this screen should be same as per the snapshot shown below:

!image-20240118-061151.png|width=647,height=102!

The screen would also comprise of “View” button which should be available beside the fields mentioned above and as shown in the above snapshot.

Upon clicking the “View” button user should be able to view the “Banking Details” screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link] .
acceptance: # Given that mentioned changes are done, when user clicks on the “Submit to Perfios” button and API 3 shares success response to SFDC [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] then user should land on the banking screen.
# Given that mentioned changes are done when user lands on the banking screen, the cards [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link] visible above the screen should be disabled.
# Given that mentioned changes are done, when user lands on the banking screen they should be able to view the fields as mentioned in the description.
# Given that mentioned changes are done, when the user lands on banking screen the UI/UX should be as per the screenshot provided in the description.
# Given that mentioned changes are done, when user clicks on the “View” button then they should be able to view the “Banking Details” screen [https://fincap.atlassian.net/browse/ML-25994|https://fincap.atlassian.net/browse/ML-25994|smart-link].

key: ML-25611
summary: Application form changes - RMEL-RPL
description: *Applicable* :

All journey flows of RMEL/RPL  including top up

*Proposed* :

Two additions

# Add attached clause in the application form  , Placement is shown in image. 

!image-20240112-085524.png|width=1111,height=322!

2. Add attached clause in the application form  , Placement is shown in image. 

‘_I hereby provide the consent to the Bank to pull my KYC details from CERSAI & PAN details from NSDL as and when required by the Bank for the compliance’_. 

Placement -

!image-20240112-092313.png|width=907,height=146!
acceptance: * Given journey flow is of any RMEL/RPL  base or top-up flow, when application form is generated for any WIP or fresh case, then the desired changes should reflect in Application form in the mentioned location
* Given journey flow is of any RMEL/RPL  base or top-up flow, when application form is generated for any WIP or fresh case, then the desired changes should reflect in Application form in the same font style and font size as available in the section where clause is being added

key: ML-25588
summary: 17. When user clicks on Upload Another Statement , then API 2 should get triggered again
description: *Applicable* : MEL/PL/HL/LAP - Applicable schemes 

Continuation from [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link] 

+Upload Another Statement+  functionality

This button will be disabled by default , when user chooses next upload , then this button will be enabled , On click of this button

+When user clicks on Upload Another Statement+

if the user has uploaded another document  by click of Upload Another Statement button, then DMS would be called first to insert the document on filenet, once DMS is responded successfully then API 2 will be triggered again . This logic will work whenever a new document is uploaded by clicking *Upload Another statement* button

Above logic will work whenever users attempt fresh upload 

In the second or subsequent call of API 2 ,  password, file will be passed different basis the document upload
acceptance: # Given that mentioned changes are done , when users clicks on Upload, then user should be able to upload another document by using Upload Another Statement button
# Given that mentioned changes are done , then upload another document should be disabled until user chooses file for upload
# Given that mentioned changes are done , when user chooses the file, then the button will get  enabled and on click of button API 2 will be triggered again [https://fincap.atlassian.net/browse/ML-24263|https://fincap.atlassian.net/browse/ML-24263|smart-link] 
# Given that mentioned changes are done, when user attempts multiple document upload, then the mentioned logic should work
# Given that user attempts more than 1 document upload, API 2 should have same perfios transaction id as received in API 1 response and password, file should be basis the documents attempted for upload

key: ML-25573
summary: Office CPV Waivers - Update in current logic
description: *Current* : 

[https://fincap.atlassian.net/browse/ML-19781|https://fincap.atlassian.net/browse/ML-19781|smart-link] 

[https://fincap.atlassian.net/browse/ML-19870|https://fincap.atlassian.net/browse/ML-19870|smart-link] 

*Proposed* : 

||*Field*||*Inbound API Path*||
|Cur_Emp_nameConfidence|*Stamp result.uan[UAN sent in request].employer.nameConfidence for record = Current Employer else blank stamping*|
|Cur_Emp_isNameExact|*result.uan[UAN sent in request].employer.isNameexact for record = Current Employer else blank stamping*|
|Cur_Emp_isEmployed|*result.uan[UAN sent in request].employer.isEmployed for record = Current Employer else blank stamping*|
|Cur_Emp_isNameUnique|*result.uan[UAN sent in request].employer.isNameUnique for record = Current Employer else blank stamping*|
|Cur_Emp_isRecent|*result.uan[UAN sent in request].employer.isRecent for record = Current Employer else blank stamping*|
|Cur_Emp_emplrScore|*Request > result*>*summary -> uanLookup -> matchScore if value received else Blank stamping*|



UANnamematch - tag value in FICO Request to be mapped from *result.uan[UAN sent in request].employer.uannamematch for record = Current Employer else blank stamping*
acceptance: # Given that when a case is eligible for Office CPV waivers, when Karza EPF Async inbound call is received , then *Cur_Emp_emplrScore*  related to current employer should get stamped when match score received is greater than 0 and less than 1
# Given that when a case is eligible for Office CPV waivers, when Karza EPF Async inbound call is received , then other fields as described related to current employer should get stamped when match score received is greater than 0 and less than 1
# Given that when a case is eligible for Office CPV waivers, when Karza EPF Async inbound call is received , then logics will work as per current flow when match score is 0 or 1
# Given that mentioned changes are done, when the case is processed in PL, the office CPV functionality will work as built in [https://fincap.atlassian.net/browse/ML-15206|https://fincap.atlassian.net/browse/ML-15206|smart-link] except for changes done in this user story. Also [https://fincap.atlassian.net/browse/ML-19870|https://fincap.atlassian.net/browse/ML-19870|smart-link]  should work as it is  except for changes described

key: ML-25556
summary: 19. Date Validation Logic - Part 2
description: *Applicable* : MEL/PL/HL/LAP ( applicable schemes )

Continuation from [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link] 

*Proposed* 

When the date range doesn't cover range of the period and Submit to Perfios is disabled, to move forward with the case, user can upload additional document as mentioned in [https://fincap.atlassian.net/browse/ML-25588|https://fincap.atlassian.net/browse/ML-25588|smart-link] ,  API 2 will be triggered again and Perfios will share a new response for new document uploaded

In continuation to [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link] if the user uploads another document then API 2 will be triggered and a new response will be received with transaction start date and end date in API 2 call. SFDC will stamp the dates in bank document detail record corresponding to the new document uploaded as mentioned in [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link] 

The logic will work whenever new document is uploaded 

*Logic to update date range*

SFDC will compare the new values -  Transaction End Date and Transaction Start Date respectively received with value present in  Date range 

If value of transaction start date is earlier than start date in Date range , then start date in Date range will be updated with new value, else same value will be retained as start date in Date range

If value of transaction end date is recent than end date in Date range , then end date in Date range will be updated with new value, else same value will be retained as end date in Date range

Latest date range should be stamped on UI and back end as soon as the transaction start and end date is stamped for second or further documents

*Example:*

# If the date range  from initial document uploaded is identified as 25-Jan-24 - 22-Feb-24 and the revised  transaction start date and end date from additional document uploaded is identified as 28-Dec-23 - 10 Mar-24, then revised *date range* to be saved as  i.e., 28-Dec 23 - 10-Mar-24.
# If the date range  from initial document uploaded is identified as 25-Jan-24 - 22-Feb-24 and the revised transaction start date and end date from additional document uploaded is identified as 30 Jan 24 - 10 Mar 24, then revised *date range* to be saved as  i.e., 25-Jan-24 - 10-Mar 24.
# If the date range  from initial document uploaded is identified as 25-Jan-24 - 22-Feb-24 and the revised  transaction start date and end date from additional document uploaded is identified as 5 Jan 24 - 10 Feb 24, then revised *date range* to be saved i.e., 5-Jan-24 - 22-Feb-24.

Date range would be one unique value stamped under the field Date Range on UI, whether 1 or multiple documents are uploaded 

Logic to enable Submit to Perfios will run as soon as the updated date range is stamped  as per the [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link] 
acceptance: # Given that Submit to Perfios is not enabled, when user uploads 2nd or further more documents , then date range should get updated on UI and back end as per the logic described
# Given that Submit to Perfios is not enabled, when user uploads another documents , then  transaction start and end date should get corresponding to the uploaded document in the back end in bank document detail record
# Given that Submit to Perfios is not enabled, when user uploads 2nd or further more documents , then Submit to Perfios should get enabled only when the logic to enable it is met as per [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link] 
# Given that date range doesnt meet the critieria to enable submit to perfios button, then user should be forced to upload necessary documents and then only submit to Perfios should get enabled for clicking
# Given Submit to perfios is enabled, then user should be able to click on it and API 3 should get triggered [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] 

key: ML-25553
summary: 18. Date Validation Logic - Part 1
description: *Applicable*  : MEL-PL-HL-LAP ( applicable schemes)

Continuation from [https://fincap.atlassian.net/browse/ML-24263|https://fincap.atlassian.net/browse/ML-24263|smart-link]  and [https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link] 

*Business Case:* To identify the transaction start date and end date as received from Perfios in API 2  [https://fincap.atlassian.net/browse/ML-24263|https://fincap.atlassian.net/browse/ML-24263|smart-link]  for the uploaded statement and stamp the same in *Date Range* field  [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link] 

When the customer has uploaded necessary statements for the Period , then allow customers to Click on Submit to Perfios.

*Logic to stamp date range :*

Basis the document uploaded, Perfios will identify the transaction start date and end date respectively and return the same to SFDC in API 2 Response [https://fincap.atlassian.net/browse/ML-24263|https://fincap.atlassian.net/browse/ML-24263|smart-link] 

Two new fields to be created on SFDC back end where the transaction start date and end date will be stored as received from API 2 corresponding to the document uploaded in Bank Document Detail Record 

"transactionEndDate": "2023-11-30" > stamp this in Transaction End Date 
"transactionStartDate": "2023-09-01" > stamp this in Transaction Start Date

Date range will be updated in this format >>  *1-Sep-23 - 30-Nov-23* basis transaction start and transaction end date values and will be visible on UI [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link]. Date range to be saved on back end 

+*Logic to Enable Submit to Perfios*+ 

If date range covers the *range from* and *range to* available in the *Period* [https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link]  , then the “Submit to Perfios” button on the UI to be enabled so that user can click the button and trigger API 3 [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link]  else Submit to Perfios will be kept disabled and user will have to upload necessary documents fullfilling the above condition to enable Submit to Perfios

For example , Period = Jun-23 to Nov-23 as per [https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link] 

# date range = 1-Jun-23 - 30-Nov-23, then submit to Perfios will be enabled, as date range covers the period range from =Jun -23  and range to= Nov-23 , similar scenarios mentioned below
# date range =  1-May-23- 25-Sep-23, then submit to Perfios will be disabled as date range doesnt cover the period range to = Nov-23
# date range = 10-Jul-23 - 1-Nov-23,  then submit to Perfios will be disabled as date range have doesnt cover the period range from = Jun-23
# date range = 10-Jul-23 - 1-Aug-23 , then submit to Perfios will be disabled as date range   doesnt cover the period range from =Jun-23 and range to= Nov-23 
# date range = 1-Apr-23 - 1-Dec-23, then submit to Perfios will be enabled as date range  covers the period range from =Jun-23 and range to= Nov-23

Continuation  in [https://fincap.atlassian.net/browse/ML-25556|https://fincap.atlassian.net/browse/ML-25556|smart-link] 
acceptance: # Given that API 2 is triggered, SFDC should be able to save the transaction start and end date on SFDC in desired format in bank document detail record corresponding to the document uploaded from SFDC 
# Given that API 2 is triggered, SFDC should be able to derive the date range and save it on SFDC in desired format
# Given that API 2 is triggered, SFDC should show date range in the pop up on UI as per [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link] 
# Given that API 2 is triggered, when the SFDC establishes that date range covers the range from and range to from the period, then only Submit to Perfios will be enabled
# Given that API 2 is triggered, when the SFDC establishes that date range doesn’t cover the range from and range to from the period, then Submit to Perfios will be disabled. Should work with all possible scenarios as described. Also should work with different period ranges of 3 , 6 , 12 months [https://fincap.atlassian.net/browse/ML-24859|https://fincap.atlassian.net/browse/ML-24859|smart-link]  and [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] 
# Given that Submit to Perfios is clicked, the API 3 will be triggered [https://fincap.atlassian.net/browse/ML-24523|https://fincap.atlassian.net/browse/ML-24523|smart-link] 
# Given that mentioned changes are done, when the year changes then date should automatically adjust according to year.

key: ML-25334
summary: 12. Logic to derive Period and year range in Perfios Upload start API
description: *Business Case:* To determine the start date and end date of banking account statements to be considered for Perfios analysis basis the Perfios Scheme Master created against [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link].

*Proposed:* Continuation to [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link] , values for below mentioned fields to be updated with format YYYY-MM:

"yearMonthTo":

"yearMonthFrom":

*Process Overview:*

SFDC identifies the number of months banking account statements to be obtained as XX value which is  obtained as per the logic mentioned in [https://fincap.atlassian.net/browse/ML-24859|https://fincap.atlassian.net/browse/ML-24859|smart-link] .

Post obtaining the XX value, SFDC to identify the LAN creation date and basis that it will ascertain the month and year to be sent in mentioned tags 

*Logic:*

If LAN creation date is in  within 15^th^ of the month and -current-  {color:#bf2600}the {color}month is N then bank account statement to be considered for analysis should be from period (N-2)-(XX-1) to  N-2 

If the LAN creation date is more than 15^th^ of the month and -current- {color:#bf2600}the{color} month is N  then bank account statement to be considered for analysis should be from period (N-1)-(XX-1) to (N-1) 

The logic should auto adjust basis the year , examples given below 

{color:#bf2600}Logic to check compare LAN creation date within N days of the month should be configurable at BU level . Currently value is 15 , if business wants to update the number of days, it should be a configuration changeCreate a custom label in which number of days can be saved as 15 in first release {color}

*Example:*

If LAN creation date is 05-Jan-24 and XX value is 3, then bank account statement to be taken for the period Sep-23 to Nov-23.

If LAN creation date is 25-Jan-24 and XX value is 3, then bank account statement to be taken for the period Oct-23 to Dec-23.

If LAN creation date is 05-Mar-24 and XX value is 3, then bank account statement to be taken for the period Nov-23 to Jan-24.

If LAN creation date is 25-Mar-24 and XX value is 3, then bank account statement to be taken for the period Dec-23 to Feb-24.

If LAN creation date is 05-Jan-24 and XX value is 6, then bank account statement to be taken for the period Jun-23 to Nov-23.

If LAN creation date is 25-Jan-24 and XX value is 6, then bank account statement to be taken for the period Jul-23 to Dec-23.

If LAN creation date is 05-Mar-24 and XX value is 6, then bank account statement to be taken for the period Aug-23 to Jan-24.

If LAN creation date is 25-Mar-24 and XX value is 6, then bank account statement to be taken for the period Sep-23 to Feb-24.

Basis the period identified by SFDC,  tag values  to be passed in below format

if the period is Sept-23 to Feb-24. 

"yearMonthTo": 2024-02

"yearMonthFrom": 2023-09

if the period is Jun-23 to Nov-23.

"yearMonthTo": 2023-11

"yearMonthFrom": 2023-06

and likewise for other period on case to case basis

User should be shown a informatory message next to Choose file [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link] 

*Bank statement should have transactions between < Variable >* Variable = Period identified , for example *Jun-23 to Nov-23*. this message will provide information to upload correct document . Font style should be such that it fits within the pop-up window

{color:#bf2600}Period should be saved on back end {color}[https://fincap.atlassian.net/browse/ML-24871|https://fincap.atlassian.net/browse/ML-24871|smart-link] 
acceptance: # Given that mentioned changes are done, when API 1 is triggered , SFDC should be able to pass the tag values for >> yearmonthto & yearmonthfrom in API 1 [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link]  successfully
# Given that mentioned changes are done, when API 1 is triggered  , SFDC is passing the correct values of period as per the logic, should work for all possible values of XX as per [https://fincap.atlassian.net/browse/ML-24859|https://fincap.atlassian.net/browse/ML-24859|smart-link]  and [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] 
# Given that mentioned changes are done, SFDC should be able to replicate the changes across all applicable schemes of  MEL / PL / HL /LAP.
# Given that user opens up the pop up to upload the document, then user should be able to identify the period for which bank statement is to be uploaded with the help of text message next to Choose file button 
# {color:#bf2600}Custom label to be created using which Logic to check compare LAN creation date within N days of the month can be run. the logic should work if N= 15, or any other day of the month{color}

key: ML-25015
summary: 7. As a User, I should be able identify if Perfios is mandatory for any applicant type in the Journey
description: *Applicable* : MEL/PL/HL/LAP  ( applicable scheme records)

*Proposed* : 

Mandatory icon should appear just above name of applicant which will act as a information to RO to mandatorily attempt Perfios for the said applicant. UI/UX to be similar to below

Perfios Mandatory ( Color Red)

Perfios Optional ( Color Green)

!image-20231222-041108.png|width=196,height=46!

Logic 1

SFDC will identify the scheme at LAN and identify the scheme record in [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] and check for Mandatory Logic field value. If it is ticked, SFDC will run Logic 2. If it is unticked, Perfios Optional will be visible for each applicable applicant type

Logic 2

SFDC will check if LAN loan amount is less than LAN amount at scheme record level  , if satisfied, Perfios Optional will be visible for each applicable applicant type, else check for Logic 3

Logic 3

When LAN Amount is greater than equal to LAN amount at scheme record level , then SFDC will check employment type at each applicable applicant level , if it matches any values saved at scheme record level, then Logic 4 will work else Perfios Optional will be visible for that applicable applicant type

Logic 4 

SFDC will check 

for PL, if Employment type- Salaried , then Perfios Mandatory will be visible for that applicant type When Salary type = Salary Slip else Perfios Optional

for other Employment type, Perfios Mandatory

for LAP , if Employment type - Salaried , then Perfios Mandatory will be visible for that applicant type when Salary Mode = Verified Salary ,  else Perfios Optional 

for other Employment type, Perfios Mandatory

for HL, , if Employment type - Salaried , then Perfios Mandatory will be visible for that applicant type when Employed With = Government/PSUs/ MNCs/ Public / Pvt Ltd Companies else Perfios Optional

for other Employment type, Perfios Mandatory

for MEL , if Employment type- Salaried , then Perfios Mandatory will be visible for that applicant type When Salary type = Salary Slip else Perfios Optional

for other Employment type, Perfios Mandatory

+*Logic to display Skip and Proceed*+

Continuation from [https://fincap.atlassian.net/browse/ML-24664|https://fincap.atlassian.net/browse/ML-24664|smart-link] 

If all the applicable applicant types on Perfios screen have Perfios Optional , then Skip and Proceed would be visible else it would not be visible 

All the logics will run on load of Perfios Screen so that User get option to click on Skip and Proceed wherever applicable

Screen should be mobile compatible
acceptance: # Given that mentioned changes are done , when user lands on Perfios , then user should Perfios Mandatory / Optional icon for each applicant type on Perfios screen , also should work for applicable scheme records of MEL-PL-HL-LAP
# Given that mentioned changes are done , when user lands on Perfios , User should be able to understand for which applicant Perfios is mandatory/optional
# Given that mentioned changes are done , when user lands on Perfios , then , UI/UX of Perfios Mandatory/Perfios Optional is as per description
# Given that mentioned changes are done , when user lands on Perfios , the Logic to show Perfios mandatory/optional should be as per description and should work for applicable applicant types only [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link] 
# Given that mentioned changes are done , when user lands on Perfios , then in all the cases where Perfios is mandatory for 1 or more applicant type , Skip and Proceed button [https://fincap.atlassian.net/browse/ML-24664|https://fincap.atlassian.net/browse/ML-24664|smart-link]  will not be visible on UI and case would not be allowed to move ahead , RO would be forced to attempt Perfios
# Given that mentioned changes are done , when user lands on Perfios, then where Perfios is optional, RO would not be forced to attempt Perfios and case should be allowed to move forward by click of Skip and Proceed
# Given that mentioned changes are done, when customer land on Perfios screen, user should be able to find Skip and Proceed at bottom of the screen if applicable as per the logics available in the description for each Business unit and their scheme records as per the Perfios master [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] 
# Given that mentioned changes are done, when customer land on Perfios screen, then Skip and Proceed should not be visible on UI if LOGIC is not satisfied as per description, user should not be able to move forward the case to next stage in such scenarios 
# Given that mentioned changes are done, when customer land on Perfios screen, user should be able to view the screens and cards on Mobile View, the screens should be mobile compatible

key: ML-25012
summary: ##. Error handling
description: nan
acceptance: 1

key: ML-25005
summary: Freeze issue in PD App
description: Fields are non editable after Fico call. User is abel to click on the next button even before the screen loads resulting in all the fields getting freezed.

User should not be allowed to click on next ( Disable the next button) till the page loads completely 
acceptance: User should not be allowed to click on next until the screen loads.

Fields should be editable after fico call.

key: ML-25001
summary: 10. On Click of ADD ANOTHER BANK , user should be able to select another bank for Perfios Analysis
description: nan
acceptance: 1

key: ML-24871
summary: 13. Stamping logics
description: *Business Case:* To create a new object in Back End in order to stamp data related to Perfios

*Proposed:* A new object to be created in Back End named “Perfios Bank Details” 

Object would be available at loan application level 

!image-20240119-083650.png|width=975,height=169!

On click of this object, records will be visible with below identifiers

Bank Name  - Basis the Bank Name selected by the Applicant on Perfios Screen [https://fincap.atlassian.net/browse/ML-24868|https://fincap.atlassian.net/browse/ML-24868|smart-link] 

Applicant : Name of the applicant corresponding to which Perfios is performed 

Perfios transaction Id : In API 1 response, perfios transaction id received 

In each record , following fields will be created

Date Range : [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link]  and [https://fincap.atlassian.net/browse/ML-25556|https://fincap.atlassian.net/browse/ML-25556|smart-link] 

Perfios Transaction Id [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link] 

Period  [https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link] 

more fields will be added in next stories 

!image-20240119-083921.png|width=764,height=140!

In each record ,  there will be fields and a sub object will be visible as Bank Document Details. Each record in this object will have fields. 

Fields : 

Document type, Document Name , File Name , Bank Name , Transaction Start Date , Transaction End Date. Continuation [https://fincap.atlassian.net/browse/ML-25899|https://fincap.atlassian.net/browse/ML-25899|smart-link] 

!image-20240119-084332.png|width=551,height=95!

New Report to be created : Perfios Bank Details with Applicant and Loan Application

{color:#bf2600}Dependency{color}

{color:#bf2600}When the record would be created in Perfios Bank details and Bank document details objects.{color}
acceptance: # Given that mentioned changes are done, when user should be able to find the object with the correct name.
# Given that mentioned changes are done, records should be created in the Perfios Bank Details object when API 1 is triggered. {color:#bf2600}Developer to confirm if this is technically correct approach{color}
# Given that mentioned changes are done, object should have child records as described.
# Given that mentioned changes are done, in child record user should be able to find the fields as described.
# Given that mentioned changes are done, in the child record user should be able to find the sub object which is Bank Document Details.
# Given that mentioned changes are done, record should be created in the sub object when the document is uploaded successfully. {color:#bf2600}Developer to confirm if this is technically correct approach{color}

key: ML-24868
summary: 8. On click of Select on E- Bank Statement and Scanned Statement , user should land on screen to select Bank
description: *Proposed* : 

When user clicks on SELECT on E-Bank Statement and Scanned statement as below, then 

!image-20231219-103701.png|width=746,height=375!

Customer should land on next screen , stage/substage , header and ribbon will remain same for this screen. Screen will look as below 

!image-20231219-103739.png|width=751,height=329!

Heading Name will be *E- Bank Statement Upload* or *Scanned Statement Upload* depending on the Card selected by the user 

Static text points will remain same as build in [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link] . Two more points to be added in the static text below earlier points

Make sure correct Bank Name is chosen

E-statement is uploaded and not scanned ( show this text only when heading name=  *E- Bank Statement Upload* )

{color:#bf2600}Upload Statement for <Variable> Variable = Applicant name , This statement should be in bold letters{color}

Below static text , create field *Bank Name* , It will be a drop down searchable field, user will get option to select bank or type in bank name key words to quickly identifying the bank from list of options , List of bank will be basis the records created in [https://fincap.atlassian.net/browse/ML-22565|https://fincap.atlassian.net/browse/ML-22565|smart-link] 

!image-20231219-104341.png|width=478,height=179!



Next to Bank Name field , user will get button INITIATE UPLOAD  . On click of INITIATE UPLOAD [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link] 

-Next to INITIATE  UPLOAD button,  user should get a button ADD ANOTHER BANK. On click of ADD ANOTHER BANK ,- [https://fincap.atlassian.net/browse/ML-25001|https://fincap.atlassian.net/browse/ML-25001|smart-link]  -.- 

GO BACK button to be placed below  Bank Name field. By click of GO BACK , user should be able to return to Cards screen. GO BACK button would be present at Applicant level and not at Loan application, hence placement should be appropriate and clear to RO.

!image-20231219-103739.png|width=751,height=329!

Sequence of Fields and Buttons on UI

Bank Name > INITIATE UPLOAD -> ADD ANOTHER BANK-



*Dependency*

Product/Credit team to confirm the list of static text points for E-Bank Statement and Scanned Statement Cards
acceptance: # Given that mentioned changes are done , When user clicks on SELECT in E-Bank statement or Scanned statement , then user should land on next screen
# Given that mentioned changes are done, When user clicks on SELECT in E-Bank statement or Scanned statement , then next screen should have static text, fields and buttons as described. Text points should appear as described as applicable
# Given that mentioned changes are done, When user is on PERFIOS screen, then user should not be able to click SELECT on more than 1 card
# Given that mentioned changes are done, When user is on next screen, user should be able to select Bank Name  from drop down or typing in key words for quickly searching the banks 
# Given that mentioned changes are done, when user has clicked SELECT on E-Bank Statement or Scanned statement , then user should be able to return to Cards Screen by clicking on GO BACK
# Should work on Mobile and Desktop 

key: ML-24865
summary: 9. When user clicks on INITIATE UPLOAD , a popup should appear on UI to upload Bank statements
description: *Case* : When a user clicks on Initiate Upload after selecting the Bank Name, a user should get an option to upload the bank statement 

*Proposed* : 

Continuation to [https://fincap.atlassian.net/browse/ML-24868|https://fincap.atlassian.net/browse/ML-24868|smart-link] 

Clicking Initiate Upload will be disabled until Bank Name is selected from the drop down .  When user selects Bank Name and then user clicks on INITIATE UPLOAD, A new popup should appear on UI. Pop up window will have below fields. UI/UX to remain same . 

!image-20231219-095926.png|width=418,height=262!

Card Selected : E- Bank Statement 

Choose File : On click of this, user will get option to access files on his desktop/Mobile and select PDF statement  . User should not be allowed to upload any other format, Show a message to the user below Choose File, *PDF formats only* 

Card Selected : Scanned Statement 

Choose File : On click of this, user will get option to access files on his desktop/Mobile and select Image {color:#bf2600}( JPEG, JPG, PNG ){color}/ PDF statement  . 

Password to open the E-Bank statement - Password to open the protected field  ( Non- Mandatory) ( This field will be not shown on pop up for Scanned Statements)

Upload Status  ( Header )

File Name : Will reflect the name of File uploaded by the user

Date Range : Logic in Next story [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link] 

Status : Logic in Next story

Upload : By default it will be disabled, once file is uploaded by the user, it should get enabled for clicking, On click of Upload , Upload start API will be called [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link] 

Once Upload is initiated, Show toast message as “ Processing in progress, kindly wait” - {color:#bf2600}This is to be shown post user has uploaded the account statement and further processing is in progress. This should be shown in amber bar as available in below image.{color} 

Once the file is uploaded successfully, Show toast message as “File Uploaded Successfully” {color:#bf2600}- This is to be shown once user has completed uploading the account statement document. This should be shown in green bar as available in below image.{color}

Once file is uploaded successfully, Upload button to be replaced by Upload Another Statement [https://fincap.atlassian.net/browse/ML-25588|https://fincap.atlassian.net/browse/ML-25588|smart-link]  .  -On click of this button, user should be able to upload another document similarly as first attempt-

!image-20231220-091142.png|width=442,height=337!

Submit to Perfios : It will be disabled and will get only when conditions are met  Logic in Next story Next story [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link] 

*Assumption* 

Only PDF statements to be uploaded for E-Bank Statements, PDF statements would be bank statements downloaded from Bank website,  system generated documents received from Bank.

Password entered to open bank statement should not be saved on SFDC, it will be just consumed to pass to Perfios in API request

{color:#bf2600}As feedback from dev team, the password has to be saved on SFDC in encrypted form and later on can be decrypted to show it to certain profiles{color}

*Dependency*

Dev to confirm the size limit for a PDF document

-Product to confirm if the file uploaded to be saved on Filenet-

Perfios/Product to confirm the format required for Scanned Statements

File size to be checked for bank statement, document should be allowed to upload on Filenet
acceptance: # Given that mentioned changes are done, When the user selects Bank Name, then only user should be allowed to click Initiate Upload
# Given that mentioned changes are done, When the user selects Initiate Upload, user should be shown a popup as described and UI/UX to be as per description for both the card types
# Given that mentioned changes are done, When the pop up is opened, user should get option to click X to close the pop up
# Given that mentioned changes are done, When the pop up is opened, user should be only allowed to Upload PDF statements
# Given that mentioned changes are done,When the pop up is opened, user should be allowed to enter password for pdf statements
# Given that mentioned changes are done,When the user clicks on Upload, Upload start API should get triggered, Upload Another statement button should be visible on UI instead of Upload
# Given that mentioned changes are done,When the pop up is opened, by default Upload and Submit to Perfios will be disabled by default. Upload will be enabled only when PDF is attached from user’s desktop or mobile
# Given that mentioned changes are done,When the user attempts upload, user should see information toast message as described
# Given that mentioned changes are done,When the user lands on the page, should work on Mobile and Desktop

key: ML-24862
summary: 10. Perfios Configuration master
description: *Proposed :* 

Create Perfios Configuration settings for each BU to determine tag values in [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link] 

Create 4 records in below format . Sample reference from Org1

!image-20240104-082447.png|width=984,height=455!

PERFIOS_UPLOADSTART_RMEL

PERFIOS_UPLOADSTART_RPL

PERFIOS_UPLOADSTART_RHL

PERFIOS_UPLOADSTART_RLAP

When any record is clicked, following page with below mentioned fields will be visible. Values to be filled at field level is mentioned below for each BU record. 

!image-20231220-092842.png|width=971,height=337!

*Name :* 

PERFIOS_UPLOADSTART_RMEL

PERFIOS_UPLOADSTART_RPL

PERFIOS_UPLOADSTART_RHL

PERFIOS_UPLOADSTART_RLAP

*AES_encryption_salt*

TBD in RMEL/RPL/RHL/RLAP records

*acceptancePolicy*

*atLeastOneTransactionInStartAndEndMonths* in RMEL/RPL/RHL/RLAP records

*clientId* 

SFDC in RMEL/RPL/RHL/RLAP records

*loanType*

RMEL/RPL/RHL/RLAP  depending on the BU

*txnId*

TBD in RMEL/RPL/RHL/RLAP records

*vendorId*

capitalFirst in RMEL/RPL/RHL/RLAP records

*returnUrl*

TBD in RMEL/RPL/RHL/RLAP records

*AES_encryption_key*

TBD in RMEL/RPL/RHL/RLAP records

*PerfiosUrls :* 

*UAT  :* [*https://apiext.uat.idfcfirstbank.com/generic-stmt-analyzer/api/v1/perfios/txn/status*|https://apiext.uat.idfcfirstbank.com/generic-stmt-analyzer/api/v1/perfios/txn/status] in RMEL/RPL/RHL/RLAP records

*Production :* [*https://apiext.retailassets.idfcfirstbank.com/generic-stmt-analyzer/api/v1/perfios/txn/status*|https://apiext.retailassets.idfcfirstbank.com/generic-stmt-analyzer/api/v1/perfios/txn/status%22,] in RMEL/RPL/RHL/RLAP records

*apiVersion :* 2.1 in RMEL/RPL/RHL/RLAP records

*institutionId :*  By default blank in RMEL/RPL/RHL/RLAP records

*productType :* rmel/rpl/rhl/rlap depending on the BU

*uploadingScannedStatements :* By default blank in RMEL/RPL/RHL/RLAP records

*dateRangeMonth* : By default blank in RMEL/RPL/RHL/RLAP records
acceptance: # Given that mentioned changes are done, , when user searches Custom settings , User should be able to see All the BU records , records are created as per description in Custom settings, all the fields and values should be available as described
# Given that mentioned changes are done, when user searches Custom settings, then L1 user should be able to reconfigure values,  Updating values should be configurable in nature and L1 user should be able to update it on request of Business stakeholders

key: ML-24859
summary: 6. Build a logic to update values in Customer Bank Statement Section
description: *Applicable* : MEL/PL/HL/LAP ( Applicable schemes)

*Proposed* : 

Continuation to [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link] 

XX Value will be derived basis below logic

SFDC will identify the scheme record from [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link]  which matches with LAN scheme

SFDC will identify the employment type of applicant  at LAN level and basis the employment type will identify the{color:#bf2600} applicable field to read the months from below fields at the record level .  {color}

!image-20240125-060211.png|width=366,height=173!



For example 

If the applicant type is Self Employed in MEL Repeat Bank case, then SFDC will identify the scheme record 58694 which matches with LAN scheme and identify the Self Employed Months = 6

Basis the month identified, XX value will be derived and visible on UI

ZZ Value will be derived basis below logic

SFDC will identify the scheme record from [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link]  which matches with LAN scheme

SFDC will identify  the month record from Scheme record for Salaried Months and thus ZZ value will be derived
acceptance: # Given that mentioned changes are done, when customer lands on Perfios screen, user should be able to see values of Months for which statement has to be uploaded in XX and ZZ as per [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link] 
# Given that mentioned changes are done, when customer lands on Perfios screen, Value of months should be derived from the scheme record in master basis the employment type in the LAN 
# Given that mentioned changes are done, when customer lands on Perfios screen, then logic should work for MEL/PL/HL/LAP applicable scheme records

key: ML-24664
summary: 5. Skip and Proceed Perfios and related logics
description: *Applicable* : MEL/PL/HL/LAP ( Applicable schemes as per [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] )

Continuation to [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link] 

*Skip and Proceed*

A button should be created at bottom of the screen below cards ( Same UI/UX as NEXT Button). User should be able to click on it to move to Next screen as per current flow and skip the Perfios flow.[https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link]  and [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link] . 

On click of Skip and Proceed , the existing flow will work as it is . the case will land on next stage {color:#bf2600}as per the current flow . Current flow : On click of Next on loan detail entry, the case moves to Eligibility screen and FICO is called . Skip and Proceed button would be available at loan application level{color}

{color:#bf2600}Skip and Proceed Button will enabled on front end  only when below logic satisfies.{color}[https://fincap.atlassian.net/browse/ML-25015|https://fincap.atlassian.net/browse/ML-25015|smart-link] 

{color:#bf2600}-Logic 1-{color}

{color:#bf2600}-SFDC will identify the scheme at LAN and identify the scheme record in- {color}[https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link]{color:#bf2600} -and check for Mandatory Logic field value. If it is ticked, SFDC will run Logic 2. If it is unticked, SFDC will enable Skip and Proceed-{color}

{color:#bf2600}-Logic 2-{color}

{color:#bf2600}-SFDC will check if  LAN loan amount is greater than equal to- {color}{color:#bf2600}*-Value mentioned at record level-*{color}{color:#bf2600} -AND Employment type is equal to-{color}{color:#bf2600} *-value available in the field Employment type at record level-* {color}{color:#bf2600}-for all applicant types. If both condition is satisfied , then SFDC will not enable Skip and Proceed for HL, SFDC will check for Logic 3 for PL , HL and LAP-{color}

{color:#bf2600}-If any one of the condition fails SFDC will enable Skip and Proceed.- {color}

{color:#bf2600}-Logic 3-{color}

{color:#bf2600}-SFDC will check- {color}

{color:#bf2600}-for PL, if Employment type- Salaried and Salary type = Salary Slip for one or more applicant- {color}

{color:#bf2600}-for LAP , if Customer Segment- Salaried and Salary Mode = Verified Salary for one or more applicant- {color}

{color:#006644}*-for HL, if Employed With = Government/PSUs/ MNCs/ Public / Pvt Ltd Companies-*{color}

{color:#bf2600}-then Skip and Proceed will be not enabled on UI else Skip and Proceed will be enabled on UI-{color}

{color:#bf2600}-Logic 3 will not work for Guarantors-{color}

{color:#bf2600}-All the logics will run on load of Perfios Screen so that User get option to click on Skip and Proceed wherever applicable-{color}

Screen should be mobile compatible

*-Dependency-*

-Business to confirm if Logic 2 is needed for MEL applicants?-
acceptance: # Given that mentioned changes are done, when customer land on Perfios screen, user should be able to find Skip and Proceed at bottom of the screen{color:#bf2600} {color}

key: ML-24652
summary: Changes to FinnOne submit request for Non-ADB cases
description: *Applicable* : MEL-PL ( Bank-IFBL)

*Current* : In FinnOne submit request for non-adb cases, no values are being passed in *split payment* and *split disbursement* arrays.

Due to this , cases which are moved to FinnOne are landing in exception queue. When cases land to Exception queue, DV Ops users have to clear the cases in FinnOne which is defeating the ask for [https://fincap.atlassian.net/browse/ML-18037|https://fincap.atlassian.net/browse/ML-18037|smart-link] 

!image-20231213-121635.png|width=195,height=63!



*Proposed:*

In FinnOne submit request for non-adb cases, Split Payment and Split Disbursement arrays should get populated similar to that of ADB cases (all below tags in *bold)*

"STP" : "",
"status" : "A",
"SplitPayment" : {
"SplitPayment" : [ *{*
*"Remarks" : "",*
*"Payment_Mode" : "F",*
*"Payble_AT" : "",*
*"Mult_Disb_ID_N" : "",*
*"MICR_C" : "",*
*"In_favour_of" : "Mr. Chaudahari Kelashbhai Balubhai",*
*"IFSC_C" : "IDFB0042841",*
*"FT_Mode" : "IT",*
*"Disbursal_To" : "LS",*
*"Disbursal_Date" : "08-Dec-2023",*
*"Disb_Amount" : "",*
*"CITYID_C" : "",*
*"Cheque_No" : "",*
*"Cheque_Date" : "",*
*"cash_Bank_Account" : "121",*
*"Business_Partner_Name" : "",*
*"BANKID_C" : "",*
*"BANKBRANCHID_C" : "",*
*"Account_No" : "10106623716"*
*}* ]
},
"SplitDisbursal" : {
"Total_Amount" : "",
"Repayment_StartDate" : "",
"Principal_RecoveryOn" : "",
"EMI_PEMI" : "",
"DisburseTo" : "",
"Disbursal_Status" : "",
"Disbursal_No" : "",
*"Disbursal_Description" : "MR. Chaudahari Kelashbhai Balubhai",*
*"Disbursal_Date" : "08-Dec-2023",*
"Disbursal_Amount" : ""
},
"spdc_waiver" : "",
"sourceCode" : "Direct",
"Source_Flag" : "RMAU",
"softDecision" : "A",
acceptance: # Given that mentioned changes are done, when a Non ADB case is submitted to FinnOne in MEL-PL,  then bold highlighted tag and values should be passed in FinnOne submit request s similar to it flows in ADB flow , should work in all scenarios of bank account type - different bank account, idfc account, new account 
# Given that mentioned changes are done, when a Non ADB case is submitted to FinnOne in MEL-PL,  then case should be submitted successfully to FinnOne, {color:#bf2600}should work for WIP and Fresh cases{color}
# Given that mentioned changes are done, when a Non ADB case is submitted in MEL-PL to finnone, then the case should not land in exception queue due to split payment and split disbursal issue type and case should land directly in LMS and then get disbursed automatically

key: ML-24632
summary: ROI Change for MEL Plus schemes
description: *Applicable* : Schemes mentioned in the grid, these schemes are true for MEL Plus - TC+IRO Assisted Journeys

*Proposed*  : 

Update the rates as per the grid
acceptance: * Given that mentioned changes are done, when loan is puched in mentioned schemes in MEL Plus IRO Assisted or TC Journey as per grid , then Interest rates should be updated as per grid attached for all schemes MENTIONED
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then Should function as per grid for new cases.
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then WIP cases  will be submitted to FinnOne with old ROI
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then Updated ROI should be populated on front end and back end as per grid in Bank and IFBL Workflow
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then The Revised ROI should be flown to integrations
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then The loan should be properly disbursed
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then User should be able to submit the loan with new rate to FinnOne

key: ML-24544
summary: Addition of tag in SENDSMS integration
description: +*Post deployment step*+

*Applicable* : ALL BU Journeys where SENDSMS is used to trigger SMS to customer 

*Current* :  

Many of the TC customers are experiencing issue in receiving OTP where the task for Otp is created but the user is not receiving the OTP.  The generated OTP is sent through the SVC Name - SENDSMS

Basis analysis from SMS gateway team and reference from development taken by CD Org

Rural org is sending OTP SMS from NON-OTP channel as this consider as normal SMS, hence the delay.

*Proposed* : 

Additional tag is required to be added in SVC - SENDSMS. Please refer document to perform the post deployment steps

In case the SMS does not need to be priortised then the tag may be not available in the SVC request or have a different value

*Assumption*

As per Richika’s communication, This is required for TC Journey on top most priority hence separate requirement will be shared for other Rural journeys
acceptance: # Given that mentioned changes are done, when SENDSMS is triggered in any journey of Rural Org, then Type should flow in the intergration request

Sample below

{"attributes":{"type":"Task","url":"/services/data/v59.0/sobjects/Task/00TC1000001W0VmMAK"},"Id":"00TC1000001W0VmMAK","Mobile__c":"9876543234","Description":"Thank you for applying for Gold Loan, Please read T&C before entering OTP.\nOTP: 522638 T&C: [https://idfcfrtest.com/rtw5ErnRegards|https://idfcfrtest.com/rtw5ErnRegards], IDFC FIRST Bank.","RecordTypeId":"0122w000000dPRbAAM","WhatId":"a0hC1000000RK97IAG","Type":"OTP"}

# Given that mentioned changes are done, when SENDSMS is triggered in any journey of Rural Org, then SMS should get delivered to Customer’s mobile number as per the current flow
# Given that mentioned changes are done, when case is punched in applicable Journey- ALL BU, then rest of the workflow E2E should work as it is 
# Given that mentioned changes are done, when case is punched in applicable Journey- ALL BU, then backend stamping corresponding to integration will remain as per current flow

key: ML-24534
summary: CERSAI clause addition in Application form_MEL PL
description: ‘_I hereby provide the consent to the Bank to pull my KYC details from CERSAI & PAN details from NSDL as and when required by the Bank for the compliance’_.

Placement - 

After - ‘_I/We authorise the Bank to submit application/other relevant documents submitted by me to CERSAI. I/We hereby provide my/our consent to receive information from Central KYC Registry through SMS/mail on the above registered number/email address’_.

 
acceptance: Below clause to be added in Application form for all MEL and PL schemes.



‘_I hereby provide the consent to the Bank to pull my KYC details from CERSAI & PAN details from NSDL as and when required by the Bank for the compliance’_.

Placement - 

After - ‘_I/We authorise the Bank to submit application/other relevant documents submitted by me to CERSAI. I/We hereby provide my/our consent to receive information from Central KYC Registry through SMS/mail on the above registered number/email address’_. 

key: ML-24526
summary: 4. Creation of Perfios Screen - Part 2
description: *Applicable* : MEL/PL/HL/LAP ( Applicable schemes as per [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] )

*Proposed* : 

Continued from [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link] 

Below Customer’s Bank Statement , new cards should appear as described below

Create 3 cards below previous sentence. UI/UX and message content to be same as per below SNAP unless otherwise stated

!image-20231118-075631.png|width=1119,height=405!

Cards should be allowed to be hidden as per business need. {color:#bf2600}Showing the cards on front end should be configurable at BU Level . L1/Product team should be able to enable the card on UI for Account Aggregator/E-Bank Statement / Scanned Statement though  configuration route {color}

# Account Aggregator ( Card to be hidden in Phase 1 Go-Live  )
# E- Bank Statement ( Preferred Option )
# Scanned Statement ( Card to be similar to E-Bank Statement) {color:#bf2600}( Msg to be not shown - E- statement is not Scanned statements ){color}

*Eligibility in less than A minutes* to be replaced with *Analysis in less than A minutes* on cards

The screen should be Mobile Compatible 

A = 5 for E-Bank Statement

A = TBD for Account Aggregator

A = TBD for Scanned Statements

*Assumption*

Product team to confirm for the current placement of Perfios screen

Perfios is applicable only for Applicant and Co-applicant and not for Guarantor

*Dependency*

A value to be confirmed later for AA and Scanned Statements
acceptance: # Given that mentioned changes are done, when customer land on Perfios screen , then the user should be able to identify CARDs as described , UI/UX should be as per description in [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link]  and [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link] 
# Given that mentioned changes are done, when customer land on Perfios screen, user should be able to view the screens and cards on Mobile View, the screens should be mobile compatible for [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link]  and [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link] 
# {color:#bf2600}Given that mentioned changes are done, when product/L1 team wants to hide/unhide the card from UI, then they should be able to do so at configuration level. Hide/Unhide the card should be at Product level- MEL/PL/HL/LAP{color}
# {color:#bf2600}Given that mentioned changes are done, when customer lands on Perfios screen, then logic should work for MEL/PL/HL/LAP applicable scheme records{color}

key: ML-24523
summary: 20. API 3 - Statement Done - Request and Response
description: *Applicable* : MEL/PL/HL/LAP ( applicable schemes )

Continuation from

 [https://fincap.atlassian.net/browse/ML-25553|https://fincap.atlassian.net/browse/ML-25553|smart-link] 

[https://fincap.atlassian.net/browse/ML-25556|https://fincap.atlassian.net/browse/ML-25556|smart-link] 

*Proposed:* On click of Submit to Perfios , API 3 will be triggered

SVC Name  : {color:#bf2600}PERFIOS_STATEMENTDONE_V2{color}

-Refer the sample attachment request:- 

*Request :*

{
"payload" : {
"vendorId" :  "Variable", Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link]  
{color:#bf2600}"txnType" : null,{color}
"txnId" : "70602136465D29022024T164235", {color:#bf2600}*LoanNumberDdateTHHMMSS*{color}
"perfiosTransactionId" : "3G2D1709205111695", Perfios transaction id saved on back end [https://fincap.atlassian.net/browse/ML-24260|https://fincap.atlassian.net/browse/ML-24260|smart-link] 
{color:#bf2600}"orgName" : "INTDEV", Org Name{color}
"LoanNo" : "70602136465", LAN Number
"clientId" : "Variable", Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] 
"apiVersion" : "Variable" , Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] 
}
}

{color:#bf2600}*Sample Response:*{color}

{color:#bf2600}{{color}
{color:#bf2600}"RESPONSEID": "9999",{color}
{color:#bf2600}"ISSUCCESS": "True",{color}
{color:#bf2600}"ERROR": {{color}
{color:#bf2600}"ERRORSYSID": null,{color}
{color:#bf2600}"ERRORCODE": null,{color}
{color:#bf2600}"ERRORDESC": null{color}
{color:#bf2600}},{color}
{color:#bf2600}"RESPONSE": {{color}
{color:#bf2600}"PROCESSOR": null,{color}
{color:#bf2600}"DATA": {{color}
{color:#bf2600}"Success": {{color}
{color:#bf2600}"message": "Transaction completed successfully"{color}
{color:#bf2600}}{color}
{color:#bf2600}}{color}
{color:#bf2600}}{color}
{color:#bf2600}}{color}

Response will be received in a staggered form in below format, at the last - attachment will be received as below 

{color:#bf2600}Post receiving successful response in API 3, Perfios Analysis to be received via Inbound Perfios API {color}[https://fincap.atlassian.net/browse/ML-28864|https://fincap.atlassian.net/browse/ML-28864|smart-link] 



-Sample request attached- 

-txnID-

!image-20240119-072256.png|width=167,height=48!

!image-20240119-072329.png|width=1246,height=419!

*-Assumption-*

-Same service name would be used to trigger outbound call and receive inbound call from Mule. this is confirmed by Mule SPOCs. framework is reused from Org 1-
acceptance: # Given that mentioned changes are done, when user clicks on Submit to Perfios , API 3 is triggered from SFDC, then API request structure should be as described
# Given that mentioned changes are done, when API is triggered from SFDC, then SFDC should be able to receive the Perfios response -in form of attachment after receiving the acknowledgement from Mule- {color:#bf2600}as mentioned in the description.{color}
# -Given that mentioned changes are done, when API is triggered from SFDC, then Mule would share the perfios analysis after a delay, SFDC should be able to consume the update the response from Mule and perfios analysis- JSON format should be saved in attachments as described- 

key: ML-24495
summary: Stamp duty for RMEL and RPL > 5 lacs
description: *Applicable* : MEL/PL Schemes where Estamp is applicable

*Current:*

Stamp duty charge is calculated for loan amount > 3 lacs for RMEL and RPL schemes.

estamp document is mandatory loan amount > 3 lacs;

stamp duty is calculated as per SFDC branch and location master for loan amount > 3 lacs

*Proposed:*

Stamp duty charge should be stamped for loan amount > 5 lacs in RMEL and RPL schemes.

eStamp document {color:#bf2600}should be applicable and uploaded mandatorily{color} for loan amount > 5 lacs;

Stamp duty should be calculated as per SFDC branch and location master for loan amount > 5 INR lacs

*Dependency*

Dev to assess the impact of change in value from 3 lac to 5 lac at code level and call out impact for discussion with DJO
acceptance: # Given that a case is processed in MEL/PL, when the loan amount is more than 5 lacs, then the stamp duty charge should be stamped for the LAN
# Given that a case is processed in MEL/PL, when the loan amount is more than 5 lacs, then the E-stamp document upload should be mandatory for loan amount
# Given that a case is processed in MEL/PL, when the loan amount is more than 5 lacs, then the Stamp duty should be calculated as per SFDC branch and location master for loan amount > 5 INR lacs
# Given that above mentioned changes , when the loan is processed, then the rest of the logics- Stamp duty calculation,  ADB/Non ADB., Document generation for estamp- Digital sign of estamp documents , visibility of estamp documents on Filenet, DV OPs workflow etc, will work as is except for the change in loan amount from 3 lac to 5 lac
# Given that above mentioned changes are done, then the impact is not foreseen on other journey flows- HL/LAP/Gold 

key: ML-24452
summary: PL Prime ROI Change
description: Within RPL BU, PL-Prime scheme ROI is fixed at 15.00%. The requirement is to update the ROI to 13.50%, for the following schemes:

* PL Prime-Bank (Scheme ID: 71685)
* PL-Prime-IFBL  (Scheme ID: 71684)



Required change:

* Existing ROI 15.0% to be updated to new ROI = 13.5% for PL-Prime scheme . Refer ROI Grid
acceptance: # Given that ROI is updated as per description, when a case is booked under PL Prime, then ROI updated to 13.5% for PL-Prime Bank/IFBL scheme as per ROI Grid
# Given that ROI is updated as per description, when a case is booked under PL Prime, PL Prime to work as per current functionality [https://fincap.atlassian.net/browse/ML-13795|https://fincap.atlassian.net/browse/ML-13795|smart-link] 
# Given that ROI is updated as per description, when a case is booked under PL Prime, Successful submit-to-FinnOne RPL journey is achieved 
# Given that ROI is updated as per description, when a case is booked under PL Prime, No other impact on existing RPL SFDC workflow journey.

key: ML-24392
summary: 11. Change in design of Approval Authority Master
description: *Current* : [https://fincap.atlassian.net/browse/ML-22173|https://fincap.atlassian.net/browse/ML-22173|smart-link] 

*Proposed* : 

As per the email flow process, we need to create user id Record for Approvers in Salesforce. The users will have to do one time set up so that they can approve the deviations on mail  . _Dev team will share the SOP for set up process with DJO/Product/L1 team_

Once the user id is created, same will be used in existing Approval Authority Master [https://fincap.atlassian.net/browse/ML-22173|https://fincap.atlassian.net/browse/ML-22173|smart-link] 

Created a new field Approver Id- Look up the user id created for approval Authority

Remove Approver Name and Email from Master record level as created in [https://fincap.atlassian.net/browse/ML-22173|https://fincap.atlassian.net/browse/ML-22173|smart-link]  

*Dependency*

Developer to share the steps for setting up user profile to enable Email workflow
acceptance: # User records are created for the approving authority available in [https://fincap.atlassian.net/browse/ML-22173|https://fincap.atlassian.net/browse/ML-22173|smart-link] 
# User ids are added in the approver id field of Approving Authority Master
# Approver Name and Email from record level is removed from the master. Fields should not be visible to the user

key: ML-24386
summary: Video PD SMS Template update
description: *Current* : [https://fincap.atlassian.net/browse/RAB-1599|https://fincap.atlassian.net/browse/RAB-1599|smart-link] 

*Proposed* : 

SMS template to be used, SMS template should be configurable in nature

Dear {#var#}, 
Please click {#var#}{#var#}{#var#} to connect with our Credit Officer for {#var#}App {#var#}dated {#var#}.
Regards,
IDFC First Bank Ltd.

Dear {#*Applicant Name*#}, 
Please click {#Link#} to connect with our Credit Officer for {#*Business Unit*#}App {#*Loan Number*#}dated {#*Loan Application Created Date*#}.
Regards,
IDFC First Bank Ltd.

# <Applicant Name> - Name of the applicant/Coapplicant/guarantor for whom the Video PD is to be initiated
# <(Link)> - Link received from Video PD API response tag-{{videoURL}}to be added for the applicant/coapplicant
# <(Loan Number)> - Loan Application Number of the loan to be stamped
# <(Business Unit)> - Loan Application Business Unit
# <Loan Application Created Date> - Loan Application Created Date. format to be referred- DD/MM/YYYY

Sample

Dear Amit Yadav, 
Please click [https://videopdmain.idfcfirstbank.com:8443/visual-ivr?&ucid=102018155685983541|https://videopdmain.idfcfirstbank.com:8443/visual-ivr?&ucid=102018155685983541] to connect with our Credit Officer for MEL App 0604769145 dated 2023-10-11.
Regards,
IDFC First Bank Ltd.
acceptance: # Given that mentioned changes are done, when SMS is triggered from SFDC, then SMS template should be as per description
# Given that mentioned changes are done, when SMS is triggered from SFDC, then The SMS/Email will be sent only to those Applicant or Coapplicant or guarantor for whom the Video PD case is initiated at backend.
# Given that mentioned changes are done, when If URL is received in Success response of VIDEO PD API , then 
## SENDSMS API is initiated in SFDC with above Text message
## SFDC App/COapp/Guarantor is able to receive the SMS on the available mobile number as per mentioned template with URL received in respective API response for that app/coapp/guarantor
## App/COapp/Guarantor is able to receive the EMAIL on the available Email ID as per mentioned template   
If API response is error,
## SENDSMS API should not get initiated
# Given that mentioned changes are done, when business needs to modify the SMS template, then template change should be configurable in nature

key: ML-24263
summary: 16. API 2 - Perfios Upload Statement - Request and Response
description: *Proposed :* 

SVC Name :  PERFIOS_UPLOADSTATEMENT

SFDC will check and identify the BU for the LAN , once BU is identified, corresponding record from [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] will be referred to derive tag values for VARIABLE tags in the API

Refer the attached sample request 

Request : 

"vendorId": "Variable ", Variable  [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] 
"perfiosTransactionId": "Variable",  Variable - Perfios transaction ID received in API 1 Response
"password": null, Password captured on UI field [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link]  else pass null 
"filetype": "application/pdf", {color:#bf2600}E- statements - application/pdf always, Scanned statements - application/pdf always{color}

“file” :  Base 64 {color:#bf2600}encrypted {color}format

Attached sample response

Response

{
"RESPONSEID": 1015853138,
"ISSUCCESS": "True",
"ERROR": {
"ERRORSYSID": null,
"ERRORCODE": null,
"ERRORDESC": null
},
"RESPONSE": {
"PROCESSOR": null,
"DATA": {
"Success": {
"accounts": {
"account": {
"accountPattern": "50100526933368",
"transactionEndDate": "2023-11-30",
"transactionStartDate": "2023-09-01"
}
},
"statementId": "95676534"
}
}
}
}



{color:#bf2600}Composite request reference from Org 1 when API 2 is triggered. {color}

!image-20240117-091902.png|width=665,height=129!
acceptance: # Given that mentioned changes are done, when API is triggered from SFDC, then API request structure should be as described
# Given that mentioned changes are done, when API is triggered from SFDC, then variable values should be as per [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] and basis the API 1 Response
# Given that mentioned changes are done, when API is triggered from SFDC, then SFDC should be able to receive the Response

key: ML-24260
summary: 11. API 1- Perfios Upload start- Request and Response
description: *Proposed* : 

{color:#bf2600}SVC Name : PERFIOS_UPLOADSTART{color}

Continuation to [https://fincap.atlassian.net/browse/ML-24865|https://fincap.atlassian.net/browse/ML-24865|smart-link] 

SFDC will check and identify the BU for the LAN , once BU is identified, corresponding record from [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] will be referred to derive tag values for VARIABLE tags in the API

{
  "payload": {
    "yearMonthTo": "Variable", Variable [https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link] 
    "yearMonthFrom": "Variable", Variable [https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link] 
    "vendorId": "Variable",  Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] 
    "uploadingScannedStatements": "false", if E-statement and Account aggregator selected - false, if Scanned statement - true
    "txnId": "400412781458D24112023T130158", *LoanNumberDdateTHHMMSS*
    "transactionCompleteCallbackUrl": "Variable",  Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link]  
    "productType": "Variable",  Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] 
    "loanType": "Variable",  Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] 
    "LoanNo": "400412781458", *Loan Number*
    "loanDuration": "60", *Tenure*
    "loanAmount": 700000, *Loan Amount*
    "institutionId": "140", *Basis the institution id maintained in master and option selected by the user* 
    "employmentType": "Salaried", *Employment Type*
    "employerName": "ETHOS HR", *Employer Name*
    "clientId": "Variable",  Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] 
    "apiVersion": "Variable",  Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] 
    "acceptancePolicy": "Variable",  Variable [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link] 
  }
}



Sample request structure

{
  "payload": {
    "yearMonthTo": "2023-11", 
    "yearMonthFrom": "2023-08",
    "vendorId": "capitalFirst",
    "uploadingScannedStatements": "false",
    "txnId": "400412781458D24112023T130158",
    "transactionCompleteCallbackUrl": "[https://apiext.retailassets.idfcfirstbank.com/generic-stmt-analyzer/api/v1/perfios/txn/status",|https://apiext.retailassets.idfcfirstbank.com/generic-stmt-analyzer/api/v1/perfios/txn/status%22,]
    "productType": "pl",
    "loanType": "Personal",
    "LoanNo": "400412781458",
    "loanDuration": "60",
    "loanAmount": 700000,
    "institutionId": "140",
    "employmentType": "Salaried",
    "employerName": "ETHOS HR",
    "clientId": "SFDC",
    "apiVersion": "2.1",
    "acceptancePolicy": "atLeastOneTransactionPerMonthInRange"
  }
}



{
"RESPONSEID": 975432257,
"ISSUCCESS": "True",
"ERROR": {
"ERRORSYSID": null,
"ERRORCODE": null,
"ERRORDESC": null
},
"RESPONSE": {
"PROCESSOR": null,
"DATA": {
"Success": {
"perfiosTransactionId": "LJ6N1700811119099"
}
}
}
}
acceptance: # Given that mentioned changes are done, when API is triggered from SFDC, then API request structure should be as described
# Given that mentioned changes are done, when API is triggered from SFDC, then variable values should be as per [https://fincap.atlassian.net/browse/ML-24862|https://fincap.atlassian.net/browse/ML-24862|smart-link]  and [https://fincap.atlassian.net/browse/ML-25334|https://fincap.atlassian.net/browse/ML-25334|smart-link]  as applicable for the LAN and BU type
# Given that mentioned changes are done, when API is triggered from SFDC, then SFDC should be able to receive the Response
# {color:#bf2600}Given that response is received , when SFDC receives the  perfios transaction ID , then same should be saved on SFDC on back end -{color}[https://fincap.atlassian.net/browse/ML-24871|https://fincap.atlassian.net/browse/ML-24871|smart-link] 

key: ML-24198
summary: ROI Revision for PL
description: *Proposed* : Need to increase interest rates by 0.5% for each scheme as given in the attached file.
acceptance: * Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then Interest rates should be updated as per grid attached.
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then User should be able to submit the loan with new rate to FinnOne
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then Should function as per grid for new and WIP ( cases which have not reached Sanction stage) cases.
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then WIP cases with any stage sanction or beyond sanction stage will be submitted to FinnOne with old ROI
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then WIP cases on underwriting stage or any prior stage to be checked, BCM to re-enter the loan amount on UW screen if reached UW stage, new ROI should fetch automatically, FinnOne submit to happen with new ROI here
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then to be tested for each salary type- salary slip/certificate/cash

key: ML-24194
summary: ROI Revision for MEL
description: *Proposed* : Need to increase interest rates by 0.5% for each scheme as given in the attached file.
acceptance: * Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then Interest rates should be updated as per grid attached for all schemes MENTIONED
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then Should function as per grid for new and WIP ( cases which have not reached Sanction stage) cases.
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then WIP cases with any stage sanction or beyond sanction stage will be submitted to FinnOne with old ROI
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then WIP cases on underwriting stage or any prior stage to be checked, BCM to re-enter the loan amount on UW screen if reached UW stage, new ROI should fetch automatically, FinnOne submit to happen with new ROI here
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then Updated ROI should be populated on front end and back end as per grid in Bank and IFBL Workflow
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then The Revised ROI should be flown to integrations
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then The loan should be properly disbursed
* Given that mentioned changes are done, when loan is puched in mentioned schemes as per grid , then User should be able to submit the loan with new rate to FinnOne

key: ML-24124
summary: Design change - Offer Upload Mechanism
description: *Problem Statement* 

L1 was inserting 1.2 Lakh records at the beginning of the Nov month through salesforce inspector. While uploading the records after a certain point (after inserting 60K records) SFDC limits are being hit and there is an exception thrown as ‘DML limit of 10001 records’.

*Current implementation* 

For PAN India telecaller user, On upload of offers, each offer is being shared with every Active PAN India telecaller user individually. The sharing is done through a trigger that runs on insert of the offer record in the system. If there are 10 PAN India telecallers and 100 Offers are being uploaded, there will be 1000 Offer share records inserted in the system.

*Proposed Implementation -* 

# All the PAN India telecallers will be grouped in one group - PANIndiaTelecaller-Bank/PANIndiaTelecaller-IFBL . 
# Any new user added to the system will/should be added to the new group - PANIndiaTelecaller.
# On load of a new offer, it will be shared with the new group. The offer will be visible to all the members who are added to the group.
# This will be a backend technical change, no changes will be done on the UI.

 Note - With this change L1 can continue to upload the Offers as is the process currently with batch size of 2000.
acceptance: # Given that offers are uploaded on SFDC, when offers sharing starts, then it should happen with one group which is created, All the users will be mapped to new group as per description
# Given that n number of offers are ready for upload , when L1 uploads offers then all offers should get inserted and error should not come as mentioned in Problem statement. For example Should work when 5 Lac offers are uploaded in one go with batch size of 2000
# Given that mentioned changes are done, when offer is uploaded and shared with Tele caller group, then offer sharing should happen successfully with TC users and E2E functionality of TC and IRO assisted plus journey , drop off functionality  of TC and IRO , Offer sharing with IRO should work as it is,

key: ML-23828
summary: 2. Creation of Perfios Master
description: *Business Case* : User will be shown option to go for Perfios Module for scheme records created in Master. 

*Proposed* : 

Creation of a Perfios master basis the scheme type. Refer attached file for Master creation (20 Dec file)

Each scheme in column C will have a unique record in Perfios Master .

Each Unique record will have following fields maintained 

{color:#403294}*Employment Type  - Column F ( Multi select values such as Self-Employed;Pensioner;Salaried;Pensionar;Self-employed Professional;Corporate)*{color}

{color:#36b37e}*Loan Amount - Column G*{color}

{color:#00b8d9}*Mandatory logic - Column I  ( Tick if Mandatory if condition met else optional , Untick - Optional)*{color}

{color:#bf2600}Self Employed Months - Column J{color}

{color:#bf2600}Self-Employed Professional Months - Column J{color}

{color:#bf2600}Corporate Months - Column J{color}

{color:#bf2600}Salaried Months - Column K{color}

{color:#bf2600}Pensioner Months - Column K{color}

Is Active - True ( for all scheme records created)

When a user punches a case, the Perfios screens [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link]  and [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link]  would be only visible in the journey when LAN scheme has a record in Perfios Master and at record level is Active = True

*Dependency*

-Business to remove non applicable schemes from the master- 

-Business to share scheme number of RURAL HL-VERIFIED INCOME PROGRAM FLOATING-
acceptance: # Given that mentioned changes are done , when user identifies Perfios master , then Master is created with the records and values are updated as available in excel
# Given that mentioned changes are done , when user punches a case,  then loan application should have a Perfios screen (  [https://fincap.atlassian.net/browse/ML-23825|https://fincap.atlassian.net/browse/ML-23825|smart-link]  and [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link]  ) when the LAN scheme = Scheme record created in Perfios Master and {color:#bf2600}is Active = True at record level in master {color}
# Given that mentioned changes are done , when user identifies Perfios master Multiple values are allowed in the Employment type 
# Given that mentioned changes are done , when user identifies Perfios master Business /L1 team should be able to add/modify/delete records in the master

key: ML-23825
summary: 3. Creation of Perfios Screen - Part 1
description: *Applicable* : MEL/PL/HL/LAP ( Applicable schemes as per [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] )

*Proposed* : 

Creation of a screen with stage, substage as Perfios, Perfios Pending . The screen will appear after click of Next on Loan detail entry screen and before Eligibility stage only for scheme records which are created in [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] 

Header will appear as below 

# Creation of *Perfios* Ribbon with correct sequence number

!image-20231128-053846.png|width=1224,height=97!

# Creation of header as per below image

!image-20231128-053648.png|width=1217,height=70!



On top of the screen below stage/substage header

All applicable applicant types should appear similar to Document Upload Screen. User should be able to initiate Perfios for all applicable applicant types. 

{color:#bf2600}Applicable Applicant types{color}

{color:#bf2600}Self-Employed;Self-employed Professional;Corporate, Salaried/Pensioner.Pensionar{color}

!image-20231128-054715.png|width=1195,height=53!



On top of the screen below text format should appear, same UI/UX to be used as per snap

!image-20231128-054321.png|width=535,height=86!

Customer’s Bank Statement

Bank statements must meet below criteria : 

* Complete bank statement of last XX months -along with the current month banking ( not older than YY days from the current date )- should be uploaded
* For Salaried/Pensioner  - Bank statement should be of customer’s salary account and should have latest ZZ {color:#bf2600}salary {color}credits
* For Self employed/Self-Employed Professional - Bank statement should be of customer’s primary business account



Continued in [https://fincap.atlassian.net/browse/ML-24526|https://fincap.atlassian.net/browse/ML-24526|smart-link] 

*Assumption*

Product team to confirm for the current placement of Perfios screen

Product to confirm Corporate word to be added in static text 

Perfios is applicable only for Applicant and Co-applicant and not for Guarantor

*Dependency*

Stage by Intergration Status and Stage by Screen to be clarified by Dev team- S{color:#bf2600}tage by Integration Status will be ‘Highmark Completed’ and Stage By Screen will ‘Perfios Screen’.{color}

API Sequence for PL cases where applicable

KARZA_EPF_ASYNC Outbound > KARZA_EPF_ASYNC Inbound > Perfios Screen > Eligibility or CDRULE SPLIT 

Dev to confirm difference between pensioner and pensionar in journey
acceptance: # Given that mentioned changes are done, when user clicks on Next of Loan Detail Entry screen , then user should land on Perfios screen, stage- Perfios, substage - Perfios Pending , user will see all the headers and ribbons as described, screen should be visible only for scheme records created in Perfios master [https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link] 
# {color:#bf2600}Given that mentioned changes are done, when user clicks on Next of Loan Detail Entry screen, then Perfios screen should not appear in loan journey when the scheme record {color}[https://fincap.atlassian.net/browse/ML-23828|https://fincap.atlassian.net/browse/ML-23828|smart-link]{color:#bf2600}  is not applicable for Perfios logic. In such scenario, the existing journey flow will work , case will land from Loan detail entry to Eligibility screen{color}
# Given that mentioned changes are done, when customer land on Perfios screen , then the user should be able to find option to initiate  Perfios for each applicable applicant type as per the description {color:#bf2600}( App/Coapp/available applicants in MEL-PL-HL-LAP). Only those applicant/co-applicant should be shown which have employment types-Self-Employed;Self-employed Professional;Corporate, Salaried/Pensioner.Pensionar , other applicants with different employment type would not be shown on Perfios screen and should not be able to initiate Perfios from UI{color}
# {color:#bf2600}Given that mentioned changes are done, when customer land on Perfios screen in RPL , then API sequence would KARZA_EPF_ASYNC Outbound > KARZA_EPF_ASYNC Inbound > Perfios Screen > Eligibility or CDRULE SPLIT{color}
# {color:#bf2600}Given that mentioned changes are done, when customer land on Perfios screen in RPL , then API sequence would be KARZA_EPF_ASYNC Outbound > KARZA_EPF_ASYNC Inbound > Eligibility or CDRULE SPLIT if Perfios screens are not applicable for the scheme{color}

key: ML-23554
summary: 10. Handling loan amount update and PL Enterprise company change scenario when Deviation Approval Received/Initiated
description: *Proposed* : 

*MEL/PL*

Once the *ROI/PF Deviation approval Status* is updated to Initiated/Approved, if the user - IRO/UW updates loan amount to any new value from the value on which the waiver has been received , user should get a pop up on  the screen with message content  - *Changing the loan amount will lead to cancellation of ROI/PF Waivers*

{color:#bf2600}*PL Enterprise* {color}

{color:#bf2600}Once the {color}{color:#bf2600}*ROI/PF Deviation approval Status*{color}{color:#bf2600} is updated to Initiated/Approved, if the user - IRO{color}{color:#bf2600}-/UW-{color}{color:#bf2600} updates Name of Corporate to any new value from the value on which the waiver has been received , user should get a pop up on  the screen with message content  - {color}{color:#bf2600}*Changing the Name of Corporate will lead to cancellation of ROI/PF Waivers*{color}

In both of above scenarios, following should happen

User should get an option to Continue on Pop UP. Clicking Continue will lead to refresh of ROI/PF Deviation Details Section and its field values from front end and back end and functionality as built in [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link]  will be re- initiate. 

User should get an option of Cancel , clicking on Cancel will not lead to saving of Updated Loan Amount, and user will return to same window/page view with existing loan amount on which waiver has been received

*Assumption*

UI/UX to be similar to developed for other Pop ups in existing Journey

User gets option to update Loan amount in Loan detail entry screen and UW screen
acceptance: # Given that  ROI/PF Deviation approval status is Initiated/Approved , when user- IRO/UW updates loan amount to any new value from the one for which approval has been received, then user get a pop up on the window as described, the pop up should have Continue and Cancel . Continue and Cancel should work as described
# {color:#bf2600}Given that  ROI/PF Deviation approval status is Initiated/Approved , when user- IRO{color}{color:#bf2600}-/UW-{color}{color:#bf2600} updates Name of Corporate in PL Enterprise to any new value from the one for which approval has been received, then user get a pop up on the window as described, the pop up should have Continue and Cancel . Continue and Cancel should work as described{color}
# Given that  ROI/PF Deviation approval status is Initiated/Approved , when user updates loan amount to any new value from the one for which approval has been received or {color:#bf2600}for PL Enterprise updates Name of Corporate to any new value from the one for which approval has been received{color}, then clicking on Continue will reset the ROI/PF Deviation Section and entire logic of ROI/PF Deviation flow will start again and existing approval received will be negated , front end and back end values will be reset  and flow will work as created in [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link] , [https://fincap.atlassian.net/browse/ML-22389|https://fincap.atlassian.net/browse/ML-22389|smart-link] ,[https://fincap.atlassian.net/browse/ML-22389|https://fincap.atlassian.net/browse/ML-22389|smart-link] , [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] , [https://fincap.atlassian.net/browse/ML-22881|https://fincap.atlassian.net/browse/ML-22881|smart-link] , [https://fincap.atlassian.net/browse/ML-22228|https://fincap.atlassian.net/browse/ML-22228|smart-link] , [https://fincap.atlassian.net/browse/ML-22457|https://fincap.atlassian.net/browse/ML-22457|smart-link]
# Given that  ROI/PF Deviation approval status is Initiated/Approved , when user updates loan amount to any new value from the one for which approval has been received +or+ {color:#bf2600}+IRO updates Name of Corporate in PL Enterprise to any new value from the one for which approval has been received+{color}+,+  {color:#bf2600}ROI/PF values will be reset to system calculated ROI/PF. UW should be able to retrigger the case it IRO tray if the deviation approval workflow has to be initiated again{color}
# {color:#bf2600}Given that mentioned changes are done, when user retriggers the case from any stage and updates the loan amount, then complete logic of {color}[https://fincap.atlassian.net/browse/ML-17788|https://fincap.atlassian.net/browse/ML-17788|smart-link]{color:#bf2600} will work and LAN should be processed with correct ROI/PF{color}
# {color:#bf2600}Given that ROI/PF Deviation approval status is Initiated/Approved , when user refreshes the screen, then the logics should work{color}

key: ML-23295
summary: Creation of URC field in Priority Sector Lending section
description: *Applicable* : MEL Base/Repeat/Plus

*Proposed* : 

Build a logic when PSL flag = Yes and PSL Classification  = MSME ,  a mandatory fields - URC No. and URC Generation Date [https://fincap.atlassian.net/browse/ML-11336|https://fincap.atlassian.net/browse/ML-11336|smart-link]  should get enabled in below section on Loan detail entry and user should get an option to upload a *_Udyam Registration Certificate document_*  created in [https://fincap.atlassian.net/browse/ML-11336|https://fincap.atlassian.net/browse/ML-11336|smart-link]  on Document upload screen. 

* Uploading the document would be non-mandatory. Document when uploaded from SFDC should get saved on Filenet 
* Fields will be visible in UW in editable mode and mandatory
* Fields will be visible in DVOPs in non-editable mode

!image-20231108-065343.png|width=1213,height=241!

Format type accepted for URC No. , validation required (can be either of below). Same format should be allowed to field URC No.  available in EUC cases created post disbursement and developed in  [https://fincap.atlassian.net/browse/ML-11336|https://fincap.atlassian.net/browse/ML-11336|smart-link] 

*UDYAM-XX-00-0000000*

*UDYAM-XX-I-00-0000000*

Format type for URC Generation Date (DD/MM/YYYY)- should be shown in form of calendar . Date validation - Not before 1 July 2020 and no future dates. Same format should be extended to field URC Generation Date created in  [https://fincap.atlassian.net/browse/ML-11336|https://fincap.atlassian.net/browse/ML-11336|smart-link] 

URC No. collected on SFDC should be passed to FinnOne in the tag “UdayamRegistrationNumber”

For MEL Repeat/Plus and CJ Loan, values should be auto stamped from base loan in one or both the new fields basis the previous loan application (if available) in editable mode

URC No. and URC Generation date collected in loan journey should get auto populated in Cases created post disbursement when user selects Eligible for URC as Yes [https://fincap.atlassian.net/browse/ML-11336|https://fincap.atlassian.net/browse/ML-11336|smart-link] . 

*Assumption* 

UW should be allowed to upload URC Certificate 

If IRO uploaded document, and then UW reuploaded document , first uploaded document should not be overridden by the second document. 

*Dependency* 

Developer to confirm logic of PSL flag stamping on SFDC

Developer to confirm if UW reuploads a document, then first document is not overridden on filenet. Both document types should be separately visible on Filenet
acceptance: # Given that PSL Flag= Yes and PSL Classification = MSME when case moves to Loan detail entry in applicable BUs- MEL Base/Repeat/Plus- Telecaller, IRO Assisted , CJ, then mandatory fields should get enabled on UI, field data entry type should be as per format described
# Given that PSL Flag= Yes and PSL Classification = MSME when case moves to document upload screen, then user should get an option to upload Udyam Registration Certificate document in loan detail entry or UW screen, uploading document type will be non mandatory, document when uploaded , same should be saved on Filenet. 
# Given that PSL Flag= Yes and PSL Classification = MSME when case moves to UW, then mandatory fields should be visible to UW , field data entry type should be as per format described and will be editable
# Given that PSL Flag= Yes and PSL Classification = MSME when case moves to Document verification, then mandatory fields should be visible to user  and will be non editable
# Given that PSL Flag= Yes and PSL Classification = MSME when case is submitted to FinnOne, then mentioned tag should have URC number in the finnone request
# Given that PSL Flag= Yes and PSL Classification = MSME, when Repeat/Plus- TC/IRO Assisted journey/CJ is punched, then details should autopopulate in the two fields from base loan if available in the base loan
# Given that PSL Flag= Yes and PSL Classification = MSME, when Repeat/Plus- TC/IRO Assisted journey/CJ is punched and base loan doesnt have data for one or both the fields, then no value will be prepopulated on UI and user should be forced to fill the mandatory data
# Given that mentioned changes are done , when case is punched in mentioned applicable flows, then logics should get trigger for WIP  cases as well in the scenario when the case has not been decisioned by the UW or case has not reached sanction stage
# Given that mentioned changes are done , when case is punched in mentioned applicable flows, then E2E journey workflow will remain as it is, cases should be able to disburse successfully 
# Given that PSL Flag= Yes and PSL Classification = MSME when case is disbursed for the mentioned applicable flows  and EUC case is created post disbursement, then when user opts to Yes for Eligible for URC, then URC No. and URC Generation date should get auto stamped from the details captured in loan journey, apart from this existing workflow of [https://fincap.atlassian.net/browse/ML-11336|https://fincap.atlassian.net/browse/ML-11336|smart-link] will work as it is. 
# Given that PSL Flag= Yes and PSL Classification = MSME when case is disbursed for the mentioned applicable flows  and EUC case is created post disbursement, then when user opts to Yes for Eligible for URC, then  existing workflow of [https://fincap.atlassian.net/browse/ML-11336|https://fincap.atlassian.net/browse/ML-11336|smart-link] will work as it is in case field values were not captured in loan journey
# Given that PSL Flag= Yes and PSL Classification = MSME when case is disbursed for the mentioned applicable flows  and EUC case is created post disbursement, then when user opts to Yes for Eligible for URC, then  user should be able to upload a fresh URC document as per [https://fincap.atlassian.net/browse/ML-11336|https://fincap.atlassian.net/browse/ML-11336|smart-link] irrespective of the fact that document has been already uploaded in the journey or not. When a document is uploaded during EUC case closure, it should get saved on Filenet and should not override the existing document if it was uploaded during the loan journey 

key: ML-23279
summary: 3. STP status,  STP Decision tracking and Reporting
description: *Applicable* : RMEL ( Base Journey)

*Current* : STP_Status__c is read at stage- Eligibility basis FICO output

*Proposed* : 

# STP_Status__c should be read at all stages irrespective of when Eligibility is checked
# When the value in STP_Status_c gets updated, it should get recorded in loan application history and should be stamped in name of Integration User
# Enabling audit history tracking for field STP_Decision__c similar to STP_Status_c
# User should be able to pull out a report where history tracking of STP Decision and STP status is available with user name and date time stamping. All the fields should be visible in this report- Toxic Reason, Downgrade reason, Final Score, Scorecard Tier, STP Status, STP Decision

*Dependency*

Developer to confirm if existing report format can be reused for Point 4 
acceptance: # Given that mentioned changes are implemented, when eligibility is called any time, then SFDC will read the stp status basis the latest output
# Given that mentioned changes are implemented, when eligibility is called any time and STP decision is updated, then SFDC should stamp the same in loan application history in the name of -integration user- IRO
# Given that mentioned changes are implemented, when case is punched in RMEL base journey,  then history tracking is enabled for STP Decision and STP status field
# Given that mentioned changes are implemented, when Product, Policy, Process user pulls out a report, then they should be able to identify all the fields and values as mentioned in description
# Given that mentioned changes are implemented, when the case is retrigged, then also SFDC logics as described are working
# Given that mentioned changes in [https://fincap.atlassian.net/browse/ML-23279|https://fincap.atlassian.net/browse/ML-23279|smart-link], [https://fincap.atlassian.net/browse/ML-23141|https://fincap.atlassian.net/browse/ML-23141|smart-link], [https://fincap.atlassian.net/browse/ML-23137|https://fincap.atlassian.net/browse/ML-23137|smart-link] are implemented, when case is processed in RMEL base journey, then no changes in UI workflow are foreseen, E2E journey will work as is, the entire requirement is of reporting in nature

key: ML-23141
summary: 2. Update in Logic to stamp Tier and Score
description: *Applicable* : RMEL ( Base journey)

+*Current*+ : SFDC reads below tags and stamp values in dedicated fields ( Scorecard_Tier__c and FinalScore__c ) from FICO response referring below path during eligibility call when stage- Eligibility 

_Scorecard_Tier__c_ -  Stamping Logic applicationDecision > outputMetaData > "fieldName": "stpstatus",

"fieldValue": "STP;1.PLATINUM SELECT"  (field value is sample)

_FinalScore__c_-      Stamping Logic applicationDecision > multiScoringResult > finalScore

+*Proposed*+ : 

# SFDC should read tags and stamp the values in dedicated fields ( Scorecard_Tier__c and FinalScore__c ) irrespective of stage. SFDC should read latest tag values whenever received from FICO
# Scorecard_Tier_c should be added on page view for IRO/UW in loan detail page view.  Non editable field

IRO Loan detail Page view- Field to be added with Label *Tier*

!image-20231107-102806.png|width=1211,height=487!

UW Loan Detail Page view - Field to be added with Label *Tier*

!image-20231107-103154.png|width=1214,height=422!



*Dependency*

Developer to confirm SFDC fields where these tag values are stamped

*Assumption*

SFDC will keep updating the values of Tier and Final score basis the output values received from FICO Response irrespective of when FICO is called for eligibility

It is not possible that FICO sends field and values in first FICO call and in subsequent call, field and values are missing in the output

Scorecard_Tier_c will stamp value in the format  1.PLATINUM SELECT as per existing build

The change is only applicable to RMEL base journeys
acceptance: # Given that mentioned changes are implemented, when Eligibility is called, then SFDC will read the values received in  mentioned path and stamp it on existing fields on SFDC
# Given that mentioned changes are implemented, when Eligibility is called and FICO updates new values in the mentioned path,  then SFDC will read the latest values and update it on existing fields
# Given that mentioned changes are implemented, when Eligibility is called and FICO updates new values in the mentioned path, then no change is expected on front end workflow, journey will work E2E as per current flow
# Given that mentioned changes are implemented, when IRO/UW checks loan page view, then they should be able to identify the field Scorecard tier  and value on their screen
# Given that mentioned changes are implemented, when the case is retrigged, then also SFDC logics as described are working

key: ML-23137
summary: 1.Field creation 
description: *Applicable* : RMEL  ( Base Journey)

*Proposed*  : 

Creation of below fields on SFDC for reporting, fields will be created at loan application object and will be non editable

*Toxic Reason* : Stamping logic -  applicationDecision> declineReason : "Scorecard Toxic rule rejected- Frequent DPD in existing unsecured loan" (decline reason is sample)

Field and stamped value to be shown to IRO/BCM in loan detail page view

IRO Loan detail Page view- Field to be added with Label *Toxic Reason*

!image-20231107-102806.png|width=1211,height=487!

UW Loan Detail Page view - Field to be added with Label *Toxic Reason*

!image-20231107-103154.png|width=1214,height=422!



*-Downgrade Reason-* -- Stamping logic to be shared by FICO, Policy team-

*-Dependency-*

-Stamping logic for Downgrade reason to be shared by FICO, Policy team-

*Assumption*

The change is only applicable to RMEL base journeys
acceptance: # Given that mentioned fields are created on Loan application object, when Eligibility is calculated at any stage , then basis FICO response , SFDC will stamp the values
# Given that mentioned fields are created on Loan application object, when IRO/BCM opens up loan detail page view, then toxic reason field is visible to the user
# Given that mentioned fields are created on Loan application object, when Eligibility is calculated at any stage and updated values of Toxic Reason -and or Downgrade reason- is received in basis FICO response , SFDC will stamp the latest values 
# Given that mentioned fields are created on Loan application object, when Eligibility is calculated at any stage , then SFDC workflow will work E2E as per current flow, no impact foreseen on the journey
# Given that mentioned fields are created on Loan application object, when Eligibility is calculated at any stage and no value is received in the path mentioned for Toxic reason and or Downgrade reason , then field values will remain blank on SFDC
# Given that mentioned fields are created on Loan application object, when any case is created in RMEL base journey, then by default values will be set as blank in both the fields, it will be updated basis the FICO output
# Given that mentioned changes are implemented, when the case is retrigged, then also SFDC logics as described are working

key: ML-22896
summary: MEL Repeat Scorecard logics - Tag creation in CDRULE SPLIT 
description: *Applicable* : Scheme code = {{58697}}, {{58694}} ( MEL Repeat Bank- IFBL workflow)

*Proposed* : 

Tags to be created in CDRULE_SPLIT in the path => *request.application.inputMetaData* for mentioned schemes

Tags will be passed in CDRULE SPLIT when tag  > "stageID": "DDE" in the request given that Journey flow= MEL Repeat and Associated Offer = Non empty   or Journey flow = MEL Repeat and  drop off reason in DIY/TC journey = Demographic change

|fieldName|Type|fieldValue|Logic|
|Isofferinitiated|String|True, False|If associated offer is available at loan application, pass True else False|
|offeramount|String|250000|Loan amount available in associated offer, else blank|
|offertenure|String|36|Loan tenure available in associated offer, else blank|
|isdemographichange|string|True, False|When the MEL + case DIY/TC gets dropped to IRO due to demographic change and is punched in MEL Repeat pass True, else False|

Sample request

"*inputMetaData*": [
  {
    "fieldName": "Isofferinitiated",
    "fieldValue": "True"
  },
  {
    "fieldName": "offeramount",
    "fieldValue": "250000"

},

  {
    "fieldName": "offertenure",
    "fieldValue": "36"

},

  {
    "fieldName": "isdemographichange",
    "fieldValue": "True"

},

acceptance: # Given that scheme is {{58697}}, {{58694}}  ,  when Journey flow= MEL Repeat and Associated Offer = Non empty  or Journey flow = MEL Repeat and drop off reason in DIY and/or TC journey = Demographic change, then all the mentioned tags will pass in CDRULE_SPLIT when "stageID": "DDE"
# Given that scheme is {{58697}}, {{58694}}  ,  when Journey flow= MEL Repeat and Associated Offer = Non empty or Journey flow = MEL Repeat and drop off reason in DIY and/or TC journey = Demographic change, then all the mentioned tags will not pass in CDRULE_SPLIT when "stageID": "QDE"
# Given that mentioned changes are done , when case lands on Eligibility , then all the tags should flow to FICO as per the sample request
# Given that mentioned changes are done , when case lands on Eligibility , then all the tags should flow to FICO only when critieria described is satisfied, if criteria’s are not met, existing FICO request will flow
# Given that mentioned changes are done , when case lands on Eligibility , then FICO should respond as expected, E2E Journey flow will work as is
# Given that mentioned changes are done , when case lands on Eligibility , then FICO will give Video PD recommendation in some cases , SFDC flow of Video PD should work as built in [https://fincap.atlassian.net/browse/RAB-364|https://fincap.atlassian.net/browse/RAB-364|smart-link] 
# Given that mentioned changes are done , when case lands on Eligibility , then FICO will give Verification - Residence, Office CPV in some cases , SFDC flow of Verification should work as per current build

key: ML-22881
summary: 7.1 UI Handling - Part 4.1
description: Continuation to [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] 

If the ROI Deviation and or PF Deviation is not selected , it will be considered as 0 and, Proposed ROI/PF will be default set to SFDC ROI/ SFDC PF values available in loan asset object

*SFDC ROI* = System calculated ROI basis Loan amount and scheme

*SFDC PF* = System calculated PF basis Loan amount and scheme, Journey type ( PL Enterprise)

Basis the ROI Deviation and or PF Deviation selected by the user on front end and SFDC to calculate Proposed ROI and Proposed PF  in front end and store it  back end in loan asset object as per below logic {color:#bf2600}only when user clicks on Save as Draft or Next button or Send for Approval{color}

*Proposed ROI* = SFDC ROI - ROI Deviation

*Proposed PF* =   SFDC PF   - PF Deviation



*Proposed ROI* - Non editable, view only mode [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] 

*Proposed PF* - Non editable, view only mode [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] 

Layout for fields in the ROI/PF Deviation Details section in Loan detail entry stage

!image-20231106-052411.png|width=1065,height=589!



*Dependency*

Developer to share UI/UX for IRO -and UW Page view- during development 
acceptance: # All the fields are created and visible in IRO-/UW- Page view. Stamping should happen as described
# All the fields covered in [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] and [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link]  , [https://fincap.atlassian.net/browse/ML-22881|https://fincap.atlassian.net/browse/ML-22881|smart-link]  are present in the LOAN Asset object on back end {color:#bf2600}(only when user clicks on save as draft or Next or Send for Approval){color} and front end respectively
# All the fields mentioned in Point 2 are visible in Page layout
# UI/UX is as described, UI/UX should not be distorted for Mobile and Desktop view
# Proposed ROI/PF is set to default value as SFDC ROI/ SFDC PF
# Proposed ROI/ PF values are getting stamped on back end {color:#bf2600}only when user clicks on Save as Draft or Next button or Send for Approval{color} and front end as soon as ROI Deviation and or PF Deviation is selected by the user. 
# Proposed ROI/PF will act as information to IRO user about the deviation sought, and will store value of Proposed ROI/PF to be sent to approving authority
# Points mentioned in 4 to 6 should work if multiple times deviation is sought for a case from loan detail entry screen

key: ML-22565
summary: 1. Creation of Bank master
description: Creation of a master - *Perfiosbanks*

Master record will have following fields

!image-20231018-101135.png|width=414,height=155!

Refer Global Identifiers Name from Column A and Category code from Column B and Is Active= True for All records mentioned in master

*Assumption*

Data set of bank and category codes used as is from Org 1
acceptance: # Masters should be created as described
# Master should include all the records as per the attachment
# Record addition/deletion/modification to be allowed as per business need

key: ML-22457
summary: 9. UI handling - Part 5
description: Continuation from [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] 

When *Deviation Approval status*  is Initiated,  mentioned fields within *ROI/PF Deviation Details* will become non-editable for IRO user and will be visible in read only mode

* ROI Deviation {color:#bf2600}%{color}
* -ROI Deviation Approval Authority-
* PF Deviation {color:#bf2600}%{color}
* -PF Deviation Approval Authority-
* {color:#bf2600}Deviation Approving Authority{color}
* Sales Comments

When *Deviation Approval status* is Not-Initiated/Approved/Rejected, following fields will remain editable to IRO/-UW- user. 

* ROI Deviation {color:#bf2600}%{color}
* -ROI Deviation Approval Authority-
* PF Deviation {color:#bf2600}%{color}
* -PF Deviation Approval Authority-
* {color:#bf2600}Deviation Approving Authority{color}
* Sales Comments

User would be able to select or update existing values in the fields. When the user updates or selects any value in ROI and/or PF Deviation ,  Send for Approval Button will get enabled[https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] 
acceptance: # Fields mentioned are editable/non editable to the IRO as per deviation approval status described
# Approver comments/ Deviation Approval status fields will always remain non editable. User should be able to read the stamped field values 

key: ML-22451
summary: 6. UI handling- Part 3
description: Reference  : [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link] 

+Send for Approval+ Button

Button enablement logics - Button should be enabled only when

user has selected picklist options from both or any one of the field - -ROI- Deviation Approval Authority -AND/OR PF Deviation Approval Authority- and {color:#bf2600}user has entered text in mandatory field- Sales Comment {color}[https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] 

Once the fields are selected{color:#bf2600} and comment is entered {color}, button should become activated. User should be able to click on the Send for Approval button to TRIGGER a mail to Approving Authority. 

Once the button is clicked by the user , then 2 logics will work

# Button will be disabled on UI. When it should become enabled again will be covered in next story [https://fincap.atlassian.net/browse/ML-22457|https://fincap.atlassian.net/browse/ML-22457|smart-link] 
# A mail should be triggered to the mail ID maintained at record level for Approving Authority stamped on the front end in -ROI/PF- Deviation Approval Authority. 

2nd point can have 3 scenarios possible

If the user selects only ROI Deviation and sends for approval, trigger a mail  [https://fincap.atlassian.net/browse/ML-21930|https://fincap.atlassian.net/browse/ML-21930|smart-link] to the email id of the approval authority . {color:#bf2600}Email ID will be picked from master record created in {color}[https://fincap.atlassian.net/browse/ML-22173|https://fincap.atlassian.net/browse/ML-22173|smart-link]{color:#bf2600} and master record = record  identified using Logic 3 {color}[https://fincap.atlassian.net/browse/ML-22389|https://fincap.atlassian.net/browse/ML-22389|smart-link]{color:#bf2600}  {color}

If the user selects only PF Deviation and sends for approval , trigger a mail [https://fincap.atlassian.net/browse/ML-21930|https://fincap.atlassian.net/browse/ML-21930|smart-link]  to the email id of the approval authority . {color:#bf2600}Email ID will be picked from master record created in {color}[https://fincap.atlassian.net/browse/ML-22173|https://fincap.atlassian.net/browse/ML-22173|smart-link]{color:#bf2600} and master record = record  identified using Logic L3 {color}[https://fincap.atlassian.net/browse/ML-22389|https://fincap.atlassian.net/browse/ML-22389|smart-link]{color:#bf2600}  {color}

-Mail should be ONLY triggered to the final approver authority-

-If the user selects- {color:#bf2600}-picklist options from both ROI and PF Deviation Approval Authority- {color}-and then sends for approval-
acceptance: # To work as described
# Send for Approval is enabled as soon as the user selects value in any of the field- -ROI/PF- Deviation Approval Authority and Sales Comment is added 
# {color:#bf2600}If  Deviation Approval Authority {color}{color:#bf2600}-or PF Deviation Approval Authority- {color}{color:#bf2600}is not selected then Send for Approval Button is not enabled{color}
# {color:#bf2600}If {color}{color:#bf2600}-one or both of the ROI Deviation Approval Authority or PF-{color}{color:#bf2600} Deviation Approval Authority is selected then Send for Approval Button is enabled{color}
# Once the button is clicked, and email is sent to the approver as mentioned in Deviation Approval Authority field, post that  button should become inactivated on UI 
# If the email ID is not maintained at master, then no mail will be triggered from SFDC
# Email should be sent to one approver at one point of time. {color:#bf2600}Two mails to two or more different mail IDs can’t be triggered {color}
# Functionality to run at scheme level, if one or multiple scheme is selected , then only for those schemes, fields and buttons will be visible If no scheme is selected, section- fields and buttons should not be enabled on UI. When no scheme is selected , existing workflow will work as it is
# Functionality should work in fresh/WIP cases and retriggered scenarios
# When the user is selecting any picklist value in the mentioned fields, button will be enabled, if no value selected from the picklist options, then the button will be disabled
# {color:#bf2600}If send for approval button is not clicked, and cases move ahead , existing journey flow will work for IRO/UW users. Mail should not get triggered from SFDC{color}
# {color:#bf2600}Mail is getting triggered to the Authority with correct values stamped as per the email template as built in {color}[https://fincap.atlassian.net/browse/ML-21930|https://fincap.atlassian.net/browse/ML-21930|smart-link]{color:#bf2600} {color}
# {color:#bf2600}Email should be only send to Approving authority on click of Send for Approval button is exercised from front end by IRO/UW {color}
# {color:#bf2600}Approving Authority should be able to identify mail from SFDC in his/her mailbox{color}
# {color:#bf2600}User should be able to view the proposal in tabular format containing LAN details in his/her mailbox- Outlook- Mobile & Web{color}

key: ML-22389
summary: 5. UI handling- Part 2
description: *Proposed* : 

Once the ROI {color:#bf2600}and or{color} PF Deviation fields are selected, {color:#bf2600}Deviation Approval Authority {color}{color:#bf2600}-and or PF Deviation Approval Authority respectively-{color}{color:#bf2600} {color}field will get auto stamped on UI {color:#bf2600}in form of drop down option{color} as per below logics

*Deviation Approving Authority*

Basis the ROI and/or PF Deviation selected, SFDC will run below logic 

Logic 1

SFDC will identify the Hierarchy basis the ROI and or PF Deviation selected on UI , and records maintained in [https://fincap.atlassian.net/browse/ML-22169|https://fincap.atlassian.net/browse/ML-22169|smart-link] , Hierarchy would be one in which ROI Deviation and/or PF Deviation  maintained at sub record level = ROI Deviation and or PF Deviation selected on UI {color:#bf2600}by the front end user and  the BU and Workflow at subrecord level = LAN BU and  LAN Workflow and the main record is Active= True{color}

Logic 2

SFDC will compare hierarchies at record level identified in Logic 1 , the value which is having higher/equal will become the final hierarchy for the case. Please note L4>L3>L2>L1 ( from hierarchy perspective) . If no selection is made in any one of the ROI Deviation, PF Deviation field, then hierarchy will be decided basis the field selected by the user

For example : if ROI Deviation is selected as 1, and PF Deviation is not selected, then hierarchy will be identified basis 1 as L2 and it will become the final hierarchy as no value selected in PF Deviation

An example below 

|ROI Deviation|Hierarchy|PF Deviation|Hierarchy|*Final Approving Authority*|
|0.5|L1|0.5|L1|L1|
|0.5|L1|1|L2|L2|
|0.5|L1|1.5|L3|L3|
|0.5|L1|2|L4|L4|
|1|L2|0.5|L1|L2|
|1|L2|1|L2|L2|
|1|L2|1.5|L3|L3|
|1|L2|2|L4|L4|
|1.5|L3|0.5|L1|L3|
|1.5|L3|1|L2|L3|
|1.5|L3|1.5|L3|L3|
|1.5|L3|2|L4|L4|
|2|L4|0.5|L1|L4|
|2|L4|1|L2|L4|
|2|L4|1.5|L3|L4|
|2|L4|2|L4|L4|

Logic 3

SFDC will then run logic to identify approving authority from the master  maintained in [https://fincap.atlassian.net/browse/ML-22173|https://fincap.atlassian.net/browse/ML-22173|smart-link] .  SFDC will identify the record from this master where LAN Location  = Master Record with Same location and same hierarchy as identified in Logic 2. The identified record’s NAME field will be shown as a picklist option in Deviation Approval Authority Field only when a sub record is created for the particular BU and workflow in which the case is booked and {color:#bf2600}the sub record is Active= True{color} . If multiple records are identified, all those records will be shown on UI sequentially

-Same, will work for- *-PF Deviation Approval Authority-*
acceptance: # To work as described
# Fields will remain blank for -ROI/PF- Deviation Approving Authority unless the corresponding ROI and or PF Deviation field is selected by the user
# {color:#bf2600}If the user selects Deviation Approval Authority {color}{color:#bf2600}-and or PF Deviation Approval Authority- {color}{color:#bf2600}before selecting linked fields of ROI and or PF Deviation, then user should not get any option in picklist values{color}
# Picklist options to be shown in -ROI/PF- Deviation Approval Authority on UI as per the logic mentioned, incorrect record should not get pulled to stamp the values on front end. If multiple records are identified then all those options should be shown on front end UI
# In -ROI/PF- Deviation Approval Authority fields, single select values will be allowed on front end
# If there are no records maintained at master level, then no picklist options will not happen on front end. This should work at subrecord level. If the subrecord is not having record with applicable BU or workflow {color:#bf2600}and/or Is active= false{color}, then also autostamping will not happen on front end 
# Functionality should work when the user switches from no selection to selection and then no selection in ROI/PF Deviation fields. Picklist options in {color:#bf2600}-ROI and PF- {color}{color:#bf2600}Deviation Approval Authority {color}should get updated properly as per user action.{color:#bf2600} In case of no selection in ROI/PF Deviation fields, both fields {color}{color:#bf2600}-ROI and PF-{color}{color:#bf2600} Deviation Approval Authority  will not show any drop down option for selection{color}
# Functionality to run at scheme level, if one or multiple scheme is selected , then only for those schemes, new section- fields and buttons will be visible If no scheme is selected, fields and buttons should not be enabled on UI. When no scheme is selected , existing workflow will work as it is
# Functionality should work in fresh/WIP cases and retriggered scenarios

key: ML-22240
summary: 10. Reporting requirement
description: *Proposed*  : 

Create a new report format with Loan Application with Loan Asset and New Object created in [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link] 

Report should have following columns set by default

LAN, Deviation Approval Status, ROI, PF , Deviation Approval Status, Deviation trigger count, Sales Comments, Approver comments
acceptance: # Product/Credit/Policy/Admin user should be able to access the report
# User should be able to add any field from the three objects into this report and customize the report view as per need
# Report is opened in default format as described

key: ML-22231
summary: 7. UI Handling- Part 4
description: *Proposed* : 

Continuing from [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] 

+Front end fields+

*ROI/PF Deviation Approval status* - To create a field with 4 picklist values - 

Picklist options - Not initiated, Initiated , Approved, Rejected

|Initiated|Once mail is initiated from SFDC [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] , field to be stamped as Initiated|
|Approved|Once the approve is clicked by the approving authority from [https://fincap.atlassian.net/browse/ML-21930|https://fincap.atlassian.net/browse/ML-21930|smart-link] , Approved  will get stamped in Above mentioned field|
|Rejected|Once the reject is clicked by the approving authority from [https://fincap.atlassian.net/browse/ML-21930|https://fincap.atlassian.net/browse/ML-21930|smart-link] , Rejected  will get stamped in Above mentioned field|
|Not Initiated|Default value|

Field to be shown on front end to IRO -and UW-, Field value will be non editable to IRO

Case should not be allowed to move ahead from the current screen to next screen when the  Deviation Approval status is Initiated [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] . On click of Next, a toast msg should appear on top of the screen. *Rate Deviation Mail has been triggered to the approving authority, Kindly wait for the approval before proceeding further*

When the deviation approval status is changed to Approved/Rejected, User should be allowed to move ahead on Click of Next

*Sales Comments -* text field type and mandatory ONLY for enabling Send for Approval button [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] , user should be able to enter comments manually,  field to be shown on IRO. Field value will be passed in email template in the tabular format created in [https://fincap.atlassian.net/browse/ML-21930|https://fincap.atlassian.net/browse/ML-21930|smart-link] 

*Approver comments -*  Comments entered by Approver should be stored in this field [https://fincap.atlassian.net/browse/ML-21930|https://fincap.atlassian.net/browse/ML-21930|smart-link] Field to be shown on front end to IRO  and will remain in non-editable mode 

*Deviation trigger count* - Field will be set to 0 by default, as soon as mail is triggered [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] , count will increase by 1

{color:#0747a6}Back end fields{color}

*-Deviation Initiated by-* --  Name of initiator to be stamped in this field, it can be IRO user name depending on the person who has triggered the mail-

*Deviation Mail Trigger date and time* - Field will stamp date and time when email was triggered from SFDC

*Deviation Approval date and time* - Field will stamp date and time when email was approved by approver 

*Deviation Rejection date and time* - Field will stamp date and time when email was rejected by approver



*Dependency*

 All the fields mentioned will be added in same object/section on back end and front end respectively as used for fields created in [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link] and [https://fincap.atlassian.net/browse/ML-22881|https://fincap.atlassian.net/browse/ML-22881|smart-link] 

Developer to share UI/UX for IRO -and UW Page view- during development 

Product to confirm word limit for Text field - Sales Comment

Product to confirm if any more field to be shown to front end user
acceptance: # All the fields are created and visible in IRO-/UW- Page view. Stamping should happen as described
# All the fields covered in [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] and [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link]  are present in the LOAN ASSET Object on back end and front end respectively. {color:#bf2600}Values should stamp on back end on click of Send for Approval{color}
# UI/UX is as described, UI/UX should not be distorted for Mobile and Desktop view
# Deviation trigger count is set to 0 by default, should get incremented by 1 as soon as the email is triggered from SFDC. 
# Date and time stamp should happen for the latest trigger, approval or rejection
# Sales Comments is mandatory only for Enabling Send for approval as per [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link]  , it should not be mandatory for case to move ahead in JOURNEY
# Latest comments should get stored in Approver and Sales comments fields
# Deviation Approval status should be basis the latest trigger done from SFDC. Default value would be Not Initiated
# Deviation Approval status field should get updated in real time on click of Approve/Reject by the approving authority
# -Deviation Initiated by should get updated with latest user name-
# Points mentioned in 4 to 8 should work if multiple times deviation is sought for a case from loan detail entry screen
# Fields and buttons created in [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link] , [https://fincap.atlassian.net/browse/ML-22389|https://fincap.atlassian.net/browse/ML-22389|smart-link] [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] , [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] , [https://fincap.atlassian.net/browse/ML-22881|https://fincap.atlassian.net/browse/ML-22881|smart-link]  should not be visible in UW screen
# When the deviation approval status is Approved/Rejected, user should be able to re-initiate the deviation workflow as built in [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link] , [https://fincap.atlassian.net/browse/ML-22389|https://fincap.atlassian.net/browse/ML-22389|smart-link] , [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] , [https://fincap.atlassian.net/browse/ML-22881|https://fincap.atlassian.net/browse/ML-22881|smart-link] 

key: ML-22228
summary: 8. SFDC to update ROI/PF as soon as ROI Deviation/ PF Deviation selected by the user and once decision approved by the authority + Removal of Unnati Label
description: Once the *Deviation Approval status* is updated to Approved , SFDC will back update the ROI and PF to new values

Proposed ROI, Proposed PF will get stamped in loan asset fields of ROI and PF

Same would be updated on front end as per the current journey flow and back end for calculations related to ROI/PF

*Unnati Label*

Unnati label to be removed from the UI - IRO/UW screen, user should not be able to opt for Unnati rate deviation from front end

*ROI Validation on UW/FinnOne submit*

Once the ROI and or PF is reduced due to deviation Approval status- Approved, SFDC should not block the journey due to ROI validation at UW/FinnOne Submit

*Dependency*

Developer to analyze impact of removal of Unnati label and call out if any dependencies
acceptance: # If the deviation approval status is updated to Approved and the ROI/PF should get updated on front end UI, back end fields for calculations and reporting purposes
# All the calculations related to ROI, PF should be done in accordance with revised ROI/PF. Once ROI/PF is back updated, SFDC will recalculate EMI. Processing Fee , Net disbursal amount, etc. and numbers will be updated in existing fields
# Revised ROI/PF should be visible to the front end user in entire journey flow (including loan details popup post insurance premium calculation, document upload screen, document verification screen, UW, loan detail entry etc), whether the case is retriggered too.
# If the deviation approval status is NOT Initiated, SFDC will stick to the values of ROI/PF as per current flow
# If the deviation approval status is Initiated, SFDC will stick to the latest values of ROI/PF available on SFDC before deviation was sought 
# If the deviation approval status is Rejected, SFDC will stick to the latest values of ROI/PF available on SFDC before deviation was sought. 
# Revised ROI/PF is getting passed in all the integrations and is visible on the documents (including CAM Report) when applicable
# Case is submitted to FinnOne successfully with Revised ROI/PF details if applicable 
# If the ROI Deviation and/or PF Deviation is not selected by the user, it will be read as 0 for calculations
# Once the ROI/PF is updated in case of Approval received from authority, revision in ROI and PF should get stamped in Activity History against the name of {color:#bf2600}-IRO-{color}{color:#bf2600}/ Approver{color} who has sought the deviation for tracking purpose
# In case of multiple attempts of Deviation trigger and multiple approvals, ROI/PF will be updated in Proposed ROI/ Proposed PF and Existing ROI/PF fields as per the most recent ROI / PF Deviation sought by the user
# Functionality should work in case of retrigger scenarios as well. 
# In every scheme where the functionality is enabled [https://fincap.atlassian.net/browse/ML-22225|https://fincap.atlassian.net/browse/ML-22225|smart-link] , SFDC should trigger the logic in all cases where deviation approval status is Approved
# Unnati label to be removed from front end user - IRO and UW Page view, user should NOT be able to ask for rate deviation through Unnati selection in the loan journey
# Once the ROI and or PF is reduced due to deviation Approval status- Approved, SFDC should not trigger the validation at UW/FinnOne Submit and case should not get stuck due to Validation built for ROI Validation

key: ML-22225
summary: 4. UI handling- Part 1
description: *Proposed* : 

{color:#bf2600}Creation of a new Section {color}{color:#bf2600}*ROI/PF Deviation Details*{color}{color:#bf2600} below Loan details section in IRO{color}{color:#bf2600}-/UW-{color}{color:#bf2600} Page view{color}

{color:#bf2600}IRO{color}

!image-20231025-102743.png|width=1197,height=269!

{color:#bf2600}-UW-{color}

!image-20231025-103512.png|width=1046,height=391!



{color:#bf2600}New section will have below mentioned fields and buttons{color}

*Fields*

* ROI Deviation ( Picklist, Non-mandatory, editable)
* -ROI- Deviation Approving Authority ( Picklist, Non- Mandatory , editable)
* PF Deviation ( Picklist, Non-mandatory, editable)
* -PF Deviation Approving Authority ( Picklist, Non- Mandatory , editable)- 
* More fields covered in [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] 

Fields will remain blank, (NO Stamping) when the case lands on Loan detail entry. User can select any picklist values for ROI Deviation and PF Deviation fields as per below logic

ROI Deviation - 0.5% , 1% , 1.5% , 2% ( Values available in [https://fincap.atlassian.net/browse/ML-22169|https://fincap.atlassian.net/browse/ML-22169|smart-link] ) _( Picklist options can be maintained in a separate master, developer to check and confirm if this is required )_

PF Deviation - 0.5% , 1% , 1.5% , 2% ( Values available in [https://fincap.atlassian.net/browse/ML-22169|https://fincap.atlassian.net/browse/ML-22169|smart-link] ) _( Picklist options can be maintained in a separate master, developer to check and confirm if this is required )_

Refer next story - [https://fincap.atlassian.net/browse/ML-22389|https://fincap.atlassian.net/browse/ML-22389|smart-link] 

*Button* 

+Send for Approval+ 

Logics to enable the button  will be covered in [https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] 

-Create a custom label which will be used to store scheme number. Label should allow multiple scheme selection.- 

{color:#bf2600}maintaining new checkbox field (isROIPFDeviationAllowed) on scheme master to enable ROI/PF Deviation details section. .New section {color}will be shown on UI only If the scheme is mentioned in the custom label 

*Dependency*

_Developer to verify UI/UX during IA or development stage_

{color:#bf2600}_Developer to confirm if new object will be created for the new section. (_{color}[~accountid:6273c3db7dd556006afdfe28]  we dont need to create a new Object for this section).

{color:#bf2600}Layout of field and section will be as per snap in{color} [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] 

-Product to confirm dependency of Unnati selection on ROI/PF Deviation Workflow-
acceptance: # Fields and buttons are created on UI as described {color:#bf2600}in IRO/{color}{color:#bf2600}-UW-{color}{color:#bf2600} Page view{color}
# ROI/PF Deviation values are visible with %
# {color:#bf2600}ROI/PF Deviation values on UI would be configurable. Addition/Modification/Deletion of picklist values should be allowed. {color}
# If the values are updated/added/deleted in [https://fincap.atlassian.net/browse/ML-22169|https://fincap.atlassian.net/browse/ML-22169|smart-link] for ROI Deviation/PF Deviation,  same gets reflected on UI for the user
# All the fields and buttons should be clearly visible on Mobile and Desktop view without any distortion of the page view.
# Functionality to run at scheme level, if one or multiple scheme is selected , then only for those schemes, {color:#bf2600}New section{color} - fields and buttons will be visible If no scheme is selected, {color:#bf2600}section{color} ,  fields and buttons should not be enabled on UI. When no scheme is selected in the custom label , existing workflow will work as it is . {color:#bf2600}New section should appear for Gold, HL-LAP if their schemes are selected{color}
# Functionality should work in fresh/WIP cases and retriggered scenarios
# User should be allowed to select and unselect the picklist options in both the fields
# In ROI/PF Deviation fields, single select values will be allowed on front end
# {color:#bf2600}User should be able to proceed with journey flow as per current flow if values are not selected in one or multiple fields amongst 4 fields. {color}
# {color:#bf2600}Opting for Deviation should be left to user discretion, if the user doesn't select any fields then journey flow  E2E will remain same as per the current flow even if the scheme has section enabled functionality{color}

key: ML-22173
summary: 3. Approval Authority Master
description: Creation of an object -masters with below TYPE-- Approval Authority Master

Each -Master-  {color:#bf2600}record in the object{color}{color:#bf2600} {color}will have subsequent unique records with following fields -Global Identifier Name as Name of L1 / L2 / L3 /L4 . Refer master file attached and created unique records basis L1/L2/L3/L4  and assign location basis the column B-

Each Record will have following fields

* {color:#bf2600}Approval Authority Master Name - Unique SFDC generated number {color}
* -Global Identifier Name - Name of Approving Authority-
* {color:#bf2600}Approver {color}Name - Name of Approving Authority
* {color:#bf2600}Approver{color} Email  - Email ID of Approving Authority
* {color:#bf2600}Business Unit {color}
* Is Active - Check/Uncheck
* -ROI/PF Deviation Hierarchy-- {color:#bf2600}Deviation Level{color} Picklist - will be a look up value from [https://fincap.atlassian.net/browse/ML-22169|https://fincap.atlassian.net/browse/ML-22169|smart-link] 
* {color:#bf2600}State{color} - -Lookup field ( Each record should be allowed to be mapped to multiple locations)- {color:#bf2600}Picklist {color}
* {color:#bf2600}Workflow{color}

-Each record will have subset of Global Data Attributes corresponding to each BU and Workflow as below-



*Dependency*

# Master file to be shared by Product for  Production
# -Master file for QA to be created by QAs for testing-
acceptance: # -Master- {color:#bf2600}Object{color} is created as described
# Records at -master- Object level should be allowed to be configurable. Record creation/modification/deletion should be allowed
# For test and Production, records should be created for MEL/PL for each workflow- Bank/IFBL . But records should be allowed to created for HL/LAP/gold
# One picklist value selection should be allowed for the field -ROI/PF Deviation Hierarchy- {color:#bf2600}Deviation Level and State{color}
# -Multiple locations should be allowed to be set at record level-

key: ML-22169
summary: 2. ROI/PF Deviation Hierarchy master 
description: *Proposed* : 

Creation of master with type : *ROI/PF Deviation Hierarchy*

Will have following 4 Global Identifier Name records in this master  - L1, L2, L3, L4. More Records can be added/existing records can be deleted/modified

Each record will have following fields

* Is Active- Check/Uncheck

Each record will have subset of Global Data Attributes corresponding to each BU and Workflow as below. More Records can be added/existing records can be deleted/modified

* Business Name - MEL, Rural PL
* Workflow - Picklist - Bank, IFBL, -Both- 
* Is Active - Check/Uncheck
* ROI Deviation - Picklist options 0.5 , 1, 1.5 , 2 . Picklist options should be configurable . Values should be allowed to add/delete/modify as per Business Need  
* PF Deviation -  Picklist options 0.5 , 1, 1.5 , 2 . Picklist options should be configurable . Values should be allowed to add/delete/modify as per Business Need .

!image-20231013-114554.png|width=327,height=146!
acceptance: # Master should be created as described with correct name each for Test and Production
# Records  should be allowed to be created with mentioned fields for each BU- MEL/Rural PL/Rural HL/Rural LAP, Gold Loan 
# Hierarchies should be allowed to added further in future to L5,L6 and so on. Initially , for test and Prod environment, records should be created for MEL/PL with 4 hierarchies - L1/L2/L3/L4
# ROI/PF Deviation fields should have mentioned picklist options. Picklist should be configurable in nature. For test and Prod environment, values will be set as mentioned in description
# Activity history should be ON for ROI Deviation and PF Deviation fields at sub record level- user, date time stamp details 
# Created by and Last Modified should be visible at record level
# Records created at master level should be configurable , addition/updation/deletion of records should be allowed

key: ML-22064
summary: 2. CRN Dedupe logic trigger points - Part 1
description: *Applicable :* Schemes maintained

*Proposed*  : 

Create a custom label to allow triggering logics basis the scheme configured 

CRN Dedupe logic will run basis the schemes configured . Initially the CRN dedupe will run for schemes for Repeat Journeys in MEL-PL. Schemes should be configurable. Addition/Deletion/updation of schemes should be allowed 

When the customer creates MEL Repeat and PL Repeat by clicking create new application after account search of customer

Then on Click of  Create New Application, intermediate logic will run 

!image-20231011-071906.png|width=638,height=269!



+Intermediate logic+ 

SFDC to look for any match between CRN maintained for that account with CRN Record maintained in CRN DEDUPE Object which passes below criteria 

* If a CRN is found and status- Active and Type of CRN - Eligible,  case will move to next screen as per current flow, journey flow will remain as it is 
* If a CRN is found and status - Active  and Type of CRN - Ineligible ,  below validation should appear in form of Pop up on the screen. UI/UX will remain same as for message which is used to show any WIP loan at time of creation of new loan

“Customer is ineligible for Repeat cycle loan due to internal policy parameters”

* Above validation will appear in below scenarios as well

# If a CRN is found and status - Inactive  
# If a CRN is not found 

* If two or multiple records are found corresponding to any unique CRN at object level , SFDC will allow case to move to next screen as per current flow basis available of a record with highlighted combination

# *status- Active and Type of CRN - Eligible*, 
# status- Inactive and Type of CRN - Eligible,
# status- Inactive and Type of CRN - Ineligible  

Once the loan application is created in below scenario, Part 2 will function - [https://fincap.atlassian.net/browse/ML-22058|https://fincap.atlassian.net/browse/ML-22058|smart-link] 

*Assumption* : 

Even if the schemes are extended to any options except for REPEAT-MEL/PL, additional logics will be required at different places to enable this for other schemes

Logic will run check CRN of Primary Applicant maintained at account level  for comparison
acceptance: * Custom label is created, multiple schemes entry are allowed in the custom label
* -Blank value or- dummy values are allowed entering in custom label
* CRN Dedupe logic will run basis the schemes configured . Initially the CRN dedupe will run for schemes for MEL Repeat and PL Repeat. Schemes should be configurable. Addition/Deletion/updation of schemes should be allowed. 
* If no scheme is maintained , then logic of CRN DEDUPE will not work on mentioned trigger point and existing workflow of journey should work
* When the customer creates MEL Repeat and PL Repeat by clicking create new application after account search of customer
* Then on Click of  Create New Application, intermediate logic will run,

!image-20231011-072021.png|width=638,height=269!



intermediate logic as described will run to look for any match between CRN maintained for that account with CRN Record maintained in CRN DEDUPE Object which passes below criteria 

* If a CRN is found and status- Active and Type of CRN - Eligible,  case will move to next screen as per current flow, journey flow will remain as it is 
* If a CRN is found and status - Active  and Type of CRN - Ineligible ,  below validation should appear in form of Pop up on the screen. UI/UX will remain same as for message which is used to show any WIP loan at time of creation of new loan

“Customer is ineligible for Repeat cycle loan due to internal policy parameters”

* Above validation will appear in below scenarios as well
* If a CRN is found and status - Inactive  
* If a CRN is not found 
* If two or multiple records are found corresponding to any unique CRN at object level , SFDC will allow case to move to next screen as per current flow basis available of a record with highlighted combination

*status- Active and Type of CRN - Eligible*,

status- Inactive and Type of CRN - Eligible,

status- Inactive and Type of CRN - Ineligible

* Once MEL Repeat case is created after it meets above criteria, MEL Repeat journey workflow will work as it is
* User should not be able to punch MEL Repeat loan if the CRN is Ineligible or CRN is not available at object level

key: ML-22061
summary: Logics to upload CRN file
description: nan
acceptance: 1

key: ML-22058
summary: 3. CRN Dedupe logic trigger points - Part 2
description: *Proposed* : 

CRN DEDUPE intermediate logic covered in [https://fincap.atlassian.net/browse/ML-22064|https://fincap.atlassian.net/browse/ML-22064|smart-link] will run for below trigger points.  When the intermediate logic is triggered,  case should not forward to next screen or section as applicable in the journey.  

Logic will run for each applicant type’s CRN during the journey at mentioned trigger points

+Trigger points+ 

# In case of Posidex Approve for all applicant types , before the case moves to Employment detail entry 
# In case of Posidex refer scenario for 1 or more  applicant type, after the case is moved from stage/substage - Insurance/Posidex Refer to Stage- data entry
# When decision is selected as Approve and UW user clicks the SUBMIT  _( Developer to confirm if logic is needed on SAVE button , we need to trigger the logic before the case moves to stage - Sanction)_

*After intermediate logic is run, and below logic should run* 

* If a CRN is found and status- Active and Type of CRN - Eligible for one or more applicant type, case will move to next screen as per current flow, journey flow will remain as it is
* If a CRN is found and status - Active and Type of CRN - Ineligible{color:#bf2600} {color}for one or more applicant type, case will get reject, stage/substage of the case will update to {color:#bf2600}Reject/Rejected{color}.  Pop- up should appear on the screen of IRO/BCM with message : “Customer is ineligible for Repeat cycle loan due to internal policy parameters” Pop up should have a CROSS button to close the pop up window. Pop up should be visible to the user until the pop up is closed by IRO/BCM user _Developer to share the details of UI/UX for pop up_
* if a CRN is found and status - Inactive for one or more applicant type, case will get reject, stage/substage of the case will update to Reject/Rejected. Pop- up should appear on the screen of IRO/BCM with message : “Customer is ineligible for Repeat cycle loan due to internal policy parameters” Pop up should have a CROSS button to close the pop up window. Pop up should be visible to the user until the pop up is closed by IRO/BCM user _Developer to share the details of UI/UX for pop up_

If no scheme is maintained , then logic of CRN DEDUPE will not work on mentioned trigger points

*Assumption* : Logics will work for all applicant types
acceptance: # CRN DEDUPE intermediate logic covered in [https://fincap.atlassian.net/browse/ML-22064|https://fincap.atlassian.net/browse/ML-22064|smart-link] will run for below trigger points. When the intermediate logic is triggered, case should not forward to next screen or section as applicable in the journey.
# Intermediate logic will check all scenarios as described in [https://fincap.atlassian.net/browse/ML-22064|https://fincap.atlassian.net/browse/ML-22064|smart-link] at all mentioned trigger points
# Logic will run for each applicant type’s CRN during the journey at mentioned trigger points

+Trigger points+ 

* In case of Posidex Approve for all applicant types , before the case moves to Employment detail entry
* In case of Posidex refer scenario for 1 or more applicant type, after the case is moved from stage/substage - Insurance/Posidex Refer to Stage- data entry
* When decision is selected as Approve and UW user clicks the SUBMIT

*After intermediate logic is run, and below logic should run*

* If a CRN is found and status- Active and Type of CRN - Eligible for one or more applicant type, case will move to next screen as per current flow, journey flow will remain as it is
* If a CRN is found and status - Active and Type of CRN - {color:#bf2600}Ineligible{color} for one or more applicant type, case will get reject, stage/substage of the case will update to {color:#bf2600}Reject/Rejected{color}. Pop- up should appear on the screen of IRO/BCM with message : “Customer is ineligible for Repeat cycle loan due to internal policy parameters” Pop up should have a CROSS button to close the pop up window. Pop up should be visible to the user until the pop up is closed by IRO/BCM user 
* if a CRN is found and status - Inactive for one or more applicant type, case will get reject, stage/substage of the case will update to Reject/Rejected. Pop- up should appear on the screen of IRO/BCM with message : “Customer is ineligible for Repeat cycle loan due to internal policy parameters” Pop up should have a CROSS button to close the pop up window. Pop up should be visible to the user until the pop up is closed by IRO/BCM user

* If no scheme is maintained , then logic of CRN DEDUPE will not work on mentioned trigger points
* User should not be able to continue journey flow if the CRN is Ineligible or CRN is not available at object level
* Pop up message and window should appear as described
* Rejected cases should be removed from UW queues
* Journey flow will work as it is when the case crosses trigger points
* Need to ensure E2E workflow of MEL REPEAT should work as it is except for changes described
* {color:#bf2600}Any case which is rejected and updated to stage-reject/rejected due to Ineligible CRN match found, should get synced with Posidex as well as per {color}[https://fincap.atlassian.net/browse/RAB-3890|https://fincap.atlassian.net/browse/RAB-3890|smart-link]{color:#bf2600} {color}

key: ML-22055
summary: 1. Creation of New Object - CRN DEDUPE
description: *Proposed* : 

* Creation of a new object on SFDC - *CRN DEDUPE .* Object should have following fields and field types 

# CRN - Numeric ( 10 digit), limit should be allowed to update in future to 11 digit or 9 digit as per business need
# Type of CRN - Picklist- Eligible/Ineligible
# Month - MM-YY - Example - (09-23)
# Risk Category - Text
# Score - Numeric (decimals allowed)
# Status - Picklist- Active/Inactive
# Created by -  Name of Admin / L1  user who has created the record in the object similar to Associated offer object

* basis excel file upload, L1 user should be able to insert records in CRN DEDUPE object similar to Associated Offer Object  . A unique serial number to be created for record inserted with CD-XXXXXXXXXX. On each upload , a new unique number will get created
* Record should get created on SFDC corresponding to values available in excel file. For each fresh upload,  existing CRN records should not get updated. L1 user should be allowed to update existing record status from Active to Inactive while vice versa should not be allowed. Error should appear on front end - Operation not allowed
* Following fields will be mandatory for record creation and insertion - CRN, Type of CRN, Status. If data missing in master file for these fields corresponding to any record  , L1 should get an error on UI and insertion should fail for that particular record  Error - Incorrect input 
* Record should not be inserted with Inactive status , L1 should get an error on UI and insertion should fail for that particular record  Error - CRN with inactive status can’t be inserted.  
* CRN + Active should be unique in SFDC, no new record should be inserted on SFDC , if there is existing record with this combination. If a unique combination of CRN + Active is inserted on SFDC in same upload or in next upload - same combination insertion should not be allowed and validation should appear to L1 user. Error - CRN with same status already available
* CRN details should be extractable which has failed for insertion. L1 team should be able to collect details related to records which has failed for insertion similar to error received in Associated Offer insertion 
* In activity history , we should be able to identify updates done by user on Status field
* A record in CRN DEDUPE object would appear as below
* !image-20231011-052444.png|width=941,height=527!

!image-20231011-052546.png|width=949,height=190!



*Assumption* : 

* Product will upload the CRNs in format attached

*Dependency*

* Product to share details on numbers of  records to be uploaded in single time for performance testing
* Developer to share SOP on upload of excel file which will be shared with Product/L1 team to set the process of bulk upload of CRN file
* Developer to share error UI/UX details from the solution of Associated Offer Object
* ( Developer to share error UI/UX related to extraction for records failed for insertion from the solution of Associated Offer Object)
acceptance: # CRN DEDUPE Object is created as described with all the fields
# Field types should be allowed as described and Incorrect field type should not be allowed to be inserted at record level
# L1 user should be able to insert record in CRN DEDUPE object similar to Associated Offer Object basis excel file upload . A new record should get created on SFDC corresponding to values available in excel file. For each upload in n, n+1 or subsequent month, a new record should get created , existing record should not get updated with new values for a particular CRN.
# CRN + Active should be unique in SFDC, no new record should be inserted on SFDC , if there is existing record with this combination

Below insertion should not be allowed from master file

1234567890 + Inactive

Below insertion from same master file should not be allowed, L1 should get an error on UI and insertion should fail for that particular record - CRN with same status already available.

1234567890 + Active

1234567890 + Active

If below combination is uploaded in Nth month, in N+1th or subsequent month same combination is tried to uploaded, insertion should not be allowed and validation should appear to L1 user

1234567890 + Active

* L1 user should be forced to mark active CRNs to inactive for allowing upload of above scenario
* Record details should be extractable which has failed for insertion. L1 team should be able to collect details related to records which has failed for insertion similar to error received in Associated Offer insertion. Record details should be comprehendible to understand which row item from Master file has been failed for insertion
* L1 team should be able to mark one or multiple existing records to inactive in bulk and upload new CRN record corresponding to any unique CRN using excel file. 
* L1 user should be allowed to update existing record status from Active to Inactive while vice versa should not be allowed. Error should appear on front end - Operation not allowed
* In activity history , we should be able to identify updates done on Status field
* Performance testing should be done with bulk data. All the records should get inserted without any issues related to performance
* if mandatory fields are not having data in master file, insertion of record should fail

key: ML-22028
summary: Mitigating Negative SOQL Anti pattern 
description: +Technical Development+

This is regarding Negative SOQL Anti pattern Apex code that impacts system and CPU performance and needs to be avoided.

[~accountid:62502d37f6a2690069623f4a] [~accountid:62fc835c1e82e839c24fe8ec] - pls add more details and add Acceptance criteria in detail
acceptance: # to be updated by Dev team

key: ML-22023
summary: 14. Once the case is submitted for DV, IRO should not be able to upload new documents on Esign Screen
description: *Applicable* : MEL/PL/Gold

*Proposed* : Once the case is sent for DV, IRO/BO user should not be able to upload Non ADB documents on Esign screen

Upload button should become disabled once the case is shared for DV screen

Rest of the screen will remain as it is
acceptance: # Should work for MEL/PL/Gold
# Once the case is sent for DV, IRO/BO user should not be able to upload Non ADB documents on Esign screen. No new documents should appear on Filenet 
# Upload button should become disabled once the case is shared for DV screen
# Rest of the screen will remain as it is
# If the case is retriggered, returned , then functionality of Document upload will work as per current solution, no impact due to this change

key: ML-22016
summary: Character limit increase for Field Customer_Name__c
description: *Proposed* : Increase the character limit for field Customer_Name__c from 30 to 50 

_Developer to confirm if this will be purely a configuration change, the character limit increase will impact the journey , if yes , then how?_

_Developer to confirm in which BUs this field is being consumed_ 

_Developer to confirm where this field is being referred in the code, possible impact of character limit increase on Journey flow_

*Assumption* : Configuration change
acceptance: # Associated offers should be allowed to insert on SFDC with Customer Name having character limit upto 50
# No similar validation received on uploading offer as below

STRING_TOO_LONG: Customer Name: data value too large: VAGICHERLA SATHYA VENKATAPRATHYUSHA (max length=30) [Customer_Name__c]

3. No impact on existing validations on fields related to Name. Current limit for UI fields will remain as it is  SFDC will allow same character limit as current for NAME related fields

4. Character limit increase for mentioned field should not impact Journey flow of any BU in rural , SFDC will not let any new changes on UI related fields so that data entry format for any field should not get updated

5. No impact on Associated offers creation with character limit upto 30

key: ML-21967
summary: Application form changes
description: All journey flows of RMEL/RPL including top up



*Proposed* :

Add below clause in the app form in the Declaration header , Placement is shown in image. 

*RMEL*

The clause will be added as highlighted by arrow in attached document. Clause will be added immediately after FULL STOP of preceding statement

!image-20231006-070301.png|width=1256,height=514!

*RPL*

The clause will be added just before authorization header and below table.

!image-20231006-070438.png|width=962,height=425!

Clause

““I/We undertake and declare that if there are any changes in the particulars and information given by me/us while availing the Loan facility, I/We shall within 30 days from the date of any such change in the particulars and information shall disclose the details of such changes to the Bank without withholding the same.””
acceptance: * Given journey flow is of any RMEL/RPL base or top-up flow, when application form is generated for any WIP or fresh case, then the desired changes should reflect in Application form in the mentioned location

key: ML-21945
summary: Posidex refer- User driven CRN flip + New CRN Assignment
description: *Applicable* : MEL Repeat, Plus, PL Repeat ( in case of Posidex refer for any applicant type in the LAN), {color:#bf2600}GL Renewal{color}

*Current* : 

*Scenario 1*

In case of Posidex Refer, a CRN verification case is created for maker and checker process. As a maker, IRO has option to retain the CRN as proposed by Posidex or assign new CRN. If new CRN is assigned, its get updated on SFDC and case moves ahead with the new CRN

*Scenario 2*

 In case of Posidex Refer, a CRN verification case is created for maker and checker process. As a maker, IRO has option to untick all the CRNs as available on the screen of verification workflow and go ahead with creating a new CRN .  

*Proposed* : 

*Scenario 1*

In case of Posidex Refer, a CRN verification case is created for maker and checker process. As a maker, IRO has option to retain the CRN as proposed by Posidex or assign new CRN. If new CRN is selected by the IRO as a maker, following logic should run

A pop up message should appear on top of the screen on manual selection of new CRN by the user 

*Assigning new CRN will lead to cancellation of the case.* 

If the user ignores above message and still continues with new CRN selection on UI and  clicks on +_Assign Selected CRN_+, following message should appear on UI as an informative message and stage/substage of the case should get updated to Cancel/Auto-Cancelled Respectively 

*New CRN has been selected for existing customer. Please re-login the case and retain old CRN at Verification stage*

Above such cases where new CRN is assigned manually by IRO, verification cases corresponding to these cases will be removed from IRO/UW verification queues and should not be visible thereafter

The new CRN selected by the user should not be updated at existing applicant /account level. Loan application/Applicant should -tagged to the new CRN and Account as selected by the user-  remain tagged to the Posidex Suggested CRN. -Cancelled case will be tagged to CRN selected by the USER. Current Loan application/Applicants will get untagged from CRN proposed by Posidex.-

*Scenario 2*

In case of Posidex Refer, a CRN verification case is created for maker and checker process. As a maker, IRO has option to untick all the CRNs as available on the screen of verification workflow and go ahead with creating a new CRN 

If the user unchecks all CRN visible, following message should appear on UI on top of the screen

*Creating new CRN will lead to cancellation of the case.* 

If the user ignores the above validation and still clicks on _Create New CRN .,_ below pop up message should appear on top of the screen

*New CRN can’t be created for existing customer. Please re-login the case and retain old CRN at Verification stage*

The loan application should get cancelled and stage/substage should update to Cancel/Auto Cancelled. Loan application/Applicant -gets-  remains tagged to the -new- Posidex suggested CRN .   -Loan application/Applicant gets untagged from Posidex suggested CRN and gets tagged to the new CRN/Account-

Above such cases where new CRN is assigned manually by IRO, these cases will be removed from IRO/UW verification queues and should not be visible thereafter

*Assumption :* This is not applicable for ETB journeys in HL-LAP -and Gold-

*Dependency* : Developer to confirm details on how long this validation will appear on UI of the IRO
acceptance: # Proposed change should be applicable for all applicant types where Posidex refer is applicable and in all possible combinations of MEL-PL Repeat/Plus Journeys/{color:#bf2600}GL Renewal{color}
# *Scenario 1*
In case of Posidex Refer, a CRN verification case is created for maker and checker process. As a maker, IRO has option to retain the CRN as proposed by Posidex or assign new CRN. If new CRN is selected by the IRO as a maker, following logic should run
A pop up message should appear on top of the screen on manual selection of new CRN by the user
*Assigning new CRN will lead to cancellation of the case.*
If the user continues with new CRN selection on UI and clicks on +_Assign Selected CRN_+, following message should appear on UI as an informative message and stage/substage of the case should get updated to Cancel/Auto-Cancelled Respectively
*New CRN has been selected for existing customer. Please re-login the case and retain old CRN at Verification stage*
Above such cases where new CRN is assigned manually by IRO, these cases will be removed from IRO/UW verification queues and should not be visible thereafter
Loan application/Applicant -gets- remains tagged to the -new- Posidex suggested CRN . -Loan application/Applicant gets untagged from Posidex suggested CRN and gets tagged to the new CRN/Account-
-Cancelled case will be tagged to CRN selected by the USER. Current Loan application/Applicants will get untagged from CRN proposed by Posidex and get tagged to CRN selected on UI by the user-
*Scenario 2*
In case of Posidex Refer, a CRN verification case is created for maker and checker process. As a maker, IRO has option to untick all the CRNs as available on the screen of verification workflow and go ahead with creating a new CRN 
If the user unchecks all CRN visible, following message should appear on UI on top of the screen
*Creating new CRN will lead to cancellation of the case.* 
If the user ignores the above validation and still clicks on _Create New CRN .,_ below pop up message should appear on top of the screen



*New CRN can’t be created for existing customer. Please re-login the case and retain old CRN at Verification stage*

The loan application should get cancelled and stage/substage should update to Cancel/Auto Cancelled. Loan application/Applicant -gets- remains tagged to the -new- Posidex suggested CRN . -Loan application/Applicant gets untagged from Posidex suggested CRN and gets tagged to the new CRN/Account-

Above such cases where new CRN is assigned manually by IRO, these cases will be removed from IRO/UW verification queues and should not be visible thereafter

# In case the user continues with POSIDEX suggested CRN, the workflow of maker and checker will remain as it is and post verification closure journey flow will also continue to work as is
# When the user relogins , workflow will work as per fresh login case in ETB journey and posidex rules will rerun, if posidex refers the case , verification workflow will work as is  and if IRO now retains old CRN at Verification stage, then journey flow should work as per above point
# Verification workflow and API integration flow in MEL/PL should work as it is unless described otherwise in the description

key: ML-21930
summary: 1. Creation of Email Template
description: *Proposed* : Creation of email template as per attached format

Dear *Name of Receiver*, {color:#bf2600}(Name of receiver would be stamped basis the  record identified fpr email triggering in {color}[https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link] {color:#bf2600}, in that record, use the field Name {color}[https://fincap.atlassian.net/browse/ML-22173|https://fincap.atlassian.net/browse/ML-22173|smart-link] {color:#bf2600} to stamp Name of Receiver){color}

*Branch Name* *(Location)* has submitted below ROI/PF deviation approval request which is awaiting your approval. The loan application details are given below:

|*Details*|*Description*|
|SFDC ID|*LAN ID* > 0604512345|
|Loan Amount|*LAN Amount In this format* >INR 2,50,000|
|Loan Tenure|*LAN Tenure* > 36 months|
|Actual ROI|*LAN ROI* > 21%|
|Proposed ROI|[https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link]|
|Actual PF|*LAN PF* > 2%|
|Proposed PF|[https://fincap.atlassian.net/browse/ML-22451|https://fincap.atlassian.net/browse/ML-22451|smart-link]|
|Sales Comments|[https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link]|
|Previous comments|Logic will be covered in separate story|

-Approve/Reject UI/UX to appear as below-

-On click of Approve/Reject, approving authority should be able to enter comments. Entering the comments for approving authority will not be mandatory.- 

-On Click of Approve/Reject, event should get captured on SFDC. Further logics will be covered in separate story- [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] 

*-Approach 1-*

-On click of Approve/Reject, the following email reply should get autogenerated for the user, the email will be directed to SFDC as per below format from approving authority. User should be able to enter comments in the email. User should be able to send email to SFDC.- 

_Dev team can explore another approach to collect approve/reject reason from approving authority and back communicate it to SFDC_

*Approach*

{color:#bf2600}Dev team has suggested following approach which is technically feasible after completing their analysis{color}

# {color:#bf2600}Trigger of mail to Approver mail box with format described{color}
# {color:#bf2600}Approver replies back on same mail with key words in the first line and comment in the second line{color}
# {color:#bf2600}SFDC reads the first line and second line of revert to check for Approval and Comments{color}
# {color:#bf2600}SFDC runs subsequent logics basis point 3{color}
# {color:#bf2600}if the delegate user field is updated at user level with valid mail ID, then SFDC will send the mail to delegate approver as well. Approver or Delegate Approver both will be able to approve the deviation on first come first serve basis. Name of Final Approver will be saved on ROI_PF Approved By maintained in loan application object {color}
{color:#bf2600}Delegate user field is optional. If there is no user added in the delegate user field, then only the approver to whom mail is triggered can Approve/Reject.{color}

{color:#bf2600}Technical approach will be shared in a document by development team{color}



*Dependency*

Product to share logic for two fields

* Previous comments

Subject Line to be shared by Product - {color:#bf2600}_Business Unit - ROI/PF Deviation Approval for LAN: < Lan Number> - Primary Applicant First Name + Last Name (Subject line to be kept configurable)_{color}

Email ID to be shared by Dev team - [{color:#bf2600}donotreply@idfcfirstbank.com{color}|mailto:donotreply@idfcfirstbank.com]{color:#bf2600} . Sender Name - Deviation Approval{color}

[~accountid:5f4de98ed0884f004927c5d7] [~accountid:62fc835c1e82e839c24fe8ec] - 

# {color:#bf2600}to share final email template with message content which will be received by approving authority during development{color}
# {color:#bf2600}Sample template from POC Done{color}
!image-20231120-095757.png|width=378,height=216!

# !image-20231120-100026.png|width=744,height=147!
# {color:#bf2600}SOP document which will clearly state out steps to be followed at user level and L1 level to run this feature in test and Prod environment{color}
acceptance: # Email template is created as per description
# {color:#bf2600}User is able to approve/reject basis the key words in first line of email revert. This should be basis the first email revert received on SFDC . SFDC should not revert multiple reverts of sender. {color}
# {color:#bf2600}If the key words are not used in the revert, mail is bouncing back to sender’s mail box with error{color}
# {color:#bf2600}User is able to add comment in second line of email revert, adding comment will be optional for the user{color}
# {color:#bf2600}If the comment is added in third line or subsequent lines, then the decision is getting stamped as Approved/Rejected but the comment is not getting stamped. So, it is mandatory to write the comment in the second line only.{color}
# {color:#bf2600}Email subject and email handle name is same as per description{color}
# {color:#bf2600}Approve/Reject is getting saved on SFDC as per user action and comment is saved on SFDC{color}
# {color:#bf2600}if the delegate user field is updated at user level with valid mail ID, then SFDC will send the mail to delegate approver as well. Approver or Delegate Approver both will be able to approve the deviation on first come first serve basis. Name of Final Approver will be saved on ROI_PF Approved By maintained in loan application object . Delegate approver should be able to approve the deviation as per flow and details should get saved on back end for reporting{color}
{color:#bf2600}Delegate user field is optional. If there is no user added in the delegate user field, then only the approver to whom mail is triggered can Approve/Reject. {color}
# {color:#bf2600}Approval history is getting updated on backend{color}
# -User is able to click on Approve / Reject button and able to enter the comments-
# -On Click of Approve/Reject, event should get captured on SFDC in- [https://fincap.atlassian.net/browse/ML-22231|https://fincap.atlassian.net/browse/ML-22231|smart-link] 
# User is not forced to mandatorily enter comments for Approve/Reject
# UI/UX is appearing as per email format attached and template is clearly visible for Mobile and Desktop and is not distorted in both scenarios

key: ML-21917
summary: Mute Office CPV in Production
description: Description :   This story is logged to MUTE - OFFICE CPV funtionality in Prod
acceptance: OFFICE CPV to be muted in PROD

key: ML-21744
summary: Base Loan Application field stamping logic correction
description: +Architectural change of Base Loan Application field Stamping+

*Current* : 

*MEL Plus* : Loan gets created on incorrect base loan due to incorrect mention of existing LAN/Parent Loan ID in Associated Offer. This is due to incorrect offer created details uploaded by BIU/Product team on SFDC . This leads to cloning of older data in Plus journey which happens from incorrect base loan, and also resulting in failure of FCRB logic

*MEL- PL Repeat* : User creates MEL Repeat journey on incorrect Account leading to creation of Repeat Journey on Incorrect Base loan

*Proposed*

+MEL Plus+ :  SFDC should not refer the base loan from the Existing LAN or Parent Loan ID in Associated Offer. Instead of it, SFDC should query and identify the most recent disbursed loan from MEL {color:#bf2600}basis CRN {color}mentioned in the Associated offer, SFDC will query the CRN and identify the most recent disbursed loan and use that LAN as Base loan for MEL Plus Journey and stamp in *Base Loan Application* field

{color:#bf2600}CRN fetching logic will be removed as built in {color}[https://fincap.atlassian.net/browse/ML-14161|https://fincap.atlassian.net/browse/ML-14161|smart-link]  

{color:#bf2600}CRN field should be made mandatory for inserting offer on SFDC. Valid CRN should be available in the master file corresponding to each offer record for insertion on SFDC{color}

+MEL-PL Repeat+ : *Base Loan Application* field should be stamped with latest disbursed loan in MEL. SFDC should query and identify the latest disbursed loan on customer’s Account using the CRN from MEL/PL . If there are more than 1 account, SFDC will identify the account where latest disbursed loan is tagged. SFDC will copy that latest disbursed loan on MEL-PL REPEAT

+*Dependency*+

CRN will be available in BIU Offers master file , CRN will be inserted in this field at record level while inserting offers on SFDC

*Assumption*

This requirement is not needed HL-LAP Pre approved and GL Renewal
acceptance: * +MEL Plus+ : SFDC should not refer the base loan from the Existing LAN or Parent Loan ID in Associated Offer. 
* {color:#bf2600}Instead of above, SFDC should query and identify the most recent disbursed loan basis CRN mentioned in the Associated offer, SFDC will query the CRN and identify the most recent disbursed loan and use that LAN as Base loan for MEL Plus Journey and stamp in {color}{color:#bf2600}*Base Loan Application* {color}{color:#bf2600}field{color}
* {color:#bf2600}Stamping logic for CRN field is removed as built in {color}[https://fincap.atlassian.net/browse/ML-14161|https://fincap.atlassian.net/browse/ML-14161|smart-link]{color:#bf2600} {color}
* {color:#bf2600}If multiple accounts are identified  with same CRN, SFDC will identify the most recent disbursed loan, and consider it as Base loan{color}
* The correct LAN should be updated in *Base Loan Application* field .
* {color:#bf2600}Should work whether Plus is DIY/TC/IRO Assisted Journey{color}
* {color:#bf2600}If any offer record is not having CRN , that offer record should not  inserted on SFDC and associated offer should not get created . L1 should get an error while upload such offers on SFDC.  L1 should be able to identify those offers which failed for offer upload. {color}
* +MEL-PLRepeat+ : *Base Loan Application* field should be stamped with latest disbursed loan in MEL/PL . SFDC should query and identify the latest disbursed loan on customer’s Account using CRN . If there are more than 1 account, SFDC will identify the account where latest disbursed loan is tagged. SFDC will copy that latest disbursed loan on MEL-PL REPEAT
* FCRB logics should work correctly referring to the latest disbursed loan in Base Loan Application field in MEL Repeat-Plus Journeys
* Cloning of data from base loan related logics should work as it is for MEL-PL Repeat and Plus. SFDC will refer to the base loan application field for cloning as per current build
* All the other logics for MEL-PL Repeat and Plus unless described specifically will work as is . E2E workflow for both journey flows should work as is
* Null handling for CRN to be done , records with Null values should not be inserted on SFDC. Defined length of CRN  will be only allowed on SFDC when CRN is inserted through L1 team. Validations build related to length on CRN field in CRN Dedupe object will work as it is
* No impact foreseen on HL-LAP Pre Approved and GL Renewal workflow

key: ML-21660
summary: 2.3. Case allocation and Other Places - Removal of existing logics & fields and replace with New logics- Part 3
description: *Applicable* : RMEL, RPL, RHL, RLAP, {color:#bf2600}Gold{color} ( all flows where UW is applicable)

*Current* : Underwriting level is maintained at user level for a UW user and Lending limit maintained in Global Master data list for a particular UW level at BU level is the CAD limit for a UW user

!image-20230829-065922 (ec30c9fb-a8b7-4877-bb83-4ec95e07d6e5).png|width=50%!

*Proposed* :

* Existing logics to read the {color:#bf2600}Underwriting level from field in snap and Lending Limit being referred from CAD Limit master {color}to be removed. SFDC should not decide the underwriting level using the existing field maintained at User level and lending limit using values maintained in the master global data lists
* Below fields should be hidden from Page layout and should not be visible to the user

!image-20230829-065922.png|width=50%!

* Underwriting Level and Lending Limit for a particular user will be decided basis the field values created in [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link] .
* For example : If Parth Parwal user has field values for MEL Bank Underwriting Level as L1 and for Lending Limit as 100000 , then for any case where Parth Parwal is the UW and Business Unit= MEL and Workflow = Bank, Underwriting Level and Lending Limit becomes L1 and 100000 respectively. Parth Parwal should be able to approve the loan amount or approve the deviation given that he is mapped to Business Unit , Workflow , Branch and Location at user level. Case sharing logics will remain as per the current build
* {color:#bf2600}Mapping logic for Case allocation should work as is per the current build only change would be that SFDC will refer new fields for Underwriting Level and Lending Limit instead of earlier field and values maintained at the master level.{color}
* If a value is blank in the fields ( [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link] ) corresponding to any user, user should not be able to take any action on front end given that case is shared as per case sharing logics with the UW user. For example

# if a Lending Limit is not set for the user for a given workflow and Business unit and it is blank at User level , User should not be able to “ Approve” , “ Soft Approve “ , error validation should appear on UI ([~accountid:626240696cb53d006a6ab5a4] _Dev to confirm if Existing Validation can be used or a new validation message is needed, connect with DJO/Credit for new validation message content_)
# if Underwriting Level is not set for the user for a given workflow and Business unit and it is blank at User level , User should not be approve the deviation on front end, edit access will not be available to the user for Approving the deviation
acceptance: # To function as described
# Should work for UW cases in MEL-PL-HL-LAP BUs as described
# Existing logics to read the {color:#bf2600}Underwriting level from field in snap and Lending Limit being referred from CAD Limit master ONLY {color}to be removed , Fields described to be hidden at user level in all environments. User should not be able to view the fields
# Underwriting Level and Lending Limit for a particular user will be decided basis the field values created in [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link] . 
# {color:#bf2600}All other logics related to DV, Verification closure, Underwriting will remain as it is , no changes expected unless described. {color}[https://fincap.atlassian.net/browse/RM-753|https://fincap.atlassian.net/browse/RM-753|smart-link] 
# {color:#bf2600}Logics will work as it is for Hold, Forward, Approve,  Reject, Cancel, Retrigger as per current build, no impact due to new functionality{color} [https://fincap.atlassian.net/browse/RM-932|https://fincap.atlassian.net/browse/RM-932|smart-link] 
# {color:#bf2600}System deviation and manual deviation logic to work as per existing build{color} [https://fincap.atlassian.net/browse/RM-933|https://fincap.atlassian.net/browse/RM-933|smart-link] 
# {color:#bf2600}Deviation with Underwriting level ‘n’ and below level ‘n’ can be actioned (approved/rejected) by Underwriter with level ‘n’ as per existing build{color}
## {color:#bf2600}For e.g. L1, L2, L3 Deviation can be approved by Underwriter with CAD Level 3, 4 & 5.{color}
## {color:#bf2600}Underwriter with CAD level 2 can approve L1, L2 Deviations and underwriter with CAD level 1 can only approve L1 Deviation.{color}
# {color:#bf2600}Bulk Approval logic will work as it is as per current build. {color}[https://fincap.atlassian.net/browse/RM-1903|https://fincap.atlassian.net/browse/RM-1903|smart-link]{color:#bf2600} and {color}[https://fincap.atlassian.net/browse/ML-9392|https://fincap.atlassian.net/browse/ML-9392|smart-link] {color:#bf2600} . Refer attached BRD in user story {color}[https://fincap.atlassian.net/browse/RM-1903|https://fincap.atlassian.net/browse/RM-1903|smart-link]{color:#bf2600}. Forward to and Recommend to Grid will work as per the BRD{color}
# {color:#bf2600}Dual deviation automation for IFBL cases will work as it is as per current build{color} [https://fincap.atlassian.net/browse/RM-1911|https://fincap.atlassian.net/browse/RM-1911|smart-link]  and [https://fincap.atlassian.net/browse/ML-5463|https://fincap.atlassian.net/browse/ML-5463|smart-link] 
# {color:#bf2600}Total Exposure related calculation will be basis lending limit maintained against the BU for that user + the exposure amount sent through Posidex/added under obligations. The summation of these should not exceed the sanction loan amount entered by the underwriter else it throws a validation message.. This is existing logic in HL/LAP-CAD is compared against total Loan Amount and Obligation amount where Financier name as “IDFC” . Should work as is.{color}
# {color:#bf2600}If a lending limit and/ or Underwriting Level is not set for the user, user should not be able to approve the deviation or approve/soft approve the UW case. Validation should appear on front end for Approve/Soft approve as described{color}
# Should work for All UW Profiles - Branch Credit Manager, Cluster Credit Manager, State Credit Manager, National Credit manager.

key: ML-21657
summary: 2.2. Forward/Recommend - Removal of existing logics & fields and replace with New logics- Part 2
description: *Applicable* : RMEL, RPL, RHL, RLAP, {color:#bf2600}Gold{color} ( all flows where UW is applicable)

*Current* : Underwriting level is maintained at user level for a UW user and Lending limit maintained in Global Master data list for a particular UW level at BU level is the CAD limit for a UW user

!image-20230829-065922 (3cb8f694-fb18-47e7-961e-59790d7d551c).png|width=50%!

*Proposed* :

* Existing logics to read the {color:#bf2600}Underwriting level from field in snap and Lending Limit being referred from CAD Limit master {color}to be removed. SFDC should not decide the underwriting level using the existing field maintained at User level and lending limit using values maintained in the master global data lists
* Below fields should be hidden from Page layout and should not be visible to the user

!image-20230829-065922.png|width=50%!

* Underwriting Level and Lending Limit for a particular user will be decided basis the field values created in [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link] .
* For example : If Parth Parwal user has field values for MEL Bank Underwriting Level as L1 and for Lending Limit as 100000 , then for any case where Parth Parwal is the UW and Business Unit= MEL and Workflow = Bank, Underwriting Level and Lending Limit becomes L1 and 100000 respectively. Parth Parwal should be able to approve the loan amount or approve the deviation given that he is mapped to Business Unit , Workflow , Branch and Location at user level. Case sharing logics will remain as per the current build
* {color:#bf2600}Mapping logic for deviations approval/ Forward/Recommend should work as is per the current build only change would be that SFDC will refer new fields for Underwriting Level and Lending Limit instead of earlier field and values maintained at the master level.{color}
* If a value is blank in the fields ( [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link] ) corresponding to any user, user should not be able to take any action on front end given that case is shared as per case sharing logics with the UW user. For example

# if a Lending Limit is not set for the user for a given workflow and Business unit and it is blank at User level , User should not be able to “ Approve” , “ Soft Approve “ or “Reject”. Error validation should appear on UI ([~accountid:626240696cb53d006a6ab5a4] _Dev to confirm if Existing Validation can be used or a new validation message is needed, connect with DJO/Credit for new validation message content_)
# if Underwriting Level is not set for the user for a given workflow and Business unit and it is blank at User level , User should not be approve the deviation on front end, edit access will not be available to the user for Approving the deviation
acceptance: # To function as described
# Should work for UW cases in MEL-PL-HL-LAP BUs as described
# Existing logics to read the {color:#bf2600}Underwriting level from field in snap and Lending Limit being referred from CAD Limit master ONLY {color}to be removed , Fields described to be hidden at user level in all environments. User should not be able to view the fields
# Underwriting Level and Lending Limit for a particular user will be decided basis the field values created in [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link] . 
# {color:#bf2600}All other logics related to DV, Verification closure, Underwriting will remain as it is , no changes expected unless described. {color}[https://fincap.atlassian.net/browse/RM-753|https://fincap.atlassian.net/browse/RM-753|smart-link] 
# {color:#bf2600}Logics will work as it is for Hold, Forward, Approve,  Reject, Cancel, Retrigger as per current build, no impact due to new functionality{color} [https://fincap.atlassian.net/browse/RM-932|https://fincap.atlassian.net/browse/RM-932|smart-link] 
# {color:#bf2600}System deviation and manual deviation logic to work as per existing build{color} [https://fincap.atlassian.net/browse/RM-933|https://fincap.atlassian.net/browse/RM-933|smart-link] 
# {color:#bf2600}Deviation with Underwriting level ‘n’ and below level ‘n’ can be actioned (approved/rejected) by Underwriter with level ‘n’ as per existing build{color}
## {color:#bf2600}For e.g. L1, L2, L3 Deviation can be approved by Underwriter with CAD Level 3, 4 & 5.{color}
## {color:#bf2600}Underwriter with CAD level 2 can approve L1, L2 Deviations and underwriter with CAD level 1 can only approve L1 Deviation.{color}
# {color:#bf2600}Bulk Approval logic will work as it is as per current build. {color}[https://fincap.atlassian.net/browse/RM-1903|https://fincap.atlassian.net/browse/RM-1903|smart-link]{color:#bf2600} and {color}[https://fincap.atlassian.net/browse/ML-9392|https://fincap.atlassian.net/browse/ML-9392|smart-link] {color:#bf2600} . Refer attached BRD in user story {color}[https://fincap.atlassian.net/browse/RM-1903|https://fincap.atlassian.net/browse/RM-1903|smart-link]{color:#bf2600}. Forward to and Recommend to Grid will work as per the BRD{color}
# {color:#bf2600}Dual deviation automation for IFBL cases will work as it is as per current build{color} [https://fincap.atlassian.net/browse/RM-1911|https://fincap.atlassian.net/browse/RM-1911|smart-link]  and [https://fincap.atlassian.net/browse/ML-5463|https://fincap.atlassian.net/browse/ML-5463|smart-link] 
# {color:#bf2600}Total Exposure related calculation will be basis lending limit maintained against the BU for that user + the exposure amount sent through Posidex/added under obligations. The summation of these should not exceed the sanction loan amount entered by the underwriter else it throws a validation message.. This is existing logic in HL/LAP-CAD is compared against total Loan Amount and Obligation amount where Financier name as “IDFC” . Should work as is.{color}
# {color:#bf2600}If a lending limit and/ or Underwriting Level is not set for the user, user should not be able to approve the deviation or approve/soft approve the UW case. Validation should appear on front end for Approve/Soft approve as described{color}
# Should work for All UW Profiles - Branch Credit Manager, Cluster Credit Manager, State Credit Manager, National Credit manager.

key: ML-21644
summary: 7.2. As a DVOps/BO-BM-CSM user, Once I click on the Loan Application number in "My Cases" worklist or after taking ownership of the case , I should be able to navigate to the verification screen so that I can complete Document Verification- Part 2
description: *Applicability* :

MEL/PL for ALL TABS

Gold for Documents TAB

In continuation to [https://fincap.atlassian.net/browse/ML-21114|https://fincap.atlassian.net/browse/ML-21114|smart-link] 



# Instrument Details : 

Same as in Gold [https://fincap.atlassian.net/browse/RGL-280|https://fincap.atlassian.net/browse/RGL-280|smart-link] _Dev to confirm if all the fields mentioned in user story are relevant for MEL/PL, Field list attached._ Fields not captured in Journey will appear as blank in this tab

# Documents : 

Same as in Gold  [https://fincap.atlassian.net/browse/RGL-2715|https://fincap.atlassian.net/browse/RGL-2715|smart-link] 

Applicability for Gold/MEL/PL - Only difference for Documents tab  is that all documents uploaded by Sales/Credit to be shown , it includes Non ADB documents uploaded on Esign screen)

*Common Functionality*

UI/UX to remain same as developed in Gold DV Screens

{color:#bf2600}Retrigger/Submit/Cancel buttons will be available at bottom of Page layout similar to Gold DV screens. {color}

*Assumption* : 

* SMS is not needed to be sent to Customer when the case is pushed to FinnOne and case gets disbursed. [~accountid:60a75ab82009f10068dc8e18] to clarify-  Not needed; currently handled by Comms Hub via ODS
acceptance: # Should work for MEL/PL (Non ADB cases) and Gold (SBD cases)
# user is able to see Applicant, Loan, Document, Instrument Details, ESign Estamp Status tabs at the Left side.. All the fields in respective tabs are visible properly., alignments are correct
# All the fields in all the tabs are noneditable for user
# UI/UX to remain same as Gold DV screens. Alignment to UI/UX should be appropriate
# DVOps user /BO user is able to view all the documents as uploaded by IRO/BO or BM/CSM in DV before reaching to DV screen ( including Non ADB documents)
# user is able to zoom, scroll the document.
# user is able to check the checkboxes
# user is able to see instrument details section fields
# user is able to see the bank document if karza match was less than 65% at Disbursement stage. Otherwise document will not be shown.
# user is able to click on zoom button and see the document in a popup. User is able to scroll the document.
# Instrument Details Fields are shown basis whether the account added is IDFC or Non IDFC.
# {color:#bf2600}Retrigger/Cancel/Submit button should be placed on bottom of screen as available in Gold DV screen{color}
# {color:#bf2600}ADB Failure Reason field is visible in the header of DV cases for MEL/PL/Gold{color}
# Should work on Mobile and Desktop
# Gold DV workflow should work as it is unless described otherwise

key: ML-21635
summary: 4. Previous Loan Details Tab and UI handling- Part 2
description: *Applicable* : MEL Repeat, PL Repeat (Bank and IFBL workflow)

*Proposed*

In continuation to [https://fincap.atlassian.net/browse/ML-21625|https://fincap.atlassian.net/browse/ML-21625|smart-link] 

Second Section *DPD Details* will have following fields 

Fields will appear in same sequence on UI as mentioned below

|DPD as on date|New mandatory field to be created, Manual entry|
|Peak DPD (Days)|Manual Entry|
|No of DPD Bet 8-15 in Previous LAN|Manual Entry|
|No of DPD Bet 16-30 in Previous LAN|Manual Entry|
|Last 3 months DPD (Days)|Manual Entry|
|No of EMI More than 30 DPD|Manual entry|
|No of EMI in 1-30 DPD|Manual entry|



|*SFDC Field Name*|*FICO Tag Name*|*FICO Path:- applicants-->previousLoanDetails*|*Type : PreviousLoanDetail*|
|DPD as on date|TBD|application.applicants.previousLoanDetails-->TBD|TBD|

*Field Name renaming in MEL Repeat ( Existing in PL Repeat)*

No. of DPD Bet 8-14 to be renamed as  No of DPD Bet 8-15 in Previous Loan

No. of DPD bet 15-30 to be renamed as No of DPD Bet 16-30 in Previous Loan

*Assumption*

DPD More than 30 or more than once in 1-30 DPD is not required to be created

*Dependency*

Tag name and path for FICO request for the new field to be shared by FICO similar to one shared in [https://fincap.atlassian.net/browse/ML-18912|https://fincap.atlassian.net/browse/ML-18912|smart-link] 
acceptance: # Should work for MEL Repeat, PL Repeat (Bank and IFBL workflow)
# Field values are getting saved on back end for reporting purpose as per current build
# Values entered manually should flow to external systems as per current build
# Apart from described flow, there should be no impact on Journey flow elsewhere
# UI/UX for UW page view should not get distorted on Mobile and Desktop. 
# Mandatory field validations should work as is, existing editable/noneditable field logics will work as is
# Fields should appear on UI in same sequence as described
# New tags for the new field should flow to FICO similar to other tags for fields already existing in MEL Repeat/PL Repeat
# In FICO call, fields mentioned in [https://fincap.atlassian.net/browse/ML-21625|https://fincap.atlassian.net/browse/ML-21625|smart-link]  and [https://fincap.atlassian.net/browse/ML-21635|https://fincap.atlassian.net/browse/ML-21635|smart-link]  are flowing as per current build , FICO should be able to respond to the request structure as per current build

key: ML-21625
summary: 3. Previous Loan Details Tab and UI handling- Part 1
description: *Applicable* : MEL Repeat, PL Repeat (Bank and IFBL workflow)

*Proposed* :

Previous loan details to be subdivided into two sections. Subsections should be clearly visible to the User 

First Section *LMS details* will have following fields and two New buttons - Fetch Details, Save

+Fetch Details+ , UI/UX as per attachment

On click of Fetch Details , two logics will run- 

# API should be triggered [https://fincap.atlassian.net/browse/ML-19024|https://fincap.atlassian.net/browse/ML-19024|smart-link] 
# below fields should get auto populated on front end on UI basis below logic 

|{color:#4c9aff}*UI Fields*{color}|{color:#4c9aff}*Logics to be built*{color}|
|Total Income of previous loan|SFDC Base loan|
|Cycle Number|SFDC Contact|
|Application ID of Previous LAN|SFDC Base loan|
|% of Incremental cash flow|Calculated in SFDC, no change to existing logic|

+When API is triggered+

Spinner should loan on the screen from the moment API is triggered and till the time API is responded, when spinner is loading , user should not be able to take any action on UI

Spinner should stop loading on the screen as soon as API responds , and user will be again directed to same screen, same page view

If success response received from API, API Response to be consumed and processed to extract values derived from tags received in response .  Below Field values will be auto-populated on UI as per existing format of below UI fields.

|{color:#008da6}*UI Fields*{color}|{color:#008da6}*Tags to be referred*{color}|
|EMI Start Date|"FIRST_EMI_DATE"|
|Loan Closure Date|"CLOSUREDATE"|
|Sanctioned Loan Amount|"LOAN_AMOUNT"|
|EMIs Paid|"NO_OF_PAID_EMI"|
|Principal Outstanding|"PRINCIPAL_OUTSTANDING"|

Spinner should stop loading if the API is stuck in progress for more than 1 minute, Values will remain blank on UI for above mentioned values.

If error is received from the API , above mentioned 5 fields will remain blank on UI. user would have an option to enter the data manually as per current flow. User should be able to manually enter value in those fields where data didn’t auto populate

If no value is received in any one or multiple tag corresponding to above  mentioned 5 fields from LMS API response, SFDC should not store the value for that field on UI. It will remain blank. User should be able to manually enter value in those fields where data didn’t auto populate.

+Save+ , UI/UX as per attachment

Clicking on Save button will let storing of values in above mentioned 5 UI fields.  If the user has manually entered or updated values in any of the above mentioned 5 field,  Clicking on Save should not be allowed and user should get a validation until user uploads mandatory supporting document. User should get a validation on top of the screen as “*Please upload supporting document before saving the details”* . Once mandatory document is uploaded, user should be allowed to Click Save . On click of Save , values should get saved corresponding to above mentioned 5 fields on SFDC.

Creation of a document type and Name  - Statement of Account . The document should become mandatory whenever the values are entered manually by the user for above mentioned 5 fields. User should be able to upload a document with mentioned document type and name in Documents tab by clicking “Add Document”. Upload functionality will work as per current build

Fields will appear in same sequence on UI as mentioned below.  

|EMI Start Date|
|Loan Closure Date|
|Sanctioned Loan Amount|
|Total Income of previous loan|
|% of Incremental cash flow|
|EMIs Paid|
|Principal Outstanding|
|Business Name|
|Cycle Number|
|Application ID of Previous LAN|

 

*Assumption* :

There is no supporting document required to enter or update values in below fields on UI

|Total Income of previous loan|
|Cycle Number|
|Application ID of Previous LAN|
acceptance: # Should work for MEL Repeat, PL Repeat (Bank and IFBL workflow)
# Previous loan details to be subdivided into two sections. Subsections should be clearly visible to the User
# On click of Fetch Details , two logics will run-
## API should be triggered [https://fincap.atlassian.net/browse/ML-19024|https://fincap.atlassian.net/browse/ML-19024|smart-link]
## below fields should get auto populated on front end on UI basis below logic

|{color:#4c9aff}*UI Fields*{color}|{color:#4c9aff}*Logics to be built*{color}|
|Total Income of previous loan|SFDC Base loan|
|Cycle Number|SFDC Contact|
|Application ID of Previous LAN|SFDC Base loan|
|% of Incremental cash flow|Calculated in SFDC, no change to existing logic|

+When API is triggered+

Spinner should loan on the screen from the moment API is triggered and till the time API is responded, when spinner is loading , user should not be able to take any action on UI

Spinner should stop loading on the screen as soon as API responds , and user will be again directed to same screen, same page view

If success response received from API, API Response to be consumed and processed to extract values derived from tags received in response . Below Field values will be auto-populated on UI as per existing format of below UI fields.

|{color:#008da6}*UI Fields*{color}|{color:#008da6}*Tags to be referred*{color}|
|EMI Start Date|"FIRST_EMI_DATE"|
|Loan Closure Date|"CLOSUREDATE"|
|Sanctioned Loan Amount|"LOAN_AMOUNT"|
|EMIs Paid|"NO_OF_PAID_EMI"|
|Principal Outstanding|"PRINCIPAL_OUTSTANDING"|

# Spinner should stop loading if the API is stuck in progress for more than 1 minute, Values will remain blank on UI for above mentioned values.
# If error is received from the API , above mentioned 5 fields will remain blank on UI. user would have an option to enter the data manually as per current flow. User should be able to manually enter value in those fields where data didn’t auto populate
# If no value is received in any one or multiple tag corresponding to above mentioned 5 fields from LMS API response, SFDC should not store the value for that field on UI. It will remain blank. User should be able to manually enter value in those fields where data didn’t auto populate.
# Clicking on Save button will let storing of values in above mentioned 5 UI fields. If the user has manually entered or updated values in any of the above mentioned 5 field, Clicking on Save should not be allowed and on click of Save should give a validation until user uploads mandatory supporting document. User should get a validation on top of the screen as “*Please upload supporting document before saving the details”* . Once mandatory document is uploaded, user should be allowed to Click Save . On click of Save , values should get saved corresponding to above mentioned 5 fields on SFDC
# If the user doesn't exercise fetch details, user should be allowed to go ahead as per existing flow with addition of mandatory supporting document
# If the user has clicked Fetch details multiple times, multiple callouts will happen from SFDC, latest API response should be consumed to run the logics as described in user story
# If the API responds successfully, values should get populated on UI front end, user should be able to save the details and move ahead as per existing flow without receiving any validation on UI
# If the API responds successfully but the user updates values in one or more than one field out of 5 fields, then user should be forced to enter supporting document to save the entered values
# Field values are getting saved on back end for reporting purpose as per current build
# Values auto populated or entered manually should flow to external systems as per current build
# Apart from described flow, there should be no impact on Journey flow elsewhere. UW flow should not get impacted unless described otherwise
# UI/UX for UW page view should not get distorted on Mobile and Desktop. Both buttons- Fetch details and Save should appear as described in attachment
# Existing logic to fetch business name value and computation of % of Incremental Cash flow from base loan fields will work as it is. 
# User should not get any validation on Click of Save if the user has updated values in below fields

|Total Income of previous loan|
|Cycle Number|
|Application ID of Previous LAN|

# Mandatory field validations should work as is, existing editable/noneditable field logics will work as is
# User should be able to upload mandatory document as described. Upload functionality will work as is. Document should get saved on Filenet
# Document should have same validations as available for other document type
# Fields should appear on UI in same sequence as described

key: ML-21543
summary: 13. Time Limit Logics and Move to Open Pool
description: *Applicable* : MEL/PL/Gold

*Proposed*  : 

Creation of a button similar to Retrigger/Submit button called as *Move to Open Pool*. UI/UX to be similar to existing buttons

Sequence of buttons- {color:#bf2600}Cancel{color} , Move to Open Pool , Return, Retrigger, Submit

By clicking this button, case will move to DV Open Pool Worklist and DVOPs checker field/BO2 officer field will become blank for the case. Case will become a fresh case in Open Pool where any user can take the ownership again.

*Time Limit Logics*

If any case is available in My cases/Document Verification worklist for X number of days, then on X+1 day it will reflect in Open Pool where any DV user can take ownership of the case and process the case.DVOPs checker field/BO2 officer field will become blank for the case once the case has been moved out from My cases/Document Verification

X to be configurable. Should be allowed to update later
acceptance: * Creation of a button similar to Retrigger/Submit button called as *Move to Open Pool*. UI/UX to be similar to existing buttons
* By clicking this button, case will move to DV Open Pool Worklist and DVOPs checker field/BO2 officer field will become blank for the case. Case will become a fresh case in Open Pool where any user can take the ownership again.
* Once new ownership is taken DVOPs checker field/BO2 officer field should get updated appropriately. the user who has taken the ownership should be seamlessly able to process the case

*Time Limit Logics*

* If any case is available in My cases/Document Verification worklist for X number of days, then on X+1 day it will reflect in Open Pool where any DV user can take ownership of the case and process the case.DVOPs checker field/BO2 officer field will become blank for the case once the case has been moved out from My cases/Document Verification
* X to be configurable. Should be allowed to update later
* Once new ownership is taken DVOPs checker field/BO2 officer field should get updated appropriately. the user who has taken the ownership should be seamlessly able to process the case

key: ML-21540
summary: 12. Reporting fields
description: *Applicable* : MEL/PL/Gold

*Users in BU*
MEL/PL- IRO/DV Ops

Gold - IRO/BO/BM/CSM

*Proposed* : 

*Reporting fields* 

Below fields will be used for reporting purpose, fields and their logics will be reused as it is from HL-LAP unless there are new fields  _Developer to clarify stamping logic from HL-LAP code to check for reusability_ 

Reference user story - [https://fincap.atlassian.net/browse/RHLB-3412|https://fincap.atlassian.net/browse/RHLB-3412|smart-link] 

*Reporting Data Object*

# DVOPs Checker User Name (Latest) - DV user name who is doing the Document verification
# DVOPs Checker Start Date & Time (First) - when the DV user takes ownership of the case 
# Latest DVOPs Checker Retrigger DateTime- stamp date and time of most recent Retrigger exercised by DV user
# Latest DVOPs Checker Hold DateTime- stamp date and time of most recent Hold exercised by DV user *(New Field)*
# Final DV Ops Checker Completion DateTime - Finnone Submit stage date and time , when DV user exercises Submit button for submission to FinnOne
# Stage Reversal First Start Date = DV User Retriggered Start Date( retriggered to IRO/BO for the first time by DVOP’s user )
# Stage Reversal First End Date = stamp date and time when the retriggered case is sent to DV user for the first time
# Stage Hold First Start Date : stamp date and time when the case is returned to IRO/BO due to document Hold for the first time *(New Field)*
# Stage Hold First End Date : stamp date and time when the case is returned  from IRO/BO to DV after un-holding of case for the first time *(New Field)*
# {color:#bf2600}Stage Hold TAT : Stage Hold First End Date - Stage Hold First Start Date.{color}{color:#bf2600} *( New field, TAT will be storied in hours)*{color}

*Information - Loan application* 

# Date And Time Stamp of DV Initiation - Stamp the date and time when the case moves from Sales to DV Ops tray for the first time 
# DV Ops Returned - when the case is retriggered from DV Ops to Sales , the count increase by 1, by default the value is set to 0
# DV Ops Hold - when the case is returned back from DV Ops to Sales Esign screen ( Create a new field in Information), the count increase by 1, by default the value is set to 0 *(New Field)*



All the mentioned fields should be allowed to be extracted in a report format. _Developer - pls check if we can reuse the existing report format_
acceptance: *Reporting Data Object*

# DVOPs Checker User Name (Latest) - DV user name who is doing the Document verification
# DVOPs Checker Start Date & Time (First) - when the DV user takes ownership of the case
# Latest DVOPs Checker Retrigger DateTime- Latest Re-trigger date and time by DVOPs
# Latest DVOPs Checker Hold DateTime- Latest Hold date and time by DVOPs *(New Field)*
# Final DV Ops Checker Completion DateTime - Finnone Submit stage date and time , when DV user exercises Submit button for submission to FinnOne
# Stage Reversal First Start Date = DV User Retriggered Start Date( retriggered to IRO/BO for the first time by DVOP’s user )
# Stage Reversal First End Date = stamp date and time when the retriggered case is sent to DV user for the first time
# Stage Hold First Start Date : stamp date and time when the case is returned to IRO/BO due to document Hold for the first time *(New Field)*
# Stage Hold First End Date : stamp date and time when the case is returned from IRO/BO to DV after un-holding of case for the first time *(New Field)*
# {color:#bf2600}Stage Hold TAT : Stage Hold First End Date - Stage Hold First Start Date.{color}{color:#bf2600} *( New field, TAT will be storied in hours)*{color}

*Information - Loan application*

# Date And Time Stamp of DV Initiation - When the case moves from Sales to DV Ops tray for the first time
# DV Ops Returned - when the case is retriggered from DV Ops to Sales , the count increase by 1, by default the value is set to 0
# DV Ops Hold - when the case is returned back from DV Ops to Sales Esign screen , the count increase by 1, by default the value is set to 0 *(New Field)*

There should not be any impact on HL-LAP DV reporting fields, it should work as is

All the mentioned fields should be allowed to be extracted in a report format. _Developer - pls check if we can reuse the existing report format_

key: ML-21535
summary: 11. Submit/Retrigger/Cancel Button on DV screens and updation of Label Name on IRO screen from Submit to FinnOne to Submit
description: *Applicable* : MEL/PL, {color:#bf2600}Gold{color}

*Proposed* : 

*DV Screens*

*Submit*

Loan Application will be submitted to FinnOne after all the validations are successful and mandatory details are filled by DVOPs user . FinnOne request will be generated in the backend, In FinnOne request, tag for {color:#bf2600}Source_Flag will flow as RMAU/RPAU{color} while on SFDC ADB flag will continue to be Unchecked. _This is existing logic in Gold_

*Retrigger*

MEL-PL - On click of Retrigger on DV screen by DVOps user , following functionality to be retained from Gold as it is. {color:#bf2600}Loans will be moved to DV flow and will reflect in DV Open Pool Worklist. Entire workflow of Zero Ops Phase 2 will follow  {color}{color:#bf2600}_Ignore valuation part in mentioned story_{color}

[https://fincap.atlassian.net/browse/RGL-248|https://fincap.atlassian.net/browse/RGL-248|smart-link] 

{color:#bf2600}*MEL/PL/Gold*{color}{color:#bf2600} - Once the case is retriggered , in MEL/PL/Gold, the case will behave as fresh case with mentioned points , Zero Ops Phase 1 logics will work again and case will be submitted to Document verification flow{color}

*Cancel*

It will open a popup for cancellation reason. Loan Application will be cancelled and it will be shown in Cancel/Reject worklist of IRO who has done the initial data entry.

*Label Update from Submit to FinnOne to Submit*

Change the UI label name on Button present on IRO screen on Esign Screen from Submit to FinnOne to Submit. 
acceptance: # Once the DVOPs user clicks on the *Retrigger* button on the Document Verification screen, the Loan Application will be moved to the IRO user’s “Work in Progress” worklist who has done the initial Data Entry for that particular Loan Application. Stage Substage should be

|Co-Applicant Detail Entry|Co-Applicant Detail Pending|

 

# Once the IRO/BO user clicks on such Loan Application Number of Retriggered Loan Application in his worklist of “Work in Progress”,-
## User will land on Applicant Details screen where all the fields of Applicant and Co-applicant will be shown.
## Same New Loan Application journey will be followed and *user will verify the details.*
## Comments entered by DVOPs user will be visible to the IRO in the panel at the bottom.
## All fields will be autopopulated *and it will be editable.*
## *All the APIs will run again in the journey.*
# {color:#bf2600}Once the case is retriggered , in MEL/PL/Gold, the case will behave as fresh case with mentioned points , Zero Ops Phase 1 logics will work again and case will be submitted to Document verification flow{color}
# *Retrigger Button*: Once the DVOps user  user clicks on the *Retrigger* button on the Verification screen, a popup will be shown with a text box so that DVOps user can enter his comments. These comments should be visible to the IRO user. On click of Done button on Popup, the Loan Application will be moved to such IRO user’s “Work in Progress” worklist who has done the initial Data Entry for that particular Loan Application.
# If Mandatory details are not filled, user will not be allowed to Submit the case to FinnOne.
# Once Submit button is hit, finnone request will be generated and case will be submitted to Finnone
# Cancellation button should work as described
# Gold DV flow should work as it is for Submit/Cancel/Retrigger buttons
# Label name for button on Esign screen should be updated to Submit. Logics on Submit button on Esign screen will run as it is

key: ML-21522
summary: 10. Sales Returned Cases Worklist and DV screens
description: In continuation to  [https://fincap.atlassian.net/browse/ML-21449|https://fincap.atlassian.net/browse/ML-21449|smart-link] 

*Proposed* : 

+MEL-PL+

All PAN India cases will be shared to DVOPs user in open pool and will be visible in *Sales Returned Cases* Worklist [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] 

+Gold+

Cases will be shared to DV users as per existing logic of case sharing developed in, {color:#bf2600}only difference is that case will reflect in {color}{color:#bf2600}*Sales Returned Cases*{color} [https://fincap.atlassian.net/browse/RGL-246|https://fincap.atlassian.net/browse/RGL-246|smart-link]  

Users designated for Document verification in MEL/PL/Gold should be able to locate the cases in the mentioned worklist. Once the loan application hyperlink is clicked for any case, take ownership logics and detail page view logics will work as it is - MEL-PL- [https://fincap.atlassian.net/browse/ML-21111|https://fincap.atlassian.net/browse/ML-21111|smart-link] and Gold - [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] 

For MEL/PL ,After ownership is taken , cases will be moved into My cases worklist as per  [https://fincap.atlassian.net/browse/ML-21111|https://fincap.atlassian.net/browse/ML-21111|smart-link] 

For Gold , After ownership is taken , cases will be moved into Document Verification Worklist as per  [https://fincap.atlassian.net/browse/GLB-190|https://fincap.atlassian.net/browse/GLB-190|smart-link] 

DVOps user/ IRO/BO/CSM user should land on  the document verification screen if the user access the case after clicking ASSIGN on take ownership page by click of Edit on Detail Page view or if the user access the hyperlink of LAN from the dedicated worklist of My cases or Document Verification Worklist by click of Edit on Detail Page view

DV users should be able to view the new documents uploaded by sales team for the document where Hold was exercised in the dedicated document name and type.

If the DVOps/ BO/BM/CSM user wants to re-exercise the Hold functionality due to incorrect document , same loop will continue again 

[https://fincap.atlassian.net/browse/ML-21211|https://fincap.atlassian.net/browse/ML-21211|smart-link] 

[https://fincap.atlassian.net/browse/ML-21449|https://fincap.atlassian.net/browse/ML-21449|smart-link] 

*Assumption* : We dont need to show any identifier to the DV user for the documents which were freshly uploaded by the user due to Hold exercise
acceptance: +MEL-PL+

* All PAN India cases will be shared to DVOPs user in open pool and will be visible in *Sales Returned Cases* Worklist [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link]
* +Gold+
* Cases will be shared to DV users as per existing flow. [https://fincap.atlassian.net/browse/RGL-246|https://fincap.atlassian.net/browse/RGL-246|smart-link]
* Users designed for Document verification in MEL/PL/Gold should be able to locate the cases in the mentioned worklist. Once the loan application hyperlink is clicked for any case, take ownership logics and detail page view logics will work as it is - MEL-PL- [https://fincap.atlassian.net/browse/ML-21111|https://fincap.atlassian.net/browse/ML-21111|smart-link] and Gold - [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link]
* For MEL/PL ,After ownership is taken , cases will be moved into My cases worklist as per [https://fincap.atlassian.net/browse/ML-21111|https://fincap.atlassian.net/browse/ML-21111|smart-link]
* For Gold , After ownership is taken , cases will be moved into Document Verification Worklist as per [https://fincap.atlassian.net/browse/GLB-190|https://fincap.atlassian.net/browse/GLB-190|smart-link]
* DVOps user/ IRO/BO/CSM user should land on the document verification screen if the user access the case after clicking ASSIGN on take ownership page or if the user access the hyperlink of LAN from the dedicated worklist of My cases or Document Verification Worklist
* DV users should be able to view the new documents uploaded by sales team for the document where Hold was exercised in the dedicated document name and type.
* If the DVOps/ BO/BM/CSM user wants to re-exercise the Hold functionality due to incorrect document , same loop will continue again. This loop will continue n number of times if there is a business rational to use it. 

[https://fincap.atlassian.net/browse/ML-21211|https://fincap.atlassian.net/browse/ML-21211|smart-link]

[https://fincap.atlassian.net/browse/ML-21449|https://fincap.atlassian.net/browse/ML-21449|smart-link]

key: ML-21449
summary: 9. Hold and Comment functionality on DV- Part 2
description: In continuation to  [https://fincap.atlassian.net/browse/ML-21211|https://fincap.atlassian.net/browse/ML-21211|smart-link] 

*Business Case* : When the Hold button is exercised, user should be able to return the case to Sales team, Sales team should be able to reupload the document and resubmit the case for Document Verification

*Applicable* : MEL/PL/Gold

Functionality will be applicable as per workflow, pls consider below terms 

+For Document Verification+

DVOps user for MEL/PL

BO/BM/CSM for Gold

+For Sales+

IRO for MEL/PL

IRO/BO for Gold

*Proposed* : 

Creation of a RETURN Button on DV screen as mentioned below. It will be visible next to RETRIGGER. _Check with DJO for placement_

Bottom page view will show three options in sequence once RETURN button is introduced

RETURN RETRIGGER SUBMIT

RETURN Button will be *DISABLED* on the screen always. User should not be able to click the button RETURN ,  it will be *DISABLED* until the time Comment is selected for all the applicable documents where Hold button is exercised

Once Hold button is exercised and comment is selected for all the applicable documents by the DVOps user/BO/BM/CSM, RETURN button would be *ENABLED* , user would be able to click RETURN button and once RETURN is clicked, case will move back to IRO/BO who has punched the case. The case will be visible in Work in Progress worklist of respective IRO/BO. 

The stage/substage of the case will be updated to Hold- Document Verification and Hold - Document Verification Pending respectively _( Dev to confirm the stage by integration and stage by screen_

IRO/BO should be able to locate the case in his worklist using the stage mentioned above. When IRO clicks on LAN in the worklist, he will be directed to Detail Page view. IRO/BO should be able to click on Edit button 

After edit is clicked, IRO/BO  would land on same screen where user gets option to upload Documents corresponding to Non ADB and stage/substage should get updated accordingly _( Dev to confirm stage/substage)_

IRO/BO user should be shown Doc Upload screen similar to developed in Zero Ops Part 1. *Only* list of documents which are Hold during Document Verification should be shown to Sales User. (IRO/BO user)

IRO/BO User should be shown Comment added by DVOps user corresponding to each document where Hold button was exercised by DVOps user. Comment field will be noneditable to Sales user . If others was selected by DVOps user, and then field to capture manual reason *Enter Comment Manually* should be shown to IRO . This field will be visible next to Comments . _Developer to ensure that UI is not distorted for Mobile and Desktop_

Basis the comment received by DVOPs user, IRO/BO user should be allowed to upload a new document corresponding to each document where Hold was exercised.

Each document which is hold by DVOPs user , should be mandatorily uploaded on the screen freshly , if the user tries to click Submit/Submit to FinnOne, user should get an error, existing toast message built in Zero Ops Phase 1 for MEL/PL and Gold are not to be shown to the user. Only below validation should appear

*Please upload Mandatory documents to re-submit the case for Document Verification*

Once all the mandatory documents which are necessary to re-submit the case are uploaded, on click of Submit/Submit to FinnOne, the case will be moved to Document Verification. 

The cases will be visible in “Sales Returned Cases” to DVOps user/BO/BM/CSM [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] 



*Assumption* : Once new documents are uploaded by Sales user, then it will be uploaded in the FileNet with same document name and document type as defined in Zero Ops Phase 1 project
acceptance: # Should work on Mobile and Desktop, UI should not be distorted
# Creation of a RETURN Button on DV screen as mentioned below. It will be visible next to RETRIGGER. _Check with DJO for placement_
Bottom page view will show three options in sequence once RETURN button is introduced
RETURN RETRIGGER SUBMIT
RETURN Button will be *DISABLED* on the screen always. User should not be able to click the button RETURN , it will be *DISABLED* until the time Comment is selected for all the applicable documents where Hold button is exercised
# Once Hold button is exercised and comment is selected for all the applicable documents by the DVOps user/BO/BM/CSM, RETURN button would be *ENABLED* , user would be able to click RETURN button and once RETURN is clicked, case will move back to IRO/BO who has punched the case. The case will be visible in Work in Progress worklist of respective IRO/BO. 
# The stage/substage of the case will be updated to Return- Document Verification and Return - Document Verification Pending respectively _( Dev to confirm the stage by integration and stage by screen_
# IRO should be able to locate the case in his worklist using the stage mentioned above. When IRO clicks on LAN in the worklist, he will be directed to Detail Page view. IRO/BO should be able to click on Edit button 
# After edit is clicked, IRO would land on same screen where user gets option to upload Documents corresponding to Non ADB and stage/substage should get updated accordingly _( Dev to confirm stage/substage)_
# IRO/BO user should be shown Doc Upload screen similar to developed in Zero Ops Part 1. Only list of documents which are Hold during Document Verification should be shown to Sales User. 
# IRO/BO User should be shown Comment added by DVOps user corresponding to each document where Hold button was exercised by DVOps user. If others was selected by DVOps user, and then field to capture manual reason reason should be shown to IRO . This field will be visible next to Comments . _Developer to ensure that UI is not distorted for Mobile and Desktop_
# Basis the comment received by DVOPs user, IRO/BO user should be allowed to upload a new document corresponding to each document where Hold was exercised.
# Each document which is hold by DVOPs user , should be mandatorily uploaded on the screen freshly , if the user tries to click Submit/Submit to FinnOne, user should get an error, 
# *Please upload Mandatory documents to re-submit the case for Document Verification*
# Once all the mandatory documents which are necessary to re-submit the case are uploaded, on click of Submit/Submit to FinnOne, the case will be moved to Document Verification. 
# The cases will be visible in “Sales Returned Cases” to DVOps user/BO/BM/CSM [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] 
# Sales user should not be able to update data when the case is returned from DV Ops to Sales team

key: ML-21251
summary: Text wrapping for collateral CPV pre approved address
description: For Collateral CPV pre approved address kindly wrap and populate.
acceptance: Users should be able to view wrapped text for collateral cpv address

key: ML-21248
summary: Non editable fields for rural cases
description: Users are not able to edit fields for certain scenarios where “is pd finance tab read only is” is checked.

Kindly make sure for all cases is finance tab read only is unchecked.

Error scenarios:

# User is not able to edit fields as soon as they start pd and move to finance tab
# User is not able to edit fields after fico validations 
acceptance: Users should be able to edit all the fields.

key: ML-21242
summary: Rural-PL Minimum Age Update
description: The scope of this change is to update validation built around min. acceptable age in Rural-PL workflow, from 23yrs. to 21yrs. 

The minimum age of Applicant & Co-applicant is 21yrs, as per Rural-PL acceptable age norms.

*Existing Norm:* Currently the Rural-PL SFDC workflow has a validation built on Minimum age limit of applicant and co-applicant, which is entered by the user. 

* It permits min. age of 23yrs for the Rural-PL LANs (including PL Repeat) 
* It restricts user from entering age value below the minimum limit

*Proposed Change:* Min. age validation to be reset from 23yrs. +to 21yrs.+ acceptable on SFDC workflow, in the Rural-PL journey. This is applicable to the following list of schemes: 

|SCHME_DESC|SCHEMEID|
|RURAL-RPL BANK|71745|
|RURAL-RPL IFBL|71744|
|PL ENTERPRISE SCHEME|70224|
|PL ENTERPRISE IFBL|75301|
|PL REPEAT_BANK|71205|
|PL REPEAT_IFBL|71206|
|PL PRIME_REPEAT|75746|
|PL PRIME IFBL_REPEAT|75747|
|PL ENTERPRISE_REPEAT|75748|
|PL ENTERPRISE IFBL_REPEAT|75749|
acceptance: * System should allow user to enter minimum age of applicant/co-applicant up to 21yrs.
* For applicant & co-applicant with +age < 21yrs, 0 days age+, system validation to prompted user to enter Age as per the acceptable range only.
* No other impact on existing Rural-PL and PL-Repeat workflow

key: ML-21211
summary: 8 . Hold and Comment functionality on DV- Part 1
description: *Business Case* : Hold button will be exercised by the DV user whenever there is a discrepancy in Non ADB document uploaded

*Applicable* : MEL/PL/Gold

Functionality will be applicable as per workflow 

DVOps user for MEL/PL

BO/BM/CSM for Gold

*Proposed* : 

Creation of a *Hold* button and *Comment* field corresponding to each Non ADB document name in Documents tab [https://fincap.atlassian.net/browse/ML-21114|https://fincap.atlassian.net/browse/ML-21114|smart-link] 

Hold button should be visible ONLY for Non ADB documents which are uploaded by Sales user on Esign screen . User should be able to click on Hold whenever required for any document

Hold and Comment will be interlinked to each other, if Hold is clicked by the user, then ONLY Comment field will appear next to Hold button. Comment field will be a drop down mandatory field. Selecting drop down option from Comment will become mandatory once Hold button is exercised by DVOps user/BO-BM-CSM field

This informative message should appear below Comment field *Please enter a valid comment to move the case to Sales User* _(Dev team to confirm how these two fields can be made linked to each other from UI Perspective) Use  UAN Linked Mobile Number field as a reference for msg  UI/UX_

Comment field will have following picklist options for user selection,  picklist values should be configurable , new values should be allowed to added, existing values should be allowed to be removed (Add/modify/delete of picklist options should be allowed at later stage). 

{color:#bf2600}-Multiple picklist option selection should be allowed,- {color}{color:#bf2600}-_( Dev to confirm how Multiple selection will be handled on UI)_-{color}

{color:#006644}*Single select option should be allowed on UI among possible picklist options*{color}

* Incorrect document uploaded
* Document unclear
* Customer / Staff Sign missing
* Incomplete document
* Others

{color:#bf2600}-Comment selected by user should be saved on Loan application object , if multiple values are selected , they should be stored in below format-{color}

{color:#bf2600}-Option 1; Option 2-{color}

On selection of Others, a new mandatory field should become visible  ONLY on screen , *Enter Comment Manually*, this field will allow free text to be entered by DVOps user. Entered text should get stored on SFDC on -loan application object- {color:#006644}*Document detail record . Hold reasons selected by DVops user from the comments/Enter Text manually text field dropdown should be stamped in doc detail record on click of return button*{color}

Once Comment is selected by user ( or manual comment is entered in case of Others selection), [https://fincap.atlassian.net/browse/ML-21449|https://fincap.atlassian.net/browse/ML-21449|smart-link] 

[~accountid:62fc835c1e82e839c24fe8ec] _Developer to confirm if ALL the new buttons and fields will fit in Desktop and Mobile Screen, we have to ensure UI is not distorted_
acceptance: # To function as described
# Flow should work for MEL/PL/Gold. For MEL/PL- by DVOPs user. For Gold- BO/BM/CSM as applicable for Document verification workflow
# Hold button should be visible ONLY for Non ADB documents which are uploaded by Sales user on Esign screen . User should be able to click on Hold whenever required for any document/multiple documents as applicable
# Hold and Comment will be interlinked to each other, if Hold is clicked by the user, then ONLY Comment field will appear next to Hold button. Selecting drop down option from Comment will become mandatory once Hold button is exercised by DVOps user/BO/BM/CSM 
# The information message should appear below Comment field *Please enter a valid comment to move the case to Sales User* 
# Comment field will have following picklist options for user selection
#* Incorrect document uploaded
#* Document unclear
#* Customer / Staff Sign missing
#* Incomplete document
#* Others
#* On selection of Others, a new mandatory field should become visible on screen , *Enter Comment Manually*, this field will allow free text to be entered by DVOps user/BO/BM/CSM. Entered text should get stored on SFDC.{color:#bf2600}hold reasons selected by DVops user from the comments/Enter Text manually text field dropdown should be stamped in doc detail record on click of return button{color}
# Should work on Mobile and Desktop, UI should not be distorted
# Hold button is clickable for each document visible in Documents tabs, these documents ought to be Non ADB documents where were uploaded on ESign screen
# Comment button should not be visible when Hold button is not used by DVOPs/BO/BM/CSM user
# When Others is selected, free text field is visible and user is able to enter comment manually
# if user switches from Others to any other picklist option, free text field should disappear from UI. This should work in all possible combinations of switching from one comment to another

key: ML-21126
summary: Posidex API call out in DIY/TC Journey and Removal of Skip and Proceed in case of Confirm Details
description:  *Business Case* : DEDUPE integration in DIY/TC journey

*Existing* : Once CONFIRM button is clicked , case moves to Income details screen for DIY/TC Journey

*Proposed* : 

DEDUPE call to be integrated once personal details are confirmed by clicking on “Confirm” . The case should not move to Next screen of Income details as per current flow. Basis the decision of Posidex , following workflow will be applicable. _Dev to confirm if we have one common button to CONFIRM for APP/CO-APPs._ 

Once DEDUPE is triggered on backend , there would be intermediate screen created on which processing spinner will appear on UI  user should not be able to take any action on UI. Refer Image 1. [~accountid:5f4de98ed0884f004927c5d7] Pls add the image

!image-20231003-062658.png|width=1536,height=864!

As soon as the API has responded, intermediate API screen will be removed and following should happen

*Posidex Approve*

In case Posidex has approved the case , Posidex will inform SFDC in DEDUPE response tag “Loan Decision”= Approve and “Is Refer “ = N

In case Posidex has approved the case , UI screen will move to Income details tab as per current flow of DIY/TC Journey. If the case is moved back, by hovering over to Personal details,  Posidex should not be called again

*Posidex Reject* 

In case Posidex has rejected the case , Posidex will inform SFDC in DEDUPE response tag “Loan Decision” = Reject

On back end , drop off reason should be stamped as *Posidex Reject* , case stage, substage should get updated to Reject, Posidex Reject FinnOne API will be called as it is

On front end , a message should appear on UI as 

“The application has been rejected” in an intermediary screen. UI/UX of message should be same as one used for Drop off Message shown to customer/Telecaller _._

If the application has been rejected, it will be a hard stop for TC/DIY Journey. 

*Posidex Refer*

In case Posidex has referred the case , Posidex will inform SFDC in DEDUPE response tag “Loan Decision”= Approve and “Is Refer “ = Y. The case will be considered dropped off and drop off reason should stamp as *Posidex Refer* UI screen will show existing message related to movement of case to IRO  in an intermediary screen_._ the case should land on Stage- Posidex , Substage- Posidex Refer,

The case should move out from Telecaller Queue/Customer queue, and moved to respective Branch queue in existing worklist of Telecaller Dropped cases or MEL+ Customer Journey cases. IRO will move forward the case further. Movement of case to branch queue and visibility of cases to IRO logics will work as it is from Telecaller journey , refer a scenario when the case is dropped from Telecaller due to any existing drop off reason . _Existing queues can be used to move the case_

Once the IRO identifies the case in MEL+ Customer Journey cases Worklist/ Telecaller dropped off Worklist cases,  takes ownership logic will run as per  existing build and once IRO starts editing the case, response of Posidex should appear on IRO screen as per current build . Verification cases should be created as per current build. Existing build of MEL+ IRO assisted journey in case of Posidex Refer should work as it is. 

*Posidex Error*

In case of error response from DEDUPE, following UI message will appear on intermediary screen with 3 retry options. Refer Image 2. the case should land on Stage- Posidex , Substage- Posidex Error

!image-20231003-062611.png|width=1536,height=864!

If success response is received in any attempt of retry,  logics as mentioned above will work in case of Posidex Approve, Posidex Refer, Posidex Reject

If all the 3 retrys are failed and case will be dropped off and drop off reason should stamp as *Posidex Error* and the case should move out from Telecaller Queue/Customer queue, land to respective Branch queue in existing worklist of Telecaller Dropped cases or MEL+ Customer Journey cases. IRO will move forward the case further. Movement of case to branch queue and visibility of cases to IRO logics will work as it is from Telecaller journey , refer a scenario when the case is dropped from Telecaller due to any existing drop off reason . _Existing queues can be used to move the case_

Once the IRO takes ownership of the case as per existing build and edits the case, the case should land on Stage- Posidex , Substage- Posidex Error as per current build, error response of Posidex should appear on IRO screen as per current build . IRO should get retry options as per the current build. If success response received on IRO screen, user should be able to move forward the case and submit the case as per current functionality.

*Common functionality*

Once the case has been dropped due to any drop off reason from Telecaller/DIY , existing functionality of MEL+ IRO assisted journey will work as it is unless specified differently in description

Drop off reason should not get updated to any other value in case of Posidex Refer/Posidex Reject / Posidex Error even after 24 hours inactivity threshold has been met . If the 24hours has not expired, User if tries to access the case/edit the case after screen was closed and then same screen where TC/DIY user left the journey should be shown on front end UI

In case of hard refresh on intermediate screen, Case will land on same screen . Posidex should not get called again

*Skip and Proceed*

Skip and Proceed to be removed from UI, user should not see this button on UI on Confirm Details. _Dev to assess impact of removing this button on UI, any logics linked to Skip and Proceed_
acceptance: # Should work on Mobile and Desktop both
# In case of Posidex Approve, case should move successfully through DIY/TC Journey as per existing build.End to End workflow to be tested
# In case of drop off due to Posidex Refer and Posidex Error, all cases whether DIY/TC will be moved to IRO queue for further processing only, the cases should move successfully till Finn one submit as applicable to the case. End to End workflow to be tested
# Drop off reasons should stamp appropriately in dedicated field of Telecaller flow/Customer Flow section on loan application object as applicable for the case
# There should be no impact on other part of journey flow for DIY/TC unless it is specified. Drop off logics will work as it is and case processing in respective journey flow should work as it is for DIY/TC Journey
# MEL + IRO Assisted journey created by IROs using associated offer queue should also work as it is
# UI/UX of rejection message , error msg and drop off screnario related to Posidex should remain as per current screen UI/UX in both TC/DIY Journey
# In case of Posidex Refer/Posidex Error from DIY/TC Journey , case should get dropped off to IRO queues as per branch and IROs should be able to view the case in respective worklists. Take ownership logics will work as it is.
# Once the posidex refer case is edited , case will land on mentioned stage , substage,  all the logics of MEL + IRO Assisted Journey will work as it is
# in case of Posidex refer ,user should be able to complete the maker and checker activity as per current build and move forward the case and submit the case to FinnOne as per current build
# in case of Posidex error,user should be able land on mentioned stage , substage,  all the logics of MEL + IRO Assisted Journey will work as it is, IRO should be able to see the screen as described, he should be able to retry the posidex call
# In case of hard refresh on intermediate screen, Case will land on same screen on front end . Posidex should not get called again in back end
# Skip and Proceed to be removed from UI, user should not see this button on UI on Confirm Details.

key: ML-21114
summary: 7.1. As a DVOps/BO-BM-CSM user, Once I click on the Loan Application number in "My Cases" worklist or after taking ownership of the case , I should be able to navigate to the verification screen so that I can complete Document Verification
description: *Applicability* : 

MEL/PL for ALL TABS

*Proposed* : 

After the ownership is taken , if the user edits the screen or if the user clicks on the loan application in 'My Cases” Worklist as per [https://fincap.atlassian.net/browse/ML-21111|https://fincap.atlassian.net/browse/ML-21111|smart-link] , user would be move to Verification Screens

On Verification Screen,  user will be able to see following tabs  except for Valuation tab -  (refer screenshot). Screenshot only for reference): Valuation tab is not applicable for MEL/PL. Follow sequence as mentioned below

!image-20220221-111547.png|width=941,height=544!

*Header* : Same fields as Current View  in UW - Applicant, Branch & Location , Loan ID , Product, Scheme, Eligible Loan Amount , *Stage , Substage , Stage by Screen* , Req. Loan Amount , Tenure  ( Months ) , *DVOPs Checker* ( this one is new) {color:#bf2600}*ADB Failure Reason (this field is needed for MEL/PL/Gold)*{color}

# *Applicant* : Same as in UW. Refer attached document

*2.  Loan*  : Same as in UW . Refer attached document

*3. ESign Estamp Status :* Same as in Gold [https://fincap.atlassian.net/browse/RGL-282|https://fincap.atlassian.net/browse/RGL-282|smart-link] 

Only difference is that for Esign list of documents to be shown as applicable for MEL/PL _(Dev to confirm if any other document applicable for Esign )_

* Application Form
* Sanction Letter
* PAN/Form 60
* Disbursement Request Form
* Hospicash App Form



*Assumption* : 

* Tabs - Applicant and Loan which are available in UW, same will be reused for DV, [~accountid:60a75ab82009f10068dc8e18]  [~accountid:5fa3970fc8247300705a6b4b] to check and clarify if no new fields are required in this section
acceptance: # Should work for MEL/PL (Non ADB cases)
# DVOps user once edits the case after taking ownership or access the case from My cases worklist, he lands on DV screen as described
# user is able to see Applicant, Loan, Document, Instrument Details, ESign Estamp Status tabs at the Left side.. All the fields in respective tabs are visible properly., alignments are correct
# All the fields in all the tabs are noneditable for user
# UI/UX to remain same as Gold DV screens. Alignment to UI/UX should be appropriate
# DVOps user /BO user is able to view all the documents  as uploaded by IRO/BO or BM/CSM in DV before reaching to DV screen ( including Non ADB documents)
# user is able to zoom, scroll the document.
# user is able to check the checkboxes
# user is able to see the Estamp, Esign status in separate tabs
# user is shown Estamp, Esign status as it was shown once Estamp, Esign was completed.
# user is able to see the Estamped/ esigned document as applicable
# user is able to click on zoom button and see the document in a popup. User is able to scroll the document.
# {color:#bf2600}Retrigger/Cancel/Submit button should be placed on bottom of screen as available in Gold DV screen{color}
# {color:#bf2600}ADB Failure Reason field is visible in the header of DV cases for MEL/PL/Gold{color}
# Should work on Mobile and Desktop
# Gold DV workflow should work as it is unless described otherwise

key: ML-21111
summary: 6. As a DV Ops user , I Should be able to take ownership of the Document Verification Case from the Open Pool
description: *Use case : IRO Detail Page View Screen*

*Existing* : [https://fincap.atlassian.net/browse/GLB-190|https://fincap.atlassian.net/browse/GLB-190|smart-link] 

*Proposed* : 

# On click of Loan application number hyperlink DVOps Will land of Detail Page view - where he will have “Edit” and “Take ownership” Button. _Similar to we have for IRO_ 
# If User clicks on Edit without taking ownership he should get a Warning message -  “Please take ownership then edit the document verification record”
# If User clicks on - “Take Ownership” button - below to follow

* “Do you really want to take Ownership” - With “Assign” or “Cancel” option
* If he selects CANCEL-
*# then Message popup will close and case will not be assign to anyone and remains in the same worklist DV Open Pool Worklist
* If he selects ASSIGN -
*# the case will be assign to him. His name would be stamped under field name *DVOps Checker* - ( _This is existing field in Information in Loan Application object , Dev to confirm if same can be reused. Dev also to confirm if History tracking is ON for this field_
*## Same field to be visible Inside Document verification Case on the header and Detail Page View. Refer attached image for header
*## Same field should be visible in all worklist page view [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] 
*# He will be able to access the case {color:#bf2600}on click of {color}{color:#bf2600}*EDIT* {color}{color:#bf2600}in the detail page view {color}. He can also complete document verification [https://fincap.atlassian.net/browse/ML-21114|https://fincap.atlassian.net/browse/ML-21114|smart-link] 
*# The Case will move out of DV Open Pool worklist and be visible in *My Cases  (* [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] *)*Worklist only. After ownership is taken , user should be able to access the cases in My Cases worklist and take action on it for Document Verification {color:#bf2600}by clicking on Edit in Detail Page view{color}
acceptance: # On click of Loan application number hyperlink , DVOps user Will land of Detail Page view - where he will have “Edit” and “Take ownership” Button. 
# If User clicks on Edit without taking ownership he should get a Warning message - “Please take ownership then edit the document verification record”
# If User clicks on - “Take Ownership” button - below to follow

* “Do you really want to take Ownership” - With “ASSIGN” or “Cancel” option
* If he selects CANCEL-
*# then Message popup will close and case will not be assign to anyone and case remains in the same worklist of DV Open Pool
* If he selects ASSIGN -
*# the case will be assign to him. His name would be stamped under field name *DVOps Checker* 
*## Same field to be visible Inside Document verification Case as well on the header [https://fincap.atlassian.net/browse/ML-21114|https://fincap.atlassian.net/browse/ML-21114|smart-link]  and user detail page. 
*## Same field should be visible in all worklists page view [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link]
*# He will be able to access {color:#bf2600}on click of {color}{color:#bf2600}*EDIT* {color}{color:#bf2600}in the detail page view{color}. Once case is edited, user will land on complete document verification  [https://fincap.atlassian.net/browse/ML-21114|https://fincap.atlassian.net/browse/ML-21114|smart-link]
*# The Case will move out of DV Open Pool worklist and be visible in *My Cases (* [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] *)*Worklist only {color:#bf2600}by clicking on Edit in Detail Page view{color}
*# User should be able to view the case anytime in My Cases Worklist until the case is in WIP for user
*# {color:#bf2600}Fields in the detail page view should be non-editable to the user, he should not be able to edit any fields{color}

key: ML-20985
summary: 5. As a DVOps user when I login into Community portal , I should be able to view Home button and Worklist Option
description: *Proposed* : 

Once user logs into SFDC Community portal, user should be able to view *Home* tab only

In Home tab , user should be able to see Product and Loan Applications field. In Product MEL and Rural PL would be two drop down options

In Loan applications field, Worklist options will be visible

3 Worklists to be created for DVOps user only.  Worklists will be visible at Product level. 

* DV Open Pool
* My cases
* Sales Returned cases {color:#bf2600}*( this worklist has to be created for Gold for Document Verification Workflow. Worklist should be visible to BO/BM/CSM -* {color}[https://fincap.atlassian.net/browse/GLB-199|https://fincap.atlassian.net/browse/GLB-199|smart-link]{color:#bf2600} *)*{color}

Following column headers will be shown in each worklist, {color:#bf2600}the worklist columns can be reused from HL-LAP{color}

# Loan Application ID
# {color:#bf2600}Branch{color}
# {color:#bf2600}Loan Amount{color}
# {color:#bf2600}Business Unit{color}
# Created Date
# DVOPs Checker
# {color:#bf2600}Date and Time Stamp of DV Initiation{color}

The First column will be of Loan Application Numbers. The Loan Application number should be visible as URL which user can click and navigate to the next page.. 

On click of Loan application number hyperlink DVOps user Will land of Detail Page view. [https://fincap.atlassian.net/browse/ML-21111|https://fincap.atlassian.net/browse/ML-21111|smart-link] 

Page view to DVOps user would be ( Ignore Associated Offer tab, as this will not be visible to DVOps user)

!image-20230907-041945.png|width=1203,height=400!

[~accountid:609a786fb050a7006994dc35] - _pls confirm if we can use HL-LAP view as it is , we should not do new development for the screens_
acceptance: * Once user logs into SFDC Community portal, user should be able to view *Home* tab only
* In Home tab , user should be able to see Product and Loan Applications field. In Product MEL and Rural PL would be two drop down options
* In Loan applications field, Worklist options will be visible
* 3 Worklists to be created for DVOps user only. Worklists will be visible at Product level.

DV Open Pool

My cases

Sales Returned cases ( {color:#bf2600}*this worklist should be created for Gold DV as well. Should be visible to BO/BM/CSM*{color})

Following column headers will be shown in each worklist

# Loan Application ID
# {color:#bf2600}Branch{color}
# {color:#bf2600}Loan Amount{color}
# {color:#bf2600}Business Unit{color}
# Created Date
# DVOPs Checker
# {color:#bf2600}Date and Time Stamp of DV Initiation{color}

* The First column will be of Loan Application Numbers. The Loan Application number should be visible as URL which user can click and navigate to the next page..
* On click of Loan application number hyperlink DVOps user Will land of Detail Page view.  [https://fincap.atlassian.net/browse/ML-21111|https://fincap.atlassian.net/browse/ML-21111|smart-link] 
* Case should be searchable using Global search

key: ML-20982
summary: 4. DV Open Pool Worklist
description: *Applicable :* MEL/PL ( all journey flows where we collect Non ADB documents)

*Pre requisite* : [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] 

*Current* : 

When a case is Non ADB and there are 2 possible combinations

# User will have to upload Mandatory documents on Esign screen ( [https://fincap.atlassian.net/browse/ML-13374|https://fincap.atlassian.net/browse/ML-13374|smart-link] )
# User will be able to click on Submit to FinnOne and case moves to  FinnOne and finnone submit request will be generated

*Proposed* : 

*Scenario* : When a case is Non ADB and there are 2 possible combinations

# User will have to upload Mandatory documents on Esign screen ( [https://fincap.atlassian.net/browse/ML-13374|https://fincap.atlassian.net/browse/ML-13374|smart-link] )
# User will be able to click on Submit to FinnOne and case moves to  FinnOne and finnone submit request will be generated

In both of the above combinations, following should happen

# case should not go to FinnOne , and Finnone request should not be triggered on backend
# The stage and substage of the case will update to Document Verification, Document Verification Pending _(Dev to update and confirm Stage by Screen, Previous Stage by Screen, Stage by Integration Status)_
# A toast message should appear on top of screen   “*The Loan Application is sent to DVOps for Document Verification as it is non ADB*” will be shown to the IRO user.

In above scenario, the cases will move into tray of DVOps user, When DVOps  user logs into community portal using the credentials. cases will start reflect in user’s *DV Open Pool* Worklist*(* [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] *)*  basis the Product and Workflow mapped at the user level  _Dev to confirm if Telecaller to IRO drop off queue can be reused_ [~accountid:6273c3db7dd556006afdfe28]{color:#403294}  In the Telecaller to IRO drop off queue we are adding IRO users, so if we reuse the same queues then we need to add DV OPs users also which will expose un related loans to DV ops or to IRO. We would need to create new queues which will be exclusive additions of DV Ops profile users only to the queue. {color}[~accountid:62502d37f6a2690069623f4a]{color:#403294}  FYI{color}

DV Ops user should be able to identify cases in DV Open Pool Worklist basis the Product.  MEL cases will reflect in Product MEL and corresponding DV Open Pool  worklist, same applicable for  Rural PL

*PAN India DVOps Field Logic -* Field is maintained at user level

|PAN India DVOps| |
|Checked|PAN India cases|
|Unchecked|Branch mapped at user level|

*When Checked*

PAN India cases fulfilling scenario  will be moved to DVOps queue and will reflect in DV Open Pool when DV Ops user logs into community portal basis the workflow and business unit mapped at user level

*When Unchecked*

The cases will be moved to DVOps user queue basis the Branch mapped at user level

If the DVOps user is mapped to MEL and Bank workflow and PAN India DVOps field is checked , then PAN India cases MEL- Bank cases will be visible in user’s DV Open Pool worklist

If the DVOps user is mapped to MEL and Bank workflow and PAN India DVOps field is unchecked , then MEL- Bank cases will be visible in user’s DV Open Pool worklist basis the Branch mapped at User level

This should work for all below combinations maintained at User level

|MEL|Bank|
|MEL|IFBL|
|MEL|Bank ; IFBL|
|PL|Bank|
|PL|Bank ; IFBL|
|PL|IFBL|
|MEL-PL|Bank|
|MEL-PL|IFBL|
|MEL-PL|Bank ; IFBL|

* {color:#bf2600}-If the DVOps user is incorrectly mapped to HL/LAP at user level, user should not be able to see HL/LAP cases in worklists of DVOps user-{color}
acceptance: When a case is Non ADB and there are 2 possible combinations

# User will have to upload Mandatory documents on Esign screen ( [https://fincap.atlassian.net/browse/ML-13374|https://fincap.atlassian.net/browse/ML-13374|smart-link] )
# User will be able to click on Submit to FinnOne and case moves to FinnOne and finnone submit request will be generated

In both of the above combinations, following should happen

# case should not go to FinnOne , and Finnone request should not be triggered on backend
# The stage and substage of the case will update to Document Verification, Document Verification Pending _(Dev to update and confirm Stage by Screen, Previous Stage by Screen, Stage by Integration Status)_
# A toast message should appear on top of screen “*The Loan Application is sent to DVOps for Document Verification as it is non ADB*” will be shown to the IRO user.

In above scenario, the cases will move into tray of DVOps user, When user logs into community portal using the credentials. cases will start reflect in user’s *DV Open Pool* Worklist*(* [https://fincap.atlassian.net/browse/ML-20985|https://fincap.atlassian.net/browse/ML-20985|smart-link] *)* basis the Product and Workflow mapped at the user level

DV Ops user should be able to identify cases in DV Open Pool Worklist basis the Product. MEL cases will reflect in Product MEL and corresponding DV Open Pool worklist, same applicable for Rural PL

* *PAN India DVOps Logic -* Field is maintained at user level

|PAN India DVOps| |
|Checked|PAN India cases|
|Unchecked|Branch mapped cases|

*When Checked*

PAN India cases fulfilling scenario will be moved to DVOps queue and will reflect in DV Open Pool when DV Ops user logs into community portal basis the workflow and business unit mapped at user level

*When Unchecked*

The cases will be moved to DVOps user queue basis the Branch mapped at user level

If the DVOps user is mapped to MEL and Bank workflow and PAN India DVOps field is checked , then PAN India cases MEL- Bank cases will be visible in user’s DV Open Pool worklist

If the DVOps user is mapped to MEL and Bank workflow and PAN India DVOps field is unchecked , then MEL- Bank cases will be visible in user’s DV Open Pool worklist basis the Branch mapped at User level

* This should work for all below combinations maintained at User level

|MEL|Bank|
|MEL|IFBL|
|MEL|Bank;IFBL|
|PL|Bank;IFBL|
|PL|Bank|
|PL|IFBL|
|MEL-PL|Bank|
|MEL-PL|IFBL|
|MEL-PL|Bank ; IFBL|

* All the DVOps users created should be able to view the cases in DV Open Pool Worklist as described
* {color:#bf2600}-If the DVOps user is incorrectly mapped to HL/LAP at user level, user should not be able to see HL/LAP cases in worklists of DVOps user-{color}

key: ML-20979
summary: 3. Initial Configurations
description: *Proposed*  : 

# User creation to be done as per Role- DV Operation Partner User and Profile - DVOps. For QA/UAT/Pre Prod- create 4 users , 2 for Bank and 2 for IFBL workflow. _<Dev can check possibility to create a new role and profile depending on point 4, change the role and profile name as it suits the functional need >_
# Business Unit = MEL, Rural PL and Workflow = Bank, IFBL, Set location and Branch as applicable for Lower orgs _<Dev to fill data for Location and Branch>._ 
# Domain and community link to be be created where DVOps user can login with their credentials
# Create a new field {color:#bf2600}at the user level{color} : *PAN India DVOps* . Field can be checked or unchecked
# -Should be able to add more than 100 branches at one user level ( similar to Telecaller profile when- *-PAN India DVOps-*  -is unchecked)-

Sample User from Production

!image-20230907-052037.png|width=968,height=402!

!image-20230907-052118.png|width=938,height=521!



*Assumption* : 

* For Production, list of users will be handled by L1 and Product team
* PAN India DVOps user will be checked for all users mapped in DVOps profile for MEL/ Rural PL - Zero Ops P2 Project
* If PAN India DVOps is unchecked, location and branch should be updated at DVOps user level
* MEL/PL DVOps users will be separate from HL/LAP DVOps user. Any user wont be doing both MEL/PL and HL/LAP at same point of time
acceptance: * User creation to be done as per Profile and Role
* Domain and community link to be be created where DVOps user can login with their credentials
* Field PAN India DVOps is reflecting at user level
* DVOps profile for HL/LAP should not be impacted.
* Workflow and Business Unit field should be configurable. Product/L1 should be able to change the values among possible options as per business need 
* {color:#bf2600}If user is mapped to HL/LAP/Gold/MEL/PL, then all Product mapping should be allowed at user level and same will be visible to the user when he logs in{color}
* -Should be able to add more than 100 branches at one user level ( similar to Telecaller profile when- *-PAN India DVOps-* -is unchecked)-

key: ML-20969
summary: Drop off Reason- Posidex Reject, Posidex error and Posidex Refer
description: Creation of following drop off reasons. 

* *Posidex Reject* - when the case is rejected by Posidex, Posidex will inform SFDC in DEDUPE response tag “Loan Decision” . in those LANs, drop off reason should be stamped as Posidex Reject
* *Posidex Refer* - when the case is referred by Posidex, Posidex will inform SFDC in DEDUPE response tag “Is Refer” as Y . in those LANs, drop off reason should be stamped as Posidex Reject
* *Posidex Error* - when the error is received from Posidex response, or the API is stuck in progress, drop off reason should be stamped as Posidex Error
* Drop off Reasons should get stamped in already existing fields of Drop Off Reason in Customer Flow or Tele- Caller Flow depending on DIY or Telecaller Journey respectively
acceptance: 1

key: ML-20862
summary: Min character limit for validations
description: In case user is trying to enter the Fico validation remark with less than 50 character then PD App should throw an error message “Remark is too short. Update proper justification (Min 50 character)
acceptance: In case user is trying to enter Fico validation remark with less than 50 character then PD App should throw an error message “Remark is too short. Update proper justification (Min 50 character)”.“

key: ML-20861
summary: Change in questionnaire
description:  *Questionnaire Changes:*

* Applicable for all Org 3 BU: 

*MEL / PL/HL / LAP*

* Applicable for all PD cases (App & Co-app)

* Applicable for both Bank and IFBL workflow

* Applicable for Cattle Persona only.

 

·         *Remove question “Raw Material Expenses”* from Business Expense section. No impact on any other questionnaire / validation.

 
acceptance: MEL/PL/HL/LAP users should not be able to view Raw Material Expenses question.

key: ML-20860
summary: Logic change for MEL cases
description:  *New Business Income and Business Expense logic:*

* Applicable only for Org 3 BU: 

*MEL only*

* Applicable for all MEL PD cases (App & Co-app)

* Applicable for both Bank and IFBL workflow

* Applicable for all Personas.



      *Revised Logic:*

* 

*Business Income* = Total Business Income (Rs.) - Raw Material Purchase.

* 

*Business Expense =* Salary to staff and other partners + Electricity bill expense + Other business expenses + Business Premises Rent including shop & godown (exclude *Raw Material Purchase)*

 

* Option to Refresh the Summary for PD case: Button & Disclaimer remark to be shown below “Summary” and Above “Business Income”

Remark note : “*Click the Refresh button to show updated Business Income details* ” 
acceptance: users should be able to view business income and expense as per the revised logic 

key: ML-20797
summary: 2. Rule Engine and Doc Upload section
description: *Applicable* : Gold (all journey flows)

*Current* : We have rule engine logic to check for Mandatory documents to be uploaded before FinnOne submission and document upload screen for cases in MEL-PL [https://fincap.atlassian.net/browse/ML-13486|https://fincap.atlassian.net/browse/ML-13486|smart-link] and [https://fincap.atlassian.net/browse/ML-13489|https://fincap.atlassian.net/browse/ML-13489|smart-link] . We want to extend the solution to SBD cases in case of Gold Loans

*Proposed* : 

*Rule Engine*

Refer below table for list of documents and the respective scenario when the document should be mandatory

|*Document*|*Document Type*|*Document Name*|*Scenario*|
|Physical SI|SI DIRECT DEBIT MANDATE FORM|SI DIRECT DEBIT MANDATE FORM_NON-ADB|This document should get mandatory if user has opted for Physical SI for IDFC Bank Account provided for disbursement account in Latest Bank Details object record with Type= Main Bank.|
|NACH|NACH|NACH_NON-ADB|**Condition only to work for cases which are not open ECS only**
This document should get mandatory if user has opted for Physical Mandate/E mandate process for a Non-IDFC Bank Account provided for disbursement account in Type= Main Bank.|
|Esign Documents|ESIGN DOCUMENT|ESIGN DOCUMENT_NON-ADB|If Esign is not successful|
|Estamp Documents|ESTAMP DOCUMENT|ESTAMP DOCUMENT_NON-ADB|If Estamp Status not equal to Successful/Not Eligible|



*Doc Upload screen*

On click of Submit button , existing logic to check for ADB/Non ADB work as is , if a case is ADB, case will get submitted to FinnOne as per current build

but when a case is non ADB, system will run additional logic to check mandatory documents which are to be uploaded before pushing the case to DV.

System will ask user to upload all mandatory documents in document upload screen . A doc upload screen to upload mandatory documents should appear on screen similar to built in MEL-PL BAU [https://fincap.atlassian.net/browse/ML-13489|https://fincap.atlassian.net/browse/ML-13489|smart-link] .  

!image-20220912-073803 (fdbdcb43-2ce7-41a9-a80a-c4b5430b8dda).png|width=661,height=248!



Unless all mandatory documents are not uploaded, case will not move ahead to DV screen and case will continue to remain on same screen of Esign, Esign pending. Reference toast message to be visible as “*Loan Application is Non ADB. Kindly upload mandatory documents*” when user clicks on Submit button and all mandatory documents are not uploaded

Once mandatory documents are uploaded, on click of Submit button, case will move ahead to DV screen and logics to move the case will work as per current build of Gold workflow
acceptance: # Logics should work for both Normal and Renewal journey flow. SFDC should check mandatory documents for a particular case whether it is normal or renewal flow
# Documents should become mandatory to be uploaded as per scenarios
# System is running existing checks of ADB/Non ADB on Click of Submit button on Esign/Esign Pending
# WHEN Loan is *ADB*, then- ADB Flag on Loan Application is getting checked and case is getting submitted to FinnOne as per current build
# when Loan is *Non ADB*, then- ADB Flag field on Loan Application remains unchecked 
# When the case is *Non ADB* as per  User should be able to see a section below Esign section. *This section should be similar to Document Upload screen. Reference screenshot below.* User will be shown list of document records one below other. User will be able to see below column headers. Document Type, Document Name, OSV, Uploaded Date, Is Uploaded, Upload.
 
!image-20220912-073803.png|width=661,height=248!
# Documents to be shown in same sequence as mentioned in Rule Engine table
# The DMS ID is getting stamped in backend for the uploaded document
# In document upload section-document type and name should be as mentioned in description
# The system generated documents as per existing functionality should be available on Filenet
# WHEN Loan is *Non ADB*, then- SFDC is running the mandatory document logic to identify documents which should be mandatory
# *Document Mandatory Logic-*
The document should be mandatory for the user to upload on this section based on the Rule engine .User will be shown *asterisk* for the documents which are mandatory post running the RULE ENGINE.
# Document upload screen should be same as available in UI of document upload screen on document upload stage. It should be segregated for App and Co-app as per current build on document upload stage. Functioning on UI would be same for upload , Toast Message etc. There will be only two differences a. Only mandatory documents to be shown in the new section b. OSV header to be disabled and not shown on UI as this is not valid here.
# Once user uploads document, *DMS* API will get called at backend to upload the document in FileNet against respective Doc Type. Once document is uploaded in FileNet, Document DMS ID will get populated on respective Document Record in SFDC as received in DMS API response. Functionality of DMS API to be as current build.
# System to check if all mandatory documents as per the Rule Engine on click of Submit as applicable on screen. If all mandatory documents are not uploaded, user will not be able to submit the loan to FinnOne. Reference toast message to be visible as “*Loan Application is Non ADB. Kindly upload mandatory documents*”.
# DMS Document ID should be available for each of the *mandatory* document. If document is uploaded but DMS ID is not available on Document record, show validation- "*Kindly retry Document upload.*"
# Once all the validations are met, user will be able to submit the case by clicking on SUBMIT and case will move to DV screen. If any of the validations is/are not met, user should not be allowed to submit the loan to FinnOne and toast msg should appear as *Loan Application is Non ADB. Kindly upload mandatory documents*
# Document size and type restrictions should work as per MEL/PL
# Apart from changes described, rest of the functionality of ADB/NON-ADB remains as it is
# Functionality to be tested with Mobile

key: ML-20792
summary: 1. ADB Failure Reason Field
description: *Applicable* : Gold (all journey flows)

*Current* : ADB Failure Reason on Loan Application Object captures the ADB failure reasons for a loan application in MEL/PL [https://fincap.atlassian.net/browse/ML-13483|https://fincap.atlassian.net/browse/ML-13483|smart-link] 

*Proposed* : Same field should also work for Gold . Field should be visible in Page layout to Product/Admin users

|*Sr. No.*|*Conditions*|*ADB Failure Reason*-field value to be populated with below free text if corresponding conditions are met|
|1|If Estamp Status not equal to Successful/NotEligble|Estamp Failed|
|2|If Esign is not successful|Esign Failed|
|5|If Main bank has mandate type not equal to { Digital SI/Digital Mandate or the case is Open ECS case}|Digital Mandate Failed|
|8|If Karza Match Percentage For IMPS < 65%|IMPS KARZA < 65%|

# The field should have the ability to capture multiple string values.
# SFDC should be able to store multiple values in ";" separate format.
acceptance: # To function as described
# Should work for Normal and Renewal flow both, ADB failure reason should get stamped basis the reasons of failure for that particular case, whether it is Norma or Renewal flow
# user is able to see the field ADB Failure Reason in backend on Loan Application object
# ADB failure reason to be stamped as applicable for the case
# WHEN Loan is *Non ADB*, then- the field “ADB Failure Reason” is getting stamped with all the applicable ADB failure reasons separated by ';'.
# In case of *ADB* success , there should be no reason stamping in the backend field

key: ML-20756
summary: 3. User related values
description: *Applicable* : RMEL, RPL, RHL, RLAP, {color:#bf2600}Gold{color} ( all flows where UW is applicable)

*Proposed* : 

* Refer attached files for QA and UAT. Field Values ( [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link]  ) to be updated by referring to file.
* [~accountid:614030d61238e800711c8876] to share master file for Pre Prod and Prod for MEL/PL/HL/LAP
* [~accountid:60a77e899fd9f30067e53c9b] [~accountid:62cec25f4c909d6a57ab0075] to share master file for UAT, Pre Prod and Prod
acceptance: * Field value updation should be done referring to attached files for each environment

key: ML-20753
summary: 2.1. Soft Approve/Approve - Removal of existing logics & fields and replace with New logics
description: *Applicable* : RMEL, RPL, RHL, RLAP, {color:#bf2600}Gold{color} ( all flows where UW is applicable)

*Current* : Underwriting level is maintained at user level for a UW user and Lending limit maintained in Global Master data list for a particular UW level at BU level is the CAD limit for a UW user

!image-20230829-065922.png|width=359,height=100!

*Proposed* : 

* Existing logics to read the {color:#bf2600}Underwriting level from field in snap and Lending Limit being referred from CAD Limit master {color}to be removed. SFDC should not decide the underwriting level using the existing field maintained at User level and lending limit using values maintained in the master global data lists
* Below fields should be hidden from Page layout and should not be visible to the user  

!image-20230829-065922.png|width=359,height=100!

* Underwriting Level and Lending Limit for a particular user will be decided basis the field values created in [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link] . 
* For example : If Parth Parwal user has field values for MEL Bank Underwriting Level as L1 and for Lending Limit as 100000 , then for any case where Parth Parwal is the UW and Business Unit= MEL and Workflow = Bank, Underwriting Level and Lending Limit becomes L1 and  100000 respectively. Parth Parwal should be able to approve the loan amount or approve the deviation given that he is mapped to Business Unit , Workflow , Branch and Location at user level. Case sharing logics will remain as per the current build
* {color:#bf2600}Mapping logic for deviations approval/ Approve/Soft Approve  should work as is per the current build only change would be that SFDC will refer new fields for Underwriting Level and Lending Limit instead of earlier field and values maintained at the master level.{color}
* If a value is blank in the fields ( [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link] ) corresponding to any user, user should not be able to take any action on front end given that case is shared as per case sharing logics with the UW user. For example 

# if a Lending Limit is not set for the user for a given workflow and Business unit and it is blank at User level  ,  User should not be able to “ Approve” , “ Soft Approve “ , error validation should appear on UI  ([~accountid:626240696cb53d006a6ab5a4] _Dev to confirm if Existing Validation can be used or a new validation message is needed, connect with DJO/Credit for new validation message content_)
# if Underwriting Level is not set for the user for a given workflow and Business unit and it is blank at User level ,  User should not be approve the deviation on front end, edit access will not be available to the user for Approving the deviation 
acceptance: # To function as described
# Should work for UW cases in MEL-PL-HL-LAP BUs as described
# Existing logics to read the {color:#bf2600}Underwriting level from field in snap and Lending Limit being referred from CAD Limit master ONLY {color}to be removed , Fields described to be hidden at user level in all environments. User should not be able to view the fields
# Underwriting Level and Lending Limit for a particular user will be decided basis the field values created in [https://fincap.atlassian.net/browse/ML-20741|https://fincap.atlassian.net/browse/ML-20741|smart-link] . 
# {color:#bf2600}All other logics related to DV, Verification closure, Underwriting will remain as it is , no changes expected unless described. {color}[https://fincap.atlassian.net/browse/RM-753|https://fincap.atlassian.net/browse/RM-753|smart-link] 
# {color:#bf2600}Logics will work as it is for Hold, Forward, Approve,  Reject, Cancel, Retrigger as per current build, no impact due to new functionality{color} [https://fincap.atlassian.net/browse/RM-932|https://fincap.atlassian.net/browse/RM-932|smart-link] 
# {color:#bf2600}System deviation and manual deviation logic to work as per existing build{color} [https://fincap.atlassian.net/browse/RM-933|https://fincap.atlassian.net/browse/RM-933|smart-link] 
# {color:#bf2600}Deviation with Underwriting level ‘n’ and below level ‘n’ can be actioned (approved/rejected) by Underwriter with level ‘n’ as per existing build{color}
## {color:#bf2600}For e.g. L1, L2, L3 Deviation can be approved by Underwriter with CAD Level 3, 4 & 5.{color}
## {color:#bf2600}Underwriter with CAD level 2 can approve L1, L2 Deviations and underwriter with CAD level 1 can only approve L1 Deviation.{color}
# {color:#bf2600}Bulk Approval logic will work as it is as per current build. {color}[https://fincap.atlassian.net/browse/RM-1903|https://fincap.atlassian.net/browse/RM-1903|smart-link]{color:#bf2600} and {color}[https://fincap.atlassian.net/browse/ML-9392|https://fincap.atlassian.net/browse/ML-9392|smart-link] {color:#bf2600} . Refer attached BRD in user story {color}[https://fincap.atlassian.net/browse/RM-1903|https://fincap.atlassian.net/browse/RM-1903|smart-link]{color:#bf2600}. Forward to and Recommend to Grid will work as per the BRD{color}
# {color:#bf2600}Dual deviation automation for IFBL cases will work as it is as per current build{color} [https://fincap.atlassian.net/browse/RM-1911|https://fincap.atlassian.net/browse/RM-1911|smart-link]  and [https://fincap.atlassian.net/browse/ML-5463|https://fincap.atlassian.net/browse/ML-5463|smart-link] 
# {color:#bf2600}Total Exposure related calculation will be basis lending limit maintained against the BU for that user + the exposure amount sent through Posidex/added under obligations. The summation of these should not exceed the sanction loan amount entered by the underwriter else it throws a validation message.. This is existing logic in HL/LAP-CAD is compared against total Loan Amount and Obligation amount where Financier name as “IDFC” . Should work as is.{color}
# {color:#bf2600}If a lending limit and/ or Underwriting Level is not set for the user, user should not be able to approve the deviation or approve/soft approve the UW case. Validation should appear on front end for Approve/Soft approve as described{color}
# Should work for All UW Profiles - Branch Credit Manager, Cluster Credit Manager, State Credit Manager, National Credit manager.

key: ML-20741
summary: 1. Creation of Fields at User Level and Reports
description: *Proposed* : 

* Creation of below fields at user level, Fields should be visible in Page Layout. User should be able to view the fields  when he moves to below path _(_ [~accountid:63982d8a76fb74a951422885] _Dev team can explore creating a separate section for new fields at User level with header Underwriting Level and Lending Limit, all fields can be placed in same header)_ {color:#bf2600}_A new header to be created for all new fields_{color}

!image-20230829-074314.png|width=1010,height=430!

* -Any change in values corresponding to each field should be available in Audit Trail/History (-[~accountid:63982d8a76fb74a951422885] -_Developer to confirm if this can be done or not during IA)_-
* Fields are : 

MEL Bank Underwriting Level

MEL Bank Lending Limit

MEL IFBL Underwriting Level

MEL IFBL Lending Limit

PL Bank Underwriting Level

PL Bank Lending Limit

PL IFBL Underwriting Level

PL IFBL Lending Limit

HL Bank Underwriting Level

HL Bank Lending Limit

HL IFBL Underwriting Level

HL IFBL Lending Limit

LAP Bank Underwriting Level

LAP Bank Lending Limit

LAP IFBL Underwriting Level

LAP IFBL Lending Limit

{color:#bf2600}Gold Bank Underwriting Level{color}

{color:#bf2600}Gold Bank Lending Limit{color}

{color:#bf2600}Gold IFBL Underwriting Level{color}

{color:#bf2600}Gold IFBL Lending Limit{color}



* Field type for Underwriting Level  - L1 or L2 or L3 or L4 or L5
* Field type for Lending Limit  - 100000
* New Field and its values should be allowed to extracted in a report format at user level. Report format *User Details*
* L1 team should be able to update/delete values in each field at user level using data loader for multiple users in one attempt using data loader. Data file will be maintained by Credit user in Production, file will be shared in a specific format with L1 user for updating field values at user level
acceptance: # Fields are created at user level as described
# Fields should be visible in page layout and should be visible to the user when he moves to the path described
# Any change in value for each field is getting captured in Audit trail/History with name of modifier and date of modification 
# Unique values allowed in fields, multiple values should not be allowed to be added in any field
# New Field and its values should be allowed to extracted in a report format at user level. Report format *User Details*
# L1 team should be able to update/delete values in each field at user level using data loader for multiple users in one attempt using data loader
# {color:#bf2600}BCM.CCM other frontend users will not be able to modify these fields and section should be non-editable.{color}
# {color:#bf2600}Any changes made in the user details should be visible immdiately to the frontend user in readonly mode.{color}
# {color:#bf2600}Any changes made in the user details should be visible immdiately in the report.{color}

key: ML-20668
summary: MEL Repeat- Business Name logic for Previous loan details section
description: *Applicable* : MEL Repeat

*Current* : Business Name field in Previous loan details section in Financial Tab of UW is mandatory

*Proposed* : 

Business name field to be made non-mandatory. System should not throw below validation for the field Business Name if there is no data auto-population done from base loan

!image-20230828-111445.png|width=1015,height=361!

User should be allowed to proceed ahead for cases where business name is not available in the Previous LAN
acceptance: # To function as described
# Business Name field to be made non mandatory. Field will continue to remain non-editable
# System should not throw validation for the field Business Name if there is no data auto-population done from base loan
# User should be able to process ahead and should not get blocked due to validation rule
# If business name is available in base loan, the  autopopulation logic of value in this field will continue to happen as per current build
# Rest of the functionality related to Previous loan detail tab should work as is. UW should be successfully done and case should move ahead from UW screen

key: ML-20663
summary: Application form changes - RMEL
description: *Applicable* :

All journey flows of RMEL including top up

*Proposed* : 

Add below clause in the RMEL app form in the Declaration header , Placement is shown in image. The clause will be added in space highlighted in a new paragraph

!image-20230828-103338.png|width=1233,height=228!

'The Borrower(s) hereby represents/ warrants to /covenants/ undertakes that he/she shall utilize the loan for the purpose for which it is granted and not for any improper/illegal/unlawful/speculative/capital market related activities neither for purchase of gold in any form including primary gold, gold bullion, gold jewellery, gold coins, units of Gold Exchange Traded Funds(ETF) and units of gold Mutual Funds. I/we (applicant(s)), declare that loans and advances shall not be used for purchase of gold and loans have not been granted to silver bullion dealers'.

 
acceptance: * Given journey flow is of any RMEL base or top-up flow, when application form is generated for any WIP or fresh case, then the desired changes should reflect in Application form in the mentioned location

key: ML-20432
summary: Tasks to be created for SMS and Email sent
description: *Applicable* : ALL BU ( all flows)

*Proposed* : 

# For rejection communication email have to be triggered to EMAIL id recorded using the same APIs as before: EMAIL_COMMUNICATION 
# The tasks for these are to be created as per current process with

* Task Record Type = SMS Task *for both Emails and SMS*
* And Type = Email for mails and Type = SMS for messages on mobile number.

SMS and Email Task should appear as per below reference for Rejection Communication

Email task record reference

!image-20230823-053256.png|width=1063,height=476!

SMS task record reference

!image-20230823-053340.png|width=1047,height=473!
acceptance: # Should work for ALL BU (all flows)
# For rejection communication - Email have to be triggered using the existing API : EMAIL_COMMUNICATION, mails should reach to Email ID recorded on SFDC
# For rejection communication - SMS have to be triggered using the existing solution of using SEND_TRANSACTIONAL_SMS
# As per current process, tasks should be created for the same and linked under Activity History on loan application record
# The tasks for these are to be created as per current process with

* Task Record Type = SMS Task *for both Emails and SMS*
* And Type = Email for mails and Type = SMS for messages on mobile number.

4. Tasks for EMAIL and SMS should be created  as described in the reference

key: ML-20410
summary: 2. Contents of SMS & Email
description: *Applicable* : ALL BU ( All flows)

*Proposed* : 

*SMS Content*

|Dear Sir/Ma’am,\nThank you for your interest in {#var#}{#var#}. We are unable to process your loan application {#var#}{#var#} at this stage. Kindly refer the official letter attached here: {#var#}{#var#}{#var#}\nIDFC FIRST BANK|Dear Sir/Ma’am,
Thank you for your interest in Small Ticket Loan Against Property loan. We are unable to process your loan application 0502339037 at this stage. Kindly refer the official letter attached here: [https://idfcfir.st/17sggky|https://ind01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fidfcfir.st%2F17sggky&data=05%7C01%7Crituparna%40idfcfirstbank.com%7C5ffa38f46a6342a779b208db6686ccc1%7Caacf45a2f78b4172a6efda9d32705bc1%7C0%7C0%7C638216501407158644%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=P%2BW2bbvfwhw85XKMHl3OKt%2Fvq3WQb0rbE319GHQgD50%3D&reserved=0]
IDFC FIRST BANK|

# Tiny URL to be used for generated pdf link.  _(Dev team to check this -Short url  can be placed in the meta data and use that URL in sms)_

*Email Content* 

*Subject*

!image-20230822-114956.png|width=482,height=40!



*Body*

!image-20230822-114852.png|width=50%!

Email communication would appear as below to Customer

!image-20230823-090950.png|width=1279,height=542!

URL to download the pdf should be sent as part of SMS. [https://fincap.atlassian.net/browse/ML-20397|https://fincap.atlassian.net/browse/ML-20397|smart-link] 

On click of URL, PDF should get downloaded on customer’s device
acceptance: # Should work for ALL BU ( all flows)
# SMS and Email format should be as described, existing SMS format should not go to applicant/s.
# Shortened URL should flow in SMS
# Should work for Mobile and desktop.

key: ML-20407
summary: 1. Trigger point for rejection communication to be updated
description: *Applicable* : ALL BU ( all flows)

*Current* :  [https://fincap.atlassian.net/browse/ML-13055|https://fincap.atlassian.net/browse/ML-13055|smart-link]  and [https://fincap.atlassian.net/browse/ML-11899|https://fincap.atlassian.net/browse/ML-11899|smart-link] 

*Proposed* : 

The criteria under which an SMS  is sent to applicant/s in case of below scenario

Email to be sent to applicant/s email ID as recorded in SFDC in case of below scenario

*Scenario* 

* The communication has to be sent if the Stage is updated Reject for a loan application, irrespective of sub-stage. _Developer to share the list of applicable substages BU wise for Rural when stage= Reject_



The conditions, if any, implemented as per existing solution , for BU basis stage- substage combination have to be removed for SMS and Email communication 

The SMS and email should not be sent again to the customer if the substage is updated to Rejected post Scorecard/Sales/etc. Rejected.

Rejection letter head to be stored on Attachment object in the Integration of EMAIL_COMMUNICATION
acceptance: # Should work for all BUs (all flows)
# If the stage of the loan application has been updated to Reject, an SMS and an email has to be sent to the customer.
# If the stage stays a Reject and the substage is getting updated from Scorecard/Sales/etc. Rejected to Rejected, no SMS or Email should be triggered again..
# Testing has to be done for each applicable stage-substage combination for BU where stage = Reject.
# The SMS or email has to be sent ONLY for hard rejected loan applications.
## Both Email and SMS must be sent to the customer’s for rejected loans.
## ONLY ONE SMS and ONE Email must be sent to the customer for rejected loans.
## The SMS or email has to be sent ONLY for hard rejected loan applications.
# For rejection communication - Email have to be triggered using the existing API : EMAIL_COMMUNICATION, mails should reach to Email ID recorded on SFDC
# For rejection communication - SMS have to be triggered using the existing solution of using SEND_TRANSACTIONAL_SMS
# As per current process, tasks should be created for the same and linked under Activity History on loan application record
# The tasks for these are to be created as per current process with

* Task Record Type = SMS Task *for both Emails and SMS*
* And Type = Email for mails and Type = SMS for messages on mobile number.
* LANs which are Auto rejected loans through batch execution , functionality as described should work
* Rejection letter head to be stored on Attachment object in the Integration of EMAIL_COMMUNICATION

key: ML-20404
summary: The PDF is to be sent as an attachment on email
description: *Applicable* : ALL BU ( all flows)

*Proposed :* 

# The IDFC rejection communication pdf has to be sent as an attachment over email in the email communication sent to the customer for loan rejection.
# The customer should be able to download the same on his device.
# The pdf should be available as an attachment over the task created for Email sent to the customer.
acceptance: # The IDFC rejection communication pdf has to be sent as an attachment over email in the email communication sent to the customer for loan rejection.
# The customer should be able to download the same on his device.
# The pdf should be available as an attachment over the task created for Email sent to the customer.

key: ML-20401
summary: 3. Identifiers to be introduced to identify the mails and SMS sent for a rejected loan
description: *Applicable* : ALL BU ( all flows)

*Proposed* : As a user we should be able to pull a report to identify all the SMS and EMAIL sent to customer against a loan application which has been rejected. 

_Developer to confirm if an pre existing report format can be used, otherwise Create a new report format with Loan application with Applicant and Activity History(  Please Create Report by Using Activities with Loan Applications Report Type @Nikhitha added)_

Add a field as mentioned in below snap - Loan rejection communication Field should get ticked for Task records created for SMS and Email sent to customer for rejected loans.

!image-20230821-101636.png|width=1059,height=489!

!image-20230821-101559.png|width=1043,height=479!

!image-20230821-101712.png|width=1039,height=491!
acceptance: # Should work for all BU ( all flows)
# User should be able to identify if a SMS and an Email has been sent to the customer for rejected loans and same should be allowed to pull in a form of report
# Task for both SMS and Email should also contain the field as ‘Loan Rejection Communication’ and stamping of tick should happen correctly, which can be used for reporting purpose. Stamping of Tick should not happen for other communications which are not related to Rejection

key: ML-20397
summary: 4. A rejection letter to be created in PDF form over IDFC letterhead
description: *Applicable* : ALL BU ( all journey flows)

*Proposed* : 

# A rejection letter is to be created in PDF format over IDFC letterhead. The content of the letter would be as per attached document. Font style and color to be as per the format
# The content of the letter should be kept configurable. On request of business, we should be able to modify the content with help of L1 team
# The date should reflect the date of rejection communication sent.
# The loan application ID should be the same for which communication has been sent.
# The applicant name should display the First Name+ Middle Name + Last Name of the applicant/s
# The address should display the Residential Address of the primary applicant stamped on field: Address on applicant record.
# The email should have the same value is available on Applicant record. ( {color:#bf2600}if the email is not recorded on SFDC, it will flow as blank in the letter{color})
# The product name should be the same as the Business Unit on Loan application.
# The IDFC rejection communication pdf has to be sent as an attachment over email in the email communication sent to the customer for loan rejection.
# The customer should be able to download the same on his device.
# The pdf should be available as an attachment over the task created for Email sent to the customer.

_<Parth> Unable to upload the templates in attachment, please connect with me for documents_

!image-20230823-090950.png|width=1279,height=542!
acceptance: # A rejection letter is to be created in PDF format over IDFC letterhead. The content of the letter would be as per attached document.
# The content of the letter should be kept configurable. On request of business, we should be able to modify the content with help of L1 team
# The date should reflect the date of rejection communication sent.
# The loan application ID should be the same for which communication has been sent.
# The applicant name should display the First Name+Middle Name + Last Name of the primary applicant.
# The address should display the Residential Address of the primary applicant stamped on field: Address on applicant record.
# The email should have the same value is available on Applicant record.
# The product name should be the same as the Business Unit on Loan application.
# The IDFC rejection communication pdf has to be sent as an attachment over email in the email communication sent to the customer for loan rejection.
# The customer should be able to download the same on his device.
# The pdf should be available as an attachment over the task created for Email sent to the customer.

key: ML-20345
summary: Mule changes- KARZA_EPF_ASYNC
description: nan
acceptance: 1

key: ML-20205
summary: Mule changes-FICO
description: nan
acceptance: 1

key: ML-20170
summary: 22. Email Verification status
description: *Applicable* : Rural PL

*Proposed* : 

On Screen of Loan detail entry, Add *Email Verification Status* (Row)  below Reference details section and Just between Footer options ( Next, retrigger, save as draft and cancel)  for all the applicants. Green tick and Red cross should appear next to each applicant type depending on following criteria

# Primary Applicant
# Co-applicant 1
# Co-applicant 2

*Green tick* - if isresponsereceived = true

*Red Cross* - if isresponsereceived = false or blank

Green and red cross would appear depending on the latest status of the field *is response received.* Status should sync up by any user action or logic triggered on SFDC ( Click of Save as draft, refresh of screen, loan amount update, retrigger)

!image-20230810-121644.png|width=1233,height=286!
acceptance: # Should work only for RPL- fresh and WIP cases
# Should work in retrigger scenarios
# Latest status as on Loan detail entry screen for email verification should reflect on UI
# If the page is refreshed or any logic is triggered on SFDC, SFDC should update the latest status. For example, when user LANDED on Loan detail entry, the email verification was not done by the customer, but he completed the verification while updating details on the Loan detail entry, then on click of Save as draft, retrigger or refresh or when any logic is triggered due to ROI or loan amount update, SFDC should fetch latest status of Email verification

key: ML-20158
summary: Technical CR- Batch creation to fix inactive address records
description: nan
acceptance: 1

key: ML-20134
summary: Creation of New Object to handle DOA 
description: *Applicable* : All UW Profiles - Branch Credit Manager, Cluster Credit Manager, State Credit Manager, National Credit manager.

*Proposed* : Create a new object which will be used to configure Lending limit and deviation level at user level for UW users ( Object would be similar to PL Enterprise Master)

Records will be created at user level and following fields should appear in each record created in the object

* User name ( look up value from existing user id detail)
* Business Unit
* Workflow
* Lending Limit
* Underwriting Level
* Is Active 

Once a new user is onboarded with profile-Branch Credit Manager, Cluster Credit Manager, State Credit Manager, National Credit manager, 8 new records should get created for that particular user in the object automatically. 

Each record will be created with below details

User Name, Business Unit, Workflow

Example 

Parth Parwal, MEL, Bank

Parth Parwal, MEL, IFBL

Parth Parwal, PL, Bank

Parth Parwal, PL, IFBL

Parth Parwal, HL, Bank

Parth Parwal, HL, IFBL

Parth Parwal, LAP, Bank

Parth Parwal, LAP, IFBL

L1 user should be able to update Lending limit, Underwriting Level and Is Active using import of excel file using data loader in one go. 

SFDC will allow only 1 unique record creation with below combination of values. 

*Combination* : User Name, Business Unit, Workflow

Duplicate records should not be allowed to be created. While importing records using excel file, during addition of new records or updating of existing records , duplicate records should not be allowed to inserted on SFDC.

L1 users should be able to add new records on the Object using import of excel file using data loader. All the fields in the records should get updated as per excel file- User name, Business Unit, Workflow, Lending Limit, Underwriting Level,  Is Active.

L1 users should be able to update existing records at Object using import of excel file using data loader . All the fields in the records should get updated as per excel file - User name, Business Unit, Workflow, Lending Limit,  Underwriting Level , Is Active

L1 users should be able to delete existing records at Object using import of excel file in one go. Entire Record should get deleted

Record with incorrect user name (which is not an existing user with UW Profiles Branch Credit Manager, Cluster Credit Manager, State Credit Manager, National Credit manager ) should not be allowed to be inserted in the object

Existing logics of Lending Limit and Underwriting level to be removed.  SFDC should not decide the underwriting level using the field maintained at Profile level. 

Lending Limit and Underwriting level should be derived basis the values maintained in the Object SFDC should decide Lending Limit and Underwriting level using the user name, Business Unit and Workflow maintained in the new object 

*Deviation Approval >> Deviations approval authority*

Deviation approval : User Dropdown should show all usernames mapped for the product under the respective deviation level basis the records maintained in Object level. Bank user should view list of users mapped in Bank workflow. IFBL user should view list of users mapped in IFBL workflow. If the IFBL case is recommended to Bank user , list of all Bank users should be viewable while closing the deviation.  Functionality should work as is only the difference would be list of users should be decided basis the records created at Object level

!image-20230829-072552.png|width=1275,height=375!

*Loan Amount entered at UW stage >> Decision = "Approve","Soft Approve"*

While taking Approve, Soft Approve decision, lending limit should be checked basis the values maintained in the records at Object level for User name basis the Business Unit and Workflow . Error msg should come as is 

When case is forwarded, list of users in “Forward to” should be basis the records maintained in the object level at user level for the said Business Unit and Workflow ( Functionality should work as is , only difference is logics should run basis the records maintained in object )

When case is recommended, list of users in “Recommend to”  should be basis the records maintained in the object level at user level for the said Business Unit and Workflow ( Functionality should work as is , only difference is logics should run basis the records maintained in object )

User should be able to view the underwriting level and Deviation level mapped when he logs in

!image-20230829-074314.png|width=1010,height=430!

Audit trail should be maintained for each record available in the object

A new report type should be created where all the records present in the object should get extracted in a tabular format

If Lending limit and/or Underwriting level is not maintained against the business unit and workflow for any user with Mentioned profiles,, then UW user will get a validation message “Lending Limit and Underwriting Level is not set for the user, please connect with Process Team”  and should not be able to take ‘Soft Approve’ and ‘Approve’ decision like it is available currently.

Values maintained in below fields to be made blank for all the users with profiles mentioned in lower environment and Production environment   

!image-20230829-065922.png|width=359,height=100!

*Dependency*

UAT, Pre Prod- [~accountid:5ffd47fdb66825010eed3e32] to share UW record file

QA- dummy records to be created similar to UAT

For Prod - Data file will be shared by [~accountid:5ffd47fdb66825010eed3e32] 
acceptance: # To function as described
# L1 user should be able to find out existing record using user name
# User name look up should reflect on the user to as available at user detail
# Group Exposure point to be checked. This will be applicable for Top up journeys which is currently in HL & LAP. While approving the case in SFDC, the lending limit is checked including the existing exposure of the customer which comes through Posidex. Logic should work as-is.

key: ML-20130
summary: 8. Karza_EPF_Async Request Generator and Response
description: *Proposed* : *Request Generation for Karza_EPF_Async. Sample request attached*

{
  "uans": [
    "101108075674" 
  ], >> *UAN entered by user,* [https://fincap.atlassian.net/browse/ML-19422|https://fincap.atlassian.net/browse/ML-19422|smart-link] 
  "entityId": "U74120MH2015PTC265316", >> *CIN field stamped as* [https://fincap.atlassian.net/browse/ML-19434|https://fincap.atlassian.net/browse/ML-19434|smart-link] 
  "employerName": "Karza Technologies Private Limited", >>>> *Current Employer Name or Name of Corporate ( depending on the type of journey) , Employment record object*
  "employeeName": "Swarnava Maitra", *Applicant name : First name + Middle name + Last name (Concatenated with space in between), Applicant object ( Check the mapping)*
  "mobile": "8450939766", >> *UAN Linked Mobile Number,* [https://fincap.atlassian.net/browse/ML-19422|https://fincap.atlassian.net/browse/ML-19422|smart-link] 
  -"emailId":- [-"-|mailto:%22swarnava.m@karza.in]-",- *-blank always-*
  "clientData": {
    "caseId": "0379604590", >>*SFDC LAN*
    "apiKey": "4PzjVpMB3HtTTDYd", >> *Always 4PzjVpMB3HtTTDYd*

   {color:#bf2600} "partnerId": "700128",{color} >>*Always 700128*
    "intMessageID": "a1tBk000004YInaIAG", *SFDC Int ID*
    "orgId": "18 digit sfdc org id", *18 digit sfdc org id- Rural Org . Refer below data for Org ID*
    "svcName": "Karza_EPF_Async", *Always same -KARZA_EPF_ASYNC*
    "productCode": "Rural", {color:#bf2600}*Product code Rural always*{color}
    "orgName": "QA", *Org3-QA/UAT/Preprod,* {color:#bf2600}*Open*{color}
    "mode": "Async" *,* {color:#bf2600}*always Async*{color}
  }
}

{color:#bf2600}+Org ID+{color}

{color:#bf2600}Intdev -      00DC10000008XMzMAM{color}

{color:#bf2600}RQA    -    00DBh0000000MIHMA2{color}

{color:#bf2600}UAT    -    00DC30000003rpNMAQ{color}

{color:#bf2600}Rpreprod -  00DC10000007vETMAY{color}

{color:#bf2600}Rlhotfix -  00DC30000005W2TMAU{color}

{color:#bf2600}Prod -  00D2w000002k7nQ{color}

{color:#bf2600}+Sample request below  ( Org1 Prod)+{color}

{color:#bf2600}{{color}
{color:#bf2600}  "uans": [{color}
{color:#bf2600}    "100644382425"{color}
{color:#bf2600}  ],{color}
{color:#bf2600}  "mobile": "9766682323",{color}
{color:#bf2600}  "entityID": "U73100KA2002PTC107115",{color}
{color:#bf2600}  "employerName": "IQVIA RDS INDIA PRIVATE LIMITED",{color}
{color:#bf2600}  "employeeName": "Nitin Chandrakant Patil",{color}
{color:#bf2600}  "clientData": {{color}
{color:#bf2600}    "svcName": "KARZA_EPF_ASYNC",{color}
{color:#bf2600}    "productCode": "BIL",{color}
{color:#bf2600}    "partnerId": "700128",{color}
{color:#bf2600}    "orgName": "PROD",{color}
{color:#bf2600}    "orgId": "00D28000001qOWKEA2",{color}
{color:#bf2600}    "mode": "Async",{color}
{color:#bf2600}    "intMessageId": "a32Bk000005hYwyIAE1692248646052",{color}
{color:#bf2600}    "caseId": "400407753080",{color}
{color:#bf2600}    "apiKey": "KUpWBYJdUv429u5"{color}
{color:#bf2600}  }{color}
{color:#bf2600}}{color}

+Mule will give acknowledgement response as per below mentioned format (+{color:#bf2600}+( Org1 Prod)+{color}+)+


{
"RESPONSEID": 576149219,
"ISSUCCESS": "True",
"ERROR": {
"ERRORSYSID": null,
"ERRORCODE": null,
"ERRORDESC": null
},
"RESPONSE": {
"PROCESSOR": null,
"DATA": {
"metadata": {
"status": "SUCCESS",
"message": "Karza Employment verification Details Fetched Successfully",
"version": "v1",
"time": "2023-08-17T05:04:08.467Z"
},
"resource_data": [
{
"status": 200,
"result": "Request Submitted",
"requestId": "84c875fb-943d-4a2b-bacb-31ef23672e45"
}
]
}
}
}


+Integration msg should be stamped on SFDC as mentioned below (+{color:#bf2600}+( Org1 Prod)+{color}+)+

Developer to connect with DJO for any clarifications

Reference number to be stamped as LAN number, Integration msg should be stamped in the object and should reflect when queried at LAN level

!image-20230818-045504.png|width=1147,height=577!



!image-20230818-045535.png|width=1170,height=590!



!image-20230818-045604.png|width=1218,height=427!
acceptance: 1.Request structure is created in the format described.

2. SFDC should be able to read the Mule ACK response

{color:#bf2600}3. Integration is stamped on SFDC as mentioned in description{color}

key: ML-20050
summary: 19. Toast message when email verification is not completed
description: *Applicable* : Rural PL

*Proposed* 

# If the case is stuck on QDE, on click of Next of Applicant detail entry , SFDC will check if “isresponsereceived”= false *and* email link is expired ( 8 hours, currently) , an informatory toast message should appear on the top of screen as
*Email Verification has not been completed, Click on Send Mail button to re-initiate Email Verification.* The toast message should appear for 10 seconds and disappear. Popup should only appear if case is not moved beyond FIRST FICO Call for existing primary app and co-applicants
# If a new co-applicant is added post first FICO call by retriggering the case from UW or DV and If the case is stuck on QDE, on click of Next of Applicant detail entry , SFDC will check if “isresponsereceived”= false *and* email link is expired ( 8 hours, currently) , a informatory toast message should appear on the top of screen as
*Email Verification has not been completed, Click on Send Mail button to re-initiate Email Verification.* The toast message should appear for 10 seconds and disappear. Toast msg should only appear if case is not moved beyond immediate next FICO Call for new co-applicant
# If the case is stuck on QDE, on click of Next of Applicant detail entry , SFDC will check if “isresponsereceived”= false *and* email link is active ( 8 hours, currently) , a informatory toast message should appear on the top of screen as
*Email Verification has not been completed by the Customer.* This toast msg will be informative for RO to get the email verification closed by customer. Should work for all applicant types until the case is moved beyondFIRST FICO Call, post FIRST FICO call, this pop up should not appear. If a new co-app is added post FIRST FICO call by retriggering the case from UW or DV, then popup should be visible for new co-app until immediate next FICO call is triggered.
# User should be able to read the message and take action to edit the email ID field and  Click on Send Mail button if he wants to or move forward to Next screen directly
acceptance: 

# To function as described
# Should work for all applicants whether they  are added before FIRST FICO call or added post retrigger of case from UW or DV screen
# Toast message should appear on Click of Next on Applicant detail entry screen when “isresponsereceived”= false *and* Email verification link is expired
# Toast message should appear on Click of Next on Applicant detail entry screen when “isresponsereceived”= false *and* Email verification link is active
# Toast message should appear for defined time period and user should be able to move forward with the journey if he opts to. Clicking on Send Mail should not be hard stop for the journey
# Toast message should act as informatory message to guide user to re-initiate email verification by sending mail to customer’s mail box or inform RO that email verification is not done by the customer

key: ML-20027
summary: 23. Think Analytics Data tab and Reporting O-CPV Waivers
description: A new tab should be created on UW screen with Name *Think Analytics Data* . UI/UX to be as available in SNAP

!image-20230803-085922.png|width=1189,height=460!

Tab should have subsections for each applicant separately as below. The subsections should be only visible when an applicant is satisfying criterias as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] . If none of the applicant is satisfying the criteria , the new tab should not be visible on UW screen

!image-20230803-090024.png|width=487,height=49!

Below mentioned fields to be visible at applicant level , All the Fields will be non-editable, stamping logic is as described below ( refer linked story where fields and the logic to stamp value is available) . UI/UX to be as available in SNAP above

|Field Label|Stamping logic|
|Office Email Name Score|[https://fincap.atlassian.net/browse/ML-19778|https://fincap.atlassian.net/browse/ML-19778|smart-link]|
|Office Email Domain Score|[https://fincap.atlassian.net/browse/ML-19778|https://fincap.atlassian.net/browse/ML-19778|smart-link]|
|Bureau Address Match|{color:#bf2600} create field at applicant level in employment record object, stamping blank{color}|
|Domain Match|[https://fincap.atlassian.net/browse/ML-19778|https://fincap.atlassian.net/browse/ML-19778|smart-link]|
|isResponseReceived|[https://fincap.atlassian.net/browse/ML-19144|https://fincap.atlassian.net/browse/ML-19144|smart-link]|
|domainVintage|[https://fincap.atlassian.net/browse/ML-19778|https://fincap.atlassian.net/browse/ML-19778|smart-link]|
|Is Unique|[https://fincap.atlassian.net/browse/ML-19781|https://fincap.atlassian.net/browse/ML-19781|smart-link]{color:#bf2600} {color}|
|Cur_Emp_nameConfidence|[https://fincap.atlassian.net/browse/ML-19781|https://fincap.atlassian.net/browse/ML-19781|smart-link]{color:#bf2600} {color}|
|epfHistory|[https://fincap.atlassian.net/browse/ML-19781|https://fincap.atlassian.net/browse/ML-19781|smart-link]{color:#bf2600} {color}|
|Cur_Emp_isNameExact|[https://fincap.atlassian.net/browse/ML-19781|https://fincap.atlassian.net/browse/ML-19781|smart-link]{color:#bf2600} {color}|
|Cur_Emp_isEmployed|[https://fincap.atlassian.net/browse/ML-19781|https://fincap.atlassian.net/browse/ML-19781|smart-link]{color:#bf2600} {color}|
|Cur_Emp_isNameUnique|[https://fincap.atlassian.net/browse/ML-19781|https://fincap.atlassian.net/browse/ML-19781|smart-link]{color:#bf2600} {color}|
|Cur_Emp_isRecent|[https://fincap.atlassian.net/browse/ML-19781|https://fincap.atlassian.net/browse/ML-19781|smart-link]{color:#bf2600} {color}|
|Cur_Emp_emplrScore|[https://fincap.atlassian.net/browse/ML-19781|https://fincap.atlassian.net/browse/ML-19781|smart-link]{color:#bf2600} {color}|
|OHP Required|{color:#bf2600}create field at applicant level in employment record object, stamping blank{color}|
|Is Office CPV Waived Off|[https://fincap.atlassian.net/browse/ML-19784|https://fincap.atlassian.net/browse/ML-19784|smart-link]|
|Office CPV waived|[https://fincap.atlassian.net/browse/ML-19784|https://fincap.atlassian.net/browse/ML-19784|smart-link]|
|EPFO Rule Failure|{color:#bf2600}create field at applicant level in employment record object, stamping blank{color}|

Official Email ID, Enter UAN and Enter UAN Linked Mobile number should be visible at UW screen in the Communication details (Official Email ID) and Employment details (Enter UAN and Enter UAN Linked Mobile number) in the Applicant tab. Fields will be non-editable as other fields in the same tab

All the fields mentioned in the above table should be visible in Existing Report *Loan Application with Applicant and Employment Det.* Report should show entries for each applicant in the LAN. Report should be accessible to Product/Credit Users
acceptance: # New tab and fields should be visible to UW in all levels. Fields should be non-editable. If the case is forwarded, recommended, tab should be visible to approving user
# Entire tab fields should be visible in Loan application with applicant and employment details
# If none of the applicant is eligible for O-CPV waivers, the new tab will not appear in UW 
# If one applicant is eligible and other one is not, then tab should reflect and only eligible applicant details should be visible in the tab
# Official Email ID, Enter UAN and Enter UAN Linked Mobile number should be visible at UW screen in the Communication details and Employment details in the Applicant tab. Fields will be non-editable as other fields in the same tab
# Report is generated with details of each applicant . All the fields mentioned in the table are reflective in the report. If the fields are stamped blank, it will appear as blank in the report. Credit and Product users should be able to access the report
# Mobile Compatibility to be tested for the build [https://fincap.atlassian.net/browse/ML-15206|https://fincap.atlassian.net/browse/ML-15206|smart-link] , Entire build should be supported on Desktop and Mobile views. Page view Layout should not be distorted for any user

key: ML-19908
summary: 12. New Co-applicant handling 
description: *Business case :* When a new co-applicant/s is added after the case is retriggered from UW or DV, Office CPV Waivers logic will work only for new co-applicant/s

*Current* :  Post FIRST FICO call (post loan detail entry)- Send Mail button is disabled

*Proposed* : 

Below fields will be editable/enabled *only* for a new co-applicant/s if co-applicant/s is added after the case is retriggered from DV or UW screen

Send Mail 

Official Mail ID
acceptance: To function as described

For new co-applicant/s added after First FICO Call, Send Mail Button should be disabled in below scenarios

# Official EMAIL Id and Send Mail button should be enabled and disabled as mentioned in [https://fincap.atlassian.net/browse/ML-19144|https://fincap.atlassian.net/browse/ML-19144|smart-link]  and [https://fincap.atlassian.net/browse/ML-19585|https://fincap.atlassian.net/browse/ML-19585|smart-link] 
# Send Mail should be disabled
When valid Email ID is not entered by the user
When *“isResponseReceived”* is true.
Post immediate subsequent FICO call where new co-applicant details are passed (post loan detail entry) , EMAIL ID field will become non-editable, Send MAIL button will remain disabled
# Button should be disabled - when *“isResponseReceived”* is false
# Send Button should be enabled -when a valid email id is entered by the the user on front end.

[https://fincap.atlassian.net/browse/ML-19144|https://fincap.atlassian.net/browse/ML-19144|smart-link] and [https://fincap.atlassian.net/browse/ML-19332|https://fincap.atlassian.net/browse/ML-19332|smart-link] should work for new co-applicants added post FIRST FICO call

[https://fincap.atlassian.net/browse/ML-19585|https://fincap.atlassian.net/browse/ML-19585|smart-link] should work for new co-applicants added post FIRST FICO call

key: ML-19905
summary: Submit API to be used for submission of case
description: While submitting a case submit API to be triggered. On submit, the details to flow to SFDC
acceptance: User should be able to successfully submit the cases.

key: ML-19902
summary: Case list API to be used to fetch cases
description: Case list API to be utilized for fetching the cases in PD APP. This trigger to happen once the user has logged in the PD APP. 
acceptance: User should be able to view the cases assigned to them.

key: ML-19899
summary: Questionnaire to be added in Result Tab
description: Result tab to contain data related to Reference and PD status. Refer the questionnaire for details
acceptance: User should be able to fill reference and status questions.

key: ML-19873
summary: Change of Fico Tag
description: Scope: Rural HL, LAP and MEL

This is applicable for Garage persona only.

1.Replace the Fico Tag visitedVehicle from 'No of vehicles observed during the visit (WIP units)' to 'Service area for Vehicles ( no of vehicles)'

2. *For Textile Persona:* Correct the "fieldName" from "typeOfManfacturing to “typeOfManufacturing”
acceptance: User should be able to view 'Service area for Vehicles ( no of vehicles)' for the fico tag visited vehicle .

User should be able to see the correct spelling for Manufacturing in the "fieldName" “typeOfManufacturing”

key: ML-19870
summary: 20. FICO Request structure- Part 2
description: *Proposed :*

If the criteria 1 and 2 is satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] , following array structure with mentioned tags will flow in CDRULE_SPLIT for each applicant, co-applicant {color:#bf2600}when stage ID= DDE{color}

Path *application.applicants.employmentDetails.epfo*

"epfo": {
  "uanNameMatch": false, *result.uan[UAN sent in request].employer.uannamematch*
  "nameConfidence": "",*result.uan[UAN sent in request].employer.nameConfidence*
  "isUnique": false, *Request > result*>*summary -> nameLookup -> isUnique*
  "isRecent": false, *result.uan[UAN sent in request].employer.isRecent*
  "isNameUnique": false, *result.uan[UAN sent in request].employer.isNameUnique*
  "isNameExact": false, *result.uan[UAN sent in request].employer.isNameexact*
  "isEmployed": false, *result.uan[UAN sent in request].employer.isEmployed*
  "epfMatches": [
    {
      "name": "GAYATRI S", *Logic to pass below tag from Karza Inbound API Request > result > nameLookUp ->matches >name*
      "epfHistory": "JUL-23:NA;JUN-23:true;MAY-23:true",  *Logic to pass below tag from Karza Inbound API Request > result > nameLookUp ->matches>epfHistory [PULL last three months and concatenate with semicolon separated] - (Ex:JUN-20:true;JUL-20:true;May-20:false)*
      "count": "1", *number 1 if mapped from 1st record,  number 2 if mapped from 2nd record (Incremental order for each record) Request > result > nameLookUp ->matches* 
      "confidence": "1.0" *Logic to pass below tag from Karza Inbound API Request > result > nameLookUp ->matches > confidence*
    },
    {
      "name": "GAYATRI S",
      "epfHistory": "JUL-23:NA;JUN-23:NA;MAY-23:true",
      "count": "2",
      "confidence": "1.0"
    },
    {
      "name": "GAYATRI S",
      "epfHistory": "JUL-23:NA;JUN-23:NA;MAY-23:true",
      "count": "3",
      "confidence": "1.0"
    },
    {
      "name": "S.GAYATRI",
      "epfHistory": "JUL-23:NA;JUN-23:true;MAY-23:true",
      "count": "4",
      "confidence": "0.9416666666666667"
    },
    {
      "name": "GAYATRI SAHU",
      "epfHistory": "JUL-23:NA;JUN-23:NA;MAY-23:true",
      "count": "5",
      "confidence": "0.8055555555555557"
    },
    {
      "name": "GAYATRI SUBRAMANIAN",
      "epfHistory": "JUL-23:NA;JUN-23:NA;MAY-23:true",
      "count": "6",
      "confidence": "0.8055555555555557"
    },
    {
      "name": "SIDDABATHULA GAYATRI",
      "epfHistory": "JUL-23:NA;JUN-23:true;MAY-23:true",
      "count": "7",
      "confidence": "0.7968055555555555"
    },
    {
      "name": "SOMA GAYATRI",
      "epfHistory": "JUL-23:NA;JUN-23:true;MAY-23:NA",
      "count": "8",
      "confidence": "0.7059027777777779"
    },
    {
      "name": "GAYATRI S WAGDARIKAR",
      "epfHistory": "JUL-23:NA;JUN-23:true;MAY-23:true",
      "count": "9",
      "confidence": "0.6564814814814814"
    } 
  ],
  "epfHistory": "JUL-23:NA;JUN-23:true;MAY-23:true", *same as in above tag sent from Count 1 record* 
  "emplrScore": "" *Request > result*>*summary -> uanLookup -> matchScore*
},

if matchscore=0 (*Request > result*>*summary -> uanLookup -> matchScore*) or current employer name is null (in this path *result.summary.uanLookup.currentEmployer* ) received in KARZA Inbound API pass below tags always, (other 3 tags mentioned above will flow as per the logic : epfMatches,epfHistory,emplrScore

  "uanNameMatch": false, 
  "nameConfidence": "",
  "isUnique": false,
  "isRecent": false,
  "isNameUnique": false,
  "isNameExact": false,
  "isEmployed": false,

If any tag or value is not received from KARZA Inbound API, the corresponding tag in FICO should be passed as blank. Null handling to be done

{color:#bf2600}If KARZA_EPF_AYSNC is not called for any applicant, following array structure will flow in CDRULE_SPLIT for that particular applicant{color}

OR

{color:#bf2600}If there is a technical error from Outbound and Inbound call in KARZA_EPF_ASYNC for any applicant{color}

{color:#bf2600} "epfo" : {{color}
{color:#bf2600} "uanNameMatch" : false,{color}
{color:#bf2600} "nameConfidence" : "",{color}
{color:#bf2600} "isUnique" : false,{color}
{color:#bf2600} "isRecent" : false,{color}
{color:#bf2600} "isNameUnique" : false,{color}
{color:#bf2600} "isNameExact" : false,{color}
{color:#bf2600} "isEmployed" : false,{color}
{color:#bf2600} "epfMatches" : [ ],{color}
{color:#bf2600} "epfHistory" : "",{color}
{color:#bf2600} "emplrScore" : ""{color}
{color:#bf2600} },{color}
acceptance: * To function as described
* CDRULE_SPLIT flows with mentioned array and tags when applicant (app, co-app is eligible for Office CPV waivers as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] {color:#bf2600}when stage ID= DDE, the details should not pass in Highmark call{color}
* If the criteria 1 and 2 is *NOT* satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] for any applicant ,  OR  {color:#bf2600}If KARZA_EPF_AYSNC is not called for any applicant, following array structure will flow in CDRULE_SPLIT for that particular applicant{color}
OR
{color:#bf2600}If there is a technical error from Outbound and Inbound call in KARZA_EPF_ASYNC for any applicant following array structure will flow in CDRULE_SPLIT for that particular applicant{color}
{color:#bf2600}"epfo" : {{color}
{color:#bf2600} "uanNameMatch" : false,{color}
{color:#bf2600} "nameConfidence" : "",{color}
{color:#bf2600} "isUnique" : false,{color}
{color:#bf2600} "isRecent" : false,{color}
{color:#bf2600} "isNameUnique" : false,{color}
{color:#bf2600} "isNameExact" : false,{color}
{color:#bf2600} "isEmployed" : false,{color}
{color:#bf2600} "epfMatches" : [ ],{color}
{color:#bf2600} "epfHistory" : "",{color}
{color:#bf2600} "emplrScore" : ""{color}
{color:#bf2600} },{color}

* If a new co-applicant is added before first fico call or post first FICO call and an existing co-app is deleted , then SFDC should not pass the array and the tags for deleted co-applicant and should pass array and tags for new co-applicant if it is meeting [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link]
* Mappings should flow as described
* Email info and EPFO paths mentioned in this user story and previous user story [https://fincap.atlassian.net/browse/ML-19833|https://fincap.atlassian.net/browse/ML-19833|smart-link] should flow in the same request structure of CDRULE_SPLIT wherever BOTH APIs are applicable
* Only EMAIL Info mentioned in  [https://fincap.atlassian.net/browse/ML-19833|https://fincap.atlassian.net/browse/ML-19833|smart-link] should flow in the request structure of CDRULE_SPLIT wherever only TRUST SCORE is responded and conditions to not call Karza_EPF_Async are met
* If multiple records received in EPF matches, all those records should flow to FICO as described

key: ML-19833
summary: 17. FICO Request structure- Part 1
description: *Proposed :* 

If the criteria 1 and 2 is satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] , following array structure with mentioned tags will flow in CDRULE_SPLIT for each applicant, co-applicant {color:#bf2600}when stage ID= DDE{color}

|*Path - application.applicants.emailInfo*|
|"emailInfo": [
          {
            "softBounce": false, *always false* 
            "officialEmailID": “[rahul.sharma@suez.com|mailto:rahul.sharma@suez.com]”, *official Email ID captured at applicant level*
            "officeEmailNameScore": "1.000", *as stored in Office Email Name Score* [https://fincap.atlassian.net/browse/ML-19778|https://fincap.atlassian.net/browse/ML-19778|smart-link] 
            "officeEmailDomainScore": "0.6477565357770241", *as stored in Office Email Domain Score* [https://fincap.atlassian.net/browse/ML-19778|https://fincap.atlassian.net/browse/ML-19778|smart-link] 
            "isResponseReceived": false, *as stored at applicant level in “isresponsereceived” field*
            "isEmailDomainChecked": true, *as stored in Domain Match* [https://fincap.atlassian.net/browse/ML-19778|https://fincap.atlassian.net/browse/ML-19778|smart-link] 
            "hardBounce": false, *always false* 
            "emailType": "", *always blank*
            "emailID": “[rahulsharma2585@gmail.com|mailto:rahulsharma2585@gmail.com]”, *official Email ID captured at applicant level*
            "domainVintage": "23.50", *as stored in Domain Vintage* [https://fincap.atlassian.net/browse/ML-19778|https://fincap.atlassian.net/browse/ML-19778|smart-link] 
            "dateSent": "2023-05-05 16:34:31" , *time of triggering FICO Call in this format* 
          }|
acceptance: # CDRULE_SPLIT flows with mentioned array and tags when applicant (app, co-app is eligible for Office CPV waivers as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] {color:#bf2600}when stage ID= DDE, the details should not pass in Highmark call{color}
# If the criteria 1 and 2 is *NOT* satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] for any applicant , following array structure will flow in CDRULE_SPLIT for that particular applicant
"emailInfo": [ ]
# If a new co-applicant is added before first fico call or post first FICO call and an existing co-app is deleted , then SFDC should not pass the array and the tags for deleted co-applicant and should pass array and tags for new co-applicant if it is meeting [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] 

key: ML-19784
summary: 21. FICO Response and related fields
description: *Proposed* : SFDC will read below arrays to check for Office CPV verification response from FICO when case is pushed for Eligiblity call ( Eligibility, Eligibility pending)

CDRule Response:

"fiType": "Office_CPV_Verification",
            "isInitiated": false,  
            "isWaived": false,
            "fiDecision": null,
            "isRequired": false, - *Fico to send as false* *_If Office CPV Waived_*
            "tobeInitiated": false, - *Fico to send as false* *_If Office CPV Waived_* 

Create a new field at each applicant level {color:#bf2600}in the employment record object {color}*Is Office CPV Waived Off*- Tick if waiver received from FICO.  blank if not waived off as soon as receive response from FICO

*CDRULE SPLIT RESPONSE*

Create a new path RESPONSE.DATA.response.application.applicants.applicantDecision*.outputMetaData .* Below tags will flow in the path from FICO . SFDC should be able to consume below arrays and tags

Create a new field *Office CPV waived* at each applicant level {color:#bf2600}in the employment record object {color} and stamp the value received in *field value* as mentioned below as soon as receive response from FICO

{
        "fieldName": "OFFICE CPV Waived ",
        "fieldValue": "EPFO Waived",
        "errormessage": null
      },



  {
        "fieldName": "OFFICE CPV Waived ",
        "fieldValue": "Email Verified",
        "errormessage": null
      },

If mulitple values of field value are received in FICO Response such as EPFO Waived, Email Verified , OHP Waiver  , then store value in this format 

*Field value 1 ; Field Value 2*

*Field value 1 ; Field Value 2* ; *Field Value 3*
acceptance: # Should work for all PL schemes
# When the office CPV Waiver is received from FICO, SFDC should be able to read the response. Should work for all applicants if the waiver is received
# Fields should be created as described and stamping should happen appropriately
# Office CPV verifications should not be triggered on SFDC if the waiver is received from FICO, and backend field stamping should happen appropriately. {color:#bf2600}Underwriting should not initiate verifications where Office CPV waiver is received for any applicable applicant. Same should reflect in reports and documents as per current functionality{color}
# {color:#bf2600}If the waiver is received already, SFDC should not trigger a verification case when the case is retriggered or in any other possible scenario{color}
# {color:#bf2600}If the waiver is not received in Eligibility, FICO should not trigger Office CPV and SFDC should not initiate a verification case when the case is retriggered or in any other possible scenario{color}

key: ML-19781
summary: 19. KARZA EPF Async Inbound API and related fields
description: *Current :* [https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link] 

*Proposed* : 

Inbound API will hit SFDC with details received from KARZA after Mule gives a acknowledgement as described in [https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link]  . SVC Name to be finalized. 

Response received will be stamped in Request field of Integration object (as shown below)SFDC should be able to stamp the integration msg as we do for other APIs. _Developer to connect with DJO for any clarifications_

Sample Response attached from Org 1

Reference number to be stamped as LAN number, Integration msg should be stamped in the object and should reflect when queried at LAN level

!image-20230818-055852.png|width=1223,height=539!

!image-20230818-055931.png|width=987,height=339!

Creation of below fields at each applicant level in employment details object. Fields should be visible in layout. Field stamping logic will be basis the response received 

Given that SFDC has received error response for KARZA_EPF_ASYNC Inbound API  then fields will remain blank at back end

Given that SFDC has not received response for KARZA_EPF_ASYNC Inbound API until the spinner is loading as mentioned in [https://fincap.atlassian.net/browse/ML-19563|https://fincap.atlassian.net/browse/ML-19563|smart-link]  or Response is received but the BELOW tags are not present then the corresponding fields will remain blank at back end

Given that SFDC has not triggered KARZA_EPF_ASYNC then fields will remain blank at back end

||*Field*||*Inbound API Path*||
|Is Unique|*Request > result>summary -> nameLookup -> isUnique*|
|Cur_Emp_nameConfidence|*Stamp result.uan[UAN sent in request].employer.nameConfidence if result.uan[UAN sent in request]].employer[Record].name= Current Employer Name else Blank stamping*|
|epfHistory|*result > nameLookUp ->matches>epfHistory [PULL last three months and concatenate with semicolon separated] - (Ex:JUN-20:true;JUL-20:true;May-20:false)*|
|Cur_Emp_isNameExact|*result.uan[UAN sent in request].employer.isNameexact if result.uan[UAN sent in request]].employer[Record].name= Current Employer Name else Blank stamping*|
|Cur_Emp_isEmployed|*result.uan[UAN sent in request].employer.isEmployed if result.uan[UAN sent in request]].employer[Record].name= Current Employer Name else Blank stamping*|
|Cur_Emp_isNameUnique|*result.uan[UAN sent in request].employer.isNameUnique if result.uan[UAN sent in request]].employer[Record].name= Current Employer Name else Blank stamping*|
|Cur_Emp_isRecent|*result.uan[UAN sent in request].employer.isRecent if result.uan[UAN sent in request]].employer[Record].name= Current Employer Name else Blank stamping*|
|Cur_Emp_emplrScore|*Request > result*>*summary -> uanLookup -> matchScore if result.uan[UAN sent in request]].employer[Record].name= Current Employer Name else Blank stamping*|
|Current Employer|*result.summary.uanLookup.currentEmployer , if Null received then stamp blank and corresponding tags mentioned above will be blank*|
acceptance: # To function as described
# Inbound API hits SFDC and stamping happens as described
# Reference number is stamped as LAN in Integration object
# SVC of Inbound API is visible on global search of LAN
# Fields are created at each applicant level in employment detail object
# Fields are storing value from Inbound API as described
# Fields are blank when Inbound API returns an error response or no response
# Fields are blank when KARZA_EPF_ASYNC is not triggered for the case
# Fields are visible in page layout

key: ML-19778
summary: 16. Trust Score Response and related fields
description: *Current* : Trust score ([https://fincap.atlassian.net/browse/ML-18712|https://fincap.atlassian.net/browse/ML-18712|smart-link] ) is triggered as per logic [https://fincap.atlassian.net/browse/ML-19473|https://fincap.atlassian.net/browse/ML-19473|smart-link] 

*Proposed* : 

Creation of below fields at each applicant level in employment details object. Fields should be visible in layout.

* Office Email Name Score
* Office Email Domain Score
* Domain Match
* Domain Vintage

Given that SFDC has received error response for TRUST_SCORE then fields will remain blank at back end

Given that SFDC has not received response for TRUST_SCORE then fields will remain blank at back end

Given that SFDC has not triggered TRUST_SCORE then fields will remain blank at back end

Sample TRUST_SCORE response :

Values in each field will be stamped as below logic. -Stamping of tag values to be done at max 2 digits from decimal value ( for example 0.06086490981975056 , stamp it as 0.06)- {color:#bf2600}Values received will be stored as is{color}

||*Field*||*Trust Score Response Path*||
|* Office Email Name Score|trust_score RESPONSE -> DATA -> trustScoreRes -> tsDomainCheckRes -> result -> additionalInfo -> individual_match[]->score|
|* Office Email Domain Score|trust_score RESPONSE -> DATA -> trustScoreRes -> tsDomainCheckRes -> result -> additionalInfo -> whois_info -> whois_org_name[]->score
{color:#bf2600}There may be multiple tags for score in the API path, stamp the value which is highest{color}|
|* Domain Match|object►RESPONSE►DATA►trustScoreRes►tsDomainCheckRes►result►additional_info►company_info►org_domain_match[]->match
{color:#bf2600}There may be multiple tags for match in the API path, stamp the value received in first tag{color}|
|* Domain Vintage|trust_score RESPONSE -> DATA -> trustScoreRes -> tsDomainCheckRes -> result -> additionalInfo -> whois_info -> age_year|
acceptance: # Fields are created at each applicant level in employment detail object
# Fields are storing value from TRUST SCORE RESPONSE as described
# Fields are blank when trust score returns an error response or no response
# Fields are blank when trust score is not triggered for the case
# Fields are visible in page layout

key: ML-19769
summary: Technical Tweaks in logics of Tele-caller and DIY journey to handle dropped off cases
description: *Business Case* :  Cases dropped off due to inactivity are getting stuck in IRO tray . This issue has been raised on Production org. Following are the scenarios

# After Telecaller dropped off due to Inactivity at ‘Telecaller Journey Stage’ - Confirm Details, Loans getting stuck at Disbursement Details Pending and User getting error on UI -" Repayment Day and Repayment Mode not captured. Please add these details."
# -If the loan Application drops off due to Inactivity at Stage - Sanction, Sub stage-Disbursement Details Pending , Stage by Integration Status -Fico Insurance completed. When IRO takes Ownership spinner keeps on Loading . This is due to Open Ecs API is getting called first and then followed by CBS_Search Completed.-

*Current*  : 

# As in prod after telecaller loans get dropped at Confirm Details, “verification completed” is not getting checked, for which user getting error on Ui at Disbursement Details Pending " Repayment Day and Repayment Mode not captured. Please add these details.".
# -When IRO takes Ownership spinner keeps on Loading.-

*Proposed* 

# Change required is to check “Verification Completed” checkbox for CJ and telecaller journey in the mentioned scenario
# -Now the fix is to call the CBS_Search Completed first and then after Open Ecs API-
acceptance: 1.After Telecaller/ CJ loans dropped off at ‘Telecaller Journey Stage’ - Confirm Details, and logged in by IRO

2. At Sanction-Disbursement Details Pending, error should not come on UI. “Verification Completed” should get checked at backend.

-3. APIs should be called in mentioned sequence and Spinner should not load when the IRO takes the ownership-

3. Applicable changes should not impact any workflow of MEL apart from mentioned workflows in description

key: ML-19649
summary: SMS Template change
description: *Applicable*: Telecaller Journey

*Proposed* : 

Change in SMS Template- Currently we have a format , now we want to use the revised format

*Assumption* : Template is whitelisted 

*New template.* - Hi, your IDFC FIRST Bank MEL Plus Loan Application *loan_application__c* is under process. Click *<ShortURL__c>* to view loan documents and submit application.
acceptance: # When Case is moved from Telecaller Journey to Customer for further process then , SMS format should be sent as described
# Older template should not be sent to Customer 

key: ML-19642
summary: PL - Loan tenure extend to 54 months and 60 months
description: *Business Case* : With recent RPL policy updates, RPL can be extended for loan applications with tenure options upto 60 months, i.e. addition ’54 month’ & ‘60 month’ tenure options (over the existing 12m-48m range).

*Applicable* to schemes mentioned below

*Assumption* : Tenure options will remain same for Insurances offered in the schemes

*Proposed* : 

Tenure options to be included : 54, 60 in scheme master

|SCHME_DESC|SCHEMEID|
|RURAL-RPL BANK|71745|
|RURAL-RPL IFBL|71744|
|PL ENTERPRISE SCHEME|70224|
|PL ENTERPRISE IFBL|75301|
|PL REPEAT_BANK|71205|
|PL REPEAT_IFBL|71206|
|PL PRIME_REPEAT|75746|
|PL PRIME IFBL_REPEAT|75747|
|PL ENTERPRISE_REPEAT|75748|
|PL ENTERPRISE IFBL_REPEAT|75749|
acceptance: # Schemes are updated with tenures 
# Tenures are visible in the journeys created in mentioned schemes ( At Insurance as well)
# Documents are updated with the correct tenure when opted- 54, 60
# SFDC stores the updated tenure when 54, 60 is opted and passes the correct tenure to all integrations  as per current build
# E2E testing to be completed and loan should be disbursed in FinnOne systematically

key: ML-19613
summary: Finance Tab 
description: Income, Operational Timings, Other Income, House hold, Obligation, Assets questions to be visible in Finance Tab for Salaried Government and Private cases. Refer the sheet attached for Questionnaire
acceptance: Users should be able to view the  questions for Salaried Government and private

key: ML-19603
summary: Applicant Tab
description: Loan Details, Applicant details/Co applicant details to auto populate from SFDC for Salaried Private and Salaried Government.

Refer the sheet attached for Questionnaire
acceptance: Salaried Private and Government PL users should be able to view the Questionnaire during PD

key: ML-19591
summary: Updation of "Insurance Company code" for PMSBY product
description: *Configuration change*

Please update the Insurance company code ID for PMSBY scheme in Product Object

Current Code is 14, Replace it to 32 in UAT/Preprod

 {color:#bf2600}For Prod , code is 26{color}
acceptance: Updated Insurance company code should flow in FinnOne submit request when SBY insurance is opted

key: ML-19585
summary: 13. Logics related to SendMail button and "isresponsereceived" field 
description: *Applicable* for all applicants whether added before FIRST FICO call or post FIRST FICO Call

*Current* : [https://fincap.atlassian.net/browse/ML-19144|https://fincap.atlassian.net/browse/ML-19144|smart-link] 

* Isresponsereceived= false when email is sent to Customer’s mail from SFDC
* SendMail button is not re-enabled for the user if email verification link in first or any attempt has been expired

*Proposed* : 

* Isresponsereceived= false when first email is sent to customer from SFDC until the time verification of email is done by the customer by clicking the link
* Official Email ID field should become non editable when email is sent to customer from SFDC until the time verification of email is done by the customer by clicking the link

SEND MAIL Button and Official Email ID field should be enabled when Email has been sent to customer from SFDC and time limit (( TIME LIMIT : 8 hours))  is exceeded to verify the email . This should work in following scenarios

# if the case is not moved beyond FIRST FICO Call ( for primary applicant and co-applicants) 
# This should also work for the new co-applicant added after retriggering the case from UW or DV  and case is not moved beyond immediate subsequent FICO call
acceptance: # To function as described
# Should work for all applicants whether they  are added before FIRST FICO call or added post retrigger of case from UW or DV screen
# isresponsereceived=false should happen from first time mail is sent to the customer until the email verification is finally completed by the customer (isresponsereceived=true). Should work for any number of email verification links sent to the customer
# Send Email button and Official EMAIL Id field to be enabled when “isresponsereceived”= false *and* Email verification link is expired
# Send Email button and Official EMAIL Id field  should be always enabled if the case is retriggered from DDE or edited from Co-applicant detail entry screen *only* when “isresponsereceived”= false *and* Email verification link is expired
# Send Email button and Official EMAIL Id field  should be always disabled if the case is retriggered from DDE or edited from Co-applicant detail entry screen *only* when “isresponsereceived”= false *and* Email verification link is active
# Send Email button and Official EMAIL Id field should be disabled when “isresponsereceived”= false *and* Email verification link is still active
# RO should not be able to enter new email ID in the field until the email verification is in progress with the email ID entered already and recorded on SFDC 
# Other conditions mentioned in [https://fincap.atlassian.net/browse/ML-19144|https://fincap.atlassian.net/browse/ML-19144|smart-link] should run as developed

key: ML-19579
summary: 23. Fields visibility and Reports
description: New fields on UW screen to be stamped in the report- Loan applicaiton with applicant and employment details
acceptance: 1

key: ML-19567
summary: FICO Validations of Bank Scheme shown for IFBL case.
description: FICO Validations of Bank Scheme shown for IFBL case for each Persona trigger. Duplicate validations triggered for IFBL cases.

Only IFBL validations to be shown for IFBL cases under Validations section along with mandatory comments free-text free.

This is applicable for both Rural HL and Rural LAP.

This is applicable for only Rural IFBL PD Cases.

Only IFBL validation for above cases to be captured and stored under Case object >PD Fico Validation Responses for reporting purpose.
acceptance: IFBL users should be able to view IFBL validations only

key: ML-19563
summary: 18. Logic to trigger Karza_EPF_Async API
description: *Applicable* : For Fresh cases

*Current* :  [https://fincap.atlassian.net/browse/ML-18522|https://fincap.atlassian.net/browse/ML-18522|smart-link] 

*Proposed* : 

When the Criteria 1 and 2  is satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] for a case, Kazra EPF ( [https://fincap.atlassian.net/browse/ML-18522|https://fincap.atlassian.net/browse/ML-18522|smart-link]  )will be triggered at each applicant level 

*When* :. After Trust score is called and responded with success ,  KARZA_EPF_ASYNC will be called on same screen of Loan detail entry only when below conditions are {color:#bf2600}*not*{color} satisfied

{color:#bf2600}*If trust score is called, and responded with success, conditions mentioned are met,  KARZA_EPF_ASYNC call will be skipped and CDRULE SPLIT will be called*{color}

After Trust score is called and responded with error or not responded and stuck in Progress, KARZA_EPF_ASYNC will be called on same screen of Loan detail entry as mentioned in [https://fincap.atlassian.net/browse/ML-19473|https://fincap.atlassian.net/browse/ML-19473|smart-link]. 

*Sequence*  - Two possible sequences of APIs call out for each applicant where Office CPV waiver is applicable

#  Click of Next on Loan detail entry> Trust Score > Karza EPF > CDRULE SPLIT , here case moves to Eligibility screen

2.    Click of Next on Loan detail entry> Trust Score >CDRULE SPLIT , here case moves to Eligibility screen

*Conditions*

Below mentioned fields are developed in  [https://fincap.atlassian.net/browse/ML-19778|https://fincap.atlassian.net/browse/ML-19778|smart-link] 

Office Email Name Score : "> Master value maintained in [https://fincap.atlassian.net/browse/ML-19437|https://fincap.atlassian.net/browse/ML-19437|smart-link] " *AND*
Office Email Domain Score : "> Master value maintained in [https://fincap.atlassian.net/browse/ML-19437|https://fincap.atlassian.net/browse/ML-19437|smart-link] " *OR*
Domain Match : Master value maintained in [https://fincap.atlassian.net/browse/ML-19437|https://fincap.atlassian.net/browse/ML-19437|smart-link]  *OR*
"isResponseReceived": Master value maintained in [https://fincap.atlassian.net/browse/ML-19437|https://fincap.atlassian.net/browse/ML-19437|smart-link]  *AND*
Domain Vintage: ">= Master value maintained in [https://fincap.atlassian.net/browse/ML-19437|https://fincap.atlassian.net/browse/ML-19437|smart-link] 

# When the API is triggered, a spinner should load on the screen for not more than 2 minutes ( 2 minutes to be kept configurable), spinner should continue buffering until API responds. If the response is received before 2 minutes, Spinner should stop and disappear from the screen and the case will move forward to next section and FICO Call will happen as per current build. {color:#bf2600}Spinner timer would be common for all applicants, so if there are 2 or n applicants, spinner will load for 2 minutes at LAN level and not at each applicant level{color}
# If KARZA EPF ASYNC is stuck in progress , a spinner should appear on screen for 2 mins ( 2 mins to be configurable) and case should not move to Next screen until API responds.  If 2 minutes are completed and API is still stuck in progress , spinner will stop and case will move to next screen. {color:#bf2600}Spinner timer would be common for all applicants, so if there are 2 or n applicants, spinner will load for 2 minutes at LAN level and not at each applicant level{color}. {color:#bf2600}If API is stuck for just 1 or n applicants, then also spinner will load{color}
# If KARZA EPF ASYNC returns an error in first response within 2 minutes , user should get an option to RETRY. Error message should appear as “Something went wrong” should be shown in the form of Pop up on front end . Retry button should be placed on the popup, user should be also given an option to close (CROSS mark) the popup. Total RETRY allowed=1 for each applicant where API has given an error. Retry count should be configurable. {color:#bf2600}Spinner timer would be common for all applicants, so if there are 2 applicants, spinner will load for 2 minutes at LAN level and not at each applicant level{color}. {color:#bf2600}If API is success for just 1 applicant, error for other applicant then error msg should appear on UI as described and retry should be possible. Retry would be done only for the applicant where API has responded with error{color}
# When retry is attempted, API will be triggered and points 2 and 3 to follow. When retry count is exhausted, and API still responds with an error, error message “Something went wrong” will appear in POP UP but retry button should not appear. User should close the popup and the case will move forward to next section and FICO Call will happen as per current build
# If the case is retriggered post the FICO callout (post DDE), API will not be triggered on click of Next on Loan detail entry screen for applicants added before FIRST FICO call
# If the case is retriggered from DV or UW and a new coapplicant is added, API will be triggered only for the new co-applicant as mentioned in point 1 to 4  if the criteria is met
# {color:#bf2600}Common spinner timer logic is applicable for {color}[https://fincap.atlassian.net/browse/ML-19473|https://fincap.atlassian.net/browse/ML-19473|smart-link]{color:#bf2600} as well{color}
acceptance: # To function as described
# Functionality should run for fresh cases
# API is triggered only on the stage as described when the criteria 1 and 2 is satisfied as built in [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] 
# {color:#bf2600}*After Trust score is called and responded with success , KARZA_EPF_ASYNC will be called on same screen of Loan detail entry only when below conditions are not satisfied*{color}
{color:#bf2600}*If trust score is called, and responded with success, conditions mentioned are met, Post Trust score, case will move to next screen and FICO will be called as per current functionality*{color}If 
# If KARZA EPF returns an error in first response within 2 minutes , API to be triggered again one more time, points 1 and 2 to follow. If the error response is received again in second response, case will move forward to next section and FICO Call will happen as per current build
# When API is stuck in progress, Spinner should load for 2 mins, time limit of 2 mins is configurable, spinner should stop loading on the screen and disappear as soon as the API responds
# When API is stuck in progress, Spinner should load for 2 mins, time limit of 2 mins is breached, spinner will stop and case will move to next screen.
# If the API response is received before 2 minutes (either in first call or second call), Spinner should stop and disappear from the screen and the case will move forward to next section and FICO Call will happen as per current build 
# APIs should triggered sequentially- Click of Next on Loan detail entry> Trust Score > Karza EPF > CDRULE SPLIT , here case moves to Eligibility screen. If a case is not eligible for Karza EPF, sequence would be  Click of Next on Loan detail entry> Trust Score>CDRULE SPLIT , here case moves to Eligibility screen
# If the case is not eligible for Office CPV waivers as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link], on click of next on loan detail entry, case would flow to FICO Eligibility and CDRULE SPLIT will be called  as per current build
# {color:#bf2600}Spinner functionality would be at LAN level and not at Applicant level for both APIs- TRUST SCORE AND KARZA_EPF_ASYNC{color}

key: ML-19479
summary: CAM Report Format- UI changes
description: *Applicable* : MEL-PL ( where CAM Report is generated)

Following UI changes are requested in CAM Report format built in [https://fincap.atlassian.net/browse/ML-13891|https://fincap.atlassian.net/browse/ML-13891|smart-link] 

Look at the *expected format* column for changes needed

|Product|Scenarios|Current Format|*Expected format*|
|MEL-PL|MEL-PL wherever Primary Applicant’s Employment type= Salaried|Industry Type is showing code "693" instead of description "ADVERTISING" in this case .|"Industry Type" picklist value available in front end journey should be visible in CAM report
Refer IMAGE below|
|MEL-PL|MEL-PL wherever Primary Applicant’s Employment type= Salaried|Designation is showing code "AM" instead of description "Assistant Manager"in this case .|"Designation" picklist value available in front end journey  should be visible in CAM report
Refer IMAGE below|
|MEL-PL|RMEL / RPL when employment type- Self Employed|Income Head name is “Household Income” , Agriculture Income , Rental Income in Income detail section, but when we are checking it in cam report its showing as Household, Agri ,Rental.|UI values available in front end journey under Source of Income head should be visible in CAM report

Refer IMAGE below|

!image-20230721-072909.png|width=978,height=251!

!image-20230721-075150.png|width=817,height=325!



|PL|PL all schemes where co-applicant is self employed|if Employment Type is "Self-employed" than Employer Name is showing blank|if Employment Type is "Self-employed" than Employer Name field in CAM Report should capture "*Business / Company Name*", which is entered in employment details on front end by RO
Refer IMAGE Below|
|PL|PL all schemes where co-applicant is self employed|if Employment Type is "Self-employed" than "Duration At Current Job (Years) & Duration At Current Job Months" showing blank|if Employment Type is "Self-employed" than "Duration At Current Job (Years) & Duration At Current Job Months" should capture "*No. of years in current business*", which is entered in employment details on front end by RO

Refer IMAGE Below|
|PL|PL all schemes where co-applicant is self employed|if Employment Type is "Self-employed" than "Industry Type" is showing blank|* if Employment Type is "Self-employed" than "Industry Type" should capture "*Type of Business : Category*", which is entered in employment details on front end by RO. 
* Column name in CAM Report to be renamed from "*Industry Type*" as “*Industry Type/ Business Category*”
Refer IMAGE Below|
|PL|PL all schemes where co-applicant is self employed|if Employment Type is "Self-employed" than "Organisation Type" is showing blank|* if Employment Type is "Self-employed" than "Organisation Type" should capture "*Type of Business Ownership*", which is entered in employment details on front end by RO.
* Column name in CAM Report to be renamed from "*Organisation Type*" to “*Organisation Type/ Ownership Type*”.

Refer IMAGE Below|



!image-20230721-073251.png|width=806,height=199!



|MEL|MEL where co-applicant is salaried|if Employment Type is "Salaried than "Business Name" is showing blank|* If Employment Type is Salaried then Map "Business Name" as "*Current Employer Name*"  which is entered in employment details on front end by RO. 
* Column Name in CAM Report to be renamed as “*Business Name/ Current Employer Name*”.
Refer IMAGE below|
|MEL|MEL where co-applicant is salaried|if Employment Type is "Salaried" than "Type of Business Category"  is showing blank|* if Employment Type is "Salaried" than "Type of Business Category" should capture "*Industry Type*" which is entered in employment details on front end by RO.
*  Column name in CAM Report to be renamed as “*Type of Business Category/ Industry Type*.
Refer IMAGE below|
|MEL|MEL where co-applicant is salaried|if Employment Type is "Salaried" than "Type of Business Ownership " is showing blank|* if Employment Type is "Salaried" than "Type of Business Ownership " should capture "Organisation Type", which is entered in employment details on front end by RO.
* Column Name in CAM Report to be renamed as “Type of Business Ownership/ Organisation Type”.

Refer IMAGE below|
|MEL|MEL where co-applicant is salaried|if Employment Type is "Salaried" than "Present Job/Business Years AND Present Job/Business Months" is showing blank|* if Employment Type is "Salaried" than "Present Job/Business Years AND Present Job/Business Months" should capture "Duration At Current Job (Years) & Duration At Current Job Months", which is entered in employment details on front end by RO. 
* There are 2 separate fields on UI, Below mentioned format should be followed to combine both the field values
Refer IMAGE below|
|MEL|MEL|Financial Detail blank entries are showing incorrectly.|* Incomes added in financial details section by BCM should be ONLY visible in CAM report
* Other income records such as Agri income, dairy income etc. should not be visible in financial detail section.
Refer IMAGE below|

!image-20230721-073913.png|width=809,height=195!

!image-20230721-074422.png|width=605,height=216!

!image-20230721-075404.png|width=651,height=187!
acceptance: # Changes should reflect as described for applicable scenarios in the respective product journey
# CAM Report format should remain same as developed in [https://fincap.atlassian.net/browse/ML-13891|https://fincap.atlassian.net/browse/ML-13891|smart-link] except for the scenarios described.

key: ML-19476
summary: RMEL Akshayakalpa Scheme
description: *Configuration change*

Applicable : IFBL workflow

One new scheme to be created as per details in attachment

ROI grid to be maintained as per attachment
acceptance: # New scheme to be created as described
# Loan amount and tenure should be allowed in journey as per the scheme
# ROI should be fetched from the ROI grid 
# Rest of the journey should work as it is RMEL IFBL journey- integrations, documents
# End to End Journey should work and finnone submit to be tested,  loan should be properly disbursed in FinnOne
# Documents should reflect correct values as per the LAN details

key: ML-19473
summary: 15. Logic to trigger Trust_Score
description: *Applicable :* for Fresh Cases

*Current* :  [https://fincap.atlassian.net/browse/ML-18712|https://fincap.atlassian.net/browse/ML-18712|smart-link] 

*Proposed* : 

When the Criteria 1 and 2  is satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] for a case, Trust score ( [https://fincap.atlassian.net/browse/ML-18712|https://fincap.atlassian.net/browse/ML-18712|smart-link]  )  will be triggered at each applicant level as described 

# On click of Next on Loan detail entry and before the case is moved to next screen for FICO call _(_ *_Assumption_*_- logic will be triggered here , reason being- we want to give time to RO to get email verification completed at Customer’s end)._ 
# When the API is triggered, a spinner should load on the screen for not more than 2 minutes  ( 2 minutes to be kept configurable), spinner should continue buffering until API responds. If the response is received before 2 minutes, Spinner should stop and disappear from the screen  and the case will move forward to next screen and CDRULE SPLIT will be called as per current build or Karza EPF {color:#bf2600}ASYNC {color}will be triggered as per [https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link] ( as applicable) {color:#bf2600}Case should be on same screen of Loan detail entry and spinner should load on same screen. When the screen is buffering, user should not be able to take action on UI{color}
# If TRUST SCORE is stuck in progress , a spinner should appear on screen for 2 mins ( 2 mins to be configurable) and case should not move to Next screen until API responds . If 2 minutes are completed and API is still stuck in progress , spinner will stop and  Karza EPF _{color:#bf2600}ASYNC {color}will be triggered as per [https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link] ( as applicable)
# If TRUST SCORE returns an error in first response within 2 minutes  , {color:#bf2600}user should get an option to RETRY. Error message should appear as “Something went wrong” should be shown in the form of Pop up on front end . Retry button should be placed on the popup, user should be also given an option to close (CROSS mark) the popup. Total RETRY allowed=1 for each applicant where API has given an error. Retry count should be configurable.{color}
# {color:#bf2600}When retry is attempted, API will be triggered  and points 2 and 3 to follow. When retry count is exhausted, and API still responds with an error, error message  “Something went wrong” will appear in POP UP but retry button should not appear. User should close the popup and KARZA_EPF_ASYNC {color}[https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link]{color:#bf2600} should be triggered{color}
# If the case is retriggered post the FICO callout (post DDE), API will not be triggered on click of Next on Loan detail entry screen for applicants added before FIRST FICO call
# If the case is retriggered from DV or UW and a new coapplicant is added, API will be triggered only for the new co-applicant as mentioned in point 1 to 5
acceptance: # Functionality should run only for fresh cases
# API is triggered only on the stage as described when the criteria 1 and 2 is satisfied as built in [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] 
# API should be triggered when the MENTIONED condition in the description is satisfied and case should not move to Next screen {color:#bf2600}and CDRULE SPLIT should not be called{color}
# {color:#bf2600}If TRUST SCORE returns an error in first response within 2 minutes , user should be shown error message in popup with a retry button and a cross button to close the popup. User should be able to click on retry and API should be triggered again. Points 2 and 3 to follow. Retry count-1 for each failed attempt at applicant level. If the user doesnt retry and directly clicks close button , then {color}[https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link]{color:#bf2600} should be triggered{color}
#  {color:#bf2600}If the error response is received again in second response, show the error msg on popup. Retry button should not appear. Retry attempts should be configurable. When user views the error msg and tries to close the pop up,  Karza EPF_ASYNC will be triggered as {color}[https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link]{color:#bf2600} {color}
# {color:#bf2600}User should be able to close the pop up without retrying. When close button is clicked on pop up,  Karza EPF_ASYNC will be triggered as {color}[https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link]
# When API is stuck in progress, Spinner should load for 2 mins, time limit of 2 mins is configurable, spinner should stop loading on the screen and disappear as soon as the API responds  {color:#bf2600}and CDRULE SPLIT will be called as per current build{color} {color:#bf2600}or Karza EPF will be triggered as per {color}[https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link]{color:#bf2600}  ( as applicable){color}
# If API is stuck in progress, Spinner should load for 2 mins, when time limit of 2 mins is breached, spinner will stop and case will move to next screen {color:#bf2600}and CDRULE SPLIT will be called as per current build{color} {color:#bf2600}or Karza EPF will be triggered as per {color}[https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link]{color:#bf2600} ( as applicable){color}
# If the API response is received before 2 minutes (either in first call or second call), Spinner should stop and disappear from the screen and the case will move forward to next screen  {color:#bf2600}and CDRULE SPLIT will be called as per current build{color} {color:#bf2600}or Karza EPF will be triggered as per {color}[https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link]{color:#bf2600} ( as applicable){color}
# When Spinner is loading, we should not be allowed to move to Next screen and {color:#bf2600}and CDRULE SPLIT should not be called or Karza API {color}[https://fincap.atlassian.net/browse/ML-20130|https://fincap.atlassian.net/browse/ML-20130|smart-link]{color:#bf2600}  should not be called{color}
# {color:#bf2600}When the new co-applicant is added post FIRST FICO Call by retriggering the case from UW or DV screen, the API should run for it only as per description Points 1 to 4. API will not run for existing applicant and co-applicants where were added before FIRST FICO Call{color}
# {color:#bf2600}No changes should occur to Eligibility screen and CDRULE Split call, it should work as it is after the Trust score API/Karza EPF is responded or stuck in progress or responds with an error{color}

key: ML-19437
summary: 11. Master creation for Office Email Verification
description: *Proposed* : Master creation for *Office Email Verification*

Below field and field values to be created in the master

officeEmailNameScore = 0.5 

officeEmailDomainScore = 0.95

isEmailDomainChecked = true

domainVintage = 1

isResponseReceived = true
acceptance: # Master is created as described
# Field values should be configurable. L1 users should be allowed to update the values as desired

key: ML-19434
summary: 10. CIN field creation
description: *Proposed* : 

*CIN* field creation in Employment record object

Stamping logic

# Value should stamp in the field corresponding to current employer name / name of corporate from current employer name master or PL Enterprise master as applicable for the journey
# If the CIN value is blank in the master, it will remain blank in the field stamping
# For all the other scenarios (except for Point 1, 2), value will remain blank in the field
acceptance: # Field is created as described
# Field stamping is appropriately done as described, field should get stamped as soon as the current employer name or Name of Corporate is stamped on backend
# Field stamping should be done for app-coapp as applicable in the journey
# Field is appearing in page layout
# Field should be allowed to be extracted in the reports
# If the CIN value is blank in the master, it will remain blank in the field stamping

key: ML-19430
summary: 7. When Others selected in Current Employer Name
description: *Applicable :* For all PL journeys where Current Employer Name field is applicable , applicable for new cases only

*Proposed :* 

When *Other* is selected as a drop down in Current Employer Name field , a new field should appear next to Current Employer Name  which will be  {color:#bf2600}*Other Employer Name*{color}*,* it will be a free text field which will be mandatory.  _( Field_ {color:#bf2600}*_Other Employer Name_*{color} _is available in HL-LAP, developer to confirm if same can be reused)_

Field placement below, _developer to show the field placement during development , DJO to give a go ahead_ 

!image-20230718-103122.png|width=1213,height=349!

Same field name should be created on backend for reporting (employment record object) . If the data entry is done on UI, on click of Next/Save as Draft, value should stamp in the back end

Same field should be also shown on UW screen next to Current Employer Name field. It will remain non-editable. ( Field to be shown Only when Data entry is done in the new field)
acceptance: # For all PL journeys where Current Employer Name field is applicable , applicable for new cases only
# New field should be only visible to IRO and UW when OTHER is selected in the drop down of Current Employer Name
# Field should be created on back end, should be allowed to be extracted in Reports, should be visible on page layout. Field to remain blank when it is not applicable for a case or no value is entered by the IRO
# When RO switches from Others option to any company, then this new field should not appear on UI

key: ML-19425
summary: 5. Current Employer Name - Field type change
description: *Applicable* : For all PL journeys where Current Employer Name field is applicable , applicable for {color:#bf2600}WIP and new cases {color}

*Current* : Current Employer Name is a free text mandatory field

*Proposed* : 

Field type should change to drop down. Field should show list of companies basis the *Current Employer Name* master created in [https://fincap.atlassian.net/browse/ML-18630|https://fincap.atlassian.net/browse/ML-18630|smart-link] . {color:#bf2600}Field type should be same as available in HL-LAP{color}

+PL Repeat+

Current Employer Name will not be cloned from Base loan if the current employer name from base loan is not part of *Current Employer Name* master or is a company from current employer name master which is inactive , user would have to mandatorily select values from drop down (Assumption : base loan has free text field value or a company which is not part of *Current Employer Name*  [https://fincap.atlassian.net/browse/ML-18630|https://fincap.atlassian.net/browse/ML-18630|smart-link] )
acceptance: # Should run for For all PL journeys where Current Employer Name field is applicable , applicable for {color:#bf2600}WIP and new cases {color}
# {color:#bf2600}Field creation and searchability to similar to existing design in HL-LAP{color}
# Field should be drop down for fresh cases
# In PL Repeat, cloning from base loan should not happen  when base loan has a company which is not part of Current Employer Name master , user should be asked to enter from drop down freshly
# In Underwriting, field should reflect as per current functionality
# Drop down field should appear in SKYC cases of PL, user should be able to select companies and move ahead as per current functionality, same should appear during Underwriting screen as well as per current build ( searchable )
# All the companies available in Current Employer Name master should be available in the drop down ( searchable )
# If in base loan we have selected the Current Employer name through drop down, then during PL Repeat, same company name should be cloned only if it is active in Current Employer Name master
# {color:#bf2600}CAM report should stamp field value as recorded on SFDC front end, all system documents where current employer name is stamped should pass correct value{color}
# {color:#bf2600}field data type change is not applicable for  RMEL {color}

key: ML-19422
summary: 4. Fields creation for EPFO Verification
description: *Applicable* : PL all schemes

*Proposed* : 

Following two fields will be created in Employment details section as per below image. Fields will be non mandatory

*Enter UAN* 

*Enter UAN Linked Mobile No*

!image-20230718-081703.png|width=1201,height=340!

+Validations on+ +*UAN*+ +field+ : The number has to be 12 digit, only numeric. If the user enters  UAN less than 12 digit, then system to throw a toast error message “Enter 12 Digit UAN Number” (char limit of 12 to be kept configurable as this might increase in future, toast message should be be made configurable , if the character limit is changed, the toast message content should be allowed to change ).

+Validation on+ +*UAN Linked Mobile Number*+ +field+ : Mobile number will be default stamped as LAN linked mobile number. Field should be editable. User should be allowed to update the Mobile Number. 

Mobile number has to be 10 digits, only numeric. “Number entered has to be linked to Applicants UAN / PF Account. “ - Disclaimer to the RM below the field should appear. Font style and color to remain same as used standard currently. _Developer to discuss the font style and color before development_. 

If user enters incorrect mobile number(alphanumeric) or less than 10 digits, then following toast error message to be shown : “Enter Valid Mobile Number” . 

SFDC should create and  save +*Enter UAN and Enter UAN Linked Mobile No*+ fields in backend in the employment record object

*Assumption* : OTP Verification is not required for UAN Linked Mobile Number if it is updated by the RO. {color:#bf2600}Same mobile number will not be send to FinnOne or any other system{color}
acceptance: # Should work for all PL Schemes- PL base, PL Enterprise, PL Repeat
# Fields should appear in the dedicated section as described
# Fields should be non-mandatory
# Validations are running on both fields
# Disclaimer is appearing below the field UAN Linked Mobile Number
# Fields should be only visible in RPL journeys
# Field stamping should happen appropriately in back end on Click of Next/Save as Draft similar to other fields available on Employment detail entry. Fields should be allowed to extract in reports. Fields should be visible in Page layout
# LAN Linked mobile number for APP/CO-APP should not be overidden by the data entry done in UAN Linked Mobile Number field
# {color:#bf2600}Mobile Number captured in the Enter UAN Linked Mobile Number should not be shared to FinnOne or any other integration except for Karza_EPF{color}

key: ML-19409
summary: 14. New fields handling for Office CPV waivers
description: *Proposed*

+PL all schemes+ - When the case is retriggered Post FICO call, following fields will be disabled for editing ( for primary applicant and co-applicants added before FICO call)

* Official Email ID
* Enter UAN
* Enter UAN Linked Mobile Number

When the case is retriggered Post FICO call and a new co-applicant/s is added , following fields will be disabled for editing ( only for new co-applicant/s) post immediate subsequent Eligibility FICO call for that new co-applicant/s

* -Official Email ID-
* Enter UAN
* Enter UAN Linked Mobile Number

+PL all schemes+ - When the case is retriggered before FICO call, following fields will be disabled for editing  ( for all applicant types added before or after FIRST FICO call)

 isresponsereceived= True

* Official Email ID

+PL Repeat and Plus+- Following fields will not be cloned from base loan in top up jounrey- ,user should make fresh data entry in these fields (applicable for existing Applicant and co-applicant from Base loan) , Office CPV Waiver logic will run freshly

* Official Email ID
* Enter UAN
* Enter UAN Linked Mobile Number

+In SKYC Journey base loan from HL,LAP, Gold,+ following fields will not be cloned from the base loan, user should make fresh data entry in these fields (for all applicant type), Office CPV Waiver logic will run freshly

* Official Email ID
acceptance: # When the case is retriggered Post FICO call and a new co-applicant/s is added ,  fields will be disabled for editing post immediate subsequent Eligibility FICO call for that new co-applicant/s. For applicant/co-applicants added before FIRST FICO Call, fields should continue to be non-editable as described

# Fields should not be editable as described, new entries should not overide the entries already saved
# Before FIRST FICO call, if case is retriggered and isresponsereceived= true already, then Official EMAIL ID field will be disabled for editing
# In PL Repeat and Plus Journey, field values should not be cloned from base loan
# In SKYC journey, fields will not be cloned from base loan
# User should be forced to make fresh entries in PL Repeat, Plus and SKYC Journey for fields mentioned , new values entered should be stored as per the functionality
# Trust score API [https://fincap.atlassian.net/browse/ML-19473|https://fincap.atlassian.net/browse/ML-19473|smart-link] and Karza EPF API [https://fincap.atlassian.net/browse/ML-19563|https://fincap.atlassian.net/browse/ML-19563|smart-link] is flowing with the LATEST and CORRECT tag values as stamped on SFDC 

key: ML-19332
summary: 3. Email trigger to Customer-SFMC Flow- Part 2
description: *Technical Story-* Reference project will be EL-K12. 

*Applicable* : -RPL only when applicant or co-applicant is eligible for Office CPV waivers ( criteria to trigger Office CPV waiver is satisfied)- {color:#bf2600}Valid for all RPL schemes{color}

*Proposed* : 

Continuation from [https://fincap.atlassian.net/browse/ML-19144|https://fincap.atlassian.net/browse/ML-19144|smart-link] 

* SEND MAIL button should allow user to trigger mail to Customer’s mail id added on UI
* A pop up should appear on Front End, *.*  Pop up msg content to be used from K12 [~accountid:62fc835c1e82e839c24fe8ec] {color:#bf2600}please add the details in the story with relevant screenshots{color}
* Pop up will have a Cross mark to close the pop up.  Pop up will act as a reminder to IRO to inform customer to close the email verification at the earliest [~accountid:62fc835c1e82e839c24fe8ec] {color:#bf2600}please add the screenshots of email format which customer will receive and all customer facing journey details of this feature referencing from K12 Project. We need these details shared to stakeholders before sign offs. Please share the details on expiry of email sent to Customer{color}
* Customer should be able to receive the email and open the email sent from SFDC for verification

* Post FICO call, EMAIL ID field will become non-editable, Send MAIL button will remain disabled
acceptance: # {color:#bf2600}Should work for all RPL schemes- PL base, PL Enterprise, PL Repeat{color}
# Customer should receive the email sent from SFDC
# A popup window will open on UI with the msg as described, IRO should be able to close the pop up by clicking on Cross
# Customer should be able to access the email and complete the email verification as directed in the email
# Post FICO first call, when retriggering is done, Email ID field should not be editable and Send MAIL button will remain disabled. RO should not be able to trigger a new mail to customer’s mailbox
# No other change to Email ID field and related flow to it. As per current journey , it should stamp properly on UI and Backend and should flow to Integrations wherever applicable

key: ML-19320
summary: Updation of "Insurance Type" for PMJJBY and PMSBY Products
description: *Configuration change*

For PMJJBY and PMSBY products created in MEL , Insurance Type values are to be updated as below (please refer screenshots attached)

||*Product*||*Current*||*Proposed*||
|PMJJBY|LIFE|JJBY|
|PMSBY|GPSD|GSBY|
acceptance: In finnOne submit request, Insurance Type tags for PMJJBY and PMSBY should be “JJBY” and “GSBY” respectively. 

Case should be properly disbursed

No impact on journey flow, only finnone request should reflect the changes

key: ML-19183
summary: Update on Income heads
description: MRO should be able to create a case in income heads.

During re initiation of cases, applicant/ co applicant should be able to capture the income heads. Duplicate values should not be created on front end in SFDC post closing the case. 

User should be able to close applicant or co applicant PD and flow income details without any inter dependency.
acceptance: MRO user should be able to create cases .

key: ML-19160
summary: Mule changes
description: nan
acceptance: 1

key: ML-19144
summary: 2. Email trigger to Customer-SFMC Flow- Part 1
description: *Technical Story-* Reference project will be EL-K12. 

*Applicable* : -RPL only when applicant or co-applicant is eligible for Office CPV waivers ( criteria to trigger Office CPV waiver is satisfied)- {color:#bf2600}Valid for all RPL schemes{color}

*Proposed* : 

* Existing Email ID field to be renamed as “Official EMAIL ID” 
* SEND MAIL button to be created to send mails to customer’s official mail ID. This button will be present next to “Official EMAIL ID” as shared below

!image-20230706-114413.png|width=954,height=277!

* Button should be disabled in below scenarios

# When valid Email ID is not entered by the user
# When *“isResponseReceived”* is true. (logic for field is added later in the story) 
# Post FIRST FICO call (post loan detail entry) 
# [~accountid:62fc835c1e82e839c24fe8ec]*added the condition as per development*-  {color:#bf2600}Button should be disabled - when {color}{color:#bf2600}*“isResponseReceived”*{color}{color:#bf2600} is false (logic for field is added later in the story){color}

* Button should be enabled  -when a valid email id is entered by the the user on front end. 
* -Button should be enabled - when- *-“isResponseReceived”-* -is false ((logic for field is added later in the story))- *-and-* -case is not triggered from any stage after first FICO call ( Post loan detail entry) and time-
* {color:#bf2600}-Button should be enabled - when- {color}{color:#bf2600}*-“isResponseReceived”-*{color}{color:#bf2600} -is false and time limit for expiry of the email verification is not breached-{color}

* Creation of a new field at applicant level “isResponseReceived”
* Field stamping of *“isResponseReceived”*

# Once email verification is completed by the customer, please stamp the new field as *true*
# If the email is sent from SFDC to customer’s email, the field stamping will be *false* until the time email verification is completed as per point 1
# In all other scenarios, field stamping will remain blank
acceptance: # -Change described is only applicable for RPL cases where criteria- [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] -is satisfied, field should appear at applicant level. If applicant is satisfying the criteria, described changes will appear , if co-app is not satisfying the criteria, described changes will not appear.- {color:#bf2600}Should run for all RPL schemes- PL base, PL Enterprise, PL Repeat{color}
# Field to collect Email ID is renamed as described
# SEND EMAIL button is visible as described
# SEND EMAIL button is accessible as described, email is triggered to provided email
# SNED EMAIL is disabled as described
# Field as described should be created at the backend as described
# Once the email verification is completed , field created should be marked as true
# As soon as the email is triggered from SFDC, field should be marked as false
# Field stamping will remain blank in all other scenarios
# {color:#bf2600}Email ID captured should flow to all integrations as per current build{color}

key: ML-19031
summary: 2. LMSVIEWBYLOAN response
description: *Applicable* : MEL Repeat and PL Repeat

*Current* : LMSVIEWBYLOAN is consumed in DIY/TC Journey 

*Proposed* : Response to be consumed by SFDC

Sample response

{
  "RESPONSEID": 429184431,
  "ISSUCCESS": "True",
  "ERROR": {
    "ERRORSYSID": null,
    "ERRORCODE": null,
    "ERRORDESC": null
  },
  "RESPONSE": {
    "PROCESSOR": null,
    "DATA": [
      {
        "AGREEMENTDATE": "26-OCT-2021",
        "NEXT_EMI_DUE_DATE": "07-JUL-2023",
        "CLOSUREDATE": "08-FEB-2023",
        "ADVANCE_EMI": 0,
        "SCHEME": "MEL PLUS BANK",
        "DISBURSALDATE": "26-OCT-2021",
        "OTHER_OUTSTANDING": null,
        "NET_LTV": 100,
        "NO_OF_PAID_EMI": 15,
        "LAST_EMI_DATE": "07-NOV-2023",
        "TENURE": 24,
        "ROI": 12.8469298,
        "PRODUCTFLAG": "RMEL",
        "AGREEMENTID": 54961097,
        "PRINCIPAL_OUTSTANDING": 97839.85,
        "DOWNPAYMENT": 0,
        "OVERDUE_AMOUNT": 0,
        "BUCKET": 0,
        "REGNO": null,
        "NO_OF_BILLED_EMI": 15,
        "STATUS": "C",
        "LINKED_AGREEMENTNO": null,
        "EMI": 11942,
        "GROSS_LTV": 100,
        "LOAN_AMOUNT": 228000,
        "FIRST_EMI_DATE": "07-DEC-2021",
        "NO_OF_PENDING_EMI": 9,
        "EFFRATE": 23
      }
    ]
  }
}
acceptance: # API response to be consumed by SFDC and should stamp on SFDC corresponding to the LAN
# API response should be visible in SFDC Back end
# Should work for fresh cases and WIP cases ( where case has not moved beyond UW)
# Should work as available in MEL+ DIY/TC Journey

key: ML-19024
summary: 1. LMSVIEWBYLOAN request
description: *Applicable* : MEL Repeat and PL Repeat

*Current* : LMSVIEWBYLOAN is consumed in DIY/TC Journey 

*Proposed* : LMSVIEWBYLOAN API will be triggered in the backend on click of Button  [https://fincap.atlassian.net/browse/ML-21625|https://fincap.atlassian.net/browse/ML-21625|smart-link] 

+Sample Request structure+

{
  "attributes": {
    "type": "Loan_Application__c",
    "url": "/services/data/v58.0/sobjects/Loan_Application__c/a0hN7000000si7JIAQ"
  }, {color:#bf2600}(“Id” - Reference ID of Repeat loan){color}
  "FinnOne_ID__c": "82672704", {color:#bf2600}( "FinnOne_ID__c" = FinnOne ID of base loan stamped in below field){color}
  "Id": "a0hN7000000si7JIAQ" {color:#bf2600}(“Id” - Reference ID of Repeat loan){color}
}

!image-20230704-080732.png|width=510,height=333!
acceptance: # LMSVIEWBYLOAN API will be triggered in the backend on click of Button [https://fincap.atlassian.net/browse/ML-21625|https://fincap.atlassian.net/browse/ML-21625|smart-link]
# Should work for MEL Repeat and PL Repeat
# No impact on any other journey in MEL-PL
# Should work for fresh cases and WIP cases ( where case has not moved beyond UW)
# Should work as available in MEL+ DIY/TC Journey

key: ML-19020
summary: Mobile Number masking in Telecaller flow
description: *Applicability* : Telecaller Journey

*Current* : Mobile number is visible in Offer list and Personal details screen in telecaller flow

*Proposed* : 

* Mobile number to be masked in Offer list and Personal details screen for Telecaller users
* Only last {color:#bf2600}5 {color}digits of mobile number to be visible on UI, rest digits to be masked 
* After the changes , UI should reflect Mobile Number in this format as {color:#bf2600}XXXXX01234{color}

_Developer to confirm if mobile number is shown on UI in any other scenario, that may also be included post discussion with DJO_
acceptance: # Mobile number should be masked and should appear in UI format as described in mentioned locations.
# Telecaller user should not be able to view the complete mobile number anywhere in the journey
# No impact on CJ journey , IRO assisted journey
# In case of Dropped off scenario from CJ journey to Telecaller Journey , Mobile numbers to be masked for Telecaller users

key: ML-19015
summary: Inbound Integration Record deletion batch creation
description: Applicable :All BU

Description:

* Currently, for some of the Integration messages where we don't have value in the reference id field are not getting deleted via Loan Data deletion batch.
* With this requirement, we will create a separate batch to delete the integration records where reference ID’s are blank.
* Service names where blank reference IDs were observed are collated in a form of list. {color:#bf2600}Dev team to identify more APIs where reference ID is blank, below list to be modified basis IA , please get in touch with DJO post the IA{color}
* Service Names addition/deletion in the batch should be configurable,

|SVC|
|Aadhar_Emandate|
|AadharEmandate_AePsStatus|
|AadharMandate_Biometric|
|CUSTOMER_APP_STATUS|
|Customer_offer|
|EKYC_CheckValidLoanID|
|EKYCBIOMETRIC|
|EMANDATE|
|Esign|
|Esign_legaldesk|
|Estamp|
|Estamp_ACK|
|GETMANDATEDTLS|
|IRIS-2|
|PDApp_CaseList_Dashboard|
|PDApp_StopPD|
|PDApp_Submit|

 
acceptance: * Batch is deleting the integration records where reference ID’s are blank
* SVC list to be configurable. Addition or deletion of SVCs should be allowed as and when needed
* Batch should pickup last 90 days record., Number of days to be same as existing functionality. {color:#bf2600}( Developer - pls confirm number of days mentioned in existing code){color}

key: ML-19012
summary: Document Delete batch changes
description: *Batch*: Document Data Delete batch

*Description*: 

*Current :*  as per the Document Delete Batch Content Document record deletion take place for all the LANS which are at stage= Rejected, Cancel and Disbursed.  There is no specific condition to delete content versions with orphan records

*Proposed* : Aadhar masked document and other documents which has content versions and  are Orphan records has to be deleted , Orphan record is one where loan application is tagged but document detail record is missing

* Query has to be refined in such a way that batch pick ups the content version which are orphan records

*Orphan record*

!image-20230704-090903.png|width=972,height=369!

*Record tagged to Document detail record*

!image-20230704-090934.png|width=955,height=357!

Code condition to be updated in such a way that whenever document detail record is deleted , content version corresponding to it should be also deleted so that orphan records are not created and doesnt require batch to pick them up
acceptance: * Orphan records are deleted as mentioned above for all documents which have content versions with orphan records where LAN is in stage- reject, cancel, disbursed. Code to be modified to delete orphan records whenever document detail record is deleted
* Document Data Delete Batch is running prior to Loan Data Deletion batch.

key: ML-19009
summary: Loan Data Deletion batch changes for Non-Mandatory document record deletion
description: *Batch Name*: Loan Data Deletion batch

*Description*:

* Non-mandatory document record deletion should be done for the LAN’s which are at the stages= Reject ,Cancel and Disbursed.
* Inactive document detail records which do not have attachments should be also considered for deletion which are at the stages= Reject ,Cancel and Disbursed.
* DMS Integration message should be also deleted  where -reference ID or- Reference number = LAN reference number (a0hN7000000rvJVIAY for example)- stage- reject, cancel and disbursed
* *Case Team* records should be deleted for the LANS which are at 
** stage = Cancelled, Rejected and Disbursed.
acceptance: * Non-mandatory document records are getting deleted for the LAN’s which are at the stages= Reject, Cancel and Disbursed.
* Integration message is also deleted for the related content document.
* Attachments is also getting deleted for the deleted integration message.
* Case team records is also getting deleted for the LAN’s at Cancelled, Rejected and Disbursed stage

key: ML-18932
summary: to store FinnOne ID for Existing Customers
description: *Applicable BU*- All Single KYC Success cases, All Top Up Journeys MEL+, MEL Repeat, HL/LAP Preapproved, GL Renewal, PL Repeat, *PL+, CJ (Cases disbursed End to end), CJ Drop-off*

*Proposed* :

When KYC Document type= Existing customer, *KYCUpdate* tag will flow FinnOne ID in the finnone req at applicant level

Tag value to be stored at applicant level in the backend in existing field *KYC Update* 
acceptance: # Tag value is stored in the new field at back end for each applicant type when KYC Document type= Existing customer in case of All Single KYC Success cases, All Top Up Journeys MEL+, MEL Repeat, HL/LAP Preapproved, GL Renewal, PL Repeat, *PL+, CJ (Cases disbursed End to end), CJ Drop-off*

key: ML-18912
summary: New fields in Previous loan details tab in MEL-PL Repeat
description: +*Applicability*+ *:* MEL- PL Repeat all flows (Bank and IFBL)

*Current* : Previous loan details tab is available in Financial Tab of UW screen in MEL Repeat and values entered by UW flow to FICO for deviations calculations

[https://fincap.atlassian.net/browse/ML-76|https://fincap.atlassian.net/browse/ML-76|smart-link]

[https://fincap.atlassian.net/browse/ML-18648|https://fincap.atlassian.net/browse/ML-18648|smart-link] 

*Proposed* : 

Creation of 4 new fields on UI for data entry by BCM. These fields should appear in Previous loan details tab. The fields will be added sequentially just after existing field “ *Business Name*” in MEL Repeat and *Current Employer Name / Name of Corporate* in PL Repeat 

{color:#ff991f}Dev team to check Stamping of these fields at backend , ( reporting POV as well){color}

Fields will be mandatory for all repeat cases; Any change in data would system would ask the user to click on eligibility mandatory before taking any decision; The data should be autosaved as done for other tabs. Below are the fields

# Cycle Number
# Application ID of Previous LAN
# No of EMI More than 30 DPD
# No of EMI in 1-30 DPD

|SFDC Field Name|FICO Tag Name|FICO Path:- applicants-->previousLoanDetails|Type : PreviousLoanDetail|
|Cycle Number|cycleNumber|application.applicants.previousLoanDetails-->cycleNumber|Int|
|Application ID of Previous LAN|applicationId|application.applicants.previousLoanDetails-->applicationId|string|
|No of EMI More than 30 DPD|moreThan30DPDEver|application.applicants.previousLoanDetails-->noOfEMImoreThan30DPD|Int|
|No of EMI in 1-30 DPD|noOfEMIbet1and30|application.applicants.previousLoanDetails-->noOfEMIbet1and30|Int|
acceptance: # All 4 fields should be available in MEL-PL Repeat flows ( Bank and IFBL)
# Underwriter should be able to add data in these fields
# Data in these fields should be available for future in terms of report
# Fields will be mandatory for all MEL-PL repeat cases; Any change in data would system would ask the user to click on eligibility mandatory before taking any decision; The data should be autosaved as done for other tabs. Below are the fields. (This is existing functionality for fields already available in MEL Repeat , dev team to check and confirm)
# New tags for these 4 fields should flow to FICO similar to other tags for fields already existing in MEL Repeat
# FICO should be able to read and respond to the new request structure ( Same functionality as available in MEL Repeat

key: ML-18897
summary: Creation of a field to store FinnOne ID
description: *Applicable BU*- All Single KYC Success cases, All Top Up Journeys MEL+, MEL Repeat, HL/LAP Preapproved, GL Renewal, PL Repeat, *PL+, CJ (Cases disbursed End to end), CJ Drop-off*

*Proposed* : 

When KYC Document type= Existing customer, *KYCUpdate* tag will flow FinnOne ID in the finnone req at applicant level

Tag value to be stored at applicant level in the backend ( dev to confirm whether new field to be created or existing field *KYC Update* can be used)
acceptance: # Tag value is stored in the new field at back end for each applicant type when KYC Document type= Existing customer in case of All Single KYC Success cases, All Top Up Journeys MEL+, MEL Repeat, HL/LAP Preapproved, GL Renewal, PL Repeat, *PL+, CJ (Cases disbursed End to end), CJ Drop-off*

key: ML-18784
summary: URC Number to be captured during on "PSL Details" screen during QDE 
description: Currently, URC No. is captured post disbursement under “Cases” object.


New Field to be created on SFDC under PSL Details Tab to capture URC number.



Basic URC format validation required (can be either of below)

*UDYAM-XX-00-0000000*

*UDYAM-XX-I-00-0000000*



If Valid URC No. is entered, PSL Flag should be “Yes” and PSL Category Should be “MSME”.

PSL Sub-category to be selected by user in dropdown. 



This field should be auto-stamped in “Cases” object post Disbursement.

URC No. should be passed to FinnOne.  
acceptance: This field should be auto-stamped in “Cases” object post Disbursement.

URC No. should be passed to FinnOne in FinnOne Submit request api

key: ML-18781
summary: PMJJBY-SBY - Finnone request updates
description: *Applicable* : MEL ( Journey flow where PMJJBY-SBY is opted)

*Proposed* : 

When PMJJBY or SBY or both is opted on UI in the journey flow , FinnOne request generated will have additional arrays as below, this array will have all tag and their values as array generated for Credit Protect Insurance ,except for 3 tags

3 tags which will have unique values depending on PMJJBY, SBY Opt in are below

* {color:#ff991f}*"Cust_Premium_Amt" : "695.00"*{color}, 

tag value will be passed as actual premium amount for JJBY, SBY insurance

* {color:#ff991f}*"Cust_Insurance_Type" : "LIFE",* {color}

LIFE will be passed in this tag value if JJBY insurance is opted in, 

GPSD will be passed in this tag value if SBY insurance is opted in

* {color:#ff991f}*"Cust_Insurance_Company" : "5"*{color},

5 will be passed in this tag value if JJBY insurance is opted in, 

14 will be passed in this tag value if SBY insurance is opted in, 

+*Array structure*+

{
"CustomerId" : "9904790734",
"Cust_Title" : "MR.",
"Cust_SumAssured" : 157500.00,
"Cust_SerialNo" : "",
{color:#ff991f}*"Cust_Premium_Amt" : "695.00"*{color},
"Cust_PolicyNo" : "",
"Cust_Policy_Tenure" : "2",
"Cust_NOMRELATION" : "B",
"Cust_NOMMNAME" : "",
"Cust_NOMLNAME" : "DIXIT",
"Cust_NOMFNAME" : "KAVYA",
"Cust_NOMDOB" : "01-Mar-2000",
"Cust_MName" : "Ramrao",
"Cust_LossPayee" : "",
"Cust_LName" : "Kamble",
{color:#ff991f}*"Cust_Insurance_Type" : "LIFE",*{color}
{color:#ff991f}*"Cust_Insurance_Company" : "5"*{color},
"Cust_Ins_Form" : "",
"Cust_Ins_Financed" : "",
"Cust_Gender" : "M",
"Cust_FName" : "Abhijit",
"Cust_Expiry_Date" : "",
"Cust_Coverage_Type" : "",
"Cust_BaseCoverage" : "",
"Cust_APPOINTEE_MNAME" : "",
"Cust_APPOINTEE_LNAME" : "",
"Cust_APPOINTEE_FNAME" : "",
"Cust_APPOINTEE_DOB" : "",
"Cust_APOINTEE_RLTN" : "",
"Cust_Amt_Ins_Financed" : "",
"Cust_Admin_Fee" : "",
"CRN_Number" : "9904790734"
},

Added, Sample finnone request from UAT which was successfully passed to FinnOne
acceptance: # FinnOne request generated will have additional arrays as mentioned in description only when JJBY, SBY or both insurances are opted in
# Tag values passed in the new arrays are same as available for Credit Protect insurance except for 3 tags 
# "Cust_Premium_Amt" , "Cust_Insurance_Type" , "Cust_Insurance_Company" are passed with values as mentioned in the description
# If hospicash is not selected for app, co-app, credit protect is not selected for co-app and SBY and pmjjby insurance is selected the data should flow as suggested
# Except for this change, finnone request will remain as it is
# No change in journey flow, it should work end to end as it is
# Case should be submitted to finnone CAS
# Case to be disbursed from FinnOne 
# -When the switch is off/on , the array should only flow when switch is on and jjby-sby insurances are opted-
# FinnOne request should not be impacted for any other BUs

key: ML-18777
summary: PSL changes in RMEL
description: *Applicability* : MEL Base/Plus/Repeat

*Current* 

* Farmer Type is dropdown driven & mandatory for Purpose of loan: “Agriculture” (or) “Allied Agriculture”
* Based on farmer type. borrower category code 41 & 42 is defined on SFDC  and sent to FinnOne in finnone request in the tag "BorrowerCategory"

      For marginal farmers- code is 42

      For small farmers- code is 41

*Proposed*

* For Purpose of Loan: “Allied Agriculture”, borrower category code should be default set to “49” and sent to FinnOne in finnone request and should not be basis Farmer Type . 
* Farmer Type field will be removed from UI when Purpose of Loan: “Allied Agriculture”
* For Purpose of loan : “Agriculture”, Introduce a new picklist option in farmer type field : Others , borrower category code to be maintained as  _45_ and same to be passed in finnone request

!image-20231116-103622.png|width=1212,height=236!

*Dependency*

Developer to confirm logic that Farmer Type field becomes mandatory on the condition when Purpose of Loan = Agriculture or Allied Agriculture

Developer to confirm borrower category code is maintained in code or not?
acceptance: * Given that Purpose of Loan is selected as Allied agriculture, when customer lands on loan detail entry or UW screen, then farmer type field should not be shown to the user for data entry, it will be removed from the screen
* Given that Purpose of Loan is selected as Allied agriculture, when case is submitted to Finnone, then borrower category code is passed as 49 in finnone request and case is successfully submitted to FinnOne
* Given that Purpose of Loan is selected as Agriculture, when farmer type is selected, then front end user on IRO/UW should see Others as picklist option
* Given that Purpose of Loan is selected as Agriculture, when farmer type is selected, then borrower category code is passed as 45 in finnone request and case is successfully submitted to FinnOne
* Given that mentioned changes are done, when case is processed on SFDC in MEL Base/Repeat/Plus, then journey flow will work E2E without impacting any other flow
* Given that mentioned changes are done, when case is processed on SFDC in MEL Base/Repeat/Plus, then borrower category code and farmer type should be passed in existing integrations and documents as per current flow
* {color:#bf2600}Given that mentioned changes are done, when case is processed on SFDC in MEL Base/Repeat/Plus, functionality will work for WIP/Fresh cases{color}

key: ML-18728
summary: Record Type for Income head
description: currently we are stamping in income object. Kindly stamp the income heads in the record type : *Bank*.

Also, are a few new fields included below for income details. PFB, the total fields to be added. Kindly add those which are not yet added.



Applicant/CoApplicant = App/Co-App Name (Mandatory)
Head = Head Name (Mandatory)
Income = Income for that Head (Mandatory)
Date of ITR = Calendar Date
Frequency = monthly (Mandatory)
Year = Latest year only (for example current year is 2023 so Year = 2023) (Mandatory)
To be considered for Eligibility = Yes/No 
How Are You paid = CASH/BANK (Mandatory)
Record Type = Bank/Cash (Mandatory)
isPDIncome = Checkbox (Mandatory)
acceptance: User should be able to view income heads in record type: Bank

key: ML-18725
summary: Retry count handling and Enablement of Next button to move the case to subsequent screen
description: *Applicable* : MEL,PL,HL,LAP,Gold (Journey flows wherever office CPV can be triggered)

*Proposed* : 

Retry allowed for employment Verification at applicant level = 2 (2 is configurable). So total attempts for UAN AND EMAIL options together = 3. If there are 2 applicants ( i.e. App and Co-app, retry count to be come 6, 3 for app, 3 for co-app, accordingly counts should be allowed as per number of applicants in the LAN

Check Success/ Failure at Applicant level in the “ EPFO Status” and “Official Email Verification Status fields maintained at back end

|*Scenario*|*Applicant*|*All Co-Applicants*|*Next button enablement*|
|Check for Applicant  and Coapplicant both|Success|Success|Yes|
|Check for Applicant  and Coapplicant both|Failure|Failure|Yes|
|Check for Applicant  and Coapplicant both|3 attempts have elapsed|3 attempts have elapsed|Yes|
|Check for Applicant  and Coapplicant both|Failure and 3 attempts have not elapsed|Failure and 3 attempts have not elapsed|No|
acceptance: 1

key: ML-18719
summary: Creation of Submit Button for New section 
description: *Applicable* : MEL,PL,HL,LAP (Journey flows wherever office CPV can be triggered)

*Proposed* : 

Creation of a submit Button in new section , UI/UX to be similar to as below image

Submit button will be always visible in new section when applicant is satisfying EPFO criterias

!image-20230619-081345.png|width=541,height=164!

Logics

# Submit button to be active *if the user has selected option a and entered email ID.*

OR

# Submit button to be active if *the user has selected option b and entered UAN and UAN Linked Mobile Number*
# If none of the option is chosen in the section, Submit button to remain *Inactive*

Until retry option is available at applicant level ( [https://fincap.atlassian.net/browse/ML-18725|https://fincap.atlassian.net/browse/ML-18725|smart-link]   ), the submit should become active whenever above logics are satisfied  

When either EPFO Status field or  Official Email Verification Status is stamped as Success, Submit button to become Inactive

When submit button is active, On hit of Submit button using option a, TRUST_SCORE will be triggered [https://fincap.atlassian.net/browse/ML-18712|https://fincap.atlassian.net/browse/ML-18712|smart-link] 

When submit button is active, On hit of Submit button using option b, KARZA_EPF will be triggered [https://fincap.atlassian.net/browse/ML-18522|https://fincap.atlassian.net/browse/ML-18522|smart-link] 

If TRUST_SCORE or KARZA_EPF API returns an error or does not return a response till 2 mins (2 mins to be configurable), the spinner on screen should stop , Submit button would be active and the previously filled details would still be populated on screen and user would have option to switch to alternate method .  
acceptance: 1

key: ML-18712
summary: 9. Trust_Score Request Generator
description: *Proposed : Request Generation for Trust_Score. Sample request attached*

{
  "zumigo": {
    "getLineIdentity": {}
  },
  "trustingsocial": {
    "externalConsent": {}
  },
  "karza": {
    "negativeAreaTagging": {},
    "nameMatch": {},
    "domainCheck": {
      "organizationName": "", >> *Current Employer Name or Name of Corporate ( depending on the type of journey), Employment record object*
      "individualName": "", >> *Applicant name : First name + Middle name + Last name (Concatenated with space in between), applicant object*
      "email": ["|mailto:%22sushmita.sarraf@pwc.com]",  *email entered in Official Email ID field, applicant object (check the mapping)*
      "consent": "y" >> *always Y*
    },
    "addressMatch": []
  }
}
acceptance: 1.Request structure is created in the format described

key: ML-18648
summary: Previous loan details tab in PL Repeat Journey
description: +*Applicability*+ *:* PL Repeat all flows (Bank and IFBL)

*Current* : Previous loan details tab is available in  Financial Tab of UW screen in MEL Repeat and values entered by UW flow to FICO for deviations calculations

*Proposed* : 

Same functionality to be built for PL Repeat as MEL Repeat, UI/UX to remain same as MEL Repeat.

At Underwriting pending stage below fields should be visible to Underwriting in Financial Tab>Previous loan details. In this section below fields should appear and data entered by Underwriter in these fields should flow to FICO

|*Sr. No.*|*Updated Field Names*|*Comments*|*Formula ( if applicable)*|
|1|EMI Start Date|Date field| |
|2|Loan closure Date|Date field| |
|3|Sanction Loan amount|Numeric field| |
|4|Total Income of previous loan.|Numeric field| |
|5|% of Incremental cash flow|Negative percentage values can also come here. - Auto populated - Calculation field|(Total Income of Previous Loan (Which is added in the same section) – Total Current Income (which is addition of All Income added in income section)/Previous Income))  *100
*Total Final Income  (App + Co-app)* needs to be considered from current loan for calculating % of incremental cash flow.|
|6|EMIs Paid|Numeric field| |
|7|Peak DPD (Days)|Numeric field| |
|8|No of DPD Bet 8-15 in Previous Loan|Numeric field| |
|9|No of DPD Bet 16-30 in Previous Loan|Numeric field| |
|10|Last 3 months DPD (Days)|Numeric field| |
|11|Principal Outstanding|Numeric field|Will accept 0 as well|
|12|Current Employer Name / Name of Corporate|Auto populated from previous base loan|Field name to stamp depending on Rural PL/PL Enterprise|

Data entered by UW in all the fields should flow to FICO in below tags similar to MEL Repeat

|SFDC Field Name|FICO mapping:- applicants-->previousLoanDetails|Type : PreviousLoanDetail|
|EMI Start Date|previousLoanDetails-->emiStartDate|date|
|Loan Closure Date|previousLoanDetails-->loanClosureDate|date|
|Sanction Loan Amount|previousLoanDetails-->sanctionedLoanAmount|double|
|Total Income of Previoud Loan|previousLoanDetails-->totalIncomeOfPreviousLoan|double|
|% of Increamental cash flow|previousLoanDetails-->percentageIncrCashFlow|double|
|EMIs Paid|previousLoanDetails-->emisPaid|int|
|Peak DPD (Days)|previousLoanDetails-->peakDPD|int|
|No of DPD Bet 8-15 in Previous Loan|previousLoanDetails-->noOfDPDbet8and14|int|
|No of DPD Bet 16-30 in Previous Loan|previousLoanDetails-->noOfDPDbet15and30|int|
|Last 3 months DPD( Days)|previousLoanDetails-->lastThreeMonthsDPD|int|
|Principal Outstanding|previousLoanDetails-->principalOutstanding|double|
|Current Employer Name / Name of Corporate|previousLoanDetails-->businessName|string|
acceptance: # For Repeat cases of Bank and IFBL at Underwriting pending stage below fields should be visible in “Financial” Tab>Previous Loan Details
# Only previous loan details should appear for PL Repeat
# Underwriter should be able to add data in these fields
# Data in these fields should be available for future in terms of report
# Tags should flow to FICO. 
# *0 value should be accepted same as MEL Repeat*
On BCM Financial tab, under Previous Loan Details section, below fields should accept 0 values:
## EMIs Paid
## Peak DPD (Days)
## {color:#bf2600}No of DPD Bet 8-15 in Previous Loan{color}
## {color:#bf2600}No of DPD Bet 16-30 in Previous Loan{color}
## Last 3 months DPD (Days)
## Principal Outstanding
# % incremental cash flow value should be shown in percentage.
# Functionality will remain as it is as built in MEL Repeat
# these fields would be mandatory for all repeat cases.
# Any change in data would system would ask the user to click on eligibility mandatory before taking any decision.
# The data should be autosaved as done for other tabs

key: ML-18641
summary: Underwriting UI changes
description: Below fields to be created/stamped and made visible on UI under “Applicant” Tab during UW journey.

* +Office Email Name Score+
* +Office Email Domain Score+
* Bureau Address Match – Output by FICO
* Domain Match (Yes/No) – Output by FICO
* +isResponseReceived+
* +domainVintage+
* +Is Unique+
* +Cur_Emp_nameConfidence+
* +epfHistory+
* +Cur_Emp_isNameExact+
* +Cur_Emp_isEmployed+
* +Cur_Emp_isNameUnique+
* +Cur_Emp_isRecent+
* +Cur_Emp_emplrScore+
* Office CPV waived – Output from FICO



Underlined fields are received from Karzai Trust_score and EPF API. 

Other fields will be output by FICO.

 
acceptance: 1

key: ML-18638
summary: Retrigger scenarios
description: nan
acceptance: 1

key: ML-18630
summary: 6.Employment Master creation
description: *Proposed* : 

+Current Employer Name Master+

* {color:#bf2600}Reuse existing Current Employer Name master for RPL (all schemes) and add below field{color}. Refer attached master file from existing HL-LAP Production Master
* Master should be configurable, add/delete/modify access to be available with L1 users

-Current Employer Name (Column B )-

CIN (Column F)

-Active ( Column D=> True=1, False=0)-

{color:#bf2600}Field values of CIN to be inserted in each company record by referring to the attached file{color}

*Assumption* : The company code , current employer name is already available in the existing master,

+PL Enterprise Master+

* New field to be created as CIN in the SFDC PL Enterprise master ( similar to existing fields of Corporate Code, ROI, PF, etc)
* CIN values to be inserted corresponding to each entity available in the attached master file. 
* Existing companies in SFDC PL Enterprise master which are not part of attachment will have Blank value in CIN field corresponding to it.
acceptance: # Both masters reflect in SFDC as described
# The companies for which CIN is blank, should reflect so in SFDC as well 
# Field values should be as per the attachment
#  PL Enterprise master is updated with new fields. Field values should be as per the attachment
# No change in PL Enterprise apart from what is described
# Both master should be configurable, add/delete/modify access to be available with L1 users
#  For Current Employer Name master, If a company is active, it should appear on UI in the drop down, else it should not be shown on UI

key: ML-18554
summary: Offer expiry batch
description: *Post deployment steps below*

During analysis of regression bug [https://fincap.atlassian.net/browse/ML-15335|https://fincap.atlassian.net/browse/ML-15335|smart-link] , we analyzed and found that the expiry batch to mark the offers expired on Production org is not scheduled

Hence, as a corrective action, we have added post deployment steps to schedule the batch.

Batch will be scheduled at 1am everyday. the batch picks records where the expiry date is less than today’s date. hence scheduling the batch after 12 AM would help to expire all the records until the previous day. 
acceptance: # Batch picks up the offers at 1am everyday which have expired before 12am. For example batch scheduled for 14th June 2023, will expire all the offers which are expired on or before 13th June

key: ML-18548
summary: KARZA_EPF API Response
description: {color:#403294}*Need Request and response structure of Kazra _EPF*{color}

{color:#403294}*And also arrays of request and response related of the build dedicated to CDRULE*{color}
acceptance: 1

key: ML-18544
summary: 15. Creation of fields for Reporting and Movement of case to Next stage
description: *Applicable* : PL (all schemes) ,HL,LAP, Gold , MEL

*Proposed* :

A new field “ EPFO Status” and “Official Email Verification Status”   to be created at applicant object 

*“ EPFO Status”*

* When Karza_EPF is not triggered, then : EPFO Status field in the backend- value to remain blank
* When Karza_EPF is triggered and API has not responded,  then EPFO Status field in the backend - value to show “In Progress” . If the API response is not received till 2 mins, (2 mins to be configurable), then EPFO Status field - value to show “Failed”
* EPFO Status field in the backend- value to be stamped as SUCCESS if success response is received from KARZA_EPF API ( UAN verification completes = when response has a tag value "Status": "Success")
* EPFO status value to be stamped as FAILED if error response is received from the latest KARZA_EPF API call.

*“Official Email Verification Status”* 

* When isResponsereceived = TRUE has not been clicked, then : “Official Email Verification Status” field in the backend- value to remain blank until the button is clicked
* When the Submit button has been clicked, then “Official Email Verification Status” field in the backend - value to show “In Progress” . If the response is not received till 2 mins, 2 mins to be configurable, then “Official Email Verification Status”{color:#36b37e} {color}field - value to show “Failed”
* Field value in the backend- value to be stamped as SUCCESS if success response is received from TRUST_SCORE ( Email verification completes = when response has a tag value "Status": "Success")
* Field value to be stamped as FAILED if error response is received from TRUST_SCORE

*Selecting either a or b radio button would be Mandatory to move to the next stage.*  On click of NEXT button without selection of a or b option, an informatory toast msg should appear ' Please select Mandatory fields to proceed further “. _This toast msg is only needed if there is no existing toast msg , developer to check and confirm this_

When verification is complete with any option a or b ( verification completes = when response has a tag value "Status": "Success"), submit button to become *inactive*

Only 1 field stamping to happen at one point of time on click of submit depending on the flow- Karza_EPF or Trust score 

Both fields should be allowed to extracted in the report format
acceptance: # Field to be created at backend for every applicant - EFPO Status & Official Email Verification Status
# Field should be available in all the applicable journeys
# Field remains blank when the case is not eligible for EPFO Waiver logic or the submit button is not clicked on UI
# When the Submit button has been clicked, then EPFO Status field or Official Email Verification Status ( depending on the flow - EPFO or Email ID) in the backend - value to show “In Progress” . If the response is not received till 2 mins, (2 mins to be configurable), then EPFO Status field - value to show “Failed”
# When the success or error response is received from the API, the field stamping should happen appropriately
# Field values stamping should not happen in both fields at the same time, as only flow is possible at one point of time
# Both fields should come in the report as well

key: ML-18522
summary: 8. KARZA_EPF API request generator
description: *Proposed* : *Request Generation for KARZA_EPF. Sample request attached*

{
  "uan": [""], >> *UAN entered by user,* [https://fincap.atlassian.net/browse/ML-19422|https://fincap.atlassian.net/browse/ML-19422|smart-link] 
  "mobile": "", >> *UAN Linked Mobile Number,* [https://fincap.atlassian.net/browse/ML-19422|https://fincap.atlassian.net/browse/ML-19422|smart-link] 
  "entityId": "", >> *CIN field stamped as* [https://fincap.atlassian.net/browse/ML-19434|https://fincap.atlassian.net/browse/ML-19434|smart-link] 
  "employerName": "", >> *Current Employer Name or Name of Corporate  ( depending on the type of journey) , Employment record object*
  "employeeName": "" >> *Applicant name : First name + Middle name + Last name (Concatenated with space in between), Applicant object ( Check the mapping)*
}
acceptance: 1.Request structure is created in the format described.

key: ML-18326
summary: Employment verification Section - Part 1
description: *Applicable* : MEL,PL,HL,LAP/Gold (Journey flows wherever office CPV can be triggered)

*Proposed* : 

A new section “ Employment Verification Details “ will be visible between Employment details and Office Address when office CPV waiver logic is satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link]

New section will be visible for each applicant type  ( even Guarantor)  whenever the logics for Office CPV are satisfied. UI/UX for next section and fields in it to be same as existing sections such as Employment details

!image-20230606-113815.png|width=1364,height=469!



In the section below question will appear

# Do you want to verify the Employment Verification using company EMAIL ID? 

Two radio buttons will appear next to it with values

Yes

No

{color:#bf2600}Selecting any one of Yes/No must be mandatory for the user to proceed to Employment Verification using UAN{color}

When user selects Yes

a field “Official EMAIL ID” to be populated on screen just below it . New field should allow only valid values which @ and .com  ( Dev to confirm the available options in Salesforce)

“Email entered has to be associated with Applicant’s latest organization. “ - Disclaimer to  be shown to the RM below the field “ Official EMAIL ID”. This field should remain editable. This is going to be a mandatory field if Yes is selected in the radio button. When user selects No in the radio button, the “Official EMAIL ID” and disclaimer should disappear 

When No is selected in the radio button Part 2 - [https://fincap.atlassian.net/browse/ML-18312|https://fincap.atlassian.net/browse/ML-18312|smart-link] 

Employment Verification to be completed using UAN details - a text should appear just below the previous question  Do you want to verify the Employment Verification using company EMAIL ID?  with No as Selected. {color:#bf2600}If user selects Yes{color}

Two fields should appear below the text 

Enter UAN

Enter UAN Linked Mobile No- Mobile number associated with LAN should be stamped in this field and field should be editable

If user updates the mobile number and new number is different from number provided in LAN , OTP verification will be done for the updated Mobile number

User should be shown a msg below the field *Enter UAN Linked Mobile No* - Mobile Number is updated, OTP verification needs to be completed

Send OTP button should appear below the above msg on UI

OTP Verification to work same as available on Consent screen, 3 retries allowed

{color:#bf2600}OTP Verification SMS Template - Open{color}

+Validations on+ +*UAN*+ +field+ : The number has to be 12 digit, only numeric. If the user enters  UAN less than 12 digit, then system to throw a toast error message “Enter 12 Digit UAN Number” (char limit of 12 to be kept configurable as this might increase in future). This is going to be a mandatory field if radio button b is selected. As soon as my user selects option a, this field will disappear.

+Validation on+ +*UAN Linked Mobile Number*+ +field+ : “Number entered has to be linked to Applicants UAN / PF Account. “ - need to show this statement as Disclaimer to the RM below the field. If user enters incorrect mobile number(alphanumeric) or less than 10 digits, then following toast error message to be shown : “Enter Valid Mobile Number” . +91 should be static value before my UAN Linked Mobile Number field. (+91 will not be included in 10 digits validation). This is going to be a mandatory field if radio button b is selected. As soon as my user selects option a, this field will disappear.
acceptance: * View should be compatible to web and mobile screens
* New section Employment Verification details is visible in the desired location when the Office CPV waiver logic is satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] 
* New section should be visible for app/co-app/Guarantor separately if both satisfy Office CPV waiver logic
* Two new radio buttons are visible
* User should be able to select only  one amongst among a or b radio button
* Without selecting a or b options, user should not be allowed to move to next stage in the cases where office CPV logic is satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link] and an informatory toast msg should appear as described)
* New submit button is visible below a and b options and continue to remain deactivated unless values are entered in mandatory fields
* On selection of a option only , new field to collect email id is enabled. 
* Once value is entered in email id field, Submit button should become active , else it will remain deactivated

key: ML-18312
summary: Employment verification Section - Part 2
description: *Applicable* : MEL,PL,HL,LAP,Gold (Journey flows wherever office CPV can be triggered)

*Proposed* : 

A new section “ Employment Verification Details “ will be visible between Employment details and Office Address when office CPV waiver logic is satisfied as per [https://fincap.atlassian.net/browse/ML-18015|https://fincap.atlassian.net/browse/ML-18015|smart-link]

New section will be visible for each applicant type  ( even Guarantor)  whenever the logics for Office CPV are satisfied. UI/UX for next section and fields in it to be same as existing sections such as Employment details

!image-20230606-113815.png|width=1364,height=469!



Enter UAN Linked Mobile No- Mobile number associated with LAN should be stamped in this field and field should be editable

If user updates the mobile number and new number is different from number provided in LAN , OTP verification will be done for the updated Mobile number

User should be shown a msg below the field *Enter UAN Linked Mobile No* - Mobile Number is updated, OTP verification needs to be completed

Send OTP button should appear below the above msg on UI

OTP Verification to work same as available on Consent screen, 3 retries allowed

{color:#bf2600}OTP Verification SMS Template - Open{color}When User selects Option(b), then 2 new field should populate on the screen, to enter the UAN and Mobile Number. (Field Name : UAN ; UAN Linked Mobile Number )

+Validations on+ +*UAN*+ +field+ : The number has to be 12 digit, only numeric. If the user enters  UAN less than 12 digit, then system to throw a toast error message “Enter 12 Digit UAN Number” (char limit of 12 to be kept configurable as this might increase in future). This is going to be a mandatory field if radio button b is selected. As soon as my user selects option a, this field will disappear.

+Validation on+ +*UAN Linked Mobile Number*+ +field+ : Mobile number has to be 10 digits, only numeric. “Number entered has to be linked to Applicants UAN / PF Account. “ - need to show this statement as Disclaimer to the RM below the field. If user enters incorrect mobile number(alphanumeric) or less than 10 digits, then following toast error message to be shown : “Enter Valid Mobile Number” . +91 should be static value before my UAN Linked Mobile Number field. (+91 will not be included in 10 digits validation). This is going to be a mandatory field if radio button b is selected. As soon as my user selects option a, this field will disappear.
acceptance: # View should be compatible to web and mobile screens
# Two new radio buttons are visible
# On selection of b option  , new field to UAN and UAN linked Mobile number is visible (Field Name : UAN ; Mobile Number )
# Once value is entered in mandatory fields, Submit button should become active , else it will remain deactivated
# User should not be able to bypass selection of a or b options and respective mandatory fields if office cpv waiver logic is satisfied at LAN level and a toast msg should appear if user directly clicks on NEXT button

key: ML-18272
summary: Hospicash configuration change
description: *Applicable* : MEL-PL ( all journey flows where hospicash is opted)

*Proposed* : Configuration set up change for Hospicash

* Tenure change from 1 to 2
* Premium change from 150 to 300
acceptance: # In all journey flows of MEL-PL, where hospicash is opted, tenure and premium should update on UI and back end as 2 and 300 respectively
# Net disbursement calculations on UI and backend should happen basis new deductions
# Emorphis and FinnOne request structures should be passed with updated tenure and premium
# App form should reflect updated tenure and premium
# Sanction letter should reflect updated tenure and premium
# End to end testing of Journey flow post changes, case should be properly disbursed

key: ML-18117
summary: Configurations for New CAM Report
description: *Applicability* : MEL-PL , HL-LAP

*Proposed* : 

to build a switch/toggle to turn on/off the build of [https://fincap.atlassian.net/browse/ML-13891|https://fincap.atlassian.net/browse/ML-13891|smart-link] 

* If the switch is on, the new format will be visible as designed in [https://fincap.atlassian.net/browse/ML-13891|https://fincap.atlassian.net/browse/ML-13891|smart-link]
* If the switch is off, the existing format will be visible as per current implementation

the switch should be allowed to turn on/off specific to any BU

* If the switch is on for MEL-PL, the new CAM Report should appear only for MEL-PL, HL-LAP would continue to have existing CAM Report format
* If the switch is on for HL-LAP, the new CAM Report should appear only for HL-LAP, MEL-PL would continue to have existing CAM Report format
* If the switch is ON for both MEL-PL, HL-LAP, the new format should be visible for both MEL-PL,HL-LAP. 
* if the switch is Off for both MEL-PL, HL-LAP, the new format should not be visible for both MEL-PL,HL-LAP

If the switch is on for HL-LAP, HL-LAP CAM Report format should appear as MEL as developed in [https://fincap.atlassian.net/browse/ML-13891|https://fincap.atlassian.net/browse/ML-13891|smart-link] 

The switch/toggle should be allowed to turn on/off as requested by L1/Product/Credit team
acceptance: # To work as described for MEL-PL and HL-LAP (all relevant journey flows)
# Switch should be allowed to turn on/off by L1/Product/Credit team
# When switch is on, new format should be visible as per requirement of [https://fincap.atlassian.net/browse/ML-13891|https://fincap.atlassian.net/browse/ML-13891|smart-link]
# When switch is off , existing implementation of CAM Report functionality should work

key: ML-18044
summary: FTS & Verifier Process post disbursement
description: FTS SALES



FTS HUB OPS

·         *Ops FTS Stage:* Go to FTS acknowledgement and user need to select the location.

·         *Choose verifying queue and select the particular case*

·         *Verifier case assign to the user*

·         *Click on edit option to claim the case*

·         *Verifier – Personal details tab:* User needs to verify the loan amount; and Click on Assign to me button to claim the case. The case details will be presented in non-editable mode. User need to verify and clear the mandatory documents. For physical case, more mandatory tabs will be there to check and clear.

*Verifier – Case Submit/Hold*

·         User gets Hold, Submit and Close options here. Comment is mandatory..
acceptance: to work as per existing build at [*capitalfirst.force.com/loans/s/fts-acknowledge*|http://capitalfirst.force.com/loans/s/fts-acknowledge]

key: ML-18041
summary: Disbursement Checker Process
description: *Checker Queue*

# Go to My Loan Activity menu to choose queue.  User needs to Click on particular case ID to claim the case.

# Only a single case can be worked on by a user at a time under a particular activity.



 

*Checker - Case Assignment Page*

# Click on Assign to Me button to claim the case.



 

*Checker - Case Claim Confirmation*



*Checker - Personal Details Tab*

# Details will be presented in non-editable mode. User only need to verify and clear mandatory documents.

# Documents that are already cleared at Login will be displayed with Green buttons and will not require clearance again at disbursement.



 

 

 

 

*Checker - Personal Details Tab*

|*Sections Under Personal Details*|
|Individual Details|
|Permanent Address|
|Residence Address|
|Office Address|
|GST Address|
|Employment Details|

 

*Checker – Personal Details*

# User Need to enter individual details of customer like DOB pan card number and aadhar last four digits.  need to check POI and POA if it is shown as required to be collected as per KYC identifier fields.

 



 

 

 

 

*Checker - Loan Details Page*

# User can verify the loan parameters against documents in this tab. All mandatory documents to be Actioned and Cleared to move to next tab. Pre-EMI is not handled in SFDC. User need to enter loan amount manually, Emi Start Date, Tenure, ROI, EMI amount. And also Repayment A/c holder name, Repayment A/c number, Repayment Bank MICR.



*Checker – Tranche Details Tab*

# User need to Check the number of Splits and click on the Split Traches and Payments button.

# User need to cross verify the splits in tranche with in favor of, FT mode, IFSC code, MICE code, Account number, Account holder name.



 

*Checker – Instrument Details Tab*

# Allows user to Verify Repayment Related Information. User need to check Mandate Category A/c number, Account holder name, Dest. account holder name, IMPS flag, If Mandate type is manual need to check PDC details like cheque number and Amount.



 

*Checker – Instrument Details Tab – Sections*



 

*Checker – Notes Tab*

# User needs to click on Next. User need to check Sanction conditions. And also validate with given documents like A/C number, Splits Related Details LAN number Split Amount Financer name.



*Checker – Case Submit/Hold*

# User gets Hold, Submit and Close options here. Comment is mandatory. Submitting the case would land the case to Finnone/SBD CPA FTS and return user to the Loan Activities Screen. If put on Hold, case would land in Sales Hold Queue for resolution.
acceptance: to work as per given requirement

key: ML-18038
summary: Disbursement Maker Process
description: *Maker Queue-*

Go to My Loan Activity menu to choose queue.  User needs to Click on particular case ID to claim the case.

# Only a single case can be worked on by a user at a time under a particular activity.



*Maker - Case Assignment Page-*

Click on Assign to Me button to claim the case.



 

 

*Maker - Case Claim Confirmation-*



*Maker - Personal Details Tab*

# Details will be presented in non-editable mode. User only need to verify and clear mandatory documents.

# Documents that are already cleared at Login will be displayed with Green buttons and will not require clearance again at disbursement.



 

*Maker - Personal Details Tab*

|*Sections Under Personal Details*|
|Individual Details|
|Permanent Address|
|Residence Address|
|Office Address|
|GST Address|
|Employment Details|

 

*Maker - Loan Details Page*

# User can verify the loan parameters against documents in this tab. All mandatory documents to be Actioned and Cleared to move to next tab. Pre-EMI is not handled in SFDC.

# User need to enter loan amount manually, Emi Start Date, Tenure, ROI, EMI amount. And also Repayment A/c holder name, Repayment A/c number, Repayment Bank MICR.

 



*Maker – Tranche Details Tab*

# User need to enter the number of Splits and click on the Split Traches and Payments button.

# User need to enter the splits in tranche with in favor of, FT mode, IFSC code, MICE code, Account number, Account holder name.



 

*Maker – Instrument Details Tab*

# Allows user to Verify and Enter Repayment Related Information.

# User need to check Mandate Category A/c number, Account holder name, Dest. account holder name, IMPS flag, If Mandate type is manual need to check PDC details like cheque number and Amount.



*Maker – Instrument Details Tab – Sections*



 

*Maker – Notes Tab*

# User needs to click on Next.

# User need to check Sanction conditions. And also validate with given documents like A/C number, Splits Related Details LAN number Split Amount Financer name.



*Maker – Case Submit/Hold*

User gets Hold, Submit and Close options here. Comment is mandatory. Submitting the case would land the case to Checker and return user to the Loan Activities Screen. If put on Hold, case would land in Sales Hold Queue for resolution.
acceptance: To work as per given description

key: ML-18026
summary: 'Punjabi' language option to be added to 'Select language' dropdown for MEL PL
description: *Applicable*- all flows of MEL-PL

*Description* : 

# Addition of a record for Punjabi in language master similar to other language records.
# Refer Hindi for example
acceptance: # In all journey flows of MEL-PL, user should be able to select Punjabi language in language drop down on Document Generation stage
# In all journey flows of MEL-PL,  when user selected Punjabi language in language drop down on Document Generation stage, then vernac documents should get generated by emorphis and document should be visible on Filenet as per current functionality with other language options such as Hindi.English
# Punjabi language should not be visible in other BUs

key: ML-18015
summary: 1. Logic to waive off Office CPV
description: *Applicable* : PL,HL,LAP-,Gold- (Journey flows wherever office CPV can be triggered)

{color:#bf2600}*Assumption* {color}{color:#bf2600}: For HL-LAP , {color}{color:#bf2600}-Gold-{color}{color:#bf2600}, policies will be similar to RPL and master fields and values will be provided in future, Logic should start running with minor updates{color}

*Proposed*

Criteria 1

# Build a switch to turn on/off the Office CPV Waiver logic. The switch to be configurable at BU level

* if the switch is on for Rural PL, the waiver logic will work for Rural PL
* if the switch is off for HL,LAP,{color:#bf2600}Gold{color} and on for RPL, the waiver logic will work for RPL only

Criteria 2

2.  When following conditions are satisfied , Office CPV waiver logic will work at BU level ( Base journey and Repeat journeys only where Office CPV waivers are possible to be triggered by FICO)  . A master should be created with BU specific fields, master should be created at BU Level. More fields should be allowed to add specific to any BU when required

+Below fields to be added in the master+ 

*RPL*

Field 1 - Employment type

Field 2 - Salary type

*RHL*

# Scheme
# Customer Segment
# Employed with
# How are you paid
# Loan Amount
# CIBIL Score

*RLAP*

# Scheme
# Customer Segment
# Earning in
# Loan Amount
# CIBIL Score

Field values to configurable for each BU at Master level, values should be allowed to be added/deleted/modfied

*For RPL*

* Employment type= Salaried
* Salary type= Salary slip

*For RHL*

# Scheme- *TBD*
# Customer Segment- *Salaried*
# Employed with - *Government/PSUs/ MNCs/ Public/Pvt Ltd companies*
# How are you paid- *Bank*
# Loan Amount - *TBD*
# CIBIL Score - *TBD*

*For RLAP*

# Scheme- *TBD*
# Customer Segment- *Salaried*
# Earning in - *Verified salaried*
# Loan Amount- *TBD*
# CIBIL Score - *TBD*

For logic to work for Office CPV, Criteria 1 will be checked and then Criteria 2 will be checked 
acceptance: # To work as described, {color:#bf2600}this has to be tested only for RPL journey, Master level testing has to be done for mentioned BUs{color}
# The switch should be able to turn on/off functionality as required for any BU
# If the switch is on for a particular BU, the office CPV logic will work in that particular BU
# Master should be configurable at BU level. New fields should be allowed to add in the master
# Field values in the master should be allowed to add/change/delete by L1/Product/Credit team
# All the combinations of On/off of switch with different BU to be tested
# Logic of Office CPV waiver at BU level to work only if when both criteria are satisfied

key: ML-17992
summary: Income and expense details captured 
description: # Eligibility:

·         Income and expense details captured from the PD app to be stored and flown into below SFDC fields:

 

|*Existing fields*|*Income logic*|
|Assessed income|Total Business Income (Rs.) - Total Business Expense (Rs.) + Income from other earning members in the family + Income from Farm Equipment (Rs.) + Income from Other Sources (Rs.) + Dairy Income|
|Agriculture Income Current Year|Agricultural Income|
|Rental Income|Income from Rental (Rs.)|

Please note: 

For the income records received from PD App , below field details should be as mentioned.

# Frequency = monthly
# Year = Latest year only (for example current year is 2023 so Year = 2023)
# To be considered for Eligibility = Yes (By default)
# How are you paid = Cash (by default)

*Note* : 

Please confirm on the below 

* If the any of the 3 income records are added by the MRO manually and also been received from PD Case ,Here the existing Income records should be updated which was previously created MRO with the updated values.
* If there is no record for any of the below 3 income head's then new records should be created in the Income Details object.
** Assessed Income
** Rental Income
** Agricultural income for Current Year



*When we update/ create new income records(from PD APP) of the above 3 incomes the "isPDIncome" flag should be marked as true.*
acceptance: Assessed, agricultural and rental income to be flown correctly to SFDC as per the logic

key: ML-17866
summary: Bureau Summary to be displayed in Applicant tab of PD Case
description: As a UW I should be to see the Bureau Summary details available for the case - Portrait mode within the applicant tab

Please find the Bureau Summary Details format:



|*Field*|*Value*|*Type of field*|
|Sr.No|Sequence 1,2,3…|Numeric|
|Applicant Type|Name of applicant|Alphanumeric|
|Finance Name|Bank/NBFC Name|Alphanumeric|
|Type of Loan|Account Type|Alphanumeric|
|Loan Amount|Sanction Amount|Numeric|
|EMI Amount|EMI Amount|Numeric|
|EMI Paid|Number of emi paid|Numeric|
|EMI Left|Number of emi left|Numeric|
|Total Tenure|Tenure in Month|Numeric|
|MOB|Tenure in Month|Numeric|
|Consider for Obligation|(Account Status Active/Closed)|Checkbox|
|Principal Outstanding|Balance Outstanding|Numeric|
|Bounce in Last 6 Month|Number of bounces in Last 6 Month|Numeric|
|Bounce in Last 12 Month|Number of bounces in Last 12 Month|Numeric|
|Bounce in Last 18 Month|Number of bounces in Last 18 Month|Numeric|



Please find the new observations for the Bureau Summary:

* Sorting logic on the basis of Status, Applicant, Record Created Timestamp in that order
* Applicant and Co-Applicant Name to be included in the Bureau Summary Details
* Serial Number to be continued for all records - not to be only for the page as per pagination (4 records)
* Bureau Summary details to be displayed after the Summary section in PD Report, post case closure

Both Applicant and Co-Applicant details to be displayed for the PD Cases irrespective of the customer to whom the PD Case is triggered
acceptance: As a UW, the user should be able to view the Bureau summary details in the above specified format in the Applicant tab

As a UW, post submission of PD Case, the user should be able to view the Bureau Summary Details in PD Report with Section label as Bureau Summary Details below the Summary Section in PD Report

key: ML-17863
summary: Results tab for PD Case
description: Results tab to be displayed with the below mentioned fields:

* Case Resolution: Case_Resolution__c
* Decline Reason: PD_Case_Decline_Reason__c
* Business Description
* PD Officer Comments

All the fields would be mandatory to be filled and post filling all the details, the user proceeds ahead to the next image upload section - the user has to traverse back to the native app from community page. Dev Team to handle the redirection to app. Link to be provided.

--Detailed Logic to be mentioned for redirection--
acceptance: nan

key: ML-17860
summary: Applicant Tab for PD Case
description: Applicant tab to be displayed with the basic details of the applicant and Co-Applicant along with the loan application related details as mentioned below:
(Auto-populated Values)

Loan Related Information

* Login Date Case.CreatedDate
* Requested Loan Amount Case.loan_application__r.Requested_Loan_Amount__c
* Scheme Case.loan_application__r.Scheme__c

Applicant Related Information

* Customer Name Applicant__c.Customer_Name__c
* Customer City Address__c.City__c
* Customer State Address__c.State__c
* Address Address__c.Line_1__c, Address__c.Line_2__c, Address__c.Line_3__c
* Landmark Address__c.Landmark__c
* Pincode Address__c.Pincode__c

Co-Applicant Related Information

* Co-Applicant Name Applicant__c.Customer_Name__c
* Relationship with Applicant Applicant__c.Relationship_With_Applicant__c
* Co-Applicant Address Same as above details (City, State, Address, Pincode)

(To be selected by Credit Manager)

* Nature Of Business Case.Nature_of_Business__c
* Business Category Case.Business_Category__c
* Person Contacted Case.Person_Contacted__c
* Other Person Contacted Case.Other_Person_Contacted__c

As a Credit Manager, once I start my PD, I should be able to see the Applicant tab in my PD App with all the above mentioned details. This should be the landing page of the Community to be rendered in my PD App
acceptance: nan

key: ML-17857
summary: Assessment Engine Code Changes - Machine List
description: As a credit manager, I should be able to access a new subsection like Obligation/Assets  under Income, and named as Machine type and  the subsection rendering flow at group level should be handled. 

|Type of Machine|Picklist|*Exhaustive Values:*
Handloom
Power Loom
Rapier
Jacquard
Ribbon|
|No of Machines|Number|*Sample Value:* 4|
|Income from each machine (Rs.)|Currency|*Sample Value:* 26000|

The total income generated (against the Machine List section) would be the cumulative sum of all “Income from each machine”

Fields to be visible in the existing reports
acceptance: nan

key: ML-17854
summary: Business Category and Persona or Assessment Mapping
description: As a credit manager, I should see the Modified settings with respective Rural personas and business category (Same as Persona Names) as drop-down should be available at case level

When the user selects the business category, the Persona or Assessment mapped against the selected business category would be displayed

As opposed to Urban PD Implementation, business categories and Persona mapping would one to one relationship with business categories labels/names similar to that of Persona names/labels

We need to display the “*Persona*” Name on selection of *Business Category* field selection on Applicant Tab for PD Case
acceptance: nan

key: ML-17851
summary: PD Case Report with all PD details
description: PD Case report (pdf report) to be generated only for PD Cases post successful submission from PD App

# Out of scope: Office CPV - Salaried and Self Employed; Residence CPV Cases
acceptance: nan

key: ML-17848
summary: Update existing Assessment - Fabrication, Cattle-rearer Survey, Textile Manufacturing and Others
description: As a credit manager, I should see the following changes in the existing assessment for Fabrication, Cattle-rearer Survey, Textile Manufacturing and Others

# Delete unwanted questions – Household section questions, questions in other sections
# Update group level settings like group level formula, group Sequence, validation message, Validation Condition
# Update Persona level settings like formula and other setting
# Verifying the entered questions
# Update existing personas questions (Total 15)  
a. formula at question level
b. Max Range
c. Min Range
d. Threshold range
e. Parent child relationship
f. Sequence
g. Datatype if any
acceptance: Credit manager should have access to the mentioned changes in the existing assessment

key: ML-17845
summary: Update existing Assessment - Pharmaceutical Retailer, Salon Survey, Kirana Store, Food Business Restaurant, Apparel Retailer
description: As a credit manager, I should see the following changes in the existing assessment for Pharmaceutical Retailer, Salon Survey, Kirana Store, Food Business Restaurant, Apparel Retailer

# Delete unwanted questions – Household section questions, questions in other sections
# Update group level settings like group level formula, group Sequence, validation message, Validation Condition
# Update Persona level settings like formula and other setting
# Verifying the entered questions
# Update existing personas questions (Total 15)  
a. formula at question level
b. Max Range
c. Min Range
d. Threshold range
e. Parent child relationship
f. Sequence
g. Datatype if any
acceptance: Credit manager should have access to the mentioned changes in the existing assessment

key: ML-17842
summary: Update existing Assessment - Tailoring, Sanitary & Hardware, Carpenter, Garage, Perishable Goods, Electronics
description: As a credit manager, I should see the following changes in the existing assessment for Tailoring, Sanitary & Hardware, Carpenter, Garage, Perishable Goods, Electronics

# Delete unwanted questions – Household section questions, questions in other sections
# Update group level settings like group level formula, group Sequence, validation message, Validation Condition
# Update Persona level settings like formula and other setting
# Verifying the entered questions (Which were updated)
# Update existing personas questions (Total 15)
a. formula at question level
b. Max Range
c. Min Range
d. Threshold range
e. Parent child relationship
f. Sequence
g. Datatype if any
acceptance: Credit manager should have access to the mentioned changes in the existing assessment

key: ML-17839
summary: Underwriter Login and Dashboard - PD App
description: As a Underwriter/Credit manager, I should be able to Log into PD App and view the Dashboard ( list of cases with their respective status - New and Closed)

* Cases to be divided in three sections based on the decision taken by the Underwriter, i.e., Assigned, Saved, Completed
* *Assigned*: Cases sent from the SFDC to the Underwriter, this would also capture the WIP Cases - Cases started and initiated by Credit Manager but still not closed from PD App
* *Saved*: *WIP Case photos, not the cases itself*, not submitted from PD App, still in the verifier queue and not submitted from PD App end
* *Completed*: All cases which have been completed by the Underwriter in the PD App are moved to the “Completed” queue. Cases which were closed from the app for past 90 days will be visible. No further changes will be possible on the completed cases on the (after final submit button click)
acceptance: Case should be listed with all loan details. User on logging in as UW should be able to see cases assigned under his queue

key: ML-17836
summary: FICO Validations Failure Response handling - PD Community
description: Need to check with the FICO Team and Rural Team

* Timeout Error exception - Text to be displayed
* Mule Downtime - Different Response



*Note*: Message to be displayed for Fico error: 

*Fico Validations failed. Please try again.*

error reason to mentioned below the message.
acceptance: Fico validations failure to be displayed

key: ML-17833
summary: FICO Validations Success Response handling - PD Community
description: Once the FICO response comes through, FICO will be sending an array of validations (Expected outcome)- Validations to be displayed as "LABEL" and there should be a free textbox against each validation where credit manager can add his comments/remarks - dynamic display - related list against the case object

Financial tab after summary section - Validations section to be displayed

Once the validations are displayed, the user will have an option to go back to the financial tab questions and change the field values and all fields are to be editable, and click on the next button again to call FICO Validations integration message - the process as described in FICO Request to be followed again.

The user without changing the above PD details, can also have an option to fill the FICO validations comments and proceed ahead to the next tab

If FICO doesn't send any validations within the response, PD App will display a toast message or pop-up message saying "*No Validations triggered. Please proceed ahead*". Validations section will not be displayed in such scenarios under the summary section. FICO to return blank array in such scenarios

*Note: 1.PD report should consist of Validations section above the summary*

# Applicant Tab to be view only after final submit.
acceptance: USer should be able to view Fico validations

key: ML-17814
summary: For PL Journey, Purpose of Loan field to be captured mandatorily from the user
description: *Current Implementation:*

# Loan Purpose field is captured on Loan Details screen which is nonmandatory and a free text field.
# Value gets stamped at loan application field Loan_Purpose__c
!image-20230519-053656.png|width=80.6577480490524%!

*Expected Implementation:*

# Loan Purpose field to be a picklist field with below picklist values. FIeld picklist values should be configurable for any new value to be added in future.
## Wedding Expense
## Medical emergency
## Home Purchase/ Renovation
## Vacation
## Higher Education
## Asset Purchase
## Debt Consolidation
## Agricultural use
## Business Expansion
# By Default, blank value will be stamped in the field
# Field to be editable and user will select the picklist value as applicable to loan.
# Loan Purpose field will be a mandatory field on UI. User will not be allowed to proceed to next screen without capturing the picklist value from the above list.
# Applicable for fresh loans only. No handling required for WIP/Old loans
# In case of retrigger, value selected earlier will be visible with field editable to user
# For PL repeat loans, the field picklist value will get prepopulated from base loan. Field will be editable on UI.
# The value selected should get autopopulated on Application form document field- Purpose of Loan
!image-20230518-105728.png|width=97.32441471571906%!
acceptance: # user is able to see Purpose of loan field as Picklist field
# user is able to see dropdown values as per story
# user is not able to proceed without capturing the picklist value to next screen
# asterisk mark is visible at field label
# user is able to see the selected picklist value populated on application form document generated at Doc gen screen
# same picklist should be visible on Underwriting screen with the value selected on Loan Details screen prepopulated. FIeld to be mandatory on BCM screen.
# {color:#bf2600}Field should be editable at UW screen {color}[~accountid:619dd2623618cd006f8404ba] [~accountid:60c99167a01e11006a76926c] [~accountid:60a66c4b99b21f007018b9f5] 
# Scenario to be tested for Single KYC Success loan application
# No impact on other BUs- MEL,HL, LAP

key: ML-17811
summary: ROI changes for RPL Repeat Scheme with Salary Type = Cash
description: *Current Implementation:*

Currently the ROI value configured for RPL Repeat Scheme for Salary Type = Cash for a loan amount range of 50000 to 75000 is 23.5% in scheme metadata.

!image-20230519-062308.png|width=91.66666666666666%!

!image-20230518-092412.png|width=91.66666666666666%!

*Expected Implementation:*

For PL Repeat journey, for RPL Repeat Scheme,

For Loan Amount range of >= 50000 to 75000, *25.5%* of ROI will be Applicable for Salary Type = Cash.

The ROI value will be changed from 23.5% to *25.5%*.

This change will be applicable to Bank and IFBL workflow
acceptance: # for RPL Repeat Scheme, For Loan Amount range of >= 50000 to 75000, *25.5%* of ROI will be Applicable for Salary Type = Cash.
# scheme Metadata records are updated to 25.5% 
# 25.5% is getting stamped on Loan Details screen on UI in ROI field

key: ML-17793
summary: Remove the system debug statements in SFDC
description: To remove the system debug statements in the org where it is not needed and put a config check where  the system debugs are required and it will be controlled by the config

Proposed -

config - create a custom label - isDebuggingEnabled (default = false) and use this where the debugs are needed when this label is turned True.
acceptance: System should work as is. there is no change in the logic or functionality. This story will only comment out the system debug statements in the APex code.

key: ML-17702
summary: SOQL inside Loop :Tech Initiative- MEL-PL
description: [~accountid:62502d37f6a2690069623f4a] [~accountid:62fc835c1e82e839c24fe8ec] this Jira will be for MEL-PL changes. add technical description as per scope

RE: SOQL inside Loop :Tech Initiative

{noformat}{noformat}
acceptance: [~accountid:633fe428f568615bdc811e0d] Dev team had specifically called out things to be tested in Jira comments. I am updating AC to help testers 

As requested - in the SOQL changes, the classes related to the below screens have been modified. Hence the respective screen functionality needs to be tested.

||Screens affected||
||Loan Asset/ROI Stamping in all stages||
||Customer flow loan sharing logic after drop off MEL/PL||
||Loan Assignment||
||Data Verification - Check verification records to be created or updated during Data verification stage||
||UW - BCM Decision scenarios test and next steps based on the decision||
||Document Upload||
||Sanction||
||Applicant||
||Document Generation||
||Telecaller Batch||
||Telecaller Flow||
||Karza aadhar masking Api and data stamping based on response , Send emails and SMS for posidex refer cases,||

key: ML-17650
summary: Revision of Charge IDs mapped to PMJJBY and PMSBY Insurance Premiums 
description: [~accountid:6077d22c852e71006c8cfce7] [~accountid:62fc835c1e82e839c24fe8ec] {color:#ff991f}this change is only needed for Production environment. Please confirm if this is a code change or config change.{color}

SFDC should send below Charge IDs in FinnOne submit request when user opts for PMJJBY/PMSBY Insurance  premiums



!image-20230508-124319 (5dd384da-faf6-441c-954d-4d7ba265384e).png|width=499,height=65!

PMJJBY Insurance Premium - Charge ID 704984

PMSBY Insurance Premium- Charge ID 704985
acceptance: When user opts-in for PMJJBY or PMSBY insurance policy, in FinnOne Submit request SFDC should send the below revised Charge IDs in the charge array.

PMJJBY Insurance Premium - Charge ID 704984

PMSBY Insurance Premium- Charge ID 704985

key: ML-17344
summary: UAP consent clause to be added to app form for MEL
description: *Applicable* :

All journey flows of RMEL including top up

*Proposed* -

Please add below UAP clause in the RMEL app form in the new header :

‘I provide consent to *IDFC First Bank Limited* (DA) for sharing my required information (including Aadhar) for getting Udyam Registration.'



*Location of the above clause* - 

Above most 'Important Terms and Charges' section. Font size and style of clause as per existing app form.
acceptance: * Given journey flow is of any RMEL base or top-up flow, when application form is generated for any WIP or fresh case, then the desired changes should reflect in Application form.

key: ML-17325
summary: Staff selection should not get cloned from base loan application for PL Repeat Loans on Employment Details record
description: *Current Implementation:*

Below two fields are getting cloned on EMployment record for app, coapps:

# Staff (Y/N)
# IDFC First Bank Staff (Yes/No)

*Expected Implementation:*

# Staff selection should not get cloned from base loan application for PL Repeat Loans on Employment Details record
# Field values will be blank first. Once user selects staff selection for Applicant/Coapplicant, post that these values will get stamped on Employment Record of app/coapp in PL Repeat loan
acceptance: # Staff selection is not getting stamped from base loan on Employment, Applicant record for app/coapps
# Staff selection on UI, Applicant, Employment should be in sync for app/coapps in PL repeat loans
# Bank Staff functionality is working as expected on Employment Screen as per Staff selection in PL Repeat loan 

key: ML-17294
summary: New CAM Report Document - Part 16 - Subjective Condition, footer text
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Subjective Condition* section and footer text so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

Footer text on MEL CAM:

!image-20230426-072043.png|width=1244,height=281!

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Subjective Condition* as 17th section on new MEL CAM report document. For PL new CAM Report, same section will be visible as 15th Section on PL CAM Report document.
# Section UI should be visible as below for MEL, PL BU:
!image-20230508-063238.png|width=1357,height=223!

# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# Field to be visible under the section:

|Date of creation|
|Created by|
|Conditions|

4. *Subjective Condition* section will be visible as blank with no row entries on MEL, PL new cam reports.

5. Below static text should be visible for MEL, PL CAM reports below the *Subjective Condition* as footer text for complete cam report document generated:

!image-20230508-063245.png|width=1357,height=223!
acceptance: # *Subjective Condition* section is visible on MEL new format CAM report document. Section is visible as 17th section on generated document below *Notepad* section.
# *Subjective Condition* section is visible on PL new format CAM report document. Section is visible as 15th section on generated document below *Notepad* section.
# For MEL, PL CAM reports, section UI is visible as per description and section is visible as blank
# user is able to see the static text at the end of CAM report document at the footer once CAM report is generated for MEL and PL loans 
# {color:#ff991f}CAM Report is available with all the applicable sections as built in {color}[https://fincap.atlassian.net/browse/ML-13891|https://fincap.atlassian.net/browse/ML-13891|smart-link]{color:#ff991f}  for MEL-PL.  CAM report should be accessible at Doc generation and UW as applicable for the journey flow{color}
# {color:#ff991f}All the BCM/CCM/NCMS are able to access and update the sections in CAM Report as per existing funcitonality{color}
# {color:#ff991f}Switch functionality should work as{color} [https://fincap.atlassian.net/browse/ML-18117|https://fincap.atlassian.net/browse/ML-18117|smart-link] 
# {color:#ff991f}HL-LAP CAM Report format should appear as MEL CAM Report format, CAM Report should be visible for HL-LAP in UW/Document Generation ( as applicable) as per the journey flow of HL-LAP{color}

key: ML-17291
summary: New CAM Report Document - Part 15 - Notepad
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Notepad* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Notepad* as 16th section on new MEL CAM report document. For PL new CAM Report, same section will be visible as 14th Section on PL CAM Report document. 
# Section UI should be visible as below for MEL, PL BU:
!image-20230508-063128.png|width=1357,height=113!

# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# All the notes added by the BCM users in the notepad section on Underwriting should be visible one below other.
# Field mapping-

|*CAM Field*| |*SFDC UI FIeld*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Notepad code|AC-5401|[Sr.No|http://Sr.No]|Name|Application_Comment__c| |
|Underwriter Name| |Underwriter Name|CPA_Name__c|Application_Comment__c| |
|Date and Time|17/02/2022 21:40|Date and Time|?|Application_Comment__c|Note creation time. Format-17/02/2022 21:40
DD/MM/YYYY, time in 24hr format|
|Comment| |Comment|Comments__c|Application_Comment__c|Can be long text|
acceptance: # *Notepad* section is visible on MEL new format CAM report document. Section is visible as 16th section on generated document below *Decisions Return/Audit History* section.
# *Notepad* section is visible on PL new format CAM report document. Section is visible as 14th section on generated document below *Decisions Return/Audit History* section.
# For MEL, PL CAM reports, section UI is visible as per description
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# all the notes added in loan in notepad section by all the BCMs of all levels are visible
# {color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17288
summary: New CAM Report Document - Part 14 - Decisions Return/Audit History
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Decisions Return/Audit History* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys, {color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

MEL CAM:

!image-20230426-065222.png|width=1318,height=109!

PL CAM:

!image-20230426-065242.png|width=1238,height=80!

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Decisions Return/Audit History* as 15th section on new MEL CAM report document. For PL new CAM Report, same section will be visible as 13th Section on PL CAM Report document.
# Section UI should be visible as below for MEL, PL BU:
!image-20230508-063036.png|width=1362,height=119!
# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# All the decisions (approve/forward/reject etc) taken by the BCM/CCM/NCM of level L1 to L5 in the underwriting stage will be visible one below other. If there are no decisions taken yet on loan at UW, the section will be visible but no entries will be visible in section.
# Field mapping-

|*CAM Field*| |*SFDC UI FIeld*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|DECISION| |Decision|Decision_Master_Name__c|Decision__c| |
|Comments| |Decision Remark|Comments__c|Decision__c| |
|Created Date|07-Dec-21 06:27:17 pm"|Date and Time|Created_Date__c|Decision__c|Expected format- 20/04/2023, 10:40 am|
|Created By|??|?|Created By|Decision__c| |
|Underwriter Level| |?|?| |UW level of BCM taking any decision on loan|
|Covenant|FALSE|?|Covenant__c|Decision__c|Others reasons(Sanction Conditions)
UND Reason 5- Approve - to be checked
[~accountid:60c99167a01e11006a76926c] [~accountid:619dd2623618cd006f8404ba] {color:#ff991f}please review this from testing POV{color}|
acceptance: # *Decisions Return/Audit History* section is visible on MEL new format CAM report document. Section is visible as 15th section on generated document below *Deviation Mitigant* section.
# *Decisions Return/Audit History* section is visible on PL new format CAM report document. Section is visible as 13th section on generated document below *Deviation Mitigant* section.
# For MEL, PL CAM reports, section UI is visible as per description
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# all the decisions taken by all the BCMs of all levels are visible
# {color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17284
summary: New CAM Report Document - Part 13 - Deviation Mitigant
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Deviation Mitigant* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Deviation Mitigant* as 14th section on new MEL CAM report document. For PL new CAM Report, same section will be visible as 12th Section on PL CAM Report document.
# Section UI should be visible as below for MEL, PL BU:
!image-20230508-062859.png|width=1356,height=94!
# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# All the mitigants added by the BCM in the underwriting stage will be visible one below other. If there are no mitigants added in loan, the section will be visible but no entries will be visible in section.
# Field mapping-

|*FIeld Name*| |*SFDC UI FIeld*|*SFDC FIeld Mapping*|*SFDC object Mapping*|*Logic/Description*|
|Sr No.|1,2,3..|Sr No.|?| | |
|Mitigant|?|Mitigant|Comments__c|Mitigation__c| |
acceptance: # *Deviation Mitigant* section is visible on MEL new format CAM report document. Section is visible as 14th section on generated document below *Deviation Details* section.
# *Deviation Mitigant* section is visible on PL new format CAM report document. Section is visible as 12th section on generated document below *Deviation Details* section.
# For MEL, PL CAM reports, section UI is visible as per description
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# All the mitigants added by BCM user are visible
# if no mitigants are added, section is visible with no entries in the section.
# mitigants added by all the BCM/CCM/NCM users are visible in forward scenarios as per current implementation
# {color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17236
summary: New CAM Report Document - Part 12 - Deviation Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Deviation Details* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

MEL CAM Report:

!image-20230425-121450.png|width=1259,height=110!

PL CAM Report:

!image-20230425-121518.png|width=1245,height=55!

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Deviation Details* as 13th section on new MEL CAM report document. For PL new CAM Report, same section will be visible as 11th Section on PL CAM Report document.
# Section UI should be visible as below for MEL, PL BU:
!image-20230508-055845.png|width=97.32441471571906%!

# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# Field mapping as below-

|*CAM Report FIeld Name*| |*SFDC UI Name*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Comment/Description*|
|Deviation Description| |Deviation Description|Deviation_Description__c|Deviation__c|If there are no deviations,section will be visible with no entries|
|Level| |Approval Level|Level__c|Deviation__c| |
|Deviation Type| |?|Deviation_Type__c|Deviation__c| |
|Created By| |Raised By|CreatedBy|Deviation__c| |
|Created Date|Thu Feb 17 15:50:11
GMT 2022|?|CreatedDate|Deviation__c|Expected Date Format-
20/04/2023, 10:40 am
DD/MM/YYYY, 12hr time format|
|Approved/Reject By| |Approved By|Approved_By__c|Deviation__c|Rejected By?|
|Apr/Rej Date|Thu Feb 17 15:50:11
GMT 2022|?|?| |BCM Approval/Rejection Current Date, Time
Format- Thu Feb 17 15:50:11
GMT 2022|
|Status|Approved/Reject|?|Status__c|Deviation__c|APPROVE, Pending|

*5. MEL CAM reusability-*

# Rename as Deviation Details
# Arrange as 13th section
# Row column view
# add: Apr/Rej Date
# Remove: Decision Comment
acceptance: # *Deviation Details* section is visible on MEL new format CAM report document. Section is visible as 13th section on generated document below Verification Details (Applicant wise) section.
# *Deviation Details* section is visible on PL new format CAM report document. Section is visible as 11th section on generated document below Verification Details (Applicant wise) section.
# user is able to see system as well as manual deviations
# For MEL, PL CAM reports, section UI is visible as per description
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# deviations added by all the BCM/CCM/NCM users are visible in forward scenarios
# Below fields are visible on CAM Report section for MEL, PL-

|Deviation Description|
|Level|
|Deviation Type|
|Created By|
|Created Date|
|Approved/Reject By|
|Apr/Rej Date|
|Status|

{color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17226
summary: New CAM Report Document - Part 11 - Verification Details (Applicant wise)
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Verification Details (Applicant wise)* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

MEL CAM Report:

!image-20230425-112824.png|width=1309,height=276!

PL CAM Report:

!image-20230425-112850.png|width=1238,height=103!

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see  *Verification Details (Applicant wise)* as 12th section on new MEL CAM report document. For PL new CAM Report, same section will be visible as 10th Section on PL CAM Report document.
# Details will be captured for App, coapps added in Loan Application
# Section UI should be visible as below for MEL, PL BU:
!image-20230508-055737.png|width=1357,height=122!
# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# Record type API name will be visible in Record Type Name
# Field mapping as below- 

|*CAM Report FIeld Name*| |*SFDC UI Name*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Comment/Description*|
|Record Type Name|Residence CPV, Office CPV , TelePD, VIDEO PD, Persona PD| |Record_Type_Name__c|Case|E.g.- MEL_Office_Contact_Point_Verification
Show open, closed cases. Show all cases of particular type {color:#ff991f}together{color}
Separate row for each reattempt of Case
Show entry only if case is initiated. Else section will be visible but no row entries will be visible {color:#ff991f}if no cases are initiated{color}
sequence to be followed- First all cases of applicant will be shown. Below that Coapplicant cases will be shown|
|Applicant|Sanjay Pal| |?|Case|App, coapp names|
|Case Number| |?|CaseNumber|Case|SFDC Case number|
|Created Date| |?|CreatedDate|Case|Date, Time
Standard format - 20/04/2023, 10:40 am
Date in DD/MM/YYYY format. Time in 12hr format|
|Date/Time Closed| |?|ClosedDate|Case|Date, Time
Standard format - 20/04/2023, 10:40 am
Date in DD/MM/YYYY format. Time in 12hr format

To be kept blank for Open/in progress cases|
|Case
Resolution|Positive/Negative
For Video PD- Video PD successful/Video PD successful with issues/Video PD unsuccessful/Conducted Physical PD|Video PD Status|*For CPV cases-* {color:#ff991f}*Positive/Negative ( check case object)*{color}
For Video PD cases- Video_PD_Status__c|Case|Positive/Negative
For Video PD- Video PD successful/Video PD successful with issues/Video PD unsuccessful/Conducted Physical PD|
|Reason| |Reason|Reason__c|Case|If Negative, then Negative Reason|
|-Attempt no.-| |-?-|-?-|-?-|-If not getting stamped, field to be removed -- *-Open-*|
|Owner Name| | |[Owner.Name|http://Owner.Name]|Case|Case owner
BCM Name|



7. *MEL Current CAM Report Reusability:*

# Rename section to "Verification Details (Applicant wise)"
# Arrange as 12th Section
# Consider Record types of-  Residence CPV, Office CPV , TelePD, EUC Verification, VIDEO PD, Persona PD
# Add columns: Case Number, Date/Time Closed, Date/Time Closed,Reason, Owner Name
# Remove Case Resolution, Supervisor COmment
# -Rename Attempts to Attempt no.-
# Rearrange fields
acceptance: # *Verification Details (Applicant wise)* section is visible on MEL new format CAM report document. Section is visible as 12th section on generated document below *Obligation Details* section.
# *Verification Details (Applicant wise)* section is visible on PL new format CAM report document. Section is visible as 10th section on generated document below *Obligation Details* section.
# For MEL, PL CAM reports, section UI is visible as per description
# Row entries are visible for each applicant and coapplicant for all the initiated (status=open), closed(status=closed) cases of Office, Resi CPV, Tele PD, EUC, Video PD, Persona PD. 
# all the cases of app, coapps are visible in seperate row one below other. E.g. If there are 2 office CPV cases are present one is closed and one is open, then both are visible on CAM report  
# If cases are reinitiated by the user, reinitiated cases are also getting visible in section. 
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# If a case of particular record type is not initiated, then row entries are not visible for the same for particular applicant/coapplicant but user is able to see the section on CAM report
# Below fields are visible on CAM Report section for MEL-

|Record Type Name|
|Applicant|
|Case Number|
|Created Date|
|Date/Time Closed|
|Case
Resolution|
|Reason|
|-Attempt no.-|
|Owner Name|

{color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17223
summary: New CAM Report Document - Part 10 - Obligation Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Obligation Details* section so that I can verify the same.



*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys



*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Obligation Details* as 11th section on new MEL CAM report document. For PL, new CAM Report, same section will be visible as 9th Section on PL CAM Report document.
#  Section UI should be visible as below for MEL, PL BU:
!image-20230508-053424.png|width=97.32441471571906%!
# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# Field Mapping as below:

|*CAM Report FIeld*| |*SFDC UI FIeld*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Customer_Name|Ashok Kachare|Name|Applicant_Name__c|Obligation__c|Applicable to Primary Applicant and coapplicant
If no obligations are received, then No entries of obligation will be visible on document. But Section will be visible|
|Account Type| |Account Type|Account_Type__c|Obligation__c| |
|Sanctioned Amount| |Sanctioned Amount|Sanctioned_Amount__c|Obligation__c| |
|EMI Amount| |EMI Amount|EMI_Amount__c|Obligation__c| |
|Balance Outstanding| |Balance Outstanding|Balance_Outstanding__c|Obligation__c| |
|Account Status| |Account Status|Account_Status__c|Obligation__c| |
|Closed Date| |Closed Date|Closed_Date__c|Obligation__c| |
|KCC\Mudra Loan| |KCC\Mudra Loan|KCC_Mudra_loan__c|Obligation__c|`|
acceptance: # *Obligation Details* section is visible on MEL new format CAM report document. Section is visible as 11th section on generated document below *Banking Details* section.
# *Obligation Details* section is visible on PL new format CAM report document. Section is visible as 9th section on generated document below *Banking Details* section.
# For MEL, PL CAM reports, section UI as per description
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# If No obligations are received from FICO, then user is able to see the section but row entries are not visible
# Below fields are visible on CAM Report *Obligation Details* section for MEL, PL- 

|Customer_Name|
|Account Type|
|Sanctioned Amount|
|EMI Amount|
|Balance Outstanding|
|Account Status|
|Closed Date|
|KCC\Mudra Loan|

# {color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17184
summary: New CAM Report Document - Part 9 -  Financial Detail, Banking Details (MEL only)
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Financial Detail, Banking Details* section so that I can verify the same.

*Applicable BU:* MEL Base, MEL Repeat,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for CJ, -MEL+-

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Financial Detail* as 9th section and *Banking Details* as 10th section on new CAM report document of MEL.
# Section UI should be visible as below for MEL BU:
!image-20230508-053311.png|width=97.32441471571906%!
# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# Details will be shown on CAM report in a separate row for each app, coapp one below other.
# Field mapping for *Financial Detail* Section:

|*Field Label*| |*SFDC UI FIeld*|*SFDC Field Mapping*|*SFDC object Mapping*|*Logic/Description*|
|Applicant|Kavishvar Pande (Applicant)
______ (Co-applicant)|Applicant Type|Applicant_Coapplicant__c.Name|Income_Details__c|FIeld value should be populated as- First Name, Last Name (Type)
E.g.- Kavishvar Pande (Applicant)
Number sequencing will not be added/visible in values
Coapplicants row entries should be visible as- First added should be visible at top|
|Head| |Head|Head__c|Income_Details__c| |
|Income Value| |Net Annual Amount| |?| |
|Date of Filing ITR| |Date of Filing ITR|Date_of_ITR__c|Income_Details__c| |
|Frequency| |Frequency|Frequency__c|Income_Details__c| |
|Year| |Year|Year__c|Income_Details__c| |
|To be consider for Eligibility:| |?|Consider_for_Eligibility__c|Income_Details__c| |
|To be consider for Surrogate:| |?|Consider_for_Surrogate__c|Income_Details__c| |

5. Field mapping for *Banking Details* Section:

|*Field Label*| |*SFDC Field on UI*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Customer_Name|Kavishvar Pande (Applicant)
______ (Co-applicant)| | | |*Field values will be blank. Only the column header will be visible*|
|Bank Name|HDFC Bank|Bank Name|Bank_Name__c or Name|Bank_Detail__c| |
|Account No.| |Account Number|Account_Number__c|Bank_Detail__c| |
|Account Type| |Account Type|Account_Type__c|Bank_Detail__c| |
|Total Credits|?|Total Credits|Total_Credits__c|Bank_Detail__c| |
|Total Number of Credits|?|Total Number of Credits|Total_number_of_credits__c|Bank_Detail__c| |
|To be consider for Eligibility|True
False|To be consider for Eligibility|Consider_for_Eligibility__c|Bank_Detail__c| |
|To be consider for Surrogate|True
False|To be consider for Surrogate|Consider_for_surrogate__c|Bank_Detail__c| |
acceptance: # Sections are not visible on PL BU cam report
# *Financial Detail, Banking Details* sections are visible on new format CAM report document. Section is visible as 9th, 10th respectively section on generated document below Income and Expense Details section
# All the incomes present in SFDC are visible for each App, coapp in a separate row
# The bank details records added at Underwriting stage will be visible. Disbursement Bank details should not be visible on CAM report document [~accountid:60c99167a01e11006a76926c] [~accountid:619dd2623618cd006f8404ba]{color:#ff991f} can you confirm if this is a valid scenario and testable?{color}
# Section UI visible as per description
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# {color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17181
summary: New CAM Report Document - Part 8 - Income and Expense Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Income and Expense Details*  section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

MEL CAM:

!image-20230424-115554.png|width=1275,height=171!

*Description:*

# Section UI should be visible as below for MEL BU:
!image-20230508-053035.png|width=88.99108138238573%!

# Section UI should be visible as below for PL BU:
!image-20230508-053147.png|width=88.99108138238573%!

3. *Expected UI:*

# Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
# Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
# All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
# Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
# The section should get shifted to next page if any cell value is exceeding the page limit/page size.

*4. MEL, PL Common Development*:

!image-20230424-115949.png|width=618,height=68!

a. Source if Income, Monthly Income from this source will be captured for each app, coapp present in loan {color:#ff991f}(Income logic should work as per current implementation for all scenarios if income is added by IRO/ Received from PD/ Added by BCM, Latest incomes should be visible in CAM Report ){color}

b. Field Mapping as below:

|*Field Label*| |*SFDC Field on UI*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|*Applicant*|Kavishvar Pande (Applicant)
______ (Co-applicant 1)|Applicant  (Type)|Applicant_Coapplicant__c.Name|Income_Details__c|FIeld value should be populated as- First Name, Last Name (Type)
E.g.- Kavishvar Pande (Applicant)
Number sequencing will not be added/visible in values
Coapplicants row entries should be visible as- First added should be visible at top

Applicant Name cell to be merged for all the Income Source type records for app, coapps
{color:#ff991f}Example Kavishvar Pande (Applicant) should appear once in a merged cell for all different source of income{color}|
|Source of Income|Salaried
Dairy
Salary|Source of Income|Source_Of_Income__c|Income_Details__c| |
|Monthly Income from this source| |Monthly Income from this source|Total_Income__c|Income_Details__c| |

5. *MEL CAM Development for MEL specific Fields:*

|*Field Label*|*SFDC Field on UI*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|No. of Adults|No. of Adults|No_of_Adults__c|Expense_Details__c| |
|No. of Children|No. of Children|No_of_Children__c|Expense_Details__c| |
|Business Expenses|Business Expenses|Business_Expenses__c|Expense_Details__c| |
|Household expenses|Other Household Expenses|Other_Household_Expenses__c|Expense_Details__c| |

6. *PL CAM Development for PL specific Fields: -Open*

|*Field Label*|*SFDC Field on UI*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Applicant's Total Income| |?|?|?|
|Co-applicant's Total Income| |?|?|?|
|Total Final Income| |?|?|?|
|Household expenses| |?|?|?|
|Total Expenses (Per month)| |?|?|?|
|Total Disposable Income (Per month)| |?|?|?|
acceptance: # *Income and Expense Details* section is visible on new format CAM report document. Section is visible as 8th section on generated document below Ability to Pay /Loan Details section
# All the incomes present in SFDC are visible for each App, coapp in a separate row
# Section UI visible as per description
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# Below fields are visible on CAM Report *Income and Expense Details* section for MEL-

|Applicant|
|Source of Income|
|Monthly Income from this source|
|No. of Adults|
|No. of Children|
|Business Expenses|
|Household expenses|

7. Below fields are visible on CAM Report *Income and Expense Details* section for PL-

|Applicant|
|Source of Income|
|Monthly Income from this source|
|Applicant's Total Income|
|Co-applicant's Total Income|
|Total Final Income|
|Household expenses|
|Total Expenses (Per month)|
|Total Disposable Income (Per month)|

{color:#ff991f}Income logic should work as per current implementation for all scenarios if income is added by IRO/ Received from PD/ Added by BCM, (Latest incomes should be visible in CAM Report ){color}

{color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17178
summary: Creation of Other Business Category
description: *Applicable for all Rural BU*

When PD is conducted by selecting : Trading Others / Services Others / Manufacturing Others Personas an additional New field with the name “*Other Business Category*” should be visible after selecting “Business Category” in the PD app.

“*Other Business Category*” should have 70 drop down values as per the attached list.

Of the 70 values in the drop down - *Others*  to be shown at the end of the list.

Whenever *Others* is selected CM should get a free-text comment option to enter exact business details under the field name “*Other Business Category Remarks*” 

Both New fields “Other Business Category”  and “Other Business Category Remarks” should be stamped on Case Object for reporting purpose.
acceptance: When PD is conducted by selecting : Trading Others / Services Others / Manufacturing Others Personas an additional New field with the name “*Other Business Category*” should be visible after selecting “Business Category” in the PD app.

“*Other Business Category*” should have 70 drop down values as per the attached list.

Of the 70 values in the drop down - *Others*  to be shown at the end of the list.

Whenever *Others* is selected CM should get a free-text comment option to enter exact business details under the field name “*Other Business Category Remarks*” 

Both New fields “Other Business Category”  and “Other Business Category Remarks” should be stamped on Case Object for reporting purpose.

key: ML-17174
summary: New CAM Report Document - Part 7 - Ability to Pay /Loan Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Ability to Pay /Loan Details* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

MEL CAM:



!image-20230424-112751.png|width=1280,height=183!

PL CAM:

!image-20230424-112813.png|width=1237,height=132!

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Ability to Pay /Loan Details* as 7th section on new CAM report document.
# Section UI should be visible as below for MEL BU:
!image-20230504-051551.png|width=1358,height=92!

# Section UI should be visible as below for PL BU:
!image-20230504-051606.png|width=1370,height=90!

# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# Field Mapping for MEL as below:

|*Field Label*| |*Field on UI*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Requested Loan Amount (INR)| |Requested Loan Amount (INR)|Requested_Loan_Amount__c|Loan Asset/Loan Application|Requested Loan Amount|
|Highmark Based Eligibility| |Highmark Based Eligibility|Max_Eligible_Amount__c|Loan Application|Highmark Based Eligibility|
|Max Eligibility|?|Footer button for Check Eligibility|?|?|FICO Response
Max Eligibility as per FICO
UI- Footer button for Check Eligibility|
|Approved Loan Amount (INR)| |Loan Amount (INR)|Loan_Amount__c|Loan Asset|*Loan Amount*|
|Gross monthly Income| |?|?|?|*Existing Approach to be referred*
Total of income considered for eligibility as per fico|
|Total Expenses(per month)| |Total Expenses(per month)|?|?|Total Expenses(per month) as per fico
*Open*|
|Total Obligation Considered| |?|?|?|As per FICO
Refer existing cam Gross Monthly Payable field|
|Number of Active loan considered| |?|?|?|Count of obligations where Account Status = Open|
|EMI Amount| |EMI Amount|EMI_Amount__c|Loan Asset|EMI Amount|
|Tenure| |Tenure (Month)|Tenure__c|Loan Asset|Tenure|
|DBR| |DBR|?|?|DBR|
|ROI|26%|ROI %|ROI__c|Loan Asset|% symbol to be available in field value on report|
|Customer Profile|POSITIVE/NEGATIVE|Customer Profile|?|?|Need field mapping|
|Loan Purpose|ALLIED-AGRICULTURE|Purpose of Loan: Category|Purpose_of_Loan_Category__c|?|Purpose of Loan: Category|
|PBDIT as % of Sales| |PBDIT as % of Sales|?|?|Need Field mapping
For Surrogate field, it will be visible on UI. 
Loan Details|

6. Field Mapping for PL as below:

|*Field Label*| |*Field Label on UI*|*Sfdc Field Mapping*|*Sfdc object mapping*|*Logic/Description*|
|Requested Loan Amount (INR)| |Requested Loan Amount (INR)|Requested_Loan_Amount__c|Loan Asset/Loan Application|Requested Loan Amount (INR)
Field mapping to be referred?|
|Highmark Eligibility amount| |Highmark Based Eligibility|Max_Eligible_Amount__c|Loan Application|Highmark based Eligibility|
|Max Eligibility|?|?|?|?|Max eligibility as per FICO|
|Approved Loan amount| |Loan Amount (INR)|Loan_Amount__c|Loan Asset|Loan Amount (INR)
UW screen?|
|Total Monthly Income Considered for Application/Eligibility| |?|?|?|Total of income considered for eligibility as per fico

refer existing approach|
|Total Expenses(per month)| |Total Expenses(per month)|?|?|Total Expenses(per month) as per fico|
|Total Obligation Considered|(Total of Active EMI)|?|?|?|Refer existing cam Gross Monthly Payable field|
|Number of Active loan considered|( Count of Active)|?|?|?|Count of obligations where Account Status = Open|
|EMI Amount| |EMI Amount|EMI_Amount__c|Loan Asset|UW screen?|
|Tenure| |Tenure (Month)|Tenure__c|Loan Asset|UW screen?|
|DBR| |DBR|?|?|dbr|
|ROI|26%|ROI %|ROI__c|Loan Asset|% symbol to be available in field value on report|
|Customer Profile|Positive/Negative|Customer Profile|?|?|Customer Profile|
|Loan Purpose| |Purpose of Loan: Category|Purpose_of_Loan_Category__c|?|Purpose of Loan: Category|
acceptance: # *Ability to Pay /Loan Details* section is visible on new format CAM report document. Section is visible as 7th section on generated document below Address Details section
# Section UI visible as per description
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# latest available data/field values {color:#ff991f}( Tenure, EMI Amount, Approved loan amount, etc.) {color}are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# Below fields are visible on CAM Report *Ability to Pay /Loan Details* section for MEL-

|Requested Loan Amount (INR)|
|Highmark Based Eligibility|
|Max Eligibility|
|Loan Amount (INR)|
|Gross monthly Income|
|Total Expenses(per month)|
|Total Obligation Considered|
|Number of Active loan considered|
|EMI Amount|
|Tenure|
|DBR|
|ROI|
|Customer Profile|
|Loan Purpose|
|PBDIT as % of Sales|

6. Below fields are visible on CAM Report *Ability to Pay /Loan Details* section for PL-

|Requested Loan Amount (INR)|
|Highmark Eligibility amount|
|Max Eligibility|
|Approved Loan amount|
|Total Monthly Income Considered for Application/Eligibility|
|Total Expenses(per month)|
|Total Obligation Considered|
|Number of Active loan considered|
|EMI Amount|
|Tenure|
|DBR|
|ROI|
|Customer Profile|
|Loan Purpose|

# {color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17164
summary: Case Record type value shown in place of Business Unit 
description: # Case Record type value shown in place of Business Unit on PD front screen before starting verification.
# For front screen in PD app before starting verification - Under "*Verification Type*" TVR is flowing.
It should be :
## *Reference 1 TVR*
## *Reference 2 TVR*
## *Trade Reference 1*
## *Trade Reference 2*
# As applicable.
acceptance: User should be able to view correct verification type for a particular case.

Correct Business unit to be flown under business unit section(eg: mel, pl, hl lap)

key: ML-17161
summary: New CAM Report Document - Part 6 - Address Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Address Details* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

MEL CAM:

!image-20230424-105726.png|width=1274,height=519!

PL CAM:

!image-20230424-105748.png|width=1244,height=274!

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Address Details* as 6th section on new CAM report document.
# Section UI should be visible as below for MEL, PL BU:
!image-20230504-051448.png|width=1355,height=186!

# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# For each applicant, coapplicant a row entry will be visible on document in this section one below other. For each applicant entry, all the address types present in the Address object will be visible in separate row.
# For the Address Type, existing MEL CAM report document sequencing to be referred for visibility on CAM.
# Field mapping as below:

|*Column/Field label*| |*UI Field*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Applicant Name|Applicant
Co applicant
Co applicant
Co applicant|Type|Type__c|Applicant|FIeld value should be populated as- First Name, Last Name (Type)
E.g.- Kavishvar Pande (Applicant)
Number sequencing will not be added/visible in values
Coapplicants row entries should be visible as- First added should be visible at top|
|Address Type|Residence Address
Office Address
Permanent Address|Type|Type__c|Address|All addresses of applicant present in address object to be shown.
All available addresses should be visible
Any specific sequence to be followed- existing MEL CAM report document sequencing to be referred for visibility on CAM|
|Address details & Pin/Post Code| |Address Line 1, 2, 3, City, Pincode, State|Line_1__c, Line_2__c, Line_3__c, Pincode__c, City__c, State__c|Address|Concatenate Address Line 1, 2, 3, City, Pincode, State|
|Property Status| |Property Status|Property_Status__c|Address|IF value is not available in address record, this will be shown as blank|
|Duration Of Stay At
Address(Years,Months| |Duration Of Stay At Current Address (Years), Duration Of Stay At Current Address (Months)|Stay_at_Current_City_Years__c, Stay_at_Current_Address_Months__c|Address|IF value is not available in address record, this will be shown as blank|
|Mailing Address|Yes
No|Mailing Address|Mailing_Address__c|Address|IF value is not available in address record, this will be shown as blank|
|Proof Of Address| |Proof of Address|Address_Proof__c|Address|Identifier

 IF value not available in address record, this will be shown as blank|
|CKYC Status|Successful
Unsuccessful|?|isCKYCSuccess|Applicant|*Should be visible for Residence address*|
|EKYC Status|Successful
Unsuccessful|?|EKYC_Biometric_Status__c && EKYC_Biometric_Success__|Applicant|EKYC_Biometric_Success__c && EKYC_Biometric_Status__c both TRUE
*Should be visible for Residence address*|
acceptance: # *Address Details* section is visible on new format CAM report document. Section is visible as 6th section on generated document below Employment Details section
# All the addresses present in SFDC are visible for each App, coapp in a separate row
# Section UI visible as per description
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# Below fields are visible on CAM Report *Address Details* section for MEL, PL-

|Applicant Name|
|Address Type|
|Address details & Pin/Post Code|
|Property Status|
|Duration Of Stay At
Address(Years,Months)|
|Mailing Address|
|Proof Of Address|
|CKYC Status|
|EKYC Status|

{color:#ff991f}All address types stamped on back end for app/co-app should be visible in CAM Report{color}

{color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

{color:#ff991f}CKYC/EKYC Status fields are stamping for residence address{color}

key: ML-17158
summary: New CAM Report Document - Part 5 - Employment Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Employment Details* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

MEL CAM:

!image-20230424-102949.png|width=1305,height=210!

Description:

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Employment Details* as 5th section on new CAM report document.
# Section UI should be visible as below for MEL BU:
!image-20230504-051325.png|width=1356,height=185!

# Section UI should be visible as below for PL BU:
!image-20230504-051346.png|width=1355,height=183!

# For each applicant, coapplicant a row entry will be visible on document in this section one below other
# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# Field mapping for *MEL* as below:

|*Field/Column Label*| |*UI Field Label*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Customer_Name|Applicant
Co applicant
Co applicant
Co applicant|Type|Type__c|?|FIeld value should be populated as- First Name, Last Name (Type)
E.g.- Kavishvar Pande (Applicant)
Number sequencing will not be added/visible in values
Coapplicants row entries should be visible as- First added should be visible at top|
|Employment Type|Self Employed, Salaried|Employment Type|Employment_Type__c|Employment_Details__c|Code should not be stamped|
|Business Name| |Business/Company Name|Company_Name__c|Employment_Details__c| |
|Type Of Business: Category| |Type Of Business: Category|Business Category|Employment_Details__c| |
|Type of Business: Sub-Category| |Type of Business: Sub-Category|Business Sub Category|Employment_Details__c| |
|Type of Business Ownership| |Type of Business Ownership|Ownership Type of Business Premises|Employment_Details__c| |
|Ownership Type of Business Premises| |Ownership Type of Business Premises|Type_of_Business_Premises__c|Employment_Details__c| |
|Type of Business Premises| |Type of Business Premises|Type_of_Business_Premises__c|Employment_Details__c| |
|Present Job/Business Years AND Present Job/Business Months|12|?|Present_Job_Business_Years__c, Present_Job_Business_Months__c|Employment_Details__c| |

6. Field mapping as below for *PL*:

|*Field/Column Label*| |*UI Field Label*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Customer_Name|Applicant
Co applicant
Co applicant
Co applicant|Type|Type__c|?|FIeld value should be populated as- First Name, Last Name (Type)
E.g.- Kavishvar Pande (Applicant)
Number sequencing will not be added/visible in values
Coapplicants row entries should be visible as- First added should be visible at top|
|Employment Type|Self Employed, Salaried|Employment Type|Employment_Type__c|Employment_Details__c|Code should not be stamped here|
|Salary Type|Salary Slip|Salary Type|Salary_Type__c|Employment_Details__c| |
|Current Employer Name|Anant irrigation|Current Employer Name|Current_Employer_Name__c|Employment_Details__c| |
|Industry Type|PLACEMENT AND REQUIPMENT|Industry Type|?|?|*Open*|
|Organisation Type|PRIVATE LIMITED COMPANY|Organisation Type|Type_Of_Organisation__c|Employment_Details__c| |
|Designation|MANAGER|Designation|Designation__c|Employment_Details__c| |
|Duration At Current Job (Years) & Duration At Current Job Months|5 Yeas 3 Month|Duration At Current Job (Years),
Duration At Current Job Months|Present_Job_Business_Years__c, Present_Job_Business_Months__c|Employment_Details__c| |
|Duration At Previous Job Years & Duration At Previous Job Years|5 Yeas 3 Month|Duration At Previous Job Years,
Duration At Previous Job Months|Previous_Job_Business_Years__c, Previous_Job_Business_Months__c|Employment_Details__c| |

7. Reusability from Current MEL CAM Report: Changes as below:

# Change section name to "Employment Details"
# Add columns: Customer_Name, Type Of Business: Category, Type of Business: Sub-Category, Type of Business Ownership, Ownership Type of Business Premises, Type of Business Premises
# Combine Present Job/Business Years AND Present Job/Business Months
# Rearrange fields/columns
# Remove: Nature Of Business, Scheme
# Arrange as 5th section
acceptance: # {color:#ff991f}*Employment details*{color} section UI is visible on new format CAM report document. Section is visible as 5th section on generated document below Communication/Identifiers Details section
# details as present in SFDC are visible for each App, coapp in a separate row
# Section UI visible as per description
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# Below fields are visible on CAM Report *Employment Details* section for MEL-

|Customer_Name|
|Employment Type|
|Business Name|
|Type Of Business: Category|
|Type of Business: Sub-Category|
|Type of Business Ownership|
|Ownership Type of Business Premises|
|Type of Business Premises|
|Present Job/Business Years AND Present Job/Business Months|

7. Below fields are visible on CAM Report *Employment Details* section for PL-

|Customer_Name|
|Employment Type|
|Salary Type|
|Current Employer Name|
|Industry Type|
|Organisation Type|
|Designation|
|Duration At Current Job (Years) & Duration At Current Job Months|
|Duration At Previous Job Years & Duration At Previous Job Months|

{color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17155
summary: New CAM Report Document - Part 4 - Communication/Identifiers Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Communication/Identifiers Details* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

MEL CAM:

!image-20230424-095454.png|width=1286,height=174!

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Communication/Identifiers Details* as 4th section on new CAM report document.
# Section UI should be visible as below for MEL, PL BU:
!image-20230504-051207.png|width=97.82608695652173%!

# For each applicant, coapplicant a row entry will be visible on document in this section one below other
# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# Field mapping as below for MEL, PL. Identifiers which are provided by the user on Applicant Details screen will be visible. Identifiers which are not provided will be visible as blank.

|*CAM Field*| |*SFDC UI FIeld*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Customer_Name|Applicant
Co applicant
Co applicant
Co applicant|Type|Type__c|Applicant|FIeld value should be populated as- First Name, Last Name (Type)
E.g.- Kavishvar Pande (Applicant)
Number sequencing will not be added/visible in values
Coapplicants row entries should be visible as- First added should be visible at top|
|Mobile| |Mobile Number|Mobile__c|Applicant| |
|Email ID| |Email ID|Email__c|Applicant|This will be blank if EMAIL ID is not present in SFDC|
|PAN| |PAN|PAN__c|Applicant|This will be blank if user has opted for Form 60|
|Voter ID| |Voter ID|Voter_ID__c|Applicant| |
|Passport| |Passport|Passport__c|Applicant| |
|Drivers License| |Driving License|Drivers_License__c|Applicant| |
|NREGA Job Card| |NREGA Job Card|NREGA_Job_Card__c|Applicant| |
|Aadhaar| |?|Aadhar_No_Last_4_digits__c|Applicant|*Last 4 digits of adhar Will be visible*|

5. Section Reusability for MEL new Cam report:

# Update section name to "Communication/Identifiers Details"
# Add: Customer_Name, Mobile, Email ID, NREGA Job Card columns
# Capture Mobile, Email ID from current "Applicant General Information" section
# Capture for each App, Coapp
# Arrange as 4th section
acceptance: # Section UI is visible as per the screenshot in the description
# *Communication/Identifiers Details* section is visible on new format CAM report document. Section is visible as 4th section on generated document below Applicant/Coapplicant Details section
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# user is able to see the row entries for each applicant, coapplicant added in loan
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# Identifier number is visible for the identifiers which are provided by the user on Applicant Details screen. For identifiers which are not provided, field values are visible as blank
# Below fields are visible on CAM Report Communication/Identifiers Details section for MEL/PL-

|Customer_Name|
|Mobile (MEL)|
|Email ID|
|PAN|
|Voter ID|
|Passport|
|Drivers License|
|NREGA Job Card|
|Aadhaar|

# {color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17148
summary: New CAM Report Document - Part 3 - Applicant/Co-Applicant Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Applicant/Co-Applicant Details* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys {color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+-, CJ journeys

*Existing Implementation:*

MEL CAM:

!image-20230424-090110.png|width=1279,height=284!

PL CAM:

!image-20230424-090141.png|width=1240,height=130!

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see *Applicant/Co-Applicant Details* as 3rd section on new CAM report document.
# Section UI should be visible as below for MEL,PL BU:
!image-20230504-051044.png|width=1358,height=266!

3. For each applicant, coapplicant a row entry will be visible on document in this section one below other

4. *Expected UI:*

# Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
# Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
# All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
# Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
# The section should get shifted to next page if any cell value is exceeding the page limit/page size.

5. Field Mapping as below:

|*Field/Column Name*| |*UI Field*|*SFDC Field Mapping*|*SFDC Object Mapping*|*Logic/Description*|
|Applicant Type|Applicant
Co applicant
Co applicant
Co applicant| |Type__c|Applicant|FIeld value should be populated as- First Name, Last Name (Type)
E.g.- Kavishvar Pande (Applicant)
Number sequencing will not be added/visible in values
Coapplicants row entries should be visible as- First added should be visible at top|
|Title & Customer_Name|Prefix Title with First Name Middle Name Last Name|Title, First Name, Middle Name, Last Name|Title__c, First_Name__c, Middle_Name__c, Last_Name__c|Applicant|Concatenation of Title, First name, Middle name, Last name with spaces
E.g.- Mr. Kavishvar Anil Pande|
|Relationship|Self, Father, Mother|Relationship With Applicant|Relationship_With_Applicant__c|Applicant|For primary applicants, it will be hardcoded to “Self”.|
|CRN| |CRN|CRN__c|Applicant| |
|Spouse Name| |First Name , Middle Name, Last Name|Spouse_First_Name__c, Spouse_Middle_Name__c, Spouse_Last_Name__c|Applicant|Concatenation of Spouse First name, Middle name, Last name with spaces.
Field value will be blank if spouse details are not present|
|Mother Name| |First Name , Middle Name, Last Name|Mother_First_Name__c, Mother_Middle_Name__c, Mother_Last_Name__c|Applicant|Concatenation of Mother First name, Middle name, Last name with spaces|
|Father Name| |First Name , Middle Name, Last Name|Father_First_Name__c, Father_Middle_Name__c, Father_Last_Name__c|Applicant|Concatenation of Father First name, Middle name, Last name with spaces|
|Gender| |Gender|Gender__c|Applicant| |
|Birth Date| |Date of Birth|Birthdate__c|Applicant|Format to be referred- DD/MM/YYYY|

6. *Reusability from Current MEL CAM Report:* Changes required for New MEL CAM report:

# Update section name to "Applicant/Co-Applicant Details"
# Change the format to Rows and columns
# Include App, coapps
# Change field label from Type to Applicant Type
# Remove Title field and combine Title with Customer_Name
# Add Spouse Name, Mother Name, Father Name
# Add Relationship. For Applicant stamp Self. For coapps refer Relationship with app field
# Remove Is Existing Customer, Email ID, Mobile, Age
# Arrange as 3rd section 

7. *Reusability from Current PL CAM Report:* Changes required for New PL CAM report:

# Update section name to "Applicant/Co-Applicant Details"
# Remove FName, MName, LName and combine under new field- “Applicant Name” with Title added as prefix
# Add-Relationship, Mother Name
# Remove-Caste, Religion, Mobile Number, Email ID, Is Existing Customer
# Rearrange fields
# Include App, coapps
# Arrange as 3rd section 
acceptance: # Document UI is visible as per description for MEL, PL BUs
# Section UI is visible as per the description
# Applicant/Co-Applicant Details section is visible on new format CAM report document. Section is visible as 3rd section on generated document below Bureau Details section
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# user is able to see the row entries for each applicant, coapplicant added in loan
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# Below fields are visible on CAM Report *Applicant/Co-Applicant Details* section for MEL, PL-

|Applicant Type|
|Title & Customer_Name|
|Relationship|
|CRN|
|Spouse Name|
|Mother Name|
|Father Name|
|Gender|
|Birth Date|

# {color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero (as applicable) on generated cam report{color}

key: ML-17145
summary: New fields to be created on Applicant to capture the details received from CDRule Response 
description: {color:#ff991f}Applicable for ALL journey flows- MEL/PL ( wherever bureau is not called, fields will remain blank){color}

# Below new fields to be created in SFDC in Applicant object
# Once SFDC initiates first highmark call at QDE stage, in response SFDC will receive below tag values for applicant, coapplicants
# Once response is received, below fields should get updated on Applicant records for applicant, coapplicants
# Null value handling to be done- If tag value is not received for any tag, same will be stamped as- blank on applicant
# Tag values received in latest bureau response (Stage Id = QDE) will be updated at applicant level in fields

|*Field label*|*Field type*|*Tag Mapping from CDRule response*|
|Date of Issue/DATE ( Bureau Call)|Date|_it should be latest bureau response date (Applicant wise)_|
|Cibil Rating|Number|existing to be referred|
|Number of Accounts/Total|Number|{{totalAccounts}}|
|Active Accounts|Number|{{activeAccounts}}|
|Zero-Balance|?|{{zeroBalanceAccounts}}|
|Overdue Accounts|Number?|{{overDueAccounts}}|
|Current Balance|Number, Decimal|{{totalCurrentBalance}}|
|Amount Disb/High Credit|?|{{totalHighCredit}}|

!image-20230428-133328.png|width=505,height=498!
acceptance: # New fields are added and visible on Applicant Page layout
# to be tested for Urban, Rural branches
# field values are getting stamped for Applicant, coapplicants as received in CDRule response
# -Stamping for CJ, MEL+ NOT APPLICABLE-
# {color:#ff991f}Applicable for ALL journey flows- MEL/PL ( wherever bureau is not called, fields will remain blank in backend ){color}
# {color:#ff991f}Null value handling to be done- If tag value is not received for any tag, same will be stamped as- blank on applicant{color}

key: ML-17141
summary: New CAM Report Document - Part 2 - Bureau Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with *Bureau Details* section so that I can verify the same.

*Applicable BU:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys,{color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+,- CJ journeys

*Existing Implementation:*

MEL CAM:

!image-20230424-070921.png|width=1270,height=122!

PL CAM:

!image-20230424-070952.png|width=1237,height=145!

*Description:*

# Once BCM user clicks on CAM Report tab on left navigation panel, user will be able to see Bureau Details section as 2nd section on new CAM report document.
# Section UI should be visible as below for MEL, PL BU:
!image-20230504-044617.png|width=89.4927536231884%!

3. Field values should be visible for all applicant and coapplicants in a separate row entry one below other in the section

4. *Expected UI:*

# Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
# Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
# All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
# Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
# The section should get shifted to next page if any cell value is exceeding the page limit/page size.

5. Field mapping as below:

|*Field/Column label*|*Field Mapping*|
|Customer Name|Applicant First Name, Last Name with Applicant type should be visible in bracket.
E.g.- Kavishvar Pande (Applicant)
For Coapplicants- Number Sequencing Not required in the column value. Latest added coapplicant will be shown first below Primary applicant entry.|
|Date of Issue/DATE ( Bureau Call)| |
|Cibil Rating| |
|Number of Accounts/Total| |
|Active Accounts| |
|Zero-Balance| |
|Overdue Accounts| |
|Current Balance| |
|Amount Disb/High Credit| |
acceptance: # Document, Section UI is visible as per description
# Bureau Details section is visible on new format CAM report document. Section is visible as 2nd section on generated document below sourcing details section
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# user is able to see the row entries for each applicant, coapplicant added in loan
# If field values are blank at backend, same will be visible as Blank/Zero on generated cam report 
# Below fields are visible on CAM Report Sourcing Details section for MEL, PL-

|Customer Name|
|Date of Issue/DATE ( Bureau Call)|
|Cibil Rating|
|Number of Accounts/Total|
|Active Accounts|
|Zero-Balance|
|Overdue Accounts|
|Current Balance|
|Amount Disb/High Credit|

# {color:#ff991f}Bureau Detail is second section in MEL/PL BU. testing required in all schemes including Surrogate.{color}
# {color:#ff991f}*Field Mapping*{color}{color:#ff991f} to be validated in all the fields and data stamping to be checked with hard coded bureau location for Highmark/CIBIL Combo report/Equifax/TU CIBIL.{color}

key: ML-17138
summary: New CAM Report Document - Part 1 - Sourcing Details
description: *Business Case:* As a BCM user, once I click on CAM Report on left navigation panel at Underwriting screens, I should be able to see CAM Report document generated in New Format with Sourcing Details section so that I can verify the same. 

*Applicable BU, Journeys:* MEL, PL Base loans, MEL Repeat, PL Repeat journeys, {color:#ff991f}MEL+, CJ dropped off (+/ Repeat){color}

Not applicable for -MEL+,- CJ journeys

*Existing Implementation:*

MEL Cam:

!image-20230424-062834.png|width=1318,height=456!

PL CAM:

!image-20230424-064244.png|width=1267,height=262!



*Description:*

# Once BCM user clicks on CAM Report tab on left navigation Panel on underwriting screens, SFDC will generate CAM report document on the right side screen in the format as mentioned below.
# At the top of CAM report document, user will be shown with the header- “*CAM REPORT*“ in Bold, All Caps, font Size 24 left aligned. IDFC logo will be shown on all the CAM report documents generated. UI as per attachment. _Logo attached in the story._
# Below this, *Sourcing Details* section will be visible as the first section on CAM report document
# New CAM report should be built in tabular format as Rows/Columns/Cell view.
# *Expected UI:*
## Refer sample Urban CAM report Document for UI - File Name= "RMEL - CAM Requirement - Sample PDF" and “RPL - CAM Requirement - Sample PDF”
## Section header will be visible outside section/table and left aligned with Bold letters, Font= Trebuchet MS, Font size= 16, Font color= Black
## All Column headers, Field Names in the section/table will be visible Left & Center aligned in Bold letters. No Background colour applicable. Font = Trebuchet MS, Font Size= 12, Font Color= Black
## Field values in the cells will be visible Left & Center aligned. No Background colour applicable. Font = Trebuchet MS, Font Size= 10, Font Color= Black
## The section should get shifted to next page if any cell value is exceeding the page limit/page size.
# Section UI for MEL BU: 
!image-20230504-044500.png|width=1363,height=190!
# Section UI for PL BU:
!image-20230504-044445.png|width=1360,height=191!

# Field Mapping to be referred:

|*CAM Field Name*|*UI Field Label*|*SFDC Field Mapping*|*Object*|*Logic/Comment*|
|*Loan Application Id*|LOAN ID|Name|Loan Application| |
|*Business Unit*| |Business_Unit__c|Loan Application| |
|*State/Location*| |Location__c|Loan Application|State of the Branch in which loan is initiated|
|*Branch*| |Branch__c|Loan Application|Loan Application Branch|
|*Scheme*|Scheme|Scheme__c|Loan Asset|Scheme present on Loan Asset record|
|*PSL Flag*|PSL Flag|?|Applicant__c|*Open*|
|*Workflow*| |Workflow__c|Loan Application| |
|*Login Date*| |CreatedDate|Loan Application|Expected Format- *20/04/2023, 10:40 am (Time in 12Hrs format)*|
|*SO Name*|?|SO_Name__c|Loan Application|IRO who has initiated the loan|
|*RO Name*| | | |Existing Approach to be referred|
|*Unnati Flag*|Unnati|Unnati__c|Loan Asset|*Loan Asset?  - open*|
|*PSL Classification*|PSL Classification|?|Applicant__c|*Loan Asset?  - Open*|

9. *Reusability from Current MEL CAM report document:* Changes that can be done as below:

# Change section Name to Sourcing Details
# Remove Cibil Rating, Remove loan purpose
# Add scheme and capture from current "Applicant Employment Details" section
# Add State/location, Unnati flag, PSL flag, PSL Classification
# Rearrange fields
# Arrange as 1st section

*10. Reusability from Current PL CAM report document:* Changes that can be done as below:

# Change section Name from Application Information to Sourcing Details
# Remove Loan Purpose, No of Applicant/Co-app, RO Staff Code, 
# Add SO Name, Scheme
# Change Region to State/Location
# Rearrange fields
# Arrange as 1st section
acceptance: # Document UI is visible as per attached images for MEL, PL BUs
# Sourcing Details section is visible on new format CAM report document. Section is visible as 1st section on generated document 
# All the existing user level access should be kept same and users are able to view the section on CAM report as per current implementation
# Section UI is visible as per the description
# Cells are flexible to accomodate large text values. Row entry is getting expanded with cell having long text value - text wrapping
# User is able to see IDFC Logo on the generated CAM report document
# latest available data/field values are visible on the CAM report document every time user clicks on CAM Report tab on left navigation panel
# Below fields are visible on CAM Report Sourcing Details section for MEL-

|Loan Application Id|
|Business Unit|
|State/Location|
|Branch|
|Scheme|
|PSL Flag|
|Workflow|
|Login Date|
|SO Name|
|RO Name|
|Unnati Flag|
|PSL Classification|

8. Below fields are visible on PL Cam Report Sourcing Details section for PL:

|Loan Application ID|
|Business Unit|
|State/Location|
|Branch|
|Scheme|
|Workflow|
|Login Date|
|SO Name|
|RO Name|

9. All the field values are getting populated on new cam report as per given mapping

10. {color:#ff991f}If field values are blank at backend, same will be visible as Blank/Zero ( as applicable ) on generated cam report{color}

11. {color:#ff991f}BCM, CCM, NCM users are able to view the section on CAM report {color}{color:#ff991f}*- this will be as per the existing functionality ( this is a common point for all the user stories in the EPIC* {color}[https://fincap.atlassian.net/browse/ML-13891|https://fincap.atlassian.net/browse/ML-13891|smart-link]{color:#ff991f} {color}

key: ML-17058
summary: Addition of fields for Salaried OCPV
description: Staff loan fields to be added for OCPV salaried. Kindly refer the attached Excel
acceptance: Users should be able to view Staff loan fields

key: ML-16888
summary: Access for PD related objects in loan application and cases to generate reports.
description: *Post deployment step*

Access for PD related objects in loan application and cases to generate reports:

# *PD Income Details*
# *Cases > PD >* 1. Case detail, 2. PD App, 3. PD Finance Income Heads, 4. System Information, 5. Case Comments, 6. Case History. 7. Question Responses, 8. PD Assets, 9. Assessment Responses, 10. PD Obligations, 11. PD Machine Lists, 12. Files, 13. Open Activities, 14. Activity History, 15. Attachments, 16. PD Income Details, 17. PD Fico Validation Responses.

Prod Org 3 user ID for access: (no such user for reporting purpose available in lower environments for testing)

[dhruvin.nandu@idfcfirstbank.com.org3|mailto:dhruvin.nandu@idfcfirstbank.com.org3]

[Mohini.gupta@idfcfirstbank.com|mailto:Mohini.gupta@idfcfirstbank.com]

[Rohan.marthak@idfcfirstbank.com|mailto:Rohan.marthak@idfcfirstbank.com]

[divakar.reddy1@idfcfirstbank.com|mailto:divakar.reddy1@idfcfirstbank.com]

This is currently applicable for MEL and same to be provided for HL and LAP post mortgage persona go-live.

Refer attachment for post deployment document shared by PD app team.
acceptance: # Post deployment steps are followed

key: ML-16879
summary: Pre Approved flow for Collateral CPV
description: Addition of pre approved flow for collateral cpv.

Add the fields attached in the excel for pre approval. 



{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default","localId":"69fb84c7-61ef-43c7-b015-0bd8d6463aa4"},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Validation Rule for Overall Status:"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"orderedList","attrs":{"order":1},"content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"When \"Overall Status\" is selected as \"Positive\" and \"Total LTV and exposure on the proposed collateral checked as per policy norms\" is selected as\"No\""}]}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Validation message to display: \"Total LTV and exposure check is selected as No and Collateral CPV status is marked as Positive\""}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"orderedList","attrs":{"order":1},"content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"When \"Overall Status\" is selected as \"Negative\""}]}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"paragraph","content":[{"type":"text","text":"Validation message to display: \"Collateral CPV is Negative, cannot proceed ahead\""}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colspan":2},"content":[{"type":"orderedList","attrs":{"order":1},"content":[{"type":"listItem","content":[{"type":"paragraph","content":[{"type":"text","text":"No Validation rule in case of \"Overall Status\" is selected as \"Hold / Un-hold\""}]}]}]}]}]}]}
{adf}
acceptance: User should be able to hold and unhold cases.

Once a case is put on hold, user cannot make any changes to the questions.

Once it is unhold, changes can be made.

key: ML-16858
summary: Change of field for reference and Trade reference names
description: Change of name for 7 fields for Reference and Trade reference as mentioned in the excel sheet attached

Current Fields:

|Applicant__c.First_Name__c|
|Applicant__c.Middle_Name__c|
|Applicant__c.Last_Name__c|

New Field:

|RefTradeReference__c|
acceptance: Users should be able to view reference and trade reference names 

key: ML-16850
summary: TAT clause addition in RMEL, RPL app form
description: *Applicable* :

All journey flows of RMEL & RPL including top up

*Proposed* -

Please add below TAT clause in the RMEL, RPL app form in the new header : 

ACKNOWLEDGEMENT

‘The bank would require a processing time of approximately upto 14 days from the date of the completed application, This is subject to submission of all documents as required by the bank. For any queries or suggestions, please connect us at below mentioned contact or visit our nearest branch’.

Call 1800 419 4332 (Toll Free) and mention your Loan Application number (Lead ID) to know the status of your application.

*OR*

You can check on our website [https://www.idfcfirstbank.com/track-my-loan-application|https://www.idfcfirstbank.com/track-my-loan-application|smart-link]  for the status.



*Location for the above clause* - Last part of App form i.e. below ‘*For Bank Use Only*’ . Font style and size of new header as per *For Bank Use Only.* Font size and style of clause as per existing app form
acceptance: * Given journey flow is of any RMEL or RPL base or top-up flow, when application form is generated for any WIP or fresh case, then the desired changes should reflect in Application form
* Font size and style should be as per description

key: ML-16844
summary: Application form changes- RMEL,RPL
description: *Applicable* : 

All journey flows of RMEL & RPL including top up

*Proposed* :

Please add ‘EMI Pickup/Collection Charges’ in the ‘Most Important Terms and Charges’ section in the application form.

||*EMI Pickup/Collection Charges (INR)*||*Rs. 500*||

*location for changes needed highlighted in attachment*
acceptance: * Given journey flow is of any RMEL or RPL base or top-up flow, when application form is generated for any WIP or fresh case, then the desired changes should reflect in Application form
* Font style and size for change to remain same as per existing app form

key: ML-16841
summary: Application form changes- RPL
description: *Applicable* - All journey flows of RPL including top up

*Proposed* : 

* Add: “I/we (applicant(s)), declare that loans and advances shall not be used for purchase of gold and loans have not been granted to silver bullion dealers.”
* Update to statement: “ I/We confirm that I/We shall not use the credit facility (or any part thereof) for any improper,

+speculative, antisocial+, illegal or unlawful purposes/activities.”

·         inclusion of “, speculative , antisocial”

* Label name update from +“loan Documentation and Enrolment Charges (INR)”+ to “Late Payment charges+”+ 

*location for changes needed highlighted in attachment*
acceptance: * Given journey flow is of any PL base or top-up, when application form is generated for any WIP or  fresh case, then the desired changes should reflect in Application form. 
* Font style and size for change to remain same as per existing app form

key: ML-16691
summary: Creation of Queues For Telecaller Dropped Off Loans to move to IRO
description: 1.When Telecaller punches a loan and then Dropping off at any stage. This loan has to be shared with the Respective Branch wise Queues.

2.Currently there are Queues Only for MEL.Queues has to be Created for PL,HL,LAP.

3.Format of the Queues Should be like BusinessUnit_BranchName_Workflow.

Ex.for MEL_SRIRANGAM_BANK

HL_SRIRANGAM_BANK

LAP_SRIRANGAM_BANK

PL_SRIRANGAM_BANK.
acceptance: 1.When Telecaller punches a loan and then Dropping off at any stage. This loan has to be shared with the Respective Branch wise Queues.

2.Currently there are Queues Only for MEL.Queues has to be Created for PL,HL,LAP.

3.Format of the Queues Should be like BusinessUnit_BranchName_Workflow.

Ex.for MEL_SRIRANGAM_BANK

          HL_SRIRANGAM_BANK

         LAP_SRIRANGAM_BANK

         PL_SRIRANGAM_BANK.

key: ML-16637
summary: Spelling Correction for "Property Construction Stage" field
description: Kindly use below correct spellings: 

+_Pillars and Roof Completed (GF)_+ instead of +_Pillers and Roof Completed (GF)_+  

+_Pillars and Roof Completed (FF/SF)_+ instead of +_Pillers and Roof Completed (FF/SF)_+
acceptance: User should be able to view the correct spelling as mentioned below:

+_Pillars and Roof Completed (GF)_+ instead of +_Pillers and Roof Completed (GF)_+  

+_Pillars and Roof Completed (FF/SF)_+ instead of +_Pillers and Roof Completed (FF/SF)_+

key: ML-16587
summary: Implementing submit API for Reference and Trade reference TVR
description: Implement Submit API for Reference and Trade reference cases.

Submit URL to be introduced for these cases. 

Field level changes: *Supplier Check Remarks* to be changed to *Supplier Check Remarks 1*
acceptance: User should be able to submit the cases successfully

key: ML-16526
summary: 3.2. Scheme value population on loan initiation popup for PL Repeat Loans.
description: *Business Case:* As an IRO, I should be able to see the PL repeat scheme values in the scheme dropdown while initiating PL Repeat loan, so that I can proceed to loan application with repeat scheme selection on popup.



*Description:*

*A.*  On the popup, once user selects PL as Product Type, user will be shown Scheme field next to it. 

    i. Product Type, Scheme Field selection will be mandatory on UI. User should not be able to proceed with *Create New Application* button until values are captured for Scheme dropdown

    ii. Scheme dropdown will be editable on UI

    iii. By default, Blank value should be set for Scheme field once the popup gets opened

     iv. In Scheme dropdown, user will be able to see the schemes as below based on the Workflow of logged in user/branch and base loan scheme that was opted-

# *For Bank workflow IRO, possible scheme values:* PL Prime Repeat Bank, Rural-RPL Repeat Bank, PL Enterprise Repeat Bank
# *For IFBL workflow IRO, possible scheme values:* PL Prime Repeat IFBL, Rural-RPL Repeat IFBL, PL Enterprise Repeat IFBL

*B.*  Once user selects scheme (and Name of corporate for Enterprise scheme), *Create New Application* button will appear on the popup. Once user clicks on *Create New Application* button, system will check - If user selects “PL” as product and the Account has existing PL case, then this condition to be checked - “*Is there an WIP PL loan in SFDC with same/existing CRN Number?*”

*C. If Yes -* 

If there is no Disbursed loan application, then user will not be able to proceed with new repeat loan opening. A toast message to be shown. Further journey should not be allowed. A popup will be visible as- “Case already in progress within SFDC with  SFDC ID <{color:#0747a6}_Latest work in progress SFDC ID_{color}>” as below. screenshot. {color:#0747a6} _Popup should be visible only if there is a wip loan._{color}

!image-20230228-131448.png|width=968,height=468!

*D.* If there is a disbursed loan present, then SFDC will check if the Repeat scheme selected by the user and the scheme in the last disbursed live loan are same.

*i.* If schemes are different, then a toast message will be visible as- “*_Please select the <Repeat scheme name corresponding to Latest Disbursed Base (PL/PL Repeat) Loan> to continue._*” User will not be able to proceed until scheme selected is same as base loan. (One to one Mapping for PL Repeat loans)

*ii.* If scheme selected is same, then [https://fincap.atlassian.net/browse/ML-16351|https://fincap.atlassian.net/browse/ML-16351|smart-link]  to follow.
acceptance: # If there is no disbursed loan for entered loan number and user tries to create new PL loan, system is showing validation while creating PL Repeat loan as below. User is not able to create new repeat loan
!image-20230320-151257.png|width=868,height=275!
# If there is at least one existing PL loan which is at disbursed stage, then only PL Repeat loan is getting created. Else base PL loan is getting created first.
# If none of the loans of customer are disbursed, PL Repeat loan is not getting created
# On loan initiation popup,  Staff field is visible once user has selected scheme. Field is editable to the user and by default *-Select-* is visible in the dropdown. User is not able to proceed without selecting Staff picklist value Yes or No.
# User is not able to proceed if repeat scheme is selected by the user is other than that of the Base disbursed loan
# User is able to see the toast message if scheme selected is mismatching. 
# Name of corporate is visible if User selects Enterprise scheme
# User is able to see Bank or IFBL in scheme name as per logged in IRO user/branch workflow
# Scheme details are getting stamped as per MEL-MEL Repeat design. Scheme name of the repeat scheme opted on popup will be stamped as per record configured at backend
# Once {color:#ff991f}mandatory fields are filled, then only create new loan application will work for all journey flows/schemes{color}

key: ML-16523
summary: PL Repeat Count Field Value updation through Data Load/Patching
description: # To maintain the Cycle count, a New Field PL Loan Count is already present at Account/contact
level in SFDC. This field value gets increased by one once a PL/PL+/PL Repeat loan
gets disbursed.
# For this functinality to work as per US- , all the existing customers Account/contact having Rural PL loan applications need to be updated through one time updation.
# For this the lower orgs will be updated by Development team against the disbursed PL loans. 
# For production, Dev team to prepare data and share the same with L1 team. L1 team will be doing data patching.
acceptance: # All the existing customers having Disbursed PL loans are updated with the PL Loan Count 
# No Account having PL loan should have PL Loan Count as zero
# If customer has multiple disbursed PL loans, the PL Loan count is getting updated as per the number of loans disbursed
# No impact on MEL Loan Count
# No impact on other BU functionalities

key: ML-16481
summary: Removal of Profile field for HL/LAP
description: Remove the below mentioned field for HL LAP - OCPV  Self employed and salaried

|*Group Name*|*Question*|
|CPV-Office|Profile|
acceptance: User should not be able to view profile question 

key: ML-16396
summary: 19. Disbursement Screen
description: *Description:*

UI, Validations to remain same as PL Journey.

*A] IDFC Account flow (If user has opted for existing IDFC Bank account OR User has opted to Open New Bank Account OR User enters IDFC Bank IFSC/MICR on disbursement screen)*

# For IDFC Bank accounts, details will get prepopulated as captured on Data Entry New Account Opening flow or Existing Bank account details 
# A Banner would be visible - “IDFC First Bank Customer”. FinnOne Dedupe Status field will be populated as New. One user clicks on *Verify* Button, FinnOne Dedupe Verify Process will Continue (*API*- GETACHOLDERNAME). Here we check if the account number are existing in FinnOne, Account details will go as a request. Once the response is received, details will get popuplated-
## FinnOne Dedupe Status - this will get updated
## Account Holder Name as per FinnOne
## Open Mandate
## Account type
## EMI End Date
## EMI Start Date
## Mandate Amount
## Frequency
# Below banner- “IDFC First Bank Customer, IDFC Account Status will be populated and a button would be visible “*IDFC Account Validation*”. On clicking this button, *“IDFC IMPS”* API Call would happen. After this, IDFC Account Validation Button will be disabled. A 2 Min timer will be on and a toast message will be seen as IMPS Process initiated.
# For Closed and Freeze account, user should not be able to move ahead and User should have option to Clear bank details and enter Manual Bank details.{color:#ff991f} ( this is not applicable for new account opening as per existing PL base journey){color}
# Whenever user tries to add new account details from the beginning, the earlier bank details will also be stamped in the system at backend in SFDC Bank object.
# IDFC IMPS can be Success or Fail or Time Exceeded.
# If account is No Freeze and Active, then +IDFC IMPS is Success+. The *Clear bank Details* button will be disabled.
# If +IDFC IMPS is Fail+, i.e. if field Beneficiary Name status is *Customer Name Not Matched*, then-
## User will be able to see a dropdown field *Customer Name* with name of primary Applicant as captured by IRO/BO will be shown.
## On click of Verify button, KARZA IMPS Name Match API will run.
## If KARZA IMPS name match is not success, i.e. if match is less than 65%, user will have to select a Supporting Document from the *KARZA Document* dropdown and upload it using Upload Files button. If IMPS is success, then this field and Upload Files button will be disabled.
## A disclaimer will be shown with a checkbox to take user’s confirmation that Customer Name is verified with IDFC beneficiary name. User has to check the checkbox to proceed further. Once the User clicks on Disclaimer*-,-* Repayment Mode and Due day logic should run.
## If IMPS status is Time Exceeded: If response is not received in 2 minutes. User can Retry IMPS.
# If field Beneficiary Name status is *Customer Name Matched*, above flow in point 8 will be skipped. The Loan Application will move forward to capture mandate details.
# User will get option to complete the SI Mandate for all IDFC bank accounts (Existing/New/IDFC details entered manually).
# User will be able to complete Digital SI /Physical SI
# Once the mandate is completed, user will get Next button enabled at the footer and user will be able to proceed to Document Generation screen.



*B] User does not select any of the IDFC Bank Accounts received from CBS Search OR User clicks No on the New account opening popup:*

# Below *Manual Entry flow* should follow:
# The details entered on Data Entry screen will get prepopulated (IFSC Code, MICR Code, BANK Name, Branch, Account Number, Account Holder Name, FinnOne Dedupe Status) 
!image-20230412-125846.png|width=922,height=408!
!image-20230412-125918.png|width=1429,height=611!
# On screen, User will have to enter either IFSC or MICR Code to fetch Bank Details *(GETMULTIIFSC/GETIFSCDETAILS API)*
## IFSC Code
## MICR Code
## Fetch Bank Details button
## Clear Bank Details button
# {color:#ff991f}If the 4th, 5th and 6th digit in MICR is 7, 5, 1 in it{color}, it will be treated as IDFC First bank account, and further flow will be same as IDFC Bank  Account flow (CBS/Create New Account) as point A above.
# Once the user enters IFSC/MICR and clicks on the Fetch Bank details button, the corresponding bank details will be fetched and below fields will be shown on the UI with details auto populated and it will be Non Editable for the user 
## IFSC Code
## MICR Code
## BANK Name
## Branch 
## If user clicks on *Clear Bank Details* button, these details will be cleared and user will be able to see initial two fields IFSC, MICR. A new bank record will be created in the backend bank details object. Every time user clicks on the Clear Bank Details button, a new record has to be created in the bank details object.
## If user clicks on *Confirm* button, the bank account will be considered for Disbursement flow. Details will be stamped in the bank details record at backend.
# Bank is Eligible for IMPS Section will be shown if Bank is eligible for IMPS based on NACH flag received. User will have Verify button available to perform a FinnOne Dedupe, to check if account details are present in FinnOne.
# Once user clicks on Verify, below fields will be visible on UI and field values will get updated. EMI, Mandate logics to be same as per current PL process.
## FinnOne Dedupe Status - this will get updated
## Account Holder Name as per FinnOne
## Open Mandate
## Account type
## EMI End Date
## EMI Start Date
## Mandate Amount
## Frequency
!image-20230412-125951.png|width=1400,height=588!
# Once above details are fetched and *“Proceed with IMPS”* button will be active on click of it, a 2 Min timer will be on and a toast message will be seen as IMPS Process initiated. (API: IMPSFundTransfer). IMPS API callout (*SVC name IMPS_FUNDTRANSFER*) is triggered here and *1 rupee penny drop* to the account number to check if the *Account is active/Inactive*. 
!image-20230412-130026.png|width=1399,height=551!
## *IF IMPS is Fail:* If IMPS is Failed, User will be hard stopped on this screen and will be unable to move ahead incase if IMPS is failed. User will have an option to retry IMPS or he/she can Clear Bank details and add different account. A new record will be created in the bank details object if user adds new account. But previous account is saved in backend in SFDC bank Object.
!image-20230412-130046.png|width=1425,height=494!
## *If IMPS is Non Technical Error:* He will have a option to retry. Clear Bank details button will be available after which he will be able to add new account details. Also a new bank record will be created in the SFDC Bank object.
## *If IMPS Time Exceeded:* If response is not received in 2 minutes. User can Retry IMPS or he can click on Clear Bank Details button; it will be available.
## *If IMPS is Success:* He will be able to move to next screen and Clear bank Details button will be the details will be disabled. Also we will check if Customer name is Matched or Not Matched. If not matched, *KARZA API will run*. If matched, flow will move further to Disbursement Mode. On IMPS success below fields will be enabled on the UI
### IMPS Status
### Transaction Reference No
### Description
### IMPS Beneficiary name
### Beneficiary name status
# Once IMPS is successful KARZA name match section will be enabled for user with below fields
## User will select Customer name from the dropdown
## Verify Button (On click of this button *KARZA name match* API to run)
## If *KARZA* name match is *not success* user will have to upload the supporting document.
# Post Karza IMPS process, user will continue on the screen for Mandate process.
# User will get Mandate options based on the loan application eligibility-
## Digital Mandate
## Adhar Based Mandate
## Physical Mandate
# Once the mandate process is completed, user will get Next button enabled at the footer and user will be able to proceed to Document Generation screen.
acceptance: # UI, Validations to remain same as PL Journey.
# Bank account details record creation logics as per PL Journey
# Details as captured on Data Entry stage are getting prepopulated on disbursement screen for all the flows of Existing acc, New Acc, Non IDFC Acc
# Once the user enters IFSC code or MICR code the corresponding bank details should be populated
# Fetch bank details API (GetMultiIFSC/GETIFSCDETAILS API) is getting initiated on click of Fetch Bank Details
# User is able to clear the bank details when IMPS is giving Error or Technical issues
# User is unable to click on Clear bank details once the IMPS callout is successful.
# Mandate amount is calculated as per the given details in description.
# If KARZA name match is unsuccessful, user is able to upload the supporting documents.
# User has to mandatorily go for Digital mandate registration first, If it fails user will get an option of Aadhar and Physical mandate
# SFDC to generate a NACH form for Digital SI Registration
# [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}Disbursement screen logics pre and  post Sanction to remain same as base journey PL{color}

key: ML-16361
summary: 22. FinnOne Submit and FCRB logics
description: *Description:*

# FinnOne request, logics to remain same as PL Journey
# SFDC will initiate the FinnOne submit API request at backend.
# Request, response structure to remain same as of base pl journey
# All the details captured in PL Repeat Loan APplication journey will flow in the request as per current implementation of PL journey.
# Additional tag population-
# FCRB Logic-
## If base loan is “disbursed/Disbursed” and live loan is Yes, then-
### Tag Topup agreement id will flow as- finnone id of base loan
### tag Topup flag will flow as- Y
## If base loan is “disbursed/Closed” and live loan is No, then-
### Tag Topup agreement id will flow as- Blank
### tag Topup flag will flow as- N
##   [~accountid:6077d22c852e71006c8cfce7]  {color:#ff991f}below points are not applicable{color}
## -On SFDC--
### -If there is a live loan, then live loan check will get unchecked for that loan-
### -Stage Substage of previous loan will get changed to -- *-Disbursed, Closed-*
### -Current topup loan goes to Disbursed Stage-
acceptance: # UI, Validations to be kept same as PL Journey
# Zero Ops functionality is working as per current implementation
# NACH Scan functionality is working as expected
# no impact on PL loans count due to FCRB, i.e. if customer’s previous loan is foreclosed. 
# [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}PL loan Count logic should work as expected in {color}[https://fincap.atlassian.net/browse/ML-16023|https://fincap.atlassian.net/browse/ML-16023|smart-link]{color:#ff991f}  whether previous loan was foreclosed in PL Repeat or already closed before PL repeat was opted{color}
# [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}post disbursement of PL repeat case, logics at contact level should work as MEL Repeat implementation- {color}

key: ML-16358
summary: 21. Estamp, Esign Process for loan Application
description: *Business Case:* As an IRO user, once document generation is completed, I should be able to complete the Estamp, Esign process for the PL repeat loan application and see the documents on filenet post completion.

*Description:*

# Once the document generation is completed, stage of the loan application will change to Estamp Estamp pending.
# UI, Logics and validation to be kept same as PL journey.
# SFDC will check if Loan Application is eligible for Estamp process.
# If eligible, user will initiate estamp on Soapp. The process will be completed in communication with SFDC-SOApp-LegalDesk through API communication
# If not eligible, user will be able to see the same on UI.
# The loan application will move to Esign stage for Esigning process.
# System will check if loan is eligible for Esigning. If eligible, user will get buttons to *Skip Esign* or *Initiate Esign* at footer. On click of Initiate Esign,  Esign process will be completed through SFDC-SoAPP Communication through APIs.
# [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}Zero ops functionality should work as implemented in PL base journey immediately after E-sign ( whether e-sign is attempted or skipped) and post that, case will be submitted to Finnone{color}
acceptance: # If Estamp is initiated, user is able to see the timer on UI.
# If Estamp failed, user is getting a retry button to reinitiate Estamp process
# If loan is not eligible for Estamp/Esign, user is able to see the same on UI. 
# Zero Ops functionality is working as per current implementation
# NACH Scan functionality is working as expected
# [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}Esign/Estamp , Zero Ops functionality , NACH OCR, FinnOne submit is working as base journey of PL{color}

key: ML-16355
summary: 20. Document Generation
description: *Business Case:* As an IRO user, once Mandate is successful and user clicks on Next button on disbursement screen, I should land on Document Generation screen to generate the documents for the loan application.

*Description:*

# Once the mandate process is completed and user has clicked Next button on disbursement screen, user will land on Document Generation screen.
# UI to be same as PL journey.
# User will have a Language dropdown and generate document button visible on screen
# Once user selects language and clicks on Generate Document button, the list of documents maintained and configured in the custom metadata- “Business Specific Required documents” for PL business unit will get generated through Emorphis API callout.
# All the generated documents will get stored in FileNet.
# Once all the documents are generated successfully, user will be able to see VIEW/UPLOAD DOCUMENT button. On clicking this button, FileNet view will open in new tab in the browser, where user will be able to see all the documents of loan application uploaded, generated for applicant, coapplicants
# {color:#ff991f}Once doc generation is success, NACH OCR logic will run in case of Physical mandate as per existing PL base journey {color}
# {color:#ff991f}Once doc generation is success, Estamp functionality will work as per existing logic of PL base journey except for point 7{color}
acceptance: # user is able to get the list of documents generated in click of Generate Document button
# If user has selected vernac language, respective documents are getting generated through Emorphis API
# Once the document is generated, user is able to see the same on FileNet under respective Document type, Document Name
# All the defined documents are getting generated as per PL journey logics and validations
# All the documents of base loan are visible on FileNet view for Repeat Loan

key: ML-16351
summary: 3.4. Latest Disbursed loan data to be cloned into the New PL Repeat Loan Application
description: *Description:*

# Once user selects scheme/name of corporate and clicks on Create Loan Application button, 

# *If No* – (At least one Disbursed PL loan exists) then Repeat Process would follow, and *_latest disbursed PL loan data would be populated_*.  (Live or Inactive loans should be considered for this). All below details will be auto populated +same as MEL Repeat cloning Design+.
#* _Applicant details_
#* _CO-applicant details – If Present in base loan, coapplicant details will get captured in PL Repeat loan_ 
#* _Employment details_
#* _Loan and Product details_
#** Income Details will *not* get autopopulated for applicant, coapplicant from Latest disbursed PL loan
#* _Document Details - DMS id is stamped from Base loan, OSV Check, Upload Date will be stamped as the base loan doc upload date._
#* Income Details will *not* get autopopulated
#* Income Documents will *not* be autopopulated (salary slip, salary certificate) from Latest disbursed PL loan
#** Applicable for applicant, coapplicant
#** document should be mandatory on UI for user to upload the same
#** DMS ID, Document should not get autopopulated on Document upload screen
#* Insurance Details will not get autopopulated from latest disbursed  loan. Insurance Nominees added in base loan will not get updated in repeat loans
# Data To be populated on object records at backend similar to MEL Repeat journey from Design perspective.
# For PL Repeat Loan Application level details-
#* Business Unit will be stamped as *Rural PL*
#* Journey Flow to be stamped as *Rural PL Repeat*
#* Base Loan Application - *LAN of Latest Disbursed loan*
acceptance: # Design, implementation same as MEL-MEL Repeat
# System is considering the latest disbursed PL loan for cloning and data population on PL repeat loan UI
# Insurance, Nominee, Appointee details opted for applicant, coapplicant in previous loan are not getting captured
# Income details are not getting captured from previous loan
# Applicant, Coapplicant, Employment Details, Loan Details are getting captured from latest disbursed PL loan
## *Staff field value is not getting autostamped at applicant record for app, coapps from latest disbursed PL loan*
# Income documents- Salary Slip, Salary Certificate are not getting captured from latest disbursed PL loan for applicant and coapplicants
# If there is at least one existing PL loan which is at disbursed stage, then only PL Repeat/PL + loan is getting created. Else base PL loan is getting created first.
# Stage Substage, Stepper logic to remain same as PL journey through out the loan journey in PL repeat loan

key: ML-16348
summary: 3.3. Handling for PL Enterprise Scheme for PL Repeat Loan Application
description: *Business Case:* As an IRO user, once I select PL as product to initiate the PL Repeat loan, I should be able to see the PL repeat scheme corresponding to the base disbursed loan autopopulated on the popup in Scheme field.

*Description:*

# On the popup, once user selects PL as Product Type, if PL Enterprise Repeat Bank/IFBL scheme is selected by user, then-

* For PL Enterprise Repeat Bank/IFBL scheme, user will be given dropdown/lookup field on the popup to select *Name of Corporate. Existing master to be referred. Field value selection will be nonmandatory.*
* If user selects PL Enterprise Repeat Bank/IFBL scheme on Popup but does not select any value for *Name of Corporate* lookup field, then once the user clicks on Create New loan application button, the *Rural-RPL Repeat* scheme will be stamped for the loan application.
** Approach 1- Field to be nonmandatory 
** Applicable for Repeat Enterprise
* If user has not entered Name of corporate for Enterprise repeat and clicked on Create Loan Application button, a toast message to be shown here stating- ”_Loan Application will be processed under Rural RPL Repeat Scheme._”
acceptance: # User is able to see Name of corporate lookup field on popup if scheme selected by the user is PL Enterprise Repeat.
# If user has not selected name of corporate for PL Enterprise Repeat scheme selection, loan is getting booked with Rural RPL Repeat scheme   
# No impact should be there on base PL Enterprise scheme journey

key: ML-16320
summary: 18. User will be given an option to open new IDFC Bank account
description: *Business Case:* Once user lands on Disbursement screen, SFDC to show a popup to give an option to open new IDFC bank account to the user.

Applicable for Bank Workflow users/branches only. New Bank Account Opening option will not be applicable for IFBL workflow.

*Description:*

# Screens, validation to remain same as PL journey
# *Scenario 1:* If existing IDFC Bank accounts of customer are received in CBS Search at Data entry stage
## If existing IDFC Bank accounts of customer are received in CBS Search at Data entry stage, but user has not selected any of them as Disbursement bank details, in this scenario, once user lands on Sanction-Disbursement Details screen, user will not be shown a popup to open new IDFC bank account on UI. User will have to enter other Existing bank account details and validate the same for disbursement.
!image-20230412-124517.png|width=927,height=407!
## If user selects any one of the existing idfc bank accounts received and clicks on Next at Data Entry CBS search screen, User will not be shown the new account opening popup at Sanction Stage. User will continue with the IDFC account validation process on disbursement screen
# *Scenario 2:* If existing IDFC Bank accounts of customer are not received in CBS Search response at Data Entry Stage,
## If User Selects No on popup at Data Entry Stage and captured initial details of any non idfc bank account, screen will move the Existing bank account flow on Sanction, Disbursement Details screen-
!image-20230412-125336.png|width=910,height=449!
## If User had Selected Yes on New Acc opening popup on Data Entry stage, screen will move the new bank account opening flow at Sanction, New account opening stage:
!image-20230412-124929.png|width=921,height=482!
###  User will get toggle option on screen to add nominee details, Debit card, cheque book. Bank, Branch details will be shown. Checkbox disclosure will be visible on the screen.
### At the footer, Next button will remain disabled.
### User will be able to see Open Account button disabled on UI.
### Once Disclosure checkbox is checked, Open Account button will get enabled.
### Once user clicks on the Open Account button, SFDC will initiate below APIs in sequence-
#### CBS CreateCustomer
#### CBS CreateAccount
#### CBS Sign and Photo
#### CBS Debitcard API
## Once All APIs are responded success, a new IDFC bank account will be created for the customer.
## User will get navigated to disbursement screen with new bank account details autopopulated on UI.
acceptance: # UI/Validations to be kept same as PL Journey
# New account opening popup is not visible at Sanction Stage
# new IDFC bank account is getting created for applicant if all the APIs are success
# If user has not opted for any of the account received from CBS search API at Data Entry Stage, user is able to proceed with Existing bank account flow.
# user is getting navigated to respective screen as per Base PL Journey
# Custom labels for teller id are configured at lower orgs for CBS APIs

key: ML-16317
summary: 17. System to search existing bank accounts of Primary Applicant in the CBS system against the CRN number
description: *Business Case:* As an IRO, after Insurance details are verified and user clicks on Next button, I should be able to get the existing IDFC bank accounts of the primary applicant fetched through CBS Search API.

*Use Case*:

# Auto Initiate CBS Search API and get the existing IDFC bank accounts (vishesh alsa etc) of primary applicant in API response based on the CRN Number
# Optional- Choose one of the accounts searched through CBS Search on screen and proceed to Disbursement screen

*Description:* 

# Once OTP validation is completed and user clicks on Next button on Sanction Insurance Details screen, user will get navigated to intermediate screen.
# UI, Validations to be kept same as PL Journey.
# System will initiate CBS Search API at backend. System will send the CRN number of primary applicant in the request.
# Once the response is received from CBS,
## Scenario 1: Existing IDFC Bank accounts are received in response
## Scenario 2: No Existing IDFC Bank accounts are received in response
# In case of Scenario 1:
## User will be able to see the bank accounts received in response on UI one below other with checkboxes
## user will be able to select one of the checkbox and proceed with Next button to disbursement screen. The selected bank account will be used for disbursement
## user will be able to proceed without selecting any of the accounts received from CBS Search and proceed to Disbursement screen
## Once user clicks on Next button, user will land on Disbursement details screen with the details of selected bank account autopopulated on UI
# In case of Scenario 2:
## No IDFC bank details will be visible on UI.
## User will click on Next button on the bottom and proceed to Disbursement screen
acceptance: # CBS Search API is getting initiated automatically once user lands on intermediate screen
# user is able to see the IDFC bank details if same is received in API response
# user is able to proceed with selecting one of the received idfc bank account on UI
# Existing teller ids will be referred for CBS APIs
# API failure handling to be kept same as current PL implementation

key: ML-16314
summary: 16. As an IRO User, I should be able to add/verify insurance details captured at Data Entry Stage
description: *Business Case:* User should be able to add new insurance or update insurance details captured on Data Entry stage for applicant and coapplicants, if added.

*Use Case:*

# Loan Application Assignment to IRO post Underwriter Sanction
# View/Update/Add Insurance details captured on Data Entry Screen
# Loan Details popup
# Verify Insurance through OTP verification

*Description:*

# Once Underwriter user has sanctioned the loan application, the stage substage will get changed Underwriting Underwriting Pending to Sanction Insurance Pending.
# Sanction stage UI/UX, logics, validations to be kept same as base PL journey 
!image-20230412-123534.png|width=936,height=474!
# User will be able to see the insurance details prepopulated as added on Data Entry Insurance Pending Stage in the repeat loan journey.
!image-20230412-123452.png|width=916,height=402!
# User will be able to update the existing insurance details of applicant or coapplicant.
# Two insurance of Credit Protect, Hospi Cash will be available for applicant, coapplicant
# Credit Protect insurance will be mandatory for Primary Applicant as per base PL Journey  
# User will be able to add new insurance which is not added already
# User will have to call Fico_Insurance to get the premium for Credit Protect insurance 
# Once premium amount is received and user clicks on Next button, user will be shown a Loan Details popup on UI with details of loan- net Disbursement Amount, Processing fee, etc
!image-20230412-123613.png|width=908,height=436!
# Once user clicks on Next button on Popup, user will be navigated to a screen to verify the insurance details through mobile OTP validation. A timer will be visible on UI.
## Total 3 attempts will be given if OTP validation fails. If all 3 attempts are failed, user will be able to proceed to next screen.
!image-20230412-123628.png|width=925,height=489!
# Once otp validation is completed and user clicks on Next button, user will get navigated to a screen for Disbursement details. CBS Search screen not applicable at sanction stage.
!image-20230412-123722.png|width=915,height=453!
# Live loan logic to be implemented same as of MEL Repeat journey for PL repeat.
acceptance: # user is able to add new insurance which is not already added/view insurance details captured at data entry stage/updated already added insurance for applicant, coapplicants
# user is prompted to add Credit protect mandatorily if Credit protect insurance is not opted by Primary Applicant
# User is able to see the updated Net disbursement amount on popup after receiving the premium amount from FICO_Insurance API
# user is able to verify the insurance details through mobile otp validation for credit protect insurance type for applicant, coapplicant.
# Insurance details are not getting autopopulated from previous PL disbursed base loan
# Live loan logic to be implemented same as of MEL Repeat journey for PL repeat. All validations, popup are visible same as MEL Repeat journey.

key: ML-16280
summary: 15. As a BCM user, I should be able to complete the underwriting task and take the decision on loan application
description: *Business Case:* As a BCM, if Verification cases were raised - then after completion of cases Or if not raised, then directly I should be able to perform Underwriting.

*Use Cases:*

* Underwriting screens
* All Tabs

*Description:*

# UI/UX, validations, logics to remain same as PL Journey
# After completion of all the verification cases received from FICO, or If No verification is received from FICO then the case would move to Underwriter.
# If No verification is received from FICO then the case would move to UW Directly
# After Data verification is completed the case would land at Underwriting stage.
# Stage & Sub-stage will get updated to “Underwriting” & “Underwriting Pending” respectively.
# Case will be visible under “Underwriting Pending” worklist to BCM.
# User can view the case, all the tabs ( below tabs complete screen will be same as PL.) will now be editable to the user who took ownership of the case and BCM will be able to perform all the actions on these tabs:
## *Applicant* - 
## *Loan* -
!image-20230410-132335.png|width=1362,height=498!
### *Scheme* field should be *readonly* on UI with selected repeat scheme name stamped
### In addition to all the other fields, below 2 Fields to be visible at UW Loan details Tab after Scheme field:
#### Field: *FinnOne ID to Be Foreclosed*
##### Section: Loan Details
##### Comments: Numeric – Autopopulated with FinnOne ID of the Loan from which the data has been autopopulated and Non editable 
#### Field: *Foreclosure Amount -* 
##### Section: Loan Details
##### Comments: Free Text for UW to write the foreclosure amount of previous Loan. Editable on UI at UW stage
## *Income Details* - _User will be able to add new incomes same as of base pl journey._
## *Verifications* - [https://fincap.atlassian.net/browse/RM-929|https://fincap.atlassian.net/browse/RM-929|smart-link] 
### Verifications can be initiated manually, same as PL.
### Verifications can be initiated again, if initiated once.
## *Return/Audit History* - 
## *Document* - 
## *CAM Report* - 
### UW would also be able to see Latest Disbursed CAM report on the UW screen along with the current CAM report
# FICO would be called from UW as is and other screens would be same as PL
# Approve decision- SMS triggering same as PL.
# Deviations same as PL
acceptance: # After completion of all the verification cases received from FICO, or If No verification is received from FICO then the case would move to Underwriter.
# Stage & Sub-stage will get updated to “Underwriting” & “Underwriting Pending” respectively.
# Case will be visible under “Underwriting Pending” worklist to BCM.
# User can view the case, all the tabs ( below tabs complete screen will be same as PL.) will now be editable to the user who took ownership of the case and BCM will be able to perform all the actions on these tabs:
## Applicant
## Loan
## Income Details
## Verifications
## Return/Audit History
## Document
## CAM Report
# Underwriter should be able to forward the loan to other Underwriters of higher cad limits and deviation approval limits
# Left navigation metadata, Screen metadata configuration to be kept same as PL implementation. Screens Should be visible/accessible to BCM, CCM, NCM users as per current implementation
# user is prompted to calculate eligibility everytime while taking underwriter decision
# user is able to approve loan only when all the deviations (System & Manual) are approved
# User is able to manually initiate verification cases. User is able to see the history of initiated cases.
# User is able to take decision only when verification cases are closed
# If loan is retriggered, loan is moving back to the IRO who has initiated it. Post complete process, loan is getting assigned to the BCM who had completed the Data verification first. Loan should not move to open pool worklist
# User is able to capture details of Loan Details, Obligations
!image-20230412-123324.png|width=927,height=361!

!image-20230412-123341.png|width=867,height=338!

key: ML-16277
summary: 14. CPV verification to be completed for App/Coapps
description: *Business Case:* As a BCM, if Verifications are received from FICO, then I should be able to complete the cases raised for the same.

*Use Cases:*

* Auto initiate verifications received from FICO
* Verifications Tab
* Cases Tab

*Description:*

* Verification cases, case initiation logic, Assignment logic, fields visible to be kept same as PL journey.
* UI/UX, validations, logics to remain same as PL Journey
* CPVs will be completed on PD App and details will sync back to SFDC as per current implementation

After Data Verification, there are 2 scenarios:

# *If Verifications are received from FICO:*
## SFDC will automatically initiate the cases for the verifications received from FICO. 
## BCM will have to mandatorily work on the Cases initiated by SFDC before underwriting.
## All verification cases initiated would be triggered to BCM who has completed the data verification as in the case of PL.
## CPVs will be completed on PD App and details will sync back to SFDC as per current implementation
## BCM will have to complete cases verification first before proceeding to Underwriting.
## Cases tab will be same as PL and all the worklists, fields/validations will be same as PL.
## If cases are initiated, Stage & Sub-stage will get updated to “Verification” & “Verification Pending” respectively.
## User can view the case, however all the tabs ( below tabs complete screen will be same as PL.) will be visible as freeze/read only and BCM will not be able to perform any other action on these tabs expect working on cases.
### Applicant
### Loan
### Income Details
### Verifications
#### User will be able to view the cases status and history.
### Return/Audit History
### Document
### CAM Report
## After completion of all the verification cases received from FICO, below point 2 will start.
# *If Verifications are NOT received from FICO:*
## After completion of all the verification cases received from FICO, or If No verification is received from FICO then the case would move to Underwriter.
## Stage & Sub-stage will get updated to “Underwriting” & “Underwriting Pending” respectively.
## Case will be visible under “Underwriting Pending” worklist to BCM.
## User can view the case, all the tabs ( below tabs complete screen will be same as PL.) 
### Applicant
### Loan
### Income Details
### Verifications
### Return/Audit History
### Document
### CAM Report
acceptance: # If Verifications are received from FICO:
## Stage & Sub-stage will get updated to “Verification” & “Verification Pending” respectively.
## Case will be visible under “Verification Pending” worklist to BCM.
## SFDC will automatically initiate the cases for the verifications received from FICO. 
## BCM will have to mandatorily work on the Cases initiated by SFDC before underwriting.
## All verification cases initiated would be triggered to BCM who has completed the data verification as in the case of PL.
## Cases tab will same as PL and all the fields/validations will be same as PL.
## After completion of all the verification cases received from FICO, below point 2 starts.
# If Verifications are NOT received from FICO:
## After completion of all the verification cases received from FICO, or If No verification is received from FICO then the case would move to Underwriter.
## Stage & Sub-stage will get updated to “Underwriting” & “Underwriting Pending” respectively.
## Case will be visible under “Underwriting Pending” worklist to BCM.

key: ML-16273
summary: 13. Data Verification, Underwriting Screens
description: *Business Case:* After Disbursement, case will be submitted under BCM queue for Data Verification.

*Use Cases:*

* BCM Allocation
* Take Ownership
* Applicant Tab
* Document Tab

*Description:*

# The complete flow and functionality, logics and validations, UI will be same as PL journey. No change applicable anywhere.
# BCM allocation logic for cases is running as implemented in PL.
## All the worklist are created and visible as PL.
## BCM is able to Take Ownership of a case from Open Pool.
## BCM Reallocation flow is also there as PL.
# After taking Ownership, BCM is able to view below tabs:
## Applicant Tab
### Complete screen will be same as PL.
### All other fields for BCM/UW would be non-editable, when the case is in Data verification stage → Applicant Details screen.
### The BCM/UW would only be able to Submit or Return the case from Applicant Details and all other decisions would be hidden.
### All the working should be same as PL for Submit & Return button.
### Coapplicants Details will be visible in separate tabs within Applicant Tab
### Bank Staff Details section, fields are visible in the Employment Details section as per current PL functionality for app. coapps if Staff = Yes
## Document Tab
### Complete screen will be same as PL.
### the document list which was visible on “Document Screen” to IRO will be visible to BCM.
### BCM can only view all the fields of the documents including OSV column and cannot perform any Delete operation.
### BCM is allowed to upload the documents.
### BCM will see the same screen as that of IRO.
### Coapplicants Documents will be visible in separate tabs within Document Tab
# Clicking on Submit button, the case will move to Underwriter.
# Once clicked on submit button, below tabs will be visible to BCM and Complete screen of all the below tabs will be same as PL.
## Applicant
## Loan
## Income Details
## Verifications
### CPV
### Verification Initiate
## Return/Audit History
## Documents
## CAM Report
acceptance: # The complete flow and functionality is same as PL. No changes applicable any where.
# BCM allocation logic for cases is running as implemented in PL.
# All the worklist are visible as PL.
# BCM is able to Take Ownership of a case from Open Pool.
# After taking Ownership, BCM is able to view Applicant Tab & Document Tab.
# CAM Report is getting generated as per PL Journey
# Once Data verified is checked for all sections of app, coapps, user is able to submit the loan at Data Verification
# PAN Validation logic is working as per base PL journey as per current implementation - refer- [https://fincap.atlassian.net/browse/RAB-2849|https://fincap.atlassian.net/browse/RAB-2849|smart-link] 

*Reference Screens of PL Journey:*

_Data Verification:_

!image-20230307-104600.png|width=1531,height=662!

!image-20230307-104622.png|width=1260,height=491!

!image-20230307-104644.png|width=1234,height=604!

!image-20230307-104700.png|width=1239,height=597!

!image-20230307-104721.png|width=1531,height=793!

!image-20230307-105043.png|width=1536,height=790!

!image-20230307-105153.png|width=1534,height=800!

!image-20230307-105207.png|width=1536,height=787!

!image-20230307-105223.png|width=1536,height=800!

_Underwriting:_

!image-20230412-122927.png|width=925,height=470!

!image-20230307-111150.png|width=1536,height=791!

!image-20230307-111205.png|width=1536,height=789!

!image-20230307-111221.png|width=1536,height=790!

!image-20230412-123131.png|width=920,height=449!



!image-20230412-123109.png|width=918,height=481!



!image-20230307-111248.png|width=1536,height=788!

!image-20230307-111259.png|width=1536,height=789!

!image-20230307-111315.png|width=1536,height=791!

!image-20230307-111332.png|width=1536,height=772!

!image-20230307-111344.png|width=1536,height=788!

!image-20230307-111438.png|width=1536,height=792!



*Post closing Verifications:*

!image-20230307-111915.png|width=1536,height=790!

!image-20230307-112015.png|width=1536,height=789!

!image-20230307-112035.png|width=1536,height=790!

!image-20230307-112045.png|width=1536,height=789!

!image-20230307-112107.png|width=1536,height=790!

!image-20230307-112244.png|width=1536,height=864!

!image-20230307-112424.png|width=1536,height=864!

!image-20230307-112433.png|width=1536,height=864!

!image-20230307-112452.png|width=1536,height=864!

!image-20230307-112506.png|width=1536,height=864!

!image-20230307-112521.png|width=1536,height=864!

key: ML-16268
summary: 12. Refer screen, Data Entry Insurance screen, CBS Search, Data Entry for Bank account details
description: *Business Case:* As a IRO, I should land on Data Entry Insurance screen after clicking on Next button on Document Upload screen.

*User Case:*

# Insurance screen, Calculate Insurance Premium
# CBS Search Screen
# New Acc Opening for Bank workflow
# Open ECS/Capture Bank details
# Create new Bank Details record

*Description:*

# UI, fields to be kept same as PL journey.
# Fields, logics and validations to run same as PL journey. [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}please mention the logics which will remain same in AC for sanity{color}
# once user lands on Insurance details screen, complete UI/UX and fields visible on Insurance Screen will be same as PL.
!image-20230307-071908.png|width=1464,height=662!

# Insurance, Nominee, Appointee will not be pre-populated on screen for App, coapp for both insurance types Credit Protect, Hospi cash. User will manually add the insurance by selecting applicant, coapplicant and clicking on add insurance as per existing functionality of PL journey. 
# Mandatory insurance logic to remain same as PL journey.
!image-20230412-121456.png|width=926,height=472!
# User will call FICO_Insurance and get the premium amount for insurance. User is able to view Calculate Insurance button for viewing the premium amount (FICO call).
# Below two offers should be available for the IRO to select, for both Applicant and Co-applicant (if present) separately:
## For Hospicash:
### fixed charges are applicable - 150 per head. (Incl. of GST)
### Non-Mandatory and same should be configurable for future [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}what should be configurable? please mention{color}
## For Credit Protect (HDFC Life) Insurance:
### For Applicant this insurance would be mandatory
# Basis the offer selected for applicant and co-applicant necessary fields should be re-calculated as per below:
## The insurance premium amount is required to be deducted from the final sanction amount. (the same needs to be forwarded to FinnOne in Charges)
## Even the overall charges, needs to be deducted from the final sanction amount. (the same needs to be forwarded to FinnOne). [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}overall charges? which field is being referred here? {color}[~accountid:6273c3db7dd556006afdfe28] this will be summation of all the added insurance premium amounts
## Basis above, below fields would be recalculated:
##* “Net Disbursal” Amount
##* Net EMI Amount
# User should be able to enter nominee details for the insurance type selected.
# If Nominee is minor, then user should be able to enter the Appointee's details mandatorily. [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}if nominee is minor, mandatory selection of Appointee as per PL base journey{color}
# -New Document generated will be visible on FileNet- 
# User will be shown a Loan Details popup on click of Next button with below existing fields- [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}calculation logic will remain same as PL base{color}
!image-20230412-121421.png|width=936,height=500!
## Net Disbursal
## Net EMI Amount
## Stamp Duty
## Processing Fees
## GST
# -If credit protect is added, user will have to do OTP validation on next screen same as PL journey- - *_Not applicable at Data Entry Stage_*
# Once user clicks on Next button -post OTP validation-, user will land on an intermediate screen where CBS Search API will be called to check if there are any existing IDFC bank accounts of customer basis the CRN number. If SFDC receives bank account details in response, same will be visible on screen and user can proceed by selecting any one of the accounts. If no accounts are found in CBS for the customer, then on click of next button user will be navigated to next screen.  [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}what happens if user selects to go ahead with existing account? Also, is this applicable for Bank and IFBL both? {color}This is applicable for Bank, IFBL. If user selects existing IDFC bank account searched in CBS, user will land on a screen where the existing bank details will be visible
!image-20230412-121405.png|width=929,height=503!
# On this screen, Bank workflow user will be get a popup to opt to open new IDFC bank account or proceed with existing bank account. This popup won’t be applicable to IFBL workflow. IFBL user will land on screen with Stage substage- Data Entry, Disbursement Details Pending [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}please mention about open ecs call for IFBL casses{color}
!image-20230412-121545.png|width=924,height=466!
# If Bank workflow user selects Yes to open new bank acc, user will be able to see a screen to capture the details around the new bank account- Nominee Details etc.
!image-20230412-121644.png|width=918,height=442!
!image-20230412-121659.png|width=913,height=474!
# If Bank workflow user selects No on the popup, user will land on screen with Stage substage- Data Entry, Disbursement Details Pending. Open ECS to get initiated. FETCH ECS button will be available on UI.
!image-20230307-101554.png|width=1434,height=423!
# If open ecs not available, user will enter IFSC/MICR and click on fetch bank details
!image-20230307-101612.png|width=1417,height=537!

# User will enter account number, Account holder name
!image-20230307-101719.png|width=1387,height=464!

# Post this screen will get readonly. Next button will get disabled.
!image-20230412-124322.png|width=1445,height=676!
# The loan application will be assigned to open pool worklist of BCM of the branch for Data Verification.
acceptance: # insurance details, nominee, appointee are not prepopulated on screen
# user is able to add insurance for app/coapp and calculated premium
# user is able to search for existing bank idfc accounts. If found, user is able to select and proceed with any of them
# Bank user is able to see a popup to open new idfc bank account if there are no existing bank accounts found
# Base PL journey validations, functionalities, screens  are running and applicable
# User will have to manually enter Group Suraksha insurance details if loan amount is < 2lac [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}is this mandatory logic from Base PL {color}[~accountid:6273c3db7dd556006afdfe28] yes. for < 2lacs loan amt, group suraksha is mandatory in PL base loans. user will have to add insurance and then proceed further
# [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}nominee-appointee logics on insurance stage to work as per existing base PL journey{color}

key: ML-16265
summary: 11. Document Upload Screen
description: *Business Case:* As a IRO, I should land on Document Upload screen after once Eligibility FICO call is success so that I can captured all the mandatory documents.

*Description:*

# After DDE FICO response is successful, IRO will land on Document Screen on click of Next button.
# Complete UI/UX and fields visible on *Document Upload* screen will be same as PL.
# Validations and logics to remain same as base PL loan journey. [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}please mention the details which will remain same{color}
# Document checklist will also remain same as PL journey. No modification in the same. [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}please mention the details which will remain same{color}
# If user has selected Upload Physical Consent on Consent Screen but, failed to upload the document at that time, then it is mandatory to upload the same on this screen
# +All documents of latest disbursed  PL existing Loan should be visible+
# Document Type Income Documents will *not* be autopopulated (salary slip, salary certificate, Any) from Latest disbursed PL loan. DMS ID, Document should not get autopopulated on Document upload screen. Validation Applicable for applicant, coapplicant. 
# Income Details related documents -salary slip or salary certificate or Any will always be mandatory on screen based on the salary type selection. User has to upload the latest income details documents. Validation Applicable for applicant, coapplicants
# User will not be able to proceed to next screen without providing the income details related documents- salary slip/salary certificate/Any
#* Validation Applicable for applicant, coapplicant
#* document should be mandatory on UI for user to upload the same
# User will be able to proceed once all mandatory documents are captured.
# On click of Next button, user is getting navigated to Data Entry Insurance screen once all mandatory doc are uploaded and OSV is checked for all uploaded documents
acceptance: # When FICO callout is successful, IRO lands on Document Screen.
# Document checklist will also remain same as PL. No modification in the same.
# If user selected Upload Physical Consent on Consent Screen but, failed to upload the document at that time, then it is mandatory to upload the same on this screen.
# Income details documents- salary slip, salary certificate/any are not prepopulated from base loan.
# User is able to see toasts if mandatory docs are not uploaded for app, coapp
# DMS id of documents other than income document types - salary slip, salary certificate,any is getting prepopulated on document record
# _Document Details - DMS id is stamped from Base loan, OSV Check, Upload Date will be stamped as the base loan doc upload date._
# For newly uploaded documents, document is getting uploaded to filenet through DMS callout. [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}upload date should be as per document upload date for new documents collected. The document upload process will remain same as per base loan functionality for these new docs{color}
# User is not able to proceed if mandatory doc is not uploaded and OSV is not checked
# user is mandated to upload new income documents

key: ML-16262
summary: 10. SFDC to initiate 2nd FICO call for Eligibility after Loan And Product screen
description: *Business Case:* As a IRO, on click of Next button on Loan & Product screen, I should land on intermediate screen and automatic FICO call should happen to get loan eligibility in response

*Description:*

# After clicking NEXT on Loan & Product screen, user should land on intermediate screen and FICO call will be initiated automatically.
# Complete UI/UX and fields visible on intermediate screen will be same as PL.
# Validations and logics to remain same as base PL loan journey. [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}please mention clearly what will remain same?{color}
# FICO would be called with Stage ID “DDE”. Data send to FICO would be as per PL journey.
# If any data is modified in the FICO Call then the same details need to be send in the request in below tag: 
# {{"modifiedFields":{"fieldDetails":}}  [~accountid:6077d22c852e71006c8cfce7]{color:#ff991f} why is 6th point needed? {color}[~accountid:6273c3db7dd556006afdfe28] _as discussed earlier, we are retaining existing MEL MEL Repeat functionalities here. Refer the comment below._ 
!image-20230428-074024.png|width=782,height=177!
{{[{"fieldName":"PAN",}}
{{"category":"IDENTIFIERS"},}}
{{{"fieldName":"AADHAR",}}
{{"category":"IDENTIFIERS]}}}
# FICO in response would send verification which needs to be read by SFDC and initiate the same from below tags:
# {{"cpvOrTVRChecks": [{}}
{{"fiType": "Residence_CPV_Verification",}}
{{"isInitiated": false,}}
{{"isWaived": false,}}
{{"fiDecision": null,}}
{{"isRequired": true,}}
{{"tobeInitiated": true}}
{{},}}
# “tobeInitiated” = True then those verification needs to be initiated by SFDC at DV Submit. (Current Implementation)
# If FICO call gets failed, then user will be navigated to FICO Intermediary Screen but nothing will be visible except the failure message with a RETRY button.
# User can again initiate the FICO call by clicking on RETRY button. User should be able to try again and again till the call gets successful, otherwise user cannot move ahead.
# After FICO callout is successful, user will be navigated to Document screen.
acceptance: # On clicking NEXT on Loan & Product screen, FICO call gets triggered automatically.
# If FICO call gets failed, then IRO is able to retry triggering of FICO call till the call is successful.
# After FICO callout is successful, user gets navigated to Document screen.
# user is able to get respective Verifications in fiType
# eligibility is received in response

key: ML-16259
summary: 9. Loan Details screen
description: *Business Case:* As a IRO, I should land on Loan Details screen after Employment Details screen.

*Description:*

# After clicking NEXT on Employment screen, user will land on *Loan & Product screen.*
# Complete UI/UX and fields visible on Loan & Product screen will be same as PL journey.
# Field dependency, validations and logics to remain same as base PL loan journey.
# All the details *except* *Income Details section* will be pre-populated from the data of *latest disbursed PL loan application* on Loan & Product screen and all the fields will be editable. This will be applicable for applicant, coapplicants added in base loan. FOr the newly added coapplicant in repeat journey, the income details will be entered by the user manually
!image-20230307-062554.png|width=1402,height=520!
# Income Details section/fields won’t be prepopulated. User will add income manually in Income Details section
# Loan Details section fields are getting auto stamped as captured at loan asset record of current PL repeat loan. _Scheme field will be readonly on UI and repeat scheme selected on loan initiation popup will be visible. Section visibility Same as base PL journey._  
!image-20230307-063042.png|width=1390,height=242!
# Personal Loan Balance Transfer section will not be prepopulated from base loan 
!image-20230307-063140.png|width=1387,height=168!
# Reference Details will get prepopulated as captured from latest disbursed live PL loan
!image-20230307-063225.png|width=1390,height=222!

# Once user clicks on Next button, if all the validations are met, screen will move to intermediate screen to initiate 2nd FICO callout. 
acceptance: # Income Details are not captured and prepopulated from latest disbursed PL loan application on Loan Details screen
# All the details except Income Details, PL BT section, Loan Details section are pre-populated from the data of latest disbursed lPL loan application on Employment screen and all the fields are editable.
# Save As Draft, Cancel, Retrigger, Next buttons are visible at footer
# On retrigger, loan application is moving back to List of app, coapp screen and user is able to edit the details of App/coapps as required. Post that Retrigger API is running
# After clicking NEXT on Loan & Product screen, user lands on Loan & Product intermediate screen for 2nd FICO Call.
# ROI, PF of company name selected on Loan Initiation popup will be visible on UI/backend for PL Enterprise repeat scheme for {color:#ff991f}as per Enterprise master. For other repeat schemes, it will be as per their base journey as per scheme master. {color}[~accountid:6273c3db7dd556006afdfe28] updated this point
# [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}Field dependency, validations and logics to remain same as base PL loan journey. please mention retained fucntionality details for testing{color}

key: ML-16256
summary: 8. Employment Details Screen
description: *Business Case:* As a IRO, I should land on Employment screen after successful response of Posidex callout.

*Use Cases:*

* FICO Call success
* Employment Screen

*Description:*

# Complete UI/UX and fields visible on Employment screen will be same {color:#ff991f}as of base PL journey{color}
# Once FICO Call is successful, Highmark report screen will be visible on click of Next button. After clicking on Next button on Highmark report screen, IRO will land on *Employment screen.*
# Field dependency, validations and logics to remain same as base PL loan journey.
# All the details of applicant, coapplicant should be pre-populated from the data of *latest disbursed PL loan application* on Employment screen and all the fields should be editable. (Except Employment type of Primary Applicant)
# If new coapplicant is added for PL Repeat loan, user will manually enter the employment details of that new coapplicant on the screen
# After clicking NEXT on Employment screen, user should land on *Loan & Product screen.*
acceptance: # Once FICO Call is successful, after clicking on Next button on Highmark report screen, IRO lands on Employment screen.
# All the details are pre-populated from the data of latest disbursed PL loan application on Employment screen and all the fields are editable.
# Fields are visible autopopulated and editable for existing {color:#ff991f}base loan applicant, coapplicants{color}
# For coapplicants added newly in the repeat loan, fields will be blank and user will do manual data entry
# Save As Draft, Cancel, Retrigger, Next buttons are visible at footer
# On retrigger, loan application is moving back to List of app, coapp screen and user is able to edit the details of App/coapps as required. Post that Retrigger API is running {color:#ff991f}on click of Next button{color}
# After clicking NEXT on Employment screen, user lands on Loan & Product screen. 
# Staff section is visible on UI for app, coapp if Staff = Yes on PL Repeat loan initiation popup for app or on consent screen for coapps, Staff  selection is getting prepopulated at front end in Staff field in the section. Staff functionality working as per PL base journey. {color:#ff991f}Staff section is  independently visible for app,coapps depending on Staff = Yes opt in{color}
# [~accountid:6077d22c852e71006c8cfce7]  {color:#ff991f}Field dependency, validations and logics to remain same as base PL loan journey. please mention retained fucntionality details for testing{color}

key: ML-16253
summary: 7. Posidex Highmark
description: *Business Case:* As a IRO, after clicking Next from co-applicant screen, Posidex callout & then FICO callout should get triggered and I should be able to view the results on the Screen

*Use Cases:*

* POSIDEX Callout
* FICO Callout
* Highmark Screen

*Description:*

*Posidex Callout:*

# POSIDEX callout should get triggered, immediately after user clicks NEXT on Co-app screen.
# Complete UI/UX will be same as PL base loan journey.
# Post Applicant Details submission, Posidex call should get triggered with the changes {color:#ff991f}(Demographic Details, Address Details, New Identifiers added){color} if IRO has done any on Applicant/coapplicant Details screens
# For all PL Repeat cases Posidex would run. 
# For Repeat Loans, scheme would flow in the tag in Posidex request "SchemeId" : "", _basis this Tag Posidex would run PL Repeat Rules_. Scheme ID of current loan to flow.
# If Posidex gets rejected then the case should get hard reject and user will not be able to perform any further actions.
# If Posidex is failed due to any reason, user should be given an option to retry the posidex call, also the reason for Failure should be displayed on front end.
# User can initiate the call again by clicking on "Retry" button visible.
!image-20230328-071601.png|width=1466,height=673!
# If Posidex is successful then FICO call should get triggered automatically.
# If posidex decision is refer in DEDUPE response, MATCHDETAILS API is getting initiated. Refer cases are getting initiated and assigned to user as per current implementation in PL journey
!image-20230328-071539.png|width=1461,height=734!

*FICO Callout:*

# After posidex, FICO Call would happen as per existing PL Flow with stage ID “QDE”.
# After Posidex callout is successful, FICO/Highmark callout should get triggered automatically.
# There will be no action required on front end by the user for initiating FICO call.
# If FICO call is successful, then user will be navigated to intermediary screen on click of Next button.
# If FICO call is failed due to any reason, then user can initiate the call again by clicking on "Retry" button.
# Posidex and Highmark Screen to remain same as PL, also the validation would remain same. [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}please mention validation details{color}

*Highmark Screen:*

!image-20230328-071421.png|width=1498,height=734!

# If FICO/Highmark callout is successful then user should get navigated to intermediate screen.
# User should be able to view the Loan Eligibility under Loan Status ribbon.
# User should be able to view the requested loan amount and same should be editable.
# User should be able to view the tenure for the eligible loan.
# User should be able to add a Co-applicant or edit Applicant details by clicking on "Retrigger" button.
# Clicking on "Retrigger" user should be navigated to co-applicant screen.
# User should be able to move ahead to Employment screen by clicking on "Next" button
acceptance: # POSIDEX callout gets triggered, immediately after user clicks NEXT on Co-app screen.
# If IRO has done any changes on Applicant Details in the editable fields, same are flown in the callout i.e. updated values are flown in callout.
# After Posidex callout is successful, FICO/Highmark callout should get triggered automatically.
# If FICO/Highmark callout is successful then user should get navigated to Intermediary screen on click of Next button.
# All the functionality of Posidex Callout, FICO Callout & Highmark Screen is same as PL flow, which is also mentioned in description below.
# If loan is retriggered, Retrigger API is getting initiated on click of Next button on list of app/coapp screen
# [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}User should be able to add a Co-applicant or edit Applicant details by clicking on "Retrigger" button.{color}
# Once FICO call is success or Approve, then SMS is getting triggered to the customer in the same format as of base PL journey.
# SMS logic to remain same as of base pl journey

key: ML-16190
summary: Modifications to MEL Unnati Program-Version 1
description: Proposed : 



# !image-20230306-044145.png|width=96.42857142857143%!

ROI to be updated to 23.5 for above label



2.  ROI to be updated to 24 for below label

!image-20230306-044246.png|width=100%!
acceptance: # Changes to reflect in Production as described

key: ML-16130
summary: Aadhar QR masking in all upload categories (auto + manual upload)
description: Currently, Aadhar QR masking functionality does not exist.

Proposed - Aadhar QR to be masked as per below points - 

# If the Aadhar is uploaded automatically through EKYC/CKYC/SKYC.
# If the Aadhar is uploaded manually during document upload stage as POI/POA/relationship proof or as any other category.
acceptance: As mentioned in the Description,, Aadhar QR should be masked in all categories.

key: ML-16070
summary: 6. List of coapps, Coapp Details screen
description: *Business Case:* As an IRO, I should be able to view the Co-applicant Details (if available in base loan/PL Repeat), after clicking next on applicant details screen.

*Description:*

# Screen UI/UX and fields visible on co-applicant details screen will be same as PL journey. _FIelds document file attached in the story._
# Fields, logics, validations to run same as base PL loan application journey
# On Co-app screen, all details would be Auto-populated as that of the *latest disbursed PL loan* i.e. co-applicants added in that case will be visible to the user.
# User will be able to Add or delete or edit the co-applicant details.
# On Clicking “Add Co-applicant” button on Co-app screen, IRO would be navigated to consent screen and complete the Staff, Mobile otp consent, Pan/ Form 60 selection, DoB, KYC
## For newly added coapplicants, Staff field will be editable on Consent screen before mobile number field - as per current PL journey
# If user wants to edit co-applicant, then on click of Edit button, user will get navigated to Consent screen for OTP based consent/verification after which user will land on co-applicant details page and same will be editable
## For Existing coapplicants, Staff field is *editable* on Consent screen UI and field value is visible as -Select- by default and user will be able to continue with Mobile otp verification post selecting Staff value as Yes/No
# If POA and POI is uploaded same needs to be updated at Account level. Previous Address needs to make inactive and new address needs to be updated *post the loan gets disbursed* for both Applicant and Co-applicant - *_to be same as MEL MEL repeat._*
acceptance: # All fields are visible same as base PL loan application journey
# On Co-app screen, all the details are Auto-populated as that of the *latest disbursed loan* i.e. co-applicants added in that case are visible to the user
# User is able to Add or delete or edit complete co-applicant details.
# On Clicking “Add Co-applicant” button on Co-app screen, IRO gets navigated to consent screen
# If user adds new coapplicant in repeat loan, user is able to navigate to consent screen, complete Staff Selection, Mobile otp consent, Pan/ Form 60 selection, DoB, KYC as per base loan flow and land on coapplicant details screen
# If user wants to edit co-applicant, then co-applicant details page is editable after completing OTP consent for coapplicant
# If base loan had one or more Coapplicants added, user is able to delete the existing prepopulated coapplicants in repeat loan
# If POA and POI is uploaded same needs to be updated at Account level
## Previous Address needs to make inactive and new address needs to be updated for both Applicant and Co-applicant
# If user clicks on Edit for Applicant/coapplicant on List of App coapp screen and comes back to Applicant/{color:#ff991f}coapplicant{color} screen, details are visible in editable mode
# -If salary type = Cash for Primary Applicant, Addition of coapp will be mandatory as per existing PL validation. i.e. - at least one coapp should be present in repeat loan if salary type = Cash selected by primary applicant-
# For Salary type = Salary Slip or Salary Certificate, coapp addition is non mandatory as per current PL journey. User is able to proceed to posidex with or without coapplicants
# -If salary type = Cash for Primary Applicant and coapplicant is not present/deleted, user is not able to proceed to posidex without coapplicant - existing validation-
# Existing validations of base PL journey are Applicable and running-
## Existing PL Field level validations and toasts, Logics on Next buttons 
## Scheme
## Mandatory Coapp logic
# Staff selection is not getting prepopulated at backend from latest disbursed pl loan. User is able to select Staff yes/No manually on consent screen
# PAN/form 60 validation built in [https://fincap.atlassian.net/browse/RAB-2849|https://fincap.atlassian.net/browse/RAB-2849|smart-link]  will be applicable to PL Repeat journey on Applicant Details screen, Data Verification screen
# {color:#ff991f}complete scenario testing to be done by  1. adding co-applicants, 2. deleting existing ones 3. adding and deleting co-apps, editing coapps and apps and other possible scenarios  as mentioned above in description and AC{color}
# {color:#ff991f}POI and POA logics to remain same as MEL-MEL Repeat journey{color}

key: ML-16067
summary: 5.1 Applicant Details screen data population
description: *Business Case:* As a IRO, I should be able to view the Applicant Details, after taking consent from the customer so that I can update fields or proceed with loan application as required.

*Description:*

# After OTP is validated successfully, IRO will land on Applicant Details page.
# On landing on Applicant Details page, all the fields will be auto populated with all data as that of {color:#bf2600}*latest disbursed PL loan .*{color}{color:#ff991f} Refer{color} [https://fincap.atlassian.net/browse/ML-16351|https://fincap.atlassian.net/browse/ML-16351|smart-link] 
# _Screen UI/UX and fields visible on applicant details page will be same as PL journey. Fields document file attached in the story._ As per attachment, all fields to be made visible on UI
# _Existing Logics, validations will be running on applicant details screen same as of base pl loan application journey._ 
# Mobile number entered at Consent page would be auto populated and non editable.
# POI, POA logic to remain same as MEL-MEL Repeat journey.
## Once the IRO user lands on Applicant details screen on PL Repeat loan, the Proof of Identity field will be auto stamped from *latest disbursed PL/PL Repeat loan.* Same will be in readonly mode on UI. User will be able to add new identifiers, but change in Proof of Identity will not be allowed. Sample MEL Repeat screenshot below. [~accountid:6273c3db7dd556006afdfe28] updated point to Latest disbursed PL/PL Repeat loan.
!image-20230222-104548.png|width=1152,height=484!
## Proof of Address will be auto stamped as POA document from *base loan/latest PL Repeat loan.* This will be editable on UI. [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}is this editable as per existing build of MEL Repeat? - {color}{color:#0747a6}Yes{color}{color:#ff991f} {color}[~accountid:6273c3db7dd556006afdfe28] screenshot below- from MEL Repeat.
!image-20230321-113312.png|width=1474,height=558!
# If POA and POI is uploaded same needs to be updated at Account level. Functionality to be same as MEL Repeat on Details to updated at accounts level
# System to throw existing validation toast message on Applicant details screen if the Requested loan amount is not in the Loan Amount range of *scheme opted for the current Repeat loan*.
## User will not be able to proceed to next screen if the prepopulated loan amount or user entered loan amount is not present in the Min-Max range range 
acceptance: # On landing on Applicant Details page, all the fields are auto populated with data of the disbursed live PL loan application 
# Fields are editable on UI
# If Single KYC/EKYC/CKYC is success for the *base loan*, sections are in read only mode (LAN-9601972105) [~accountid:6077d22c852e71006c8cfce7] {color:#ff991f}is this how it is working in MEL Repeat? {color}[~accountid:6273c3db7dd556006afdfe28] _Yes currently it works like this in MEL Repeat_
!image-20230301-122432.png|width=1384,height=562!
!image-20230301-122450.png|width=1389,height=253!
!image-20230301-122510.png|width=1386,height=521!

# If all KYC types are fail, i.e. for manual entry in base loans, sections, fields are editable in PL repeat loan  
# Mobile number entered at Consent page would be auto populated and non editable.
# If POA and POI is uploaded, same is getting updated at Account level 
# Previous Address needs to make inactive and new address needs to be updated for both Applicant and Co-applicant once PL repeat loan is disbursed
# Existing validations are working same as Base PL journey
# For *Salary type = Cash*, existing validation is running on Applicant details screen for requested loan amount for _PL RPL Repeat scheme_
# Once user lands on Applicant details screen, stepper is at applicant and steppers are visible in Gray
# once user clicks on Next button, stepper is getting green and checked.
# If user clicks on Edit for Applicant on List of App coapp screen and comes back to Applicant screen, details are visible in editable mode
# KYC related fields are getting updated at backend as per existing logics of base PL journey
# Staff field selection is getting autostamped from latest disbursed pl loan at backend at Applicant record
!image-20230321-113634.png|width=441,height=194!
# below fields are not getting prepopulated at backend from base PL loan or Contact- (AC point added by referring to MEL-MEL Repeat design/logic)
!image-20230224-115601.png|width=877,height=307!

17. PAN/form 60 validation built in [https://fincap.atlassian.net/browse/RAB-2849|https://fincap.atlassian.net/browse/RAB-2849|smart-link]  will be applicable to PL Repeat journey on Applicant Details screen, Data Verification screen

key: ML-16064
summary: 4. OTP based SMS Consent on consent screen
description: *Business Case:* As a IRO, I should be able to take consent from the customer to continue the loan application punching.

*Description:*

# Once IRO clicks on “+New Application”, selects *Rural PL* as product type, selects scheme and click on CREATE NEW APPLICATION button on popup, IRO will land on send consent screen.
# Customer existing Mobile Number will be prepopulated and editable and visible to IRO on UI with a Button “Send OTP”, to send Consent message to the customer. The mobile number would be populated from latest disbursed PL loan
# User will be able to complete the OTP based consent as per current implementation. {color:#ff991f}Refer- {color}[https://fincap.atlassian.net/browse/RMR-15|https://fincap.atlassian.net/browse/RMR-15|smart-link] 
# Once the Digital consent or physical consent is taken, the case would land on Applicant details page automatically.
# The KYC flow for such customer would skipped as he/she would be an existing customer. Single KYC/CKYC/EKYC would be skipped.
# {color:#ffc400}If coapplicant was added in base loan, then once the user clicks on Edit button on list of app/coapp screen, user will get navigated to same consent screen and same flow will be applicable for coapplicant as well for prepopulated mobile number verification.{color}
acceptance: # When the user has selected PL as product and the same CRN does not have an WIP case, the loan would land on KYC Page - Send Consent screen.
# User is able to see mobile number *latest disbursed PL loan* prepopulated, editable on consent screen
# If IRO edits the mobile number, then same is getting stamped on SFDC. 
# The new mobile number is visible on Applicant details screen.
# SMS format will be same as PL base journey as - “Thank you for applying for Rural PL, Please read T&C before entering OTP. OTP: 718515 T&C: [https://idfcfrtest.com/wilk9o|https://idfcfrtest.com/wilk9o] Regards, IDFC FIRST Bank.” 
# On clicking the “Send OTP” button, SMS is triggered on the entered mobile number.
# 3 attempts are given to IRO to enter OTP and the OTP validation & failed scenarios are working as mentioned in description.
# If OTP is failed, IRO is able to upload physical consent. 
# If document gets uploaded successfully or failed after 3 attempts, user gets navigated to Applicant Details screen automatically.
# Single KYC/CKYC/EKYC gets skipped and Once the Digital consent or physical consent is taken, the case would land on Applicant details page automatically.
# A placeholder to enter and validate OTP should be visible to IRO. 
# IRO should get 2 retry to validate OTP. (Total 3 attempts)
# If OTP Success i.e. gets validated, then the case should be moved to Applicant Details Stage i.e. user will be navigated to Applicant Details screen automatically. 
# User is not able to change mobile number once OTP validation is success or physical consent document is uploaded
# If OTP Failed:
## If OTP does not get validated in all the attempts, then upload option should be visible to IRO to upload Physical Consent. 
## On clicking the checkbox for ‘physical consent form’, upload option should be visible and should be made mandatory for upload.
## User should be able to upload a document on clicking the same.
# User is able to try to upload a document for Total 3 attempts – i.e. After upload if failed once, 2 retries more will be given:
## If failed – show Retry option
### If still fails after 3 attempts – then user can move ahead, but user will have to compulsorily upload the document on the “Document Upload” screen.
## If success – Green tick will be visible with the uploaded document name
### After document is uploaded successfully, the uploaded document should be visible under document type “Customer Declaration”.
### If document gets uploaded successfully or failed after 3 attempts, user will be navigated to Applicant Details screen automatically.
# Once OTP consent is success or Document upload is success,
## respective toast messages are visible as PL
!image-20230321-112642.png|width=1297,height=210!
!image-20230321-112223.png|width=753,height=151!
## PAN/Form 60/DoB selection, KYC flow is getting skipped
## user is getting navigated to Applicant details screen
# Customer Mobile number would be auto populated {color:#bf2600}*as that of the latest disbursed PL loan*{color}, but would be editable.
# {color:#ffc400}User is able to complete mobile OTP verification for existing coapplicants in same flow as of Applicant.{color} 

key: ML-16060
summary: Requested Loan Amount validations to be run on Applicant Details screen
description: *Description:*

# System to throw a validation toast message on APplicant details screen if the Requested loan amount is not in the Loan Amount range of *scheme opted for PL Repeat loan* as- “Loan Amount should be between <Scheme level Min Loan Amount> to <Scheme level Max Loan Amount>”
# User will not be able to proceed to next screen if the prepopulated loan amount or user entered loan amount is not present in the Min-Max range range 
acceptance: TBD

key: ML-16057
summary: 5.2 POI, POA population on Applicant Details screen
description: *Description:*

# POI, POA logics to be same as MEL Repeat
# Once the IRO user lands on Applicant details screen on PL Repeat loan, the Proof of Identity field will be auto stamped from *base loan/latest PL Repeat loan.* Same will be in readonly mode on UI. User will be able to add new identifiers, but change in Proof of Identity will not be allowed. Sample MEL Repeat screenshot below:
!image-20230222-104548.png|width=55.6577480490524%!
# Proof of Address will be auto stamped as POA document from *base loan/latest PL Repeat loan.* This will be editable on UI.
# {color:#bf2600}*The scenarios To be checked in case of Ekyc/ckyc success cases.*{color}
# {color:#bf2600}If POA and POI is uploaded same needs to be updated at Account level. Previous Address needs to make inactive and new address needs to be updated for both Applicant and Co-applicant. - Need clarity on the point, need confirmation if this is required{color}
acceptance: TBD

key: ML-16054
summary: 5.3 New fields to be shown on PL Repeat Loan Applicant Details screen
description: *Business Case:* As an IRO user, once I should be able to see the Scheme, FinnOne ID prepopulated on APplicant details screen for a PL Repeat loan in readonly mode.



*Description:*

Current Implementation:

!image-20230222-103001.png|width=1400,height=164!

Expected Implementation:

!image-20230222-103034.png|width=50%!

# Below New fields will be shown on Applicant Details screen for PL Repeat journey loan applications.
## Scheme
## FinnOne ID To Be Foreclosed
# Scheme field value will be auto stamped as per selection on Loan creation screen. It will be readonly on UI.
# FinnOne ID To Be Foreclosed will be stamped as the FinnOne ID of the *latest disbursed PL loan* *from which the data is captured*. (It can be a disbursed PL base loan or a disbursed PL Repeat loan). It will be readonly on UI.
# These two fields should not be visible on base loan application journey of PL on applicant details screen.
acceptance: # user is able to see new fields Scheme, FinnOne ID To Be Foreclosed in Loan Details section on applicant details screen for PL Repeat Loan applications
# FinnOne ID To Be Foreclosed is getting stamped from latest disbursed PL loan
# Scheme field is getting stamped as per scheme master
# field not visible on Base PL Loans
# {color:#ff991f}Should work for first disbursed loan (base loan), second disbursed loan (PL repeat) and further top up journeys, FinnOne ID To Be Foreclosed will be stamped as the FinnOne ID of the latest disbursed loan{color}

key: ML-16026
summary: 3.1. PL Repeat Loan Initiation
description: *Business Case:* As an IRO user, I should be able to initiate a PL Repeat loan application by doing a global search based on CRN/Applicant Name/Mobile Number of the customer.

*Description:* 

* *Loan Origination/Initiation to be kept same as MEL Repeat* 
* User Logs in to SFDC
* User enters CRN/Applicant Name/Mobile Number in Global search for searching of Base PL Loan.

# {color:#403294}*Scenario 1 – Match not found (in case no match after doing Global Search)*{color}
## User to initiate new PL base loan.
# {color:#403294}*Scenario 2 - Match Found:*{color}
## User would see the Accounts as well as all the applications of the customer. (WIP/Disbursed)

!image-20230301-094246.png|width=946,height=468!

!image-20230301-094347.png|width=961,height=424!

b. On clicking the Account of the customer, User would land on Account record details page

c. A button would be present on right hand side Corner “*+ New Application*”.

!image-20230301-094644.png|width=957,height=476!

d. To initiate a new PL Repeat loan application, user will click on “*+ New Application*” button. On clicking, user will get a popup where an option to select Product will be provided.
acceptance: # Design, implementation same as MEL-MEL Repeat
# All the scenarios are working as expected for Global Search.
# user is able to see the loan initiation popup on click of +New Application button.

key: ML-16023
summary: 2. Cycle Count logic to be built for PL, PL Repeat, PL+ loans
description: *Applicable BU:* PL, PL Repeat, PL+(in future)

*Description:*



*Current Implementation in MEL-* 

Cycle count is maintained at contact for the disbursed loans.

!image-20230224-110636.png|width=1112,height=594!

*Expected Implementation for PL BU:*

# For all PL Loan Applications, SFDC needs to maintain a cycle count. A customer with PL Loans, PL+ Loans, PL Repeat Loans would have a count maintained on contact level as per current MEL implementation. 
# A new field to be created at Contact/Person Account to capture the current count of all PL loans. Field Label- *PL loans count*
# For each disbursed PL Loan, the counter will be increased by 1. Example illustration below-
## If the Customer has initially taken *PL* Loan first time, then the count of that loan would be “1” at contact/person account
### PL count to be maintained at the current disbursed loans on org. To be kept at 1
## When the customer comes again and is eligible for *PL Repeat* the count of the loan becomes “2” at contact/person account
## And if the same customer revisit for *PL+* loan, the count of that loan becomes “3” at contact/person account
## And so on.
## No specific sequence for PL Repeat and PL + to be hardcoded.
# Hence, for all 3 variant of PL – PL/PL+/PL Repeat, the count should be stamped at back-end on contact/person account
# The Count is valid for only Disbursed loans. PL/ PL repeat /PL + cases which are not disbursed/are WIP should not be included in the counting.
acceptance: # Cycle count field *PL loans count* is visible on Loan Contact
# Count is maintained based on the latest disbursed loan application
# count is getting updated by +1 for each disbursed PL, PL Repeat or PL Plus loan
# Once the first loan of the customer is disbursed, the field value is getting updated from 0 to 1 on contact 
# if new loan application is created and disbursed for a Coapp added in any existing disbursed loan application, count of loan is not getting updated on previous loan primary applicant contact
# no impact on count due to FCRB, i.e. if customer’s previous loan is foreclosed
# PL loans count field should be available in existing reports with Contact/Customer 
# Cycle count is getting updated{color:#ff991f} for any journey flow in PL journey- Enterprise, Prime, Normal PL RPL{color}

key: ML-16020
summary: 1. Initial Configurations required for PL Repeat journey loans
description: *Applicable to:* PL Repeat

*Description:*

*Current PL Scheme Configurations:*

# *PL ENTERPRISE* (Bank)
!image-20230220-104106.png|width=1087,height=858!
# *PL ENTERPRISE* (IFBL):

!image-20230220-104130.png|width=1070,height=860!

3. *PL PRIME_BANK* (Bank)

!image-20230220-104522.png|width=1077,height=861!

4. *PL PRIME_IFBL* (IFBL):

!image-20230220-104608.png|width=1063,height=862!

5. *Rural-RPL Bank* (Bank):

!image-20230220-104729.png|width=1072,height=863!

6. *Rural-RPL Bank* (Bank):

!image-20230220-105435.png|width=1061,height=863!

7. *Rural-RPL IFBL* (IFBL)

!image-20230220-104839.png|width=1072,height=864!

8. *Rural-RPL IFBL* (IFBL):

!image-20230220-105000.png|width=1066,height=864!

PL Scheme configuration maintained at Custom metadata.

Master maintained for PL Enterprise scheme



*Expected Implementation:*

A. *Scheme Configuration for PL Repeat:*

# Design/logic implementation of Scheme Master, Custom Metadata at record level to be kept same as current PL schemes. Reference screenshot below:
!image-20230320-111448.png|width=1266,height=710!
!image-20230320-111511.png|width=1291,height=490!

# SFDC will maintain PL Repeat scheme records - Scheme grid (Loan Amount interval, ROI, tenure, PF, Scheme Group - {color:#bf2600}attached in the story{color})
# 6 New Scheme IDs will be created in FinnOne for the new PL Repeat schemes for configurations in SFDC. Reference table below.
# Currently, One to One mapping of scheme will be maintained. Schemes ID/Scheme name should not be hard coded. In future system should allow to change the scheme opted in Base loan  - change should be a configuration.
# Custom Metadata to be configured for Repeat schemes of PL based on the *Salary Type* as per current implementation of PL scheme. Refer the “Rural-RPL Repeat” tab in the attached excel sheet for configuration. ROI will be referred from this metadata for PL repeat loans.  Reference screenshot below.
!image-20230320-112127.png|width=1269,height=624!
# Separate master should not be maintained for Name of corporate. Existing master to be used. Any new company addition should reflect for PL and PL Repeat journeys. Reference screenshot below.
!image-20230320-111718.png|width=55.6577480490524%!

*Scheme IDs to be configured:*

|*Repeat Scheme Name*|*Scheme ID*|
|PL Prime Repeat Bank|75746|
|PL Prime Repeat IFBL|75747|
|Rural-RPL Repeat Bank|71205|
|Rural-RPL Repeat IFBL|71206|
|PL Enterprise Repeat Bank|75748|
|PL Enterprise Repeat IFBL|75749|

7. For Below Scheme level field stamping, MEL repeat scheme records to be referred

|Scheme_Category__c|
|NONREFUNDABLE_PROCFEE_AMT_TAX_APPLICABLE__c|
|NON_REFUNDABLE_PROCFEE_AMT_INEXC_TAX__c|
|NON_REFUNDABLE_PROCFEE_FUNDED__c|
|NON_REFUNDABLE_PROCFEE_CHARGEID__c|
|Stamp_Duty_CHARGEID__c|
|STAMP_DUTY_FUNDED__c|
|STAMP_DUTY_INEXC_TAX__c|
|STAMP_DUTY_TAX_APPLICABLE__c|

!image-20230321-083137 (b0c356ef-39c5-4754-81ba-6118bb43bcc1).png|width=66.66666666666666%!

B. New *Journey Flow* picklist value to be added on loan application as- *Rural* *PL Repeat*
acceptance: # Design/logic implementation of Scheme Master, Custom Metadata at record level to be kept same as current PL schemes
# New schemes are created in SFDC for PL Repeat loan as per attached master
# PL Repeat Scheme Nomenclature as per attached scheme master
# Design implementation to be kept same as MEL-MEL Repeat journey.
## ROI details are captured from Custom metadata
## Loan Amount range is considered from Scheme master records
# {color:#ff991f}custom meta data is configured as per attached excel{color}

key: ML-15891
summary: PL Enterprise -change in master set up
description: *Technical Development*

# Existing PL Enterprise master from Production to be updated in such a way that any change requested by Product can be handled directly by L1 with data loader
# Moving the Custom metadata records into a custom object for PL Enterprise or similar solution. ( Also if we can build a separate Master which can be maintained in Master Global data list)
acceptance: # Existing PL Enterprise master from Production to be updated in such a way that any change requested by Product can be handled directly by L1 with data loader

key: ML-15888
summary: Modifications to MEL Unnati program
description: Below config changes to be done in Custom metadata types

*Change applicable under this story as below. Attached UAT screenshots of scheme records.*

# *MEL Bank* - Deactivate Unnati check for *isUnnatiVisible* for below labels.  

!image-20230222-045458.png|width=91.66666666666667%!

2. *MEL IFBL*-Deactivate Unnati check for *isUnnatiVisible* for below labels.  

!image-20230222-045742.png|width=91.66666666666667%!

*Assumption* : Unnati box will not be visible on UI for above mentioned loan amount in normal MEL schemes for both workflows ( BCM and DDE)

2. *MEL Repeat Bank , IFBL* - changes in Min Loan Amount to 400001, changes in roi from 19.5 to 17 %

!image-20230217-062953 (83a55c77-77bd-4d4b-8c26-d85543aea1ac).png|width=1219,height=29!

!image-20230217-063014 (29498472-856e-4a8a-85f0-deacb4f55860).png|width=100%!

*Assumption* :  

MEL REPEAT BANK- Actual rate benefit will be visible for customers taking loan amount between 4 to 5lac. If unnati is not checked rates for 5-10lac bracket would still continue to be 19.5, for 2-3lac would be 23.5 and for 3-5lac would be 21.5 if unnati is not selected

MEL REPEAT IFBL- Actual rate benefit will be visible for customers taking loan amount between 4 to 5lac. If unnati is not checked rates for 5-10lac bracket would still continue to be 19.5, for 2-3lac would be 24 and for 3-5lac would be 22 if unnati is not selected

*Unnati box will still continue to be visible as per current design for loan range 2 to 10 lac

3. *Surrogate Bank, IFBL* - changes in Min Loan Amount to 400001, changes in roi from 19.5 to 17 %

!image-20230217-062906 (64822db4-a1c2-4281-8d32-9812bd6d1d30).png|width=1230,height=32!

!image-20230217-062922 (65e3181d-49a7-48c9-95b9-2fb0b4f1b095).png|width=1222,height=31!

*Assumption* :

MEL Surrogate BANK- Actual rate benefit will be visible for customers taking loan amount between 4 to 5lac. If unnati is not checked rates for 5-10lac bracket would still continue to be 19.5,  for 3-5lac would be 21.5 if unnati is not opted

MEL Surrogate IFBL- Actual rate benefit will be visible for customers taking loan amount between 4 to 5lac. If unnati is not checked rates for 5-10lac bracket would still continue to be 19.5,  for 3-5lac would be 22 if unnati is not opted

*Unnati box will still continue to be visible as per current design for loan range 3 to 10 lac
acceptance: * As given in the description, changes to be done in Custom meta data types
* All loans amounts between 200001 and 300000 (inclusive ) will be charged 23.5 ROI for RURAL MICRO ENTERPRISES LOAN - BANK
* All loans amounts between 200001 and 300000 (inclusive ) will be charged 24 ROI for RURAL MICRO ENTERPRISES LOAN - IFBL
* Unnati box will not be visible on UI for above mentioned loan amount in normal MEL schemes for both workflows
* MEL REPEAT BANK- Actual rate benefit will be visible for customers taking loan amount between 4 to 5lac. If unnati is not checked rates for 5-10lac bracket would still continue to be 19.5, for 2-3lac would be 23.5 and for 3-5lac would be 21.5 if unnati is not selected
* MEL REPEAT IFBL- Actual rate benefit will be visible for customers taking loan amount between 4 to 5lac. If unnati is not checked rates for 5-10lac bracket would still continue to be 19.5, for 2-3lac would be 24 and for 3-5lac would be 22 if unnati is not selected
* *Unnati box will still continue to be visible as per current design for loan range 2 to 10 lac in MEL Repeat for both workflows
* MEL Surrogate BANK- Actual rate benefit will be visible for customers taking loan amount between 4 to 5lac. If unnati is not checked rates for 5-10lac bracket would still continue to be 19.5, for 3-5lac would be 21.5 if unnati is not opted
* MEL Surrogate IFBL- Actual rate benefit will be visible for customers taking loan amount between 4 to 5lac. If unnati is not checked rates for 5-10lac bracket would still continue to be 19.5, for 3-5lac would be 22 if unnati is not opted
* *Unnati box will still continue to be visible as per current design for loan range 3 to 10 lac for MEL Surrogate - both workflows
* Should work for fresh and WIP cases
* Should work for retrigger scenarios
* The cases which are already sanctioned,  would reflect as per current offering
* E2E journey should work for fresh and WIP case

key: ML-15884
summary: Code changes for PL Enterprise_IFBL
description: Applicable : PL Enterprise 

*Technical development*

*Current* : The hardcoding for the PL Enterprise name only was done at 5 places in code to differentiate the journey

*Proposed* : Change is to  make it configurable using custom label or metadata
acceptance: # PL Enterprise IFBL and Bank workflows to be tested end to end and FinnOne submit to be checked
# Test WIP loans for PL Enterprise Bank workflow, functionality should work E2E as it is

{quote}{quote}

key: ML-15850
summary: CAM Report- Modifications
description: nan
acceptance: 

# user should be able to see the updated details on CAM report document generated on UW screen.
# user should be able to see the updated details on CAM report document generated on Document Generation screen and Filenet.
# in retrigger scenario, user should be able to see the latest details on the CAM report document on Underwriting, Document Generation screen, Filenet.

key: ML-15838
summary: PL Enterprise -change in master set up
description: *Technical development*

# Existing PL Enterprise master from Production to be updated in such a way that any change requested by Product can be handled directly by L1 with data loader
# Moving the Custom metadata records into a custom object for PL Enterprise or similar solution. ( Also if we can build a separate Master which can be maintained in Master Global data list)
acceptance: # Existing PL Enterprise master from Production to be updated in such a way that any change requested by Product can be handled directly by L1 with data loader
# Existing PL Enterprise journey for Bank workflow should work as it is for new and WIP loans 
# Any bulk update  (addition, deletion, updation)  in ROI, PF , Company name, code could be done at L1 level through data loader or any software
# all company entities from latest prod master is available in the revised location

key: ML-15819
summary: Enterprise Master- Rev 5
description: Note : Applicable only for Bank and not for IFBL.

*Proposed* :

Attached file to be referred to add list of corporates and their corresponding ROI & PF values to Enterprise Master.

Only yellow highlighted items in the master file to be worked upon
acceptance: # Enterprise master is replicated in SFDC as per attachment

key: ML-15816
summary: Addition of Geo Tags in SFDC reports
description: nan
acceptance: User should be able to view Geo tags in SFDC reports

key: ML-15784
summary: Addition of one Terms and condition to Sanction Letter for RMEL/RPL
description: Below clause to be added in the Sanction letter (after clause no. 23) - 

“The Borrower understands, acknowledges and agrees that the Facilities are +*_uncommitted facilities_*+, are recallable by IDFC Bank on demand and may be cancelled and repudiated in part or in entirely by IDFC Bank at any time without notice and without giving any reason. Sanction or part disbursal of the facility should not be construed as giving rise to binding obligations on the part of IDFC FIRST Bank to provide the facility mentioned aforesaid. The Facility mentioned aforesaid will be available +*_solely at IDFC FIRST Bank’s discretion_*+ and IDFC FIRST Bank will not be liable for any action taken by the borrower on the basis of this sanctioned facility.”



This clause to be added in all the regional languages mentioned below - 

# Hindi
# Gujarati
# Tamil
# Telugu
# Oriya
# Kannada
# Marathi
# Malayalam
# Assamese
# Bengali
# Punjabi
acceptance: New changes to be displayed on SL

key: ML-15761
summary: Policy premium amounts to be sent in the EMORPHIS API request
description: *Business Case:* Sfdc to send the PMJJBY, PMSBY premium amounts in the EMORPHIS API request so that same can be populated on Sanction Letter document.



*Description:*

# Below new tags will be added in the EMORPHIS_FILENET_UPLOAD API request structure at the *loanAsset* level. Sample request structure attached in the story.
## “pmjjbypremium”: 358.9
## “pmsbypremium”: 20.0
# Once IRO user clicks on Generate Document button on Document Generation screen, EMORPHIS API gets initiated and SFDC will send the above tag values as per below mapping-

|*Tag*|*Tag Mapping*|
|*pmjjbypremium*|PMJJBY policy premium amount will be sent in the request tag (Reference Field on Loan Asset- *Premium PMJJBY*)|
|*pmsbypremium*|PMSBY policy premium amount will be sent in the request tag (Reference Field on Loan Asset- *Premium PMSBY*)|

3. If the field values are zero or blank at the backend, SFDC will send the the tag values as 0.00 in the EMORPHIS request.  
acceptance: # policy premium amounts are flowing in the EMORPHIS API requests as captured on popup UI/maintained at backend
# user is able to see the policy premium amounts sent in the request on the generated Sanction Letter document on FileNet
!image-20230201-124754.png|width=899,height=649!

3. Tag values are flowing for all EMORPHIS requests for other documents

{color:#ff991f}4. To be tested when user is eligible(opted in & opted out)/not eligible for PMJJBY-PMSBY{color}

{color:#ff991f}5. EMORPHIS functionality for MEL-PL workflows should function as expected{color}

key: ML-15722
summary: Custom Report Type to be created in SFDC for PMJJBY, PMSBY reporting
description: *Description:*

# A new report type to be created in SFDC to generate the report for PMJJBY, PMSBY policy opt ins by applicant:

* Report Type Name- PMJJBY PMSBY Policy Optins
* Objects to be considered- Loan Application + Loan Asset

2. Report to be created with below fields:

* Loan Application Number
* Primary Applicant Name
* PMJJBY Opt in
* Premium PMJJBY
* PMSBY Opt in
* Premium PMSBY
* Branch
acceptance: TBD

key: ML-15719
summary: PMJJBY, PMSBY premium amounts to be included in MEL Application form VF
description: *Description:*

# A new row will be added in the MEL Application form document under *Most Important Terms and Charges* as below:
# !image-20230127-100437.png|width=97.32441471571906%!
PMSBY Policy Amount will be shown below *Stamp Duty Charges* as:  

|PMSBY Policy Charges|Rs. 20/-|

3. PMJJBY Policy Amount will be shown below *Foreclosure Charges* as:

|PMJJBY Policy Charges|For enrolment in 
a) June, July and August – Rs.436/- 
b) September, October, and November – Rs. 342/- 
c) December, January and February – Rs. 228/-
d) March, April and May – Rs. 114/-|

{color:#ff991f}Sequence to be confirmed{color}

4. Font, Font size to be matched with the section.

5. The above PMJJBY, PMSBY policy amount details will be static and visible on all Application form documents generated at Document Generation stage.
acceptance: # user is able to see the PMJJBY, PMSBY Policy Charges on Application form document generated at Document Generation stage
# Both the charges are visible on generated application form document if functionality is active or inactive
# {color:#ff991f}Note section is visible at same position {color}{color:#ff991f}-if user is not eligible for PMJJBY-PMSBY or if user is eligible and not opted for any policies-{color}
# {color:#ff991f}PMJJBY-PMSBY charges should reflect above Note section {color}{color:#ff991f}-if user has opted in for any or both policies-{color}
# -Vernacular language conversion not applicable to these charges-

key: ML-15716
summary: PMJJBY, PMSBY T&C to be included in MEL Application Form
description: *Description:*

# Attached T&C will be added on MEL Application form document generated at Document Generation stage.
# The T&C text will be placed under the Declaration section before Authorization-

!image-20230127-114517.png|width=1098,height=343!

3. Sequence of T&C to be followed- PMJJBY. PMSBY

4. Font, Font size to be matched with the section.

5. Master Policy Number to be stamped on PMJJBY document- *PM000006*

6. The PMJJBY, PMSBY policy T&C will be visible on Application form document if functionality is active and customer has opted for respective policies on UI.
acceptance: # user is able to see the PMJJBY, PMSBY Policy T&C on Application form document generated at Document Generation stage as per attached document based on policy opt ins
# If user has opted for PMJJBY, user is able to see PMJJBY T&C and PMSBY T&C are not present on APp form
#  If user has opted for PMSBY, user is able to see PMSBY T&C and PMJJBY T&C are not present on APp form
# T&C of both the policies are visible on generated application form document if functionality is active and user has opted for both the policies
# the T&C are not visible on generated application form document if functionality is not active or eligibility is not met
# -Vernacular language conversion not applicable to these T&C-

key: ML-15713
summary: SFDC will send the premium amounts of the opted policies in the FinnOne Submit request
description: *Business Case:* SFDC to send the PMJJBY/PMSBY policy premium amounts in the FinnOne Submit request if the respective policy is opted in the loan application journey   

*Description:*

# If user has opted for any of the PMJJBY/PMSBY policies, SFDC will send the premium amounts to FinnOne in below format-
# Below new structure will flow for each policy opted on UI in the *charges*, if it is opted - to be checked with Hospi cash. Charges will flow in separate structure for each policy opted
{noformat}{
      "service_tax" : 0, 
      "GST_BREAKUP" : 
	  {
        "SGST_RATE" : 0,   
        "SGST_AMOUNT" : 0,
        "IGST_RATE" : 0,
        "IGST_AMOUNT" : 0,
        "CGST_RATE" : 0,
        "CGST_AMOUNT" : 0
      },
      "funded_flag" : "N", 
      "charge_Rate" : 0,
      "charge_Id" : "1000791",
      "charge_Amount" : 436
    }{noformat}
# Charge ID to be sent-
!image-20230127-074244.png|width=88.93939393939394%!
## charge_Id for PMJJBY: 1000791
## charge_Id for PMSBY: 1000792
# If any of the policies are not opted or functionality is inactive or -not- eligibility not met, these charges will not flow in the request - existing logics
# Below *Tag Mapping* to be referred while generating FinnOne Submit API request to send the charges for PMJJBY, PMSBY policies-

|*Tag*|*Mapping for PMJJBY,PMSBY*|
|{| |
|"service_tax" : 0,|This will always flow as 0|
|"GST_BREAKUP" :| |
|{| |
|"SGST_RATE" : 0,|This will always flow as 0|
|"SGST_AMOUNT" : 0,|This will always flow as 0|
|"IGST_RATE" : 0,|This will always flow as 0|
|"IGST_AMOUNT" : 0,|This will always flow as 0|
|"CGST_RATE" : 0,|This will always flow as 0|
|"CGST_AMOUNT" : 0|This will always flow as 0|
|},| |
|"funded_flag" : "N",|This will always flow as N|
|"charge_Rate" : 0,|This will always flow as 0|
|"charge_Id" : "",|This will flow as-
for PMJJBY-1000791
for PMSBY-1000792|
|"charge_Amount" : 123|Premium amount received in FICO Insurance response for respective policy
Refer Loan Asset field for premium|
|}| |
acceptance: # if Functionality is not active, charges array is not flowing for PMJJBY, PMSBY policies
# if eligibility criteria is not met, tags charges array is not flowing for PMJJBY, PMSBY policies
# if Functionality is active and user has not opted any of policies, above tags are not flowing in FinnOne submit request
# policy premium is flowing in charges under mentioned charge ID if user has opted for {color:#ff991f}any or both policies{color}  on UI

key: ML-15707
summary: Net Disbursement Amount to be updated on click of Next button on Popup
description: *Business Case:* As an IRO user, once response is received from FICO Insurance, I should be able to see the updated Final Net Disb Amount on popup, so that I can proceed to next screen with opt in details updated at backend.

*Description:*

# Below two fields will be created on Loan Asset object-
#* *Premium PMJJBY* (Field type- Number, should accept decimals)
#* *Premium PMSBY* (Field type- Number, should accept decimals)
# Once SFDC receives the FICO_Insurance API Success response,
## Spinner will stop on UI
## SFDC will read the PMJJBY policy premium amount received in the response tag- "*pmjjbyPremiumAmount*" and stamp the same on Loan Asset field- *Premium PMJJBY*
## SFDC will read the PMSBY policy premium amount received in the response tag- "*pmsbyPremiumAmount*" and stamp the same on Loan Asset field- *Premium PMSBY*
!image-20230125-082555.png|width=1126,height=487!
## Blank/NULL handling to be done for response data
# On popup UI, 
## *PMJJBY Premium Amount* field value will be shown as received in tag- *“pmjjbyPremiumAmount”*
## *PMSBY Premium Amount* field value will be shown as received in tag- *“pmsbyPremiumAmount”*
## *Final Net Disbursement Amount* field value will be shown as below logic-
### Final Net Disbursement Amount = [ Net Disbursement Amount *-* ( Premium PMJJBY + Premium PMSBY) ]

3. If there is technical failure or no response received from API, Spinner will stop and user will not be able to proceed to next screen from the popup on click of Next button. User will reinitiate API on click of Next button

4. Below two fields will be created on Loan Application object-

* *PMJJBY Opt-in* (checkbox field)
* *PMSBY Opt-in* (checkbox field)

5. On Click of *Next* button-

a. Fields- *PMJJBY Opt -in, PMSBY Opt -in* will be updated at backend. 

*PMJJBY Opt -in* checkbox will be checked at backend if PMJJBY policy is opted by the user on popup. If PMJJBY not opted,i.e. toggle is off, then *PMJJBY Opt -in* checkbox will be unchecked at backend.

*PMSBY Opt -in* checkbox will be checked at backend if PMSBY policy is opted by the user on popup. If PMSBY is not opted, i.e. toggle is off, then *PMSBY Opt -in* checkbox will be unchecked at backend.

Fields- *Premium PMJJBY*, *Premium PMSBY* will be updated in backend once SFDC receives response from FICO Insurance API.

b. Field *Net Disbursement Amount* on Loan asset record will get updated as the new amount shown on Popup as per point *3.c*

c. Loan application will move to document generation stage from popup *after a delay of 5 Seconds*
acceptance: # system is considering latest FICO_Insurance call response for showing the Final net disbursement amount
# is user has changed policy opt ins (Toggle Yes to No OR No to Yes) before moving to Doc Generation screen, updated Final Net Disb amount is visible on UI
# New fields are added on Loan Asset object- *Premium PMJJBY*, *Premium PMSBY*
## New fields are visible on Loan Asset page layout having scheme
# Below fields are added into the Loan Application object layout- *PMJJBY Opt-in*, *PMSBY Opt-in*
# FICO_Insurance API working as expected at data entry and Sanction stage
# Below fields should be accessible to Product profile users and should be accessible in report type (to be added on layout) for report creation- *Loan Application with Loan Asset Custom*
## Loan Application Number
## Primary Applicant Name
## PMJJBY Opt in
## Premium PMJJBY
## PMSBY Opt in
## Premium PMSBY
## Branch
# On click of Next button
## FICO Insurance API is getting initiated
## Premium amounts are getting populated on UI, backend
## Policy optins are getting stamped at backend
## net disbursement amount is getting updated on loan asset based on the premium values received from FICO INsurance
## user is getting navigated to Document generation screen if API response is success
# If user has not opted for any of the policy insurance on popup {color:#ff991f}or case is not eligible for PMJJBY-PMSBY{color}
## FICO_Insurance is not initiated at backend
## user is getting navigated to Doc generation screen

key: ML-15704
summary: System to initiate FICO_Insurance API request on click of Next button on popup
description: *Business Case:* As an IRO user, I should be able to initiate FICO_Insurance API on popup to get the PMJJBY, PMSBY premium amounts.

*Description:*

# Once user clicks on *Next* button on UI, system will initiate FICO_Insurance API request if user has opted for any of the policies (i.e. toggle is set as Yes for PMJJBY/PMSBY on UI)
# On UI, a spinner will be visible till the response is received from FICO_Insurance API 
# Below new tag will be added in the FICO_Insurance *request* structure in the *application* *array*:
#* "*promotion*": "PMJJBY"
#* !image-20230125-082555.png|width=901,height=390!
# System will send the promotion tag value in the request structure as below:
## If user has opted for *PMJJBY* insurance on UI, the tag value will flow as below in FICO_Insurance request- *"promotion": "PMJJBY"*
## If user has opted for *PMSBY* insurance on UI, the tag value will flow as below in FICO_Insurance request- *"promotion": "PMSBY"*
## If user has opted for both *PMJJBY, PMSBY* insurance on UI, the tag value will flow as below in FICO_Insurance request- *"promotion": "PMJJBY_PMSBY"*
# This tag value will flow blank in the FICO_Insurance tag promotion if user has not opted for any of the insurances on UI.
# This tag value will flow blank in the FICO_Insurance call at Data Entry screen, Sanction Insurance screens, i.e. for initial two FICO-Insurance call outs
# If none of the policies are opted by the user, FICO_Insurance API will not get initiated {color:#ff991f}on Click of Next on Pop up{color}
acceptance: 

# new tag *promotion* is present in the FICO_Insurance API request structure in application array
# *promotion* tag is flowing blank in the FICO_Insurance requests initiated at Data Entry, Sanction stage
# promotion tag value is flowing for the opted policies in API request
# the existing insurance premiums/backend stamping are not getting impacted post 3rd FICO_Insurance API response
# the promotion tag is flowing blank in the FICO_Insurance API request initiated at Data Entry, Sanction Insurance stages
# API is not initiated on click of Next button if none of the policies are opted
# Existing premiums amounts received in Response for Credit Protect insurance are flowing in FinnOne submit request as per current implementation.

{color:#ff991f}FICO Insurance API should function as expected on Data entry/Sanction stage{color}

key: ML-15700
summary: A popup to be shown to capture the PMJJBY/PMSBY Insurance details on Sanction Disbursement Screen - part 2
description: *Business Case:* As an IRO user, I should be able to see the popup UI to capture the PMJJBY/PMSBY policy optins and premium amounts to be received from FICO.

*Description:*

# Once user clicks on +Terms & Conditions+ hyperlink on the popup, 
## The T&C document will get downloaded in the PDF format
## a new tab will get opened in the user’s browser and user will be shown the respective T&C VF page document
# User will be shown below two fields below PMSBY T&C. Fields will be read-only on UI. FIelds will be visible on UI only if user has opted for the respective policy. If user has not opted for policy, respective field will not be visible on UI. 
## *PMJJBY Premium Amount*
## *PMSBY Premium Amount*
# A new field will be added next to the policy premiums. (Field will show the updated Net Disbursement Amount post FICO_Insurance callout.) 
## Field Label: *Final* *Net Disbursement Amount*
## Field will be in read-only mode on UI.
## Field will be visible on UI only if user has opted (toggle selected as Yes) any one of the policies PMJJBY or PMSBY  {color:#ff991f}or both{color}
# A button to be added on popup at the bottom:
## Button Label-*Next*
# Popup UI should be mobile compatible.
acceptance: # user is able to view respective policy document on click of +Terms & Conditions+ hyperlink in the new tab
# T&C document is getting downloaded on the system {color:#ff991f}in PDF format{color}
# Policy premium fields are visible on UI only for opted policy
# If user has opted PMJJBY, *PMJJBY Premium Amount* field is visible. Else not visible.
# If user has opted PMSBY, *PMSBY Premium Amount* field is visible. Else not visible.
# If none of the policies are opted (toggle is No), then fields- *PMJJBY Premium Amount*, *PMSBY Premium Amount,* *Final* *Net Disbursement Amount* are not visible on UI.
# {color:#ff991f}Set Toggle from No to Yes to No- expected fields should be visible only when Toggle is set to Yes{color}

key: ML-15688
summary: A popup to be shown to capture the PMJJBY/PMSBY Insurance details on Sanction Disbursement Screen - part 1
description: *Business Case:* As an IRO user, I should be able to see the popup UI to capture the PMJJBY/PMSBY policy optins and premium amounts to be received from FICO.

*Description:*

Once the switch is activated and loan application is eligible for PMJJBY, PMSBY insurance, below popup should appear on click of Next button on Post Sanction Disbursement screen:

*Popup UI:*

# FIelds to be shown and captured on UI-
## User will be shown below two fields on UI:
### PMJJBY Opt -in
### PMSBY Opt- in
## Against each field, user will have *Toggle* selection- Yes, No
## By default, toggle will be set to *No* for both options
# Terms and Condition text to be shown on UI:
## if user selects PMJJBY Opt -in toggle as Yes, then user will be shown below T&C below PMJJBY Opt -in field-
##* Willing to enroll for Pradhan Mantri Jeevan Jyoti Bima Yojana
##* Consent for annual Auto-Debit of INR 436 from 25th May - 1st June
##* Declaration of exclusive participation with IDFC First Bank
##* I have read and agree to the scheme’s +Terms & Conditions+ - Refer story- [https://fincap.atlassian.net/browse/ML-15682|https://fincap.atlassian.net/browse/ML-15682|smart-link] 
## if user selects PMSBY Opt -in toggle as Yes, then user will be shown below T&C below PMSBY Opt -in field-
##* Willing to enroll for Pradhan Mantri Suraksha Bima Yojana
##* Consent for annual auto-debit of INR 20 from 25th May - 1st June
##* Declaration of Exclusive Participation with IDFC First Bank
##* I have read and agree to the scheme’s +Terms & Conditions+ - Refer story- [https://fincap.atlassian.net/browse/ML-15685|https://fincap.atlassian.net/browse/ML-15685|smart-link] 
# The text +Terms & Conditions+ will be visible as hyperlink on UI.
# Popup UI should be mobile compatible.
acceptance: # user is able to see the popup on click of Next button on PSD screen if loan application is eligible for policies as per- [https://fincap.atlassian.net/browse/ML-15676|https://fincap.atlassian.net/browse/ML-15676|smart-link] 
# popup is not visible if any of the criteria is not met - *to be tested for all business units*
# if Loan application is eligible for policies, stage substage of loan application is not getting changed to Document Generation, Document Generation Pending on click of Next button on the footer on Sanction Disbursement details screen
# by default toggle for policy opt in are set to No
# user is able to see the T&C text after selecting policy as Yes
# once popup is opened on UI, screen in background is frozen
# user is not able to close the popup
# If user does a page refresh, user will have to click on Next button and popup will be shown again on click of Next button on Sanction disb screen
# -user is able to view the respective policy document on click of Hyperlink-
# {color:#ff991f}Set Toggle from No to Yes to No- T & C should be visible only when Toggle is set to Yes{color}

key: ML-15685
summary: PMSBY Terms & Condition VF page generation in SFDC
description: *Business Case:* A VF page document for the PMSBY T&Cs to be created in SFDC, which will be shown to the customer on click of hyperlink on popup

*Description:*

# Reference T&C document attached in the story below.
# For VF page document, same Font, Font size to be referred as MEL Application form Declaration section
!image-20230124-080609.png|width=1083,height=298!
acceptance: # user is able to see the PMSBY VF page document as per attached document

key: ML-15682
summary: PMJJBY Terms & Condition VF page generation in SFDC
description: *Business Case:* A VF page document for the PMJJBY T&Cs to be created in SFDC, which will be shown to the customer on click of hyperlink on popup

*Description:*

# Reference T&C document attached in the story below.
# Master Policy No. to be printed on page- *PM000006*
# For VF page document, same Font, Font size to be referred as MEL Application form Declaration section
!image-20230124-080609.png|width=1083,height=298!
acceptance: # user is able to see the PMJJBY VF page document as per attached document
# default policy number is visible for all loan applications

key: ML-15679
summary: text modification in existing hospicash document
description: CR for text modification in existing hospicash document generated from Emorphis.

 

Email ID should be displayed in English (as per the English version)
acceptance: Email ID should be displayed in English (as per the English version)

key: ML-15676
summary: SFDC to run a logic to check if loan application is eligible for PMJJBY/PMSBY insurance policy
description: *Business Case:* As an IRO user, once I click on Next button on Post sanction disbursement screen, system will check if the loan application is eligible for PMJJBY/PMSBY insurance policies, so that I can capture the insurance details.

*Applicable BU:* MEL

*Applicable for:* Primary Applicant



*Description:*

# A master to be maintained in SFDC to keep the functionality configurable based on below parameters. Product team should be able update the values of parameters through this master with L1 support.
## *Functionality -* Active or inactive
## *Business Unit -* Functionality should be configurable based on the Business Unit
## *Scheme ID -* Scheme ID evaluation should be kept configurable for any new scheme IDs in future. System should have the ability to accommodate new scheme IDs
## *KYC Type -* Configurable based on the type of KYC done for applicant/coapplicant. Field to be referred- *KYC Success Type (with possible picklist values-)*  on applicant
## *Age -* Configurable based on the age. Minimum and Maximum age limits should be configurable. Values configured in Min Max limit will be included for functionality 
## *Account opening Type -* Configurable based on the type of bank account opted by the applicant - IDFC Bank Account or Other Bank account
# Once the account Mandate is completed and IRO user clicks on Next button on Post Sanction Disbursement screen, SFDC will evaluate below criteria to check if loan application is eligible for PMJJBY/PMSBY insurance:

*Functionality is Active*

&&

*Business Unit* active at master data

&&

*Primary Applicant age is within the age limits defined in the master* (this is basis DOB given in QDE. Field to be referred on Applicant- *Age*)
&&
*KYC type competed for Primary Applicant as maintained in the master*
&&
*Scheme ID maintained in the master* (Field to be referred on Scheme- External Code)
&&
*Account Opening is successful* with *IDFC First bank fresh account* or *Existing IDFC Bank account* (Field to be referred - to be confirmed)

3. Currently, the *functionality should be activated for below criteria-*

* Business Unit = MEL
* Scheme ID =  55637
* Applicants age is between between 18-49 Years (18, 49 inclusive)
* Completed KYC Type = EKYC
* Bank Account type opted- New IDFC Bank Account or Existing IDFC bank account

4. If the above criteria is met, loan application will be eligible for PMJJBY, PMSBY insurance on UI. User will be able to see the popup on click of Next button on Sanction Disbursement details screen as per US- [https://fincap.atlassian.net/browse/ML-15688|https://fincap.atlassian.net/browse/ML-15688|smart-link] 
acceptance: # if switch is deactivated, functionality is not available on UI
# master data is maintained and activated for the parameters- Scheme ID, KYC Type, Age, Account Opening type
# Functionality is available on UI if the loan application criteria is met with the active master data
# Master data is configured as per story. Currently System is considering the EKYC success loans where primary applicant’s age is between 18 yrs to 49 yrs with Existing or New IDFC Bank Account and scheme ID 55637
# if any of the parameters- Functionality Active/Inactive or Business Unit Configured or Scheme ID or KYC Success Type or Age or Bank Account type criteria is not met, functionality/popup should not be available on UI and the existing flow will work

key: ML-15673
summary: New tags to be added in FICO_Insurance API response structure to get the premium amount for the insurance opted by customer insurance detail
description: *Applicable For*: Primary Applicant only

*Description:*

# Below new tags will be added in the FICO_Insurance response structure in the *response* array:
## "*pmjjbyPremiumAmount*": 250
## "*pmsbyPremimumAmount*": 120
# {color:#bf2600}Response values to be checked{color}- If user has not opted for these insurances- MULE to send values as- Blank/Null
# Once SFDC receives respective premium amounts from FICO_Insurance API response, the respective values will be stamped at backend on the Loan Asset record (where scheme is not blank)
# For this stamping, below two fields will be created on Loan Asset object-
## *Premium PMJJBY* (Field type- Number, should accept decimals)
## *Premium PMSBY* (Field type- Number, should accept decimals? -{color:#bf2600}to be confirmed{color})
acceptance: TBD

key: ML-15670
summary: New tags to be added in FICO_Insurance API request structure
description: *Applicable For:* Primary Applicant only

*Description:*

# Below new tag will be added in the FICO_Insurance *request* structure in the *application* *array*:
#* "*promotion*": "PMJJBY"
!image-20230125-082555.png|width=901,height=390!
# Below two fields will be created on Loan Application object-
## *User opted in for PMJJBY* (checkbox field)
## *User opted in for PMSBY* (checkbox field) 
# Below two fields will be created on Loan Asset object-
#* *Premium PMJJBY* (Field type- Number, should accept decimals)
#* *Premium PMSBY* (Field type- Number, should accept decimals)
acceptance: # new tag *promotion* is present in the FICO_Insurance API request structure in application array
# *promotion* tag is flowing blank in the FICO_Insurance requests initiated at Data Entry, Sanction stage 
# New fields are added on Loan Asset object- *Premium PMJJBY*, *Premium PMSBY*
## New fields are visible on Loan Asset page layout having scheme
# Below fields are added into the Loan Application object layout- *User opted in for PMJJBY, User opted in for PMSBY*
# FICO_Insurance API working as expected at data entry and Sanction stage
# Below fields should be accessible to Product profile users and should be accessible in report type (to be added on layout) for report creation- *Loan Application with Loan Asset Custom*
## Loan Application Number
## Primary Applicant Name
## PMJJBY Opt in
## Premium PMJJBY
## PMSBY Opt in
## Premium PMSBY
## Branch

key: ML-15624
summary: Enterprise Master- Rev 4
description: Note : Applicable only for Bank and not for IFBL.

PF : Processing Fee

Current : [https://fincap.atlassian.net/browse/ML-15324|https://fincap.atlassian.net/browse/ML-15324|smart-link] 

Proposed :

Attached file to be referred to add list of corporates and their corresponding ROI & PF values to Enterprise Master.
acceptance: 

# Enterprise master is replicated in SFDC as per attachment

key: ML-15576
summary: Next button is getting executed even if mandatory questions are not filled
description: nan
acceptance: User should be able to click on next button only when all mandatory fields are filled

key: ML-15498
summary: Test Class fixes across Org3
description: nan
acceptance: # Changes in test class to increase code coverage.
# Changes in test class using appropriate methods.
# This covers test classes across org.

key: ML-15480
summary: Journey flow- MEL + _Part 3
description: Valid for New offers uploaded. Applicable BU : MEL

*Business Case* : As the telecaller can’t complete click wrap on behalf of customer, we need to continue with Customer handling for document generation and application submission

*Proposed* :

To continue from : [https://fincap.atlassian.net/browse/ML-15465|https://fincap.atlassian.net/browse/ML-15465|smart-link] 

* When customer clicks on Tiny URL as sent in SMS to him, the customer should be directed to Review your details page on his screen for that LAN ID.
* The UI should be same as current CJ flow, the user should not be allowed to go back to previous screens. If the user tries to do that, pop up a msg *“This is not allowed. Please contact your IDFC FIRST Bank Relationship offer*”   Pop msg to be configurable
* Review your details page should work as CJ Journey of that LAN , customer should be able to process the case from this page as per current implementation of CJ
* Customer will generate the documents and continue with click wrap process and submit the loan as per current build of CJ
acceptance: # Customer should be directed by tiny URL received in SMS to Review your details page of CJ journey for that LAN ID
# Review your details page and further pages should work in continuation to Telecaller journey execution by telecaller till Bank details page ( mandate/SI successful)
# Customer should be able to process the case as per CJ flow at his end.
# Drop off scenarios should work, cases to move to IRO as per current CJ implementation as per current implementation of CJ on reviews your details page > Clickwrap> finnone submit of application, drop off reason stamping to work as expected
# The IRO should be able to move forward the case/take action for the case as per current implementation of CJ drop off to IRO
# End to end scenario testing of Telecaller driven CJ Journey, drop off scenarios should work as built in Telecaller EPIC
# Sanity to be done MEL+IRO Assisted Journey/CJ Journey, there should not be any impact on them unless specified clearly in Telecaller EPIC
# The back end field stamping and front end UI should be checked, it should work as expected
# All the drop off scenarios to work as CJ as applicable in telecaller- Refer CJ epic [https://fincap.atlassian.net/browse/ML-3505|https://fincap.atlassian.net/browse/ML-3505|smart-link]
# SO-RO mapping logic in finnone submit to work as per CJ

key: ML-15465
summary: Journey flow-MEL + _ Part 2
description: Valid for New offers uploaded. Applicable BU : MEL

*Proposed* : 

To continue from : [https://fincap.atlassian.net/browse/ML-15461|https://fincap.atlassian.net/browse/ML-15461|smart-link] 

* As soon as the Mandate/SI is completed, a SMS to be triggered to customer with SMS Content below with tiny URL, SMS Content to be configurable. URL should expire if the case is dropped off from Telecaller

Dear Customer,

Your MEL+ Loan Application <LAN ID> is under process. To view your loan documents and submit the application, please click on <tinyURL> 

Regards

IDFC FIRST Bank

* Telecaller should get a pop up on UI as : “*Please guide the customer to complete the pending steps of document generation and OTP-based consent*” Once Bank details are successfully submitted and case moves to Review your details page as per current design. The msg of new pop up should be configurable.   
* Telecaller should not be able to move to Review your details screen as per CJ flow.  the case should continue to stay on Bank details page with pop up mentioned in 1st point
acceptance: # To function as described
# Once the Bank details are successfully submitted, and telecaller clicks “Next”/”Proceed” from bank details Page as applicable – a popup will be visible to the user  as described
# The case should continue to stay on Bank details page with this pop up for telecaller login
# Any other telecaller should not be able to take ownership and take action if the ownership is already assigned to one telecaller
# Telecaller should not be allowed to next screen of *Review Your Details*
# SMS should get triggered to the customer, SMS should be  sent to mobile number as available in associated offer
# URL should expire once case is dropped off from Telecaller

key: ML-15461
summary: Journey flow-MEL + _ Part 1
description: Valid for New offers uploaded. Applicable BU : MEL

*Proposed*

To continue from  : [https://fincap.atlassian.net/browse/ML-14171|https://fincap.atlassian.net/browse/ML-14171|smart-link] 

* When user clicks on Create new loan application after clicking Interested on offer details page
* Telecaller should land to CJ view of loan application on his screen ( We can map Journey URL sent in SMS Triggered to Customer to initiate CJ  as per [https://fincap.atlassian.net/browse/ML-13461|https://fincap.atlassian.net/browse/ML-13461|smart-link] , [~accountid:62502d37f6a2690069623f4a]  to confirm this approach)
* Telecaller should be able to continue journey as per CJ flow until Bank details page as per current implementation
* The dropped off cases from CJ due to inactivity ( [https://fincap.atlassian.net/browse/ML-14446|https://fincap.atlassian.net/browse/ML-14446|smart-link]  ) should be moved forward by Telecaller from same screen (UI/UX to be same as CJ view) where customer got dropped off in CJ Journey
* WIP cases should automatically direct to same stage on CJ screens on which telecaller was lastly active
acceptance: 

# On click of Create loan application, User should be directed to CJ journey on his screen
# User should see CJ screens instead of MEL+IRO Assisted journey screens, all logics of CJ to work as it is unless stated specifically
# Telecaller should be able to continue journey as per CJ until Bank details page view as per current implementation
# If the case gets dropped from CJ to telecaller due to Inactivity, the dropped case appears in MEL+Customer journey cases worklist as per [https://fincap.atlassian.net/browse/ML-14446|https://fincap.atlassian.net/browse/ML-14446|smart-link] , telecaller should be able to move forward the case from same screen in CJ view as customer was present in CJ Journey by taking ownership and clicking on Edit
# If the case gets dropped off due to any other drop off reason, the IRO should move forward the case as per [https://fincap.atlassian.net/browse/ML-14513|https://fincap.atlassian.net/browse/ML-14513|smart-link] 
# If telecaller closes the journey in between, he should be able to access the same stage/screen by accessing the WIP case
# The drop off functionality to be tested for each scenario for Telecaller driven CJ Journey ( as per [https://fincap.atlassian.net/browse/ML-14513|https://fincap.atlassian.net/browse/ML-14513|smart-link] and [https://fincap.atlassian.net/browse/ML-14446|https://fincap.atlassian.net/browse/ML-14446|smart-link] ), drop off stamping should happen properly
# The back end field stamping and front end UI should be checked, it should work as expected

key: ML-15324
summary: Enterprise Master- Rev 3
description: Note : Applicable only for Bank and not for IFBL.

PF : Processing Fee

Current : [https://fincap.atlassian.net/browse/ML-14568|https://fincap.atlassian.net/browse/ML-14568|smart-link]

Proposed :

Attached file to be referred to add list of corporates and their corresponding ROI & PF values to Enterprise Master.
acceptance: # Enterprise master is replicated in SFDC as per attachment

key: ML-15317
summary: Journey flow- MEL + _ Part 4
description: # Valid for New offers uploaded. Applicable BU : MEL
# Tele-caller view will be supported only on desktop.

*Proposed* :

UI and logics to remain same as MEL + IRO Assisted Journey unless stated specifically

Continuation to [https://fincap.atlassian.net/browse/ML-15308|https://fincap.atlassian.net/browse/ML-15308|smart-link] 

* On click of Next after Calculate Premium- Loan details pop out. Click Continue and Next as per current build.
* OTP Verification section logic to be removed from Front end and Back end
* Case would directly land on Sanction , New Account Opening Page
acceptance: 1

key: ML-15311
summary: Stage mapping from CJ to telecaller flow
description: nan
acceptance: 1

key: ML-15308
summary: Journey flow- MEL + _ Part 3
description: # Valid for New offers uploaded. Applicable BU : MEL
# Tele-caller view will be supported only on desktop.

Proposed :

UI and logics to remain same as MEL + IRO Assisted Journey unless stated specifically

Continuation to [https://fincap.atlassian.net/browse/ML-15304|https://fincap.atlassian.net/browse/ML-15304|smart-link] 

* Nominee and Appointee logics to work as CJ [https://fincap.atlassian.net/browse/ML-5484|https://fincap.atlassian.net/browse/ML-5484|smart-link]
* Clear Button to be given just next to Add Insurance , clear button functionalitysame as [https://fincap.atlassian.net/browse/ML-5484|https://fincap.atlassian.net/browse/ML-5484|smart-link] . 
* Any changes in Nominee-Appointee should be saved by adding insurance as per current build. 
* User will calculate Calculate premium, FICO insurance will call out - same functionality. 
* If the Calculate premium is not responding until 3 attempts. The case has to be dropped off. Use same drop off reason as CJ for FICO insurance failure. {color:#ff991f}Dev team to come back on the drop off reason stamping as per {color}[https://fincap.atlassian.net/browse/ML-4692|https://fincap.atlassian.net/browse/ML-4692|smart-link]{color:#ff991f} {color}
* If the case is dropped off on this screen, The case would land in IRO queue and IRO would take ownership and  land in  Stage- Sanction Insurance pending for further processing, the IRO will move forward the case as per current implementation
acceptance: # To work as described
# Nominee-appointee logic to work as CJ as described
# The clear button to work as described. Any changes done in appointee/nominee can be allowed by click of Add insurance as per current build
# User should be able to add/delete insurance as per current build. Mandatory credit protect insurance for applicant holds true
# FICO Insurance is called out as mentioned by click of Calculate Premium
# The drop off functionality to be tested on this screen for Inactivity and if possible for FICO insurance failure. The branch mapping logic for IRO processing should work as expected

key: ML-15304
summary: Journey flow- MEL + _ Part 2
description: # Valid for New offers uploaded. Applicable BU : MEL
# Tele-caller view will be supported only on desktop. 

Proposed : 

UI and logics to remain same as MEL + IRO Assisted Journey unless stated specifically

Continuation to [https://fincap.atlassian.net/browse/ML-14523|https://fincap.atlassian.net/browse/ML-14523|smart-link] 

* Screens to be skipped

+Document Upload Screen (MEL/PL)+

When tele-caller clicks on Next of loan and product screen, Tele-caller lands on stage/substage- sanction and substage-insurance pending. The document upload screen to be skipped

* After click of Next on Loan and Product screen, the case would land on Sanction, Insurance pending. This is an existing screen in MEL+IRO
* The insurances should auto-populate as per existing functionality. The insurances received from base loan would be non-editable and read only. Mandatory logic for credit protect for primary applicant to hold true. Other insurances could be deleted/removed by clicking delete as per current build.
acceptance: # To function as described
# Screens mentioned in description to be skipped and case should land directly on Sanction / insurance pending
# The logics for screens skipped for MEL/PL ( as applicable to BU) should not work on front end and back end
# Post loan detail entry , the case would land on sanction, insurance pending
# The insurances should autopopulate from base loan as per current build
# Telecaller should be able to add new insurance and calculate premium
# +“Verification” & “Verification Pending” (MEL/PL)+
Mentioned stage/substage to be skipped as no FICO verifications are triggered in Telecaller compared to MEL+ IRO assisted journey

key: ML-15273
summary: Enterprise Master- Rev 2
description: Note : Applicable only for Bank and not for IFBL.

PF : Processing Fee

Current : [https://fincap.atlassian.net/browse/ML-14568|https://fincap.atlassian.net/browse/ML-14568|smart-link] 

Proposed :

Attached file  to be referred to update PF of mentioned corporates
acceptance: # Enterprise master is replicated in SFDC as per attachment

key: ML-15216
summary: Drop off handling from Telecaller to IRO/MRO- Part 3
description: * Valid for New offers uploaded on SFDC. Applicable BU : HL/LAP
* Tele-caller view will be supported only on desktop. To be tested for HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

*Proposed*

To continue from [https://fincap.atlassian.net/browse/ML-14513|https://fincap.atlassian.net/browse/ML-14513|smart-link]

Three additional drop off reasons to be created as follows, 

# *Posidex failed (Applicable for HL/LAP)*

Logic : If Posidex API is stuck in progress or failed due to any error post 1st callout , 3 attempts of “retry” is allowed on UI . Even post these attempts, Posidex remains in same state, case to be dropped off and drop off reason to stamp.

2.  “ *Posidex Refer*”  *(Applicable for HL/LAP)*

Logic : If the case is Posidex refer, the case will be dropped off and drop off reason to stamp. The MRO should be able to move forward the case from same screen by taking ownership as per existing flow of Pre approved and complete maker/checker process 

3.  “ *DDE Completed*” *(HL/LAP)*

Logic : On click of Next on loan and product screen (HL/LAP),  the case will be dropped off and drop off reason to stamp
acceptance: # To function as described
# The drop off reasons to be stamped correctly in the designated field as per logic stated
# Mentioned drop off scenarios to be tested on UI
# The cases should appear in “ Telecaller Dropped off cases” worklist once dropped off from telecaller
# MROs should be able to take forward the case from the same stage once case is dropped from Telecaller

key: ML-15213
summary: Journey flow- HL/LAP
description: * Valid for New offers uploaded on SFDC. Applicable BU : HL/LAP
* Tele-caller view will be supported only on desktop. To be tested for HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

*Proposed* : 

To continue from [https://fincap.atlassian.net/browse/ML-14171|https://fincap.atlassian.net/browse/ML-14171|smart-link] 

* Journey UI and logic to remain same as HL/LAP Pre approved unless stated specifically 
* QDE and DDE to work as per HL/LAP Pre approved
* On loan and product screen, by click of next, cases will be dropped off [https://fincap.atlassian.net/browse/ML-15216|https://fincap.atlassian.net/browse/ML-15216|smart-link] 
* The case will be dropped off to same branch mapped as per base loan in open pool
* The MRO should be able to take ownership and edit the case . The MRO should land on same screen where telecaller dropped off.  
* On click of Next by MRO on this screen, the pre approved workflow should work as it is.
acceptance: # To function as described
# Telecaller should be able to proceed the case till DDE, functionality of Pre approved to work as it is unless specifically stated. To test end to end scenario with one -one case of HL/LAP
# Pre approved journey initiated by MRO should work as it is. Posidex should be called out as it is.
# Scheme of the case should flow to Posidex
# If Posidex gets rejected then the case should get hard reject and user will not be able to perform any further actions.
# If Posidex is failed due to any reason, user should be given an option to retry the posidex call, 3 times further, also the reason for Failure should be displayed on front end .User can initiate the call again by clicking on "Retry" button visible.
# POSIDEX Approved , Reject scenarios should work AS IS currently.
# The posidex refer scenario to be tested. If POSIDEX is marked as refer , case to be dropped off, MRO to move the case and Maker checker has to be completed before Insurance details ( as per pre approved flow )
# FICO First call to be skipped
# Pop up should appear on click of next on loan screen.
# The cases initiated by Telecaller should be mapped to telecallers in back end and front end
# The cases which get dropped off from Telecaller to MRO and moved forward by MRO also should be mapped properly on back end and front end
# Product user should be able to pull out the cases in a form of report
# Dropped off cases should not be visible in Telecaller queue. Drop off reason stamping should happen appropriately

key: ML-15203
summary: Addition of ‘EMI Pickup/Cash collection’ charges on Sanction Letter
description: In ‘Schedule/Most Important Document’ section in Sanction Letter – one more field to add –

|EMI Pickup/Cash Collection charges (INR)|Rs. 500 + GST as applicable|
acceptance: Below field to be added in the ‘Schedule/Most Important Document’ section in Sanction Letter –

|EMI Pickup/Cash Collection charges|INR 500 + GST as applicable|

 

Above field should be placed below ‘foreclosure charges (wherever applicable)’

key: ML-15200
summary: Addition of ‘EMI Pickup/Cash collection’ charges on Application form
description: In ‘most important terms and charges’ section in Application form – one more field to add –

|EMI Pickup/Cash Collection charges (INR)|Rs. 500 + GST as applicable|
acceptance: Below field to be added in the ‘Most Important Terms and Charges’ section in application form –

|EMI Pickup/Cash Collection charges (INR)|Rs. 500 + GST as applicable|

 

Above field should be placed below ‘stamp duty charges – as per actuals’

key: ML-15064
summary: Raw material purchase Field to be non mandatory
description: Please make below *field Non-Mandatory in the PD app (only for Rural Persona)*

 

Field name: *Raw material purchases*

Question group: Business expense

Field type: Numeric

Persona name: Cattle rearer
acceptance: Users should be able to view below field as non mandatory

Field name: *Raw material purchases*

Question group: Business expense

Field type: Numeric

Persona name: Cattle rearer

key: ML-15060
summary: Additional fields to be added for Residence CPV HL/LAP
description: Below two fields to be added in residence CPV

|CPV - Residence|Profile of Applicant|
|CPV - Residence|If Negative/Prohibited|
acceptance: Users should be able to view these two fields in questionnaire

key: ML-15057
summary: Trade references TVR
description: Trade reference cases to be available to the user as per the sheet attached
acceptance: Trade reference TVR 1 and 2 to be visible to the users as per assignment through SFDC

key: ML-15054
summary: Reference TVR
description: Reference TVR cases to be created as per the sheet 

Reference  TVR cases will have 2 references
acceptance: Users should be able to view cases for reference 1 and reference 2 whenever shared from SFDC

key: ML-14993
summary: Scheme Master Creation for PL Enterprise_IFBL
description: Note : Applicable only for IFBL only.

*Current :* No separate journey for PL Enterprise-IFBL

*Proposed :* New scheme to be created for PL Enterprise IFBL workflow as per attachment ( similar to PL Enterprise Bank workflow [https://fincap.atlassian.net/browse/ML-11151|https://fincap.atlassian.net/browse/ML-11151|smart-link] )

Following steps to be replicated from PL Enterprise(Bank):

# New scheme master for enterprise partners needs to be created in SFDC
# Within scheme, Minimum Loan amount (Rs 50,000) and Maximum Loan amount (Rs. 5,00,000) range shall be configured in SFDC. (Same as existing PL policy)
# Loan Tenure: Same as RPL-Bank scheme. The complete tenure range from 12 to 48 months with a gap of 6 months i.e. 12,18, 24, 30, 36, 42, & 48 shall be configured in SFDC.
acceptance: h2. 

# Applicable for PL Enterprise IFBL workflow
# Scheme master should be created in SFDC as per attachment.
# Journey flow  should work as per All acceptance criteria  in [https://fincap.atlassian.net/browse/ML-12664|https://fincap.atlassian.net/browse/ML-12664|smart-link] and [https://fincap.atlassian.net/browse/ML-11245|https://fincap.atlassian.net/browse/ML-11245|smart-link] 
# No “New Account Opening” to hold true for PL Enterprise IFBL as same as Rural PL IFBL workflow
# UW flow to work as same as Rural PL IFBL Workflow
# PL Enterprise Bank workflow should work as is.

key: ML-14968
summary: Third Gender Picklist option to be created for ALL BU
description: Applicable for all workflows of BUs- MEL/PL/HL/LAP/Gold

*Proposed*

To create a master record for Third Gender ( similar as for current ones- Male/Female) , code to be sent in FinnOne request

Third Gender should be visible in Picklist on QDE and Insurance ( Insurance-not applicable for Gold)

Use existing Title of Transgender for Third Gender
acceptance: # Given user is on QDE/Insurance, when he proceeds with MEL/PL/HL/LAP/GL BU, then the Gender options visible should be only Male, Female, Third Gender ( Same across each BU)
# Given user is on QDE/Insurance, when he selects Gender, then Third Gender should be visible on Front End for selection
# Given Third Gender is selected ,when user proceeds with the journey, then field stamping should happen appropriately on front end (UI) and back end
# Given Third Gender is selected, when finnone submit is attempted, then Gender code to be passed in Finnone request as TG
# Given Third Gender is selected, when documents are generated, then documents should appropriately reflect the Gender as per current build
# Given Third Gender is selected, when finnone submit is attempted, then finnone submit  is successful 
# Given Third Gender is selected, when user is on QDE/Insurance, then title should be automatically selected as Others
# Given Third Gender is selected, when user is on QDE/Insurance, then the rest of the logics should work as per current build and loan should be able to finnone submit 

key: ML-14965
summary: New worklist creation for telecaller dropped off cases
description: * Valid for New offers uploaded on SFDC. Applicable BU : MEL/PL/HL/LAP
* Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

*Proposed*

* A new worklist to be created in IRO/MRO login- *Telecaller Dropped Off Cases*, where dropped off cases from Telecaller flow would be visible, this worklist should have all the dropped cases from Product- MEL/PL/HL/LAP
* If the Drop off flag is Ticked in Telecaller flow section then the case will be visible in *Telecaller Dropped Off Cases*.  The mapping logic of Telecaller dropped off cases to IRO/MROs will be same as current build ( CJ dropped off to IRO) . The dropped off cases should be visible to IRO/MRO mapped to respective BU and branch. Any IRO/MRO of that branch  can take ownership for the same and move forward the case from the same stage where the telecaller has dropped off.
* The new worklist to have all fields similar as “MEL+Customer Journey cases” existing worklist as per current build
* The drop off flag in this new worklist should be ticked when Telecaller dropped cases appear in this worklist. 
* IRO/MRO should be able to edit the case and move forward the case by taking the ownership. Ownership functionality to remain same as current build for MEL/PL

*HL/LAP specific (Ownership functionality)*

* The telecaller dropped off Cases will be visible in open pool of that branch and any MRO can take ownership for the same ( same functionality as MEL  )
* If the MRO has taken the ownership of a case, then the case will not be visible to other MRO in new worklist and will start showing up in WIP Worklist of that MRO
* Once the case is drop-off, then the case will become editable to the MRO and he can continue the journey from the stage where the Telecaller has left. (  same functionality as MEL  )
acceptance: * To function as described
* Telecaller dropped off cases due to applicable drop off reasons should land in IRO/MRO queue in the new worklist and IRO/MRO should be able to edit the case and move forward the case by taking the ownership. Ownership functionality to remain same as current build
* Mapping logic to be checked, telecaller dropped off cases to be correctly mapped to the branches
* Unless the case is dropped off from Telecaller, it should not be visible in new worklist to IRO/MRO
* New worklist should have all the fields same as MEL+Customer Journey cases worklist
* The new worklist will be only visible to IRO/MROs. CJ dropped off cases should not appear in this worklist
* If the MRO/IRO is mapped to a particular BU and Branch, he should be able to see dropped off cases only of that BU and Branch . If MRO is mapped to HL/LAP BU only , he should be able to see dropped off cases only of HL/LAP. If IRO is mapped to MEL BU only, he should be able to see dropped off cases only of MEL
* The Cases will be visible in open pool and any IRO/ MRO can take ownership for the same
* If the IRO/MRO has taken the ownership of a case, then the case will not be visible to other IRO/MRO in new worklist and will start showing up in WIP Worklist of that IRO/MRO
* After the cases are dropped off to IRO/MRO, the functionality to take forward the case will be same as MEL+IRO assisted for MEL/PL cases and HL/LAP Pre Approved for HL/LAP cases

key: ML-14906
summary: Changes to be done in the stage and sub-stage of ‘Live Loan’ rejected cases
description: Current –

If the LAN is getting rejected due to ‘Live Loan Count’ rule – the stage and sub-stage appears on front end are ‘Reject’ and ‘Posidex Reject’ resp.

 

Proposed –

The stage and sub-stage that should be appeared on front end are ‘Cancel’ and ‘Posidex Cancel’ resp.
acceptance: # User should be able to see the stage and sub-stage as ‘Cancel’ and ‘Posidex Cancel’ instead of ‘Reject’ and ‘Posidex Reject’.

# This is only applicable if the case is rejected due to ‘Posidex – Live Loan Count rule’.

key: ML-14901
summary: Active/WIP cases to be visible on front-end against a current LAN which is rejected due to Live Loan Count rule.
description: *Current* –

If the LAN is getting rejected due to Live Loan Count rule – below message appears on the front end –

‘Application Rejected due to Posidex”

“(Customer Name) – Live Loan Count reject rule”

 

*Proposed* –

All the active/WIP cases should be visible on front end once the case got rejected due to Live Loan Count rule.
acceptance: In a normal case – if the case is not rejected due to Live Loan Count rule, the case should process as it is as per existing journey.

Once the case got rejected due to Live Loan Count rule –

# User should be able to see all the active/WIP cases against rejected LAN.

# All the active/WIP cases to be fetched from Posidex

key: ML-14882
summary: Dropped - Need not open this story
description: * Valid for New offers uploaded on SFDC. Applicable BU : HL/LAP
* Tele-caller view will be supported only on desktop. To be tested for HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

*Proposed* 

* “Loan Amount Increase” drop off reason to be created for HL/LAP Telecaller flow
* When the loan amount is increased by Telecaller from the offered loam amount, and he tries to proceed to next stage, telecaller should be shown a prompt msg on click of Next  

“ *Loan Amount can’t be increased, The case would be dropped off to MRO for further processing*” 

* If he clicks on Next again, the case would be dropped off, and the drop off reason would stamped as “Loan Amount Increase”
* These cases would move to MRO queue in worklist Telecaller Dropped off cases [https://fincap.atlassian.net/browse/ML-14513|https://fincap.atlassian.net/browse/ML-14513|smart-link]
* As applicable, the drop off reason should stamp in the field created in [https://fincap.atlassian.net/browse/ML-14456|https://fincap.atlassian.net/browse/ML-14456|smart-link]
acceptance: # To function as described
# Prompt msg should appear on telecaller’s screen, this should only appear when the loan amount is increased and telecaller tries to move forward to next stage
# Telecaller dropped off cases due to”Loan Amount Increase” should land in MRO queue in the new worklist . 
# To check drop off reason stamping is happening correctly as applicable to BU

key: ML-14879
summary: Tags to be created in Emorphis SVC
description: Applicable for all journeys of MEL/PL BU

*Current* : Processing fee and IGST Amount is not passed in Emorphis SVC, Emorphis is self printing in below sections of Sanction letter

# Loan Documentation and Enrolment Charges
# GST on above

*Proposed*

Create 2 new tags in API request EMORPHIS_FILENET_UPLOAD as below in the loan asset array

* “pf” 
* “pfigst”

Values passed in this tag will be derived from below fields in  loan asset object

* Proccessing Fee 
* IGST Amount 

New tags should be passed in WIP and New loans

Sample

""loanAsset" : [ {
"type" : "Main",
"tenure" : 12,
"stampDuty" : 0.00,
"scheme" : "GOVERNMENT SUBSIDY SCHEME - PMSVANIDHI",
"roi" : 24.00,
"offerType" : null,
"nominneName" : null,
"nominneDOB" : null,
"nomineeRelation" : null,
"netDisbursementAmount" : 9674.00,
"loanAmount" : 10000.00,

{color:#ffc400}“pf” : 200,{color}

{color:#ffc400}“pfigst” : 36,{color}
"insuranceSumAssured" : null,
"insurancePremium" : 90.00,
"foreclosureAmount" : 0.00,
"emiAmount" : 946.00,
"appointeeRelation" : null,
"appointeeName" : null,
"appointeeDOB" : null,
"applicantName" : null
} ],

*Dependency :* MULE to add the tag and Emorphis to receive the tag
acceptance: * To be tested for all journeys of MEL/PL BU
* The new tag should be available in the API request EMORPHIS_FILENET_UPLOAD
* New tags should be passed in each Emorphis SVC for WIP( if the documents are not created) and New loans
* The API should respond successfully as per existing functionality
* The documents should be generated and visible on FileNet as per existing functionality
* The existing functionality should not be impacted
* The tag values should be stamped on Sanction letter properly
* Tags should be able to accept decimal values

key: ML-14568
summary: Enterprise Master- Rev 1
description: Note : Applicable only for Bank and not for IFBL.

PF : Processing Fee

Current : [https://fincap.atlassian.net/browse/ML-11243|https://fincap.atlassian.net/browse/ML-11243|smart-link] 

Proposed : 

Attached file is the latest to be considered as list of tied up companies for PL Enterprise

The old master records to be inactivated
acceptance: # Enterprise master is replicated in SFDC as per attachment
# All corporates with Code, name, ROI and PF should be included in the master
# Old corporates added in master file available [https://fincap.atlassian.net/browse/ML-11243|https://fincap.atlassian.net/browse/ML-11243|smart-link] should not be visible on UI 
# ROI value at metadata level should be checked, incorrect ROI value outside of range as per scheme master not to be allowed
# End to end flow of PL Enterprise should work as expected
# Finnone submit should be successful

key: ML-14523
summary: Journey flow- MEL + _ Part 1
description: # Valid for New offers uploaded. Applicable BU : MEL
# Tele-caller view will be supported only on desktop. 

*Proposed :* 

UI and logics to remain same as MEL + IRO Assisted Journey unless stated specifically

*Applicant detail entry/Coapplicant detail entry*

* If Telecaller adds any new additional identifier or does demographic changes done  Following prompt msg should appear on screen . 
* “Editing details will require physical verification by our Relationship Officer. Do you wish to continue?” with Yes/No option

# If Telecaller clicks on Yes – Telecaller journey should be Dropped off ( Same drop off reason as CJ) In case of both scenarios- additional identifier added or demographic changes done, the drop off reason should be same
# If Telecaller clicks on No – The confirmation pop-up should get closed and telecaller can continue his journey.

*FICO* 

* Both FICO Callouts to be skipped ( UI and Back end)

*Employment & Loan and Product  screen*

* Loan amount can be reduced till 60k as per current build of CJ/MEL+ and tenure validation to run as per CJ.

Tenure Validation options to be shown as below

# Loans upto Rs. 200000 = 12 to 36 months
# Loans > Rs. 2,00,000 = 12 to 48 months

* Reference section to be removed on UI 
acceptance: * Journey UI and logics to remain same as MEL + IRO Assisted Journey unless stated specifically
* Highmark and FICO (CDRULE)call-out should not be called on front end and back end
* The drop off reason in the telecaller flow section should stamp properly in case of drop offs
* If the case is dropped off due to demographic change, The loan application will be visible to IRO in “*Telecaller dropped off cases*” worklist and scheme for such applications will be changed from MEL+ to MEL Repeat.
** Bank - MEL-REPEAT BANK
** IFBL - RURAL MEL REPEAT- IFBL
* Repeat Flow will continue as is to the IRO and loan will be visible to him under “*Telecaller dropped off cases*” worklist.
* IRO will take ownership & will land on Co-applicant details entry Page
* POSIDEX callout gets triggered, immediately after user clicks NEXT on Co-app screen.
* Scheme of the case should flow to Posidex
* If Posidex gets rejected then the case should get hard reject and user will not be able to perform any further actions.
* If Posidex is failed due to any reason, user should be given an option to retry the posidex call, also the reason for Failure should be displayed on front end.User can initiate the call again by clicking on "Retry" button visible.
* UI and Back end stamping should happen appropriately for all the fields
* The drop off scenario of CJ journey to remain same

key: ML-14520
summary: Drop off handling from Telecaller to IRO/MRO- Part 2
description: * Valid for New offers uploaded on SFDC. Applicable BU : HL/LAP
* Tele-caller view will be supported only on desktop. To be tested for HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

*Proposed*

To continue from [https://fincap.atlassian.net/browse/ML-14513|https://fincap.atlassian.net/browse/ML-14513|smart-link] 

* Post loan application creation when user lands on QDE and moves forward the case, when a case gets drop off due to applicable drop off reason during any stage on Telecaller journey , a pop up should appear on UI as “The Case has been dropped off and will be further processed by Relationship Officer” This msg should be configurable
* Telecaller should be able to close the pop up by clicking cross button and existing window to close and Telecaller should return to Home Screen once pop up is closed. The case should not be visible further in WIP worklist of Telecaller.
* The case should start appearing in Telecaller dropped off cases worklist [https://fincap.atlassian.net/browse/ML-14965|https://fincap.atlassian.net/browse/ML-14965|smart-link] 
acceptance: # To function as described
# On UI, the popup should appear on Screen as mentioned, Telecaller should be able to close the popup
# Once popup is closed, the user should be moved to Home page
# The user should not be able to find the dropped off cases in his worklist

key: ML-14513
summary: Drop off handling from Telecaller to IRO/MRO-Part 1
description: * Valid for New offers uploaded on SFDC. Applicable BU : MEL/PL/HL/LAP
* Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

*Proposed* : 

* If X hours have passed from the drop off time of a CJ case (in the customer flow section), the drop off reason should stamp in *Drop Off Reason*  as per [https://fincap.atlassian.net/browse/ML-14456|https://fincap.atlassian.net/browse/ML-14456|smart-link]  in the Telecaller flow section as  *Telecaller Inactivity* ( X hours time frame should be configurable BU wise [https://fincap.atlassian.net/browse/ML-14456|https://fincap.atlassian.net/browse/ML-14456|smart-link] , we should be able to change the time in future)
* Drop off logic and reasons should be same as current build (CJ drop off scenario) for cases dropped from Tele-caller except for Drop off reason due to *Inactivity .* 
* Some of the drop off reasons applicable for Telecaller  flow are as follows. {color:#ff991f}Dev team to check for other applicable drop off reasons from CJ drop reasons which can be valid in case of Telecaller flow.{color} All applicable reasons for Telecaller should stamp in the field created in [https://fincap.atlassian.net/browse/ML-14456|https://fincap.atlassian.net/browse/ML-14456|smart-link]  and case should move to IRO/MRO . {color:#ff991f}Drop off reasons to be maintained separately for MEL/PL and HL/LAP. In future, Product may ask for adding/deleting drop off reasons as applicable to each BU{color}

*Karza Mismatch*

 *IMPS Error*

*Physical mandate*

*Demographic change*

*Digital Mandate*

*Insufficient data*

*ClickWrap failed*

*CJ Success Finnone failed (Only for MEL/PL)*

*CJ Success Emorphis Failed*.  *(Only for MEL/PL)*



* As applicable, the drop off reason should stamp in the field created in [https://fincap.atlassian.net/browse/ML-14456|https://fincap.atlassian.net/browse/ML-14456|smart-link] 
acceptance: # To function as described
# Stamping in drop off reason field should happen as mentioned for applicable drop off reasons
# To check drop off reason stamping is happening correctly as applicable to BU
# To check drop off is happening for each drop off reason for MEL/HL/LAP

key: ML-14490
summary: Picklist options- Gender/Appointee-Nominee Relation
description: The story is related to master related changes hence taking as Hotfix

Proposed :

*Applicable for MEL/PL/HL/LAP/Gold*

Gender : “Others”  and “Transgender” record to be made inactive in picklist and master global list. It should not be visible on UI in Applicant data entry stage and Insurance stage 

All the lower orgs to be made sync with Gender at master and object level

*Applicable for MEL/PL/HL/LAP*

Major Son picklist option to be visible on relationship with applicant on insurance screen
acceptance: *Major Son*

# To be tested for each BU as applicable
# To be tested specifically for MEL Plus/Repeat/CJ 
# To be tested for WIP(which has not reached insurance stage) and New loans
# Add co-applicant (co-app detail entry) and select “relationship with Applicant” as “MAJOR SON” and Select the co-applicant as nominee for insurance and push the case till FinnOne submit.
# To be tested in case of re-trigger scenarios
# FinnOne submit should happen successfully as expected

*Gender* 

# To be tested for each BU as applicable
# Gender : “Others”  and “Transgender” record to be made inactive in picklist and master global list. It should not be visible on UI in Applicant data entry stage and Insurance stage 
# Male and Female options should continue to be visible as expected
# User should not be able to select this option anywhere in the journey,  to be tested for WIP ( if the case is re-triggered and user should not see Others as option) and new loans
# Journey sanity to be done, no other impact is expected

key: ML-14474
summary: Charge calculation & upfront deduction
description: 

* {color:#ff991f}*Charges to deducted from net. disbursal amount on SFDC*{color}
* {color:#ff991f}*New Charge IDs to be created in FinnOne and to be sent in the same array in Finnone submit request* {color}[~accountid:6273c3db7dd556006afdfe28]{color:#ff991f}  *shared*{color}{color:#ff991f}. {color}{color:#ff991f}*Exact array in which SFDC needs to send this amt (pending point)*{color}{color:#ff991f}  . This point is open{color} [~accountid:60a75ab82009f10068dc8e18] 
* In loan asset object, we need to add 4 fields : User opted in for PMJJBY, User opted in for PMSBY, Premium PMJJBY, Premium PMSBY ( Report to be available for audit/reporting)
* Do we need to send Nominee details to Finnone ?? [~accountid:6273c3db7dd556006afdfe28]  existing nominee details only applicable. This point is not clear [~accountid:60a75ab82009f10068dc8e18] - Nominee section not to be added for these 2 insurances
* application form - where to show; [~accountid:6273c3db7dd556006afdfe28] App form only. Description added. Description mentioned in other story.
* We will need two things to be available - 1. Which insurance customer opt in for? 2. premium amt paid (separate for the two insurance types). This point is not clear [~accountid:60a75ab82009f10068dc8e18] 
** Objects for report type- Loan Asset, Applicant
** Product Profile should have access to report type and the fields (Profile Name- )



Two additional charge headers should be displayed under “Most Important Terms & Charges” section .  This point is not clear [~accountid:60a75ab82009f10068dc8e18] 

!image-20221202-070824.png|width=845,height=226!
acceptance: Charges to be updated on customer facing documents. 

key: ML-14471
summary: Opt-in Screen  
description: |This has to be configured - muted mode possibility
Only valid for 55637 RURAL MICRO ENTERPRISES LOAN-BANK
This is applicable for MEL first cycle loan only , applicable for Bank users only, user can opt for both types of insurance in one application. 
This option of enrolling for insurance type - will come post sanction after account has opened and before insurance page
Two radio buttons should show
# PMJJBY Opt -in [Yes / No])
# PMSBY Opt- in [Yes / No]
Both these radio button options will show up only when these three criteria is met
* Primary Applicant age 18-50 ( this is basis DOB given in QDE)
* Biometric “EKYC” = successful
* Account Opening is successful with IDFC Firstbank *fresh account or existing account- both*
 against consent terms - tick mark button to be given and it should automatically get ticked as “no”. [~accountid:60a75ab82009f10068dc8e18]  *- No separate checkbox required.*
Consent Terms to be displayed (Hyperlink similar to SMS Bit link)
Format to be shared by [~accountid:60a75ab82009f10068dc8e18] 

PMSBY:
* Willing to enroll for Pradhan Mantri Suraksha Bima Yojana
* Consent for annual auto-debit of INR 20 from 25th May - 1st June
* Declaration of Exclusive Participation with IDFC First Bank
* I have read and agree to the scheme’s +Terms & Conditions (hyperlinked text 1)+
PMJJBY:
* Willing to enroll for Pradhan Mantri Jeevan Jyoti Bima Yojana
* Consent for annual Auto-Debit of INR 436 from 25th May - 1st June
* Declaration of exclusive participation with IDFC First Bank
* I have read and agree to the scheme’s +Terms & Conditions (hyperlinked text 2)+
[~accountid:60a75ab82009f10068dc8e18]  do we need to send SMS to Mobile number?
Above text should be displayed on SFDC Loan Application form under Declaration section (just above Authorization section)
 only when user opts in
!image-20221202-070737.png|width=842,height=196!|
acceptance: Opt-in should be visible; default should be “no”

Broad Consent terms should be displayed below opt-in button

key: ML-14456
summary: Creation of Tele-caller fields on SFDC
description: * Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

*Proposed*

Creation of  a section “Telecaller Flow”  in the loan application object similar to Customer Flow Section ( existing)

The fields and the corresponding logic  for the new section will be as below . Bold highlighted text should appear on back end as field name. 

# *Telecaller Journey Stage* : actual stage on which case is present at the moment in the telecaller flow, if the case is dropped off from Telecaller flow, the stage at which the case got dropped off, that stage should continue to stamp. The stage should stamp only in case of telecaller initiated journeys and telecaller dropped off cases
# *Telecaller Journey Substage* : actual substage on which case is present at the moment in the telecaller flow, if the case is dropped off from Telecaller flow, the stage at which the case got dropped off, that stage should continue to stamp. The  substage should stamp only in case of telecaller initiated journeys and telecaller dropped off cases
# *is Telecaller Flow* : when the loan application is initiated by tele-caller, the field will be auto-ticked ( logic should work similar to “is customer flow”) . If the CJ dropped off cases move to telecaller , then also this field should get ticked. If the case is dropped from Telecaller, then also this field should continue to be ticked
# *Drop Off Reason* : Drop off reason should stamp in this field as applicable
# *Is Telecaller Dropped Off :* logic to be same as current field stamping “customer flow”, if the loan application drops off from Tele-caller queue and moves to IRO/MRO queue, this field will be auto ticked
# *istimelimitcompleted :* logic to be same as current field stamping in “customer flow” section ( is24hourcompleted ) , time limit of x hours to be configurable for each BU- MEL/PL/HL/LAP. X value to be shared by [~accountid:60a75ab82009f10068dc8e18] X=24hrs for MEL/PL and [~accountid:60d3017cdae5670068f3bd2f] X=48hrs for HL/LAP
# *Drop off Time :* logic to be same as current field stamping in “customer flow” section
acceptance: # To function as described
# All fields should be visible on backend
# Functionality should work in case of re-trigger scenarios
# The field and section to be visible in all the old, WIP and new loans
# Field stamping should happen as per logic stated for the new loans punched by Tele-caller
# The values should stamp in the new fields only for applicable tele-caller driven journeys and applicable scenarios
# Product users should be able to pull out reports basis the new fields

key: ML-14446
summary: Drop off handling from CJ to Telecaller/IRO-Part 1
description: * Valid for New offers uploaded on SFDC. Applicable BU : MEL
* Tele-caller view will be supported only on desktop. 

*Current* : the dropped off CJ cases land in IRO queue as per existing implementation

*Proposed* : 

* the dropped off CJ cases should land in Tele-caller queue if the drop off reason is *Inactivity*  in the customer flow section , the case should become editable to Tele-caller and tele-caller should be able to carry forward the case
* All the screens should be same as current build , the difference will be that tele-caller would move the case forward instead of IRO ( Existing functionality-when CJ case drops off, IRO can take forward the case from that particular page/ stage-substage as applicable)
* The CJ cases should be visible only to Tele-caller profile in non-editable mode until they are dropped off

There will be a Flagging – “Drop off” visible on worklist ( MEL+Customer Journey cases as per ML-13461) basis which system will define if the case will be editable to Tele-caller or not ( The logic of drop off flag to be retained from current implementation in case of IRO)

# If the Drop off Flag is Untick, the case will be visible only to Tele-callers but in non editable mode and in the same stage as the customer is currently on. 
# If the Drop off flag is Ticked and the drop off reason is : *Inactivity* then the case will be editable to the Telecaller from the same stage where the customer has dropped off 

These cases should be visible in MEL+Customer Journey cases of telecaller  and telecaller should be able to take forward the case by taking the ownership  ( Ownership logic to be same as IRO implementation ) .The Cases will be visible in open pool and any Telecaller can take ownership for the same

·         If the Telecaller has taken the ownership of a case, then the case will not be visible to other Telecaller in Worklist - “MEL+ Customer Journey Cases ” and will start showing up in WIP Worklist of that Telecaller

3. If the Drop off flag is Ticked and drop off reason is any value other than *Inactivity* then the case  will be visible only in IROs- MEL + Customer Journey cases  worklist. The mapping logic of CJ dropped case to IROs will be same as current build. Any IRO of that branch can take ownership for the same and move forward the case from the same stage where the customer has dropped off. 

The cases which get dropped off from CJ to IRO, should have drop off flag to be ticked as per current build

·         If the IRO has taken the ownership of a case, then the case will not be visible to other IRO in Worklist - “MEL+ Customer Journey Cases ” and will start showing up in WIP Worklist of that IRO
acceptance: ·         To function as described

·         CJ cases dropped off due to *Inactivity* should be visible in MEL+Customer Journey cases cases as applicable and telecaller should be able to take forward the case.The Cases will be visible in open pool and any Telecaller can take ownership for the same

·         If the Telecaller has taken the ownership of a case, then the case will not be visible to other Telecaller in Worklist - “MEL+ Customer Journey Cases” and will start showing up in WIP Worklist of that Telecaller

·         All Tele-callers should be able to able to see all the CJ cases in non editable mode until the case is dropped off

·         CJ dropped off cases due to mentioned drop off reasons should land in IRO queue and IRO should be able to edit the case and move forward the case as per description

* o   *Karza Mismatch*
* o   *IMPS Error*
* o   *Physical mandate*
* o   *Demographic change*
* o   *Digital Mandate*
* o   *Insufficient data*
* *Clickwrap failed*
* *CJ Success Emorphis Failed*
* *CJ Success FinnOne failed*
* The Cases will be visible in open pool and any IRO can take ownership for the same as per description. the CJ cases mapping logic to be same as current functionality
* The cases which are not dropped from CJ to IRO , should not be visible in IRO  worklist as per description
* The cases which get dropped off from CJ to IRO, should have drop off flag to be ticked in IRO MEL+Customer Journey Cases Worklist as per existing build

·         If the IRO has taken the ownership of a case, then the case will not be visible to other IRO in Worklist - “MEL+ Customer Journey Cases ” and will start showing up in WIP Worklist of that IRO

·         Once the customer has clicked on the offer through any mode and started the self journey, then 

* this application will be visible in “MEL+ Customer Journey Cases“  worklist  only to Telecaller login in non-editable mode unless the case is dropped off
* this application will be visible in “MEL+ Customer Journey Cases“  worklist  only to Telecaller login in editable mode when the case is dropped off due to *Inactivity* and the drop off flag should be ticked for these cases
* the cases will be visible to IRO in “MEL+ Customer Journey Cases“ only when the cases get dropped off due to applicable drop off reasons and the drop off flag should be ticked for these cases
* After the cases are dropped off to IRO, the functionality to take forward the case will be same as current build

key: ML-14441
summary: Screens to be skipped in Telecaller flow_Part 1
description: 

# Applicable BU : HL/LAP
# Tele-caller view will be supported only on desktop. To be tested for HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

*Proposed*

UI and logics to remain same as HL/LAP Pre approved unless stated specifically

+Consent Screen (HL/LAP)+

* When tele-caller clicks on Interested, checks scheme and click on next, Tele-caller lands on  applicant detail entry directly. 
* Consent page to be skipped. The logics for this screen to be removed.
acceptance: 

# After Tele-caller clicks on “Interested”, and create loan application , the case should directly land to Applicant detail entry
# SMS should not get triggered on the associated mobile number as applicable in existing functionality
# The flow should work as usual for Telecaller HL/LAP as usual when case land directly on applicant detail entry until loan and product screen.
# The consent screen should be visible in MEL+IRO and HL/LAP Pre approved journey flow as current build ( in case offers move to IRO/MRO due to batch logic)
# The offers which are dropped off before create loan application, the consent screen should be visible as usual

key: ML-14360
summary: Customer mobile number should be non-editable after OTP based Consent stage got failed post 3 attempts (or) after 10 min timeout.
description: Applicable : MEL/PL ( all workflows) , HL/LAP/Gold ( all workflows)

*Proposed* : 

Once user proceed with the physical consent after OTP based consent validation is failed post 3 attempts (or) after 10 min timeout.

# The user should not be able to edit the customer mobile number in forward journey
# if case is retriggered from any stage , user should not be able to edit mobile number.
# If the user tries to do so, Toast message: “Customer mobile number should not be edited” and case should not be allowed to move ahead
# This will be built for applicant/co-applicant/s/ Guarantor as applicable
acceptance: # To function as described and tested for applicable BUs
# Toast msg should appear when user tries to change the number in forward and re-trigger scenario as mentioned and case should not be allowed to move ahead
# When the OTP verification is successful,  mobile number editing is not allowed as per current build, it should work as it is
# To be tested for App/Co-app/s/Guarantor as applicable

key: ML-14354
summary: PSL Borrower category code for Agri Tagged borrowers with Loan Amount > 2 lacs
description: Only for MEL/Repeat/Plus/CJ

*Current* :  Farmer type : Small , Marginal

*Proposed* : 

To create a new farmer type : Large, this should be available on UI for user selection

Borrower code 49 to be mapped to this , when the user selects farmer type as large, 49 should be passed in FinnOne submit

Logic to be built on Loan and Product section to check for Farmer type, if the loan amount is more than 2 lac, farmer type should not be allowed as small and marginal so that borrower code 41, 42 is not passed
acceptance: 1

key: ML-14323
summary: Maintaining version system modular for Fico validations
description: Fico Version number update should be modular. 

version number not to be hard-coded in PD app code
acceptance: change of version number can be done without making changes in the code 

key: ML-14242
summary: When Tele-caller selects Process Under Repeat/Process under Pre-Qualified on offer
description: # Valid for New offers uploaded on SFDC. Applicable BU : MEL/PL/HL/LAP
# Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

Continuation From [https://fincap.atlassian.net/browse/ML-14171|https://fincap.atlassian.net/browse/ML-14171|smart-link]



*Process Under Repeat* (Valid for MEL/PL)

# Scenario where Customer wants more than Pre-Approved eligible amount, Tele-caller would click on this button.
# The offer should move from tele-caller queue to IRO queue
# The Drop off reason from Tele-caller queue should stamp as “ Process Under Repeat”  IRO should be able to take action on this offer as per current functionality
# When case moves to IRO queue, the IRO should be able to read Drop off reason as “Process Under Repeat”
# Offer should be visible to all the IROs mapped to that Product and the branch, in which previous case they where logged in.
# Bank IRO would see only Bank related case offers and IFBL would see only IFBL related case offers.
# If the IRO clicks *Process Under Repeat* 
# The case would follow MEL repeat Process where the Scheme Would be Autostamped as “MEL Repeat” or “ PL Repeat” as applicable



*Proceed Under Pre-Qualified*  ( HL/LAP) 

# Scenario where Customer wants more than Pre-Approved eligible amount, Tele-caller would click on this button.
# The offer should move from tele-caller queue to MRO queue
# The Drop off reason from Tele-caller queue should stamp as “ Process Under Pre Qualified ” 
# MRO should be able to take action on this offer as built in [https://fincap.atlassian.net/browse/RHLB-3669|https://fincap.atlassian.net/browse/RHLB-3669|smart-link] 
# When case moves to MRO queue, the MRO should be able to read Drop off reason as “Process Under Pre Qualified”
# Offer should be visible to all the MROs mapped to that Product and the branch, in which previous case they where logged in.
# Bank MRO would see only Bank related case offers and IFBL would see only IFBL related case offers.
# As per refer [https://fincap.atlassian.net/browse/RHLB-3669|https://fincap.atlassian.net/browse/RHLB-3669|smart-link] No action would be performed on click of this “Process Under Pre Qualified “  button. “Proceed under PreQualified” would be a generic button.
acceptance: # To function as described
# Tele-caller should be able to see all buttons as described and should be able to take action
# Once action is taken, functionality should work as mentioned
# Drop off reason from tele-caller queue field should be visible on all offers in Tele caller and IRO queues and backend
# Offers should move to IRO/MRO queue once selected Process Under Repeat/Process under Pre Qualified by Tele caller, bank offers and IFBL offers should move to respective queues
# IROMRO should be able to take all actions on the offer as per current build of MEL+ or [https://fincap.atlassian.net/browse/RHLB-3669|https://fincap.atlassian.net/browse/RHLB-3669|smart-link] as applicable

key: ML-14239
summary: When Tele-caller selects Not Interested on offer
description: # Valid for New offers uploaded on SFDC. Applicable BU : MEL/PL/HL/LAP
# Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

Continuation From [https://fincap.atlassian.net/browse/ML-14171|https://fincap.atlassian.net/browse/ML-14171|smart-link]

*Not Interested*

# If the Tele-caller clicks ‘Not Interested’, a pop-up with a Comment box should be get opened and visible to Telecaller to enter the Comments with date stamp. ( this is current build for MEL+)
# That particular offer would move back to the IRO queue open pool i.e. offers worklist and will be visible to IROs
# Offer should be visible to all the IROs mapped to that Product and the branch, in which previous case they where logged in as per current build
# The comments added by Tele-caller should be visible on Offer details page to IRO as per current build for MEL+
# Field “ Tele-caller Drop Off Reason” should stamp : *Not Interested* on offer details page 
# Once offer moves to IRO offers worklist, IRO should be able to Assign the case back to himself and should be able to click on “Interested” if required (before the expiry date).
# IRO should be able to take action on these offers as per current build
# The Offers would be assigned back to open pool, if the IRO selects “Not Interested” against the offers/Cancel the case at any given stage before finnone submit. Post which, the case should flow back to offers worklist in open pool, for anyone to pick up. (Current Build)
acceptance: # To function as described
# Tele-caller should be able to see all buttons as described and should be able to take action
# Once action is taken, functionality should work as mentioned
# Drop off reason from tele-caller queue field should be visible on all offers in Tele caller and IRO queues and backend
# Offers should move to IRO queue once selected Not interested by Tele caller, bank offers and ifbl offers should move to respective queues
# IRO should be able to take all actions on the offer as per current build of MEL+ , if IRO selects Not interested, his comment should be saved on offers details page as current build
# When case moves to IRO queue, the IRO should be able to read Drop off reason from Tele-caller queue as Not Interested

key: ML-14236
summary: When Tele-caller selects Not Reachable on offer
description: # Valid for New offers uploaded on SFDC. Applicable BU : MEL/PL/HL/LAP
# Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

Continuation From [https://fincap.atlassian.net/browse/ML-14171|https://fincap.atlassian.net/browse/ML-14171|smart-link]

*Not Reachable* 

# Drop off reason from Tele-caller queue should stamp on Offer details page as “Not Reachable” in the field “ Tele-caller Drop Off Reason”
# When the drop off reason is “Not Reachable”, offer should move from tele-caller queue to IRO queue
# When case moves to IRO queue, the IRO should be able to read Drop off reason from Tele-caller queue as Not Reachable
# Offer should be visible to all the IROs mapped to that Product and the branch, in which previous case they where logged in as per current build
# Bank IRO would see only Bank related case offers and IFBL would see only IFBL related case offers as per current build
# IRO should be able to take action on this offer as per current functionality
acceptance: # To function as described
# Tele-caller should be able to see all buttons as described and should be able to take action
# Once action is taken, functionality should work as mentioned
# Drop off reason from tele-caller queue field should be visible on all offers in Tele caller and IRO queues and associated offer object
# Drop-off functionality for “Not Reachable” cases should work independently of  [https://fincap.atlassian.net/browse/ML-14164|https://fincap.atlassian.net/browse/ML-14164|smart-link] 

key: ML-14171
summary: Offer Page view and When Tele-caller selects Interested on offer
description: # Valid for New offers uploaded. Applicable BU : MEL/PL/HL/LAP
# Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

* On clicking on one of the Offer record the user would be able to view the complete offer details which will include: ( as per current build)
** Basic Demographic details of the Applicant – Applicant details
** Offers Page

* On clicking on one of the Offer record the user would be able to view the complete offer details and all the buttons - Take ownership, Interested, Not Interested, Process under repeat as per current build
* ·A new button *“Not Reachable”* to be added between *Not interested* and *process under Repeat/Process under Pre-Qualified (for HL/LAP as per* [https://fincap.atlassian.net/browse/RHLB-3669|https://fincap.atlassian.net/browse/RHLB-3669|smart-link] *)*  to be added. The button should work only for Tele-caller login; for IRO/MROs this button should not appear
* A new field should be created on Offers details page “ Tele-caller Drop Off Reason”, new field to be visible on front end to Tele-caller and IRO/MRO and on Back end under associated offer Object

Buttons to function as below

*Take ownership of an offer*

* to function as  per current build [https://fincap.atlassian.net/browse/RMP-27|https://fincap.atlassian.net/browse/RMP-27|smart-link] point 7

If Tele-caller clicks on 

*Interested*

# to function as per current build [https://fincap.atlassian.net/browse/RMP-27|https://fincap.atlassian.net/browse/RMP-27|smart-link]
# For PL/HL/LAP- Scheme stamping should happen as valid for BU
# When Tele caller selects INTERESTED on Offer Details page, below pop-up should get opened: In the Select Scheme drop-down,  schemes should be visible as per current build in [https://fincap.atlassian.net/browse/RMP-29|https://fincap.atlassian.net/browse/RMP-29|smart-link] Applicable schemes should be visible for PL/HL/LAP



Further covered in

 [https://fincap.atlassian.net/browse/ML-14236|https://fincap.atlassian.net/browse/ML-14236|smart-link]

[https://fincap.atlassian.net/browse/ML-14239|https://fincap.atlassian.net/browse/ML-14239|smart-link] 

[https://fincap.atlassian.net/browse/ML-14242|https://fincap.atlassian.net/browse/ML-14242|smart-link] 
acceptance: # To function as described
# Tele-caller should be able to see all buttons as described and should be able to take action
# Once action is taken, functionality should work as mentioned
# New field should be visible on back end and front end
# Not Reachable button to be available for Telecaller, IRO/MRO should not be able to see this button
# If the Journey has started by the Tele-caller by clicking on interested, then the Message “Link” ( [https://fincap.atlassian.net/browse/ML-13461|https://fincap.atlassian.net/browse/ML-13461|smart-link] )and Offer on the _MYFIRST-Bharat app_ would be marked as expired and customer will not be able to initiate a self journey anymore.
#  Message would be visible on clicking the Link (customer action) - “_Dear Customer, Your pre-approved Loan is already initiated by the Sales officer. Kindly contact the Branch for further queries._*”*
# If the customer has started the journey by clicking on the message “link”, he should still be able to view the offer on the _MYFIRST-Bharat app_.
# If the customer has left the journey midway, then he should be able to continue the journey from the same stage where he left, on clicking on other mode of Journey initiation i.e. if link then app or vice versa.
# Offer which is already marked interested by Tele-caller, Customer should not be able to initiate the journey again
# If the Tele-caller has taken the ownership of a case, then the case will not be visible to other Tele-caller in Worklist - “MEL+ Customer Journey Cases” and will start showing up in WIP Worklist for MEL cases of that Tele-caller.
# Under MEL Product, Telecaller will have  *– “MEL+ Customer Journey Cases”*
# This will be a open pool worklist and cases will be visible to all IRO's assign to that branch.
# New Loan application of MEL+ will be visible to all IROs in open pool present in that branch. “MEL+ Customer Journey Cases“ worklist
# IRO will have option to take ownership of a case.
# If the IRO has taken the ownership of a case, then the case will not be visible to other IRO in Worklist - “MEL+ Customer Journey Cases” and will start showing up in WIP Worklist for MEL cases of that IRO.

key: ML-14164
summary: Batch run logic
description: * Valid for New offers uploaded on SFDC. Applicable BU : MEL/PL/HL/LAP
* Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing
* X =12 for Production environment
* X=1 for lower orgs

# A batch should run on SFDC to move offers present in “All Offers” worklist from Tele caller queue  to IRO/MROs queue after X number of days
# X= will be calculated from Created date available on associated offer object
# Batch should run every day at EOD to check X value, If X days have passed , the batch logic should run
# X should be configurable, product should be allowed to update it in future as per business requirement
# Once X number of days are over, the offers should move from “All Offers” worklist in tele-caller queue and should move to IRO/MRO’s queue. IROs/MROs should be able to take action on offers moved as per current build
# Offer should be visible to all the IROs/MROs mapped to that Product and the branch, in which previous case they where logged in as per current build
# Bank and IFBL offers should appear in respective workflow as per current build
# X= 12 in Production
acceptance: # To function as described
# To be tested by configuring X=1
# Tele-caller should not be able to see offers once X days have passed
# If the loan is created with the offer, and X days have passed, that loan should still be visible in WIP/MEL+Customer Journey Cases/PL+Customer Journey Cases worklist (as applicable) of tele-caller queue 
# IRO/MROs should be able to view offers moved out of Tele-caller queue
# IRO/MROs should be able to take action as per current functionality
# Offer should be visible to all the IROs/MROs mapped to that Product and the branch, in which previous case they where logged in.
# Bank and IFBL offers should appear in respective workflow as per current build

key: ML-14161
summary: Creation of new fields in Associated offer object and addition of fields on Worklist view
description: Valid for New and current offers offers uploaded on SFDC. Applicable BU : MEL/PL/HL/LAP

Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

* A new field “ CRN” to be created  on SFDC Associated offer object to store CRN of Applicant from base loan, CRN of applicant of base loan to be fetched and stored in this new field
* New fields to be added on Associated offer object for reporting purpose, the values will be uploaded on SFDC by BIU team (format type for values to be received is added in attachment) , new fields should be able to consume this values, This values will not be shown to Telecaller/IRO/MRO Login

mel_Segment - *MEL Segment*

MOB_Band- *MOB Band*

final_score -    *Final Score*

risk_segment - *Risk Segment*

* In the Associated Offer tab in Tele caller login, a new column “CRN” and “Base loan Business unit” to be added between Customer Name and Pre Approved ROI, this new Column will show the CRN  and Base Loan Business Unit as available on Associated offer Object on Back end
* The new field “CRN” and “ Base Loan Business Unit ” in worklist view should be visible to Tele-caller and IRO queue both
* Tele-caller should be able to global search CRN to find the associated offer
* Global search functionality should work as per current build
* All fields in Associated offer object should be visible to SFDC user with “Product” user profile and accessible via Reports. 
acceptance: # To function as per described
# Field are visible on SFDC back end and front end corresponding to the offer as per description
# User is able to global search the CRN to find associated offer
# Below fields should not be visible on front end to Telecaller and IRO/MRO
# mel_Segment - *MEL Segment*
MOB_Band- *MOB Band*
final_score -    *Final Score*
risk_segment - *Risk Segment*
# All fields in Associated offer object should be visible to SFDC users with “Product” user profile. 
# Offers worklist  changes for IRO/MRO login should be mobile compatible

key: ML-14134
summary: Code optimization for PD reports
description: PD reports to be generated if more than one are in queue. Current code allows generation of only one pd report and other reports fail. By this code optimization we will be able to generate multiple reports in the queue.
acceptance: change of below classes in code

# PDApp_scheduleWaitingCaseReAttempt
# PDApp_ReAttemptWaitingPDCases
# ViewDocumentsResponseProcessor
# pdfReportAttachmentUtilityQueueable
# PdfReportAttachmentUtility

key: ML-14067
summary: Hospicash document related changes for RMEL, RPL
description: Current - Hospicash policy documents generated in the system have incorrect information.

Proposed - Hospicash app form and certificate should be updated as per attached files.
acceptance: E-morphis should generate updated Hospicash policy documents.

key: ML-14064
summary: Hospicash tenure and premium Grid
description: *Applicable* - All journey flows -MEL , PL where Hospicash insurance opt in is allowed

*Current* - Hospicash is offered for 2 year tenure at fixed premium rate of Rs. 300

*Proposed* 

* Hospicash policy tenure and premium will be calculated basis the loan tenure as per below grid and updated on front end and back end
* Policy tenure and Premium to be configurable , it should be allowed to update by L1/Product team. When loan tenure is extended at scheme level, policy tenure and premium should be allowed to add as a configuration change
* Updated Premium/Tenure should be passed to all integrations in the tags as per current built- Emorphis/FinnOne  ( Sum assured value will remain as it is)
* In Repeat/Plus/CJ/Telecaller Journeys- Hospicash insurance premium and policy tenure to be recalculated and updated on frontend/backend 
* Logic of sum assured- mute, retain as per 15k as static value
Sum assured/per year text replacement

*Dependencies*

Emorphis readiness of all 3 possible combinations of documents

|*Loan Tenure*|Policy tenure|Premium|Sum Assured/year|
|*12*|1|150|15000|
|*18*|2|300| |
|*24*|2|300| |
|*30*|3|450| |
|*36*|3|450| |
|*42*|3|450| |
|*48*|3|450| |
acceptance: # When customer opts in for Hospicash, premium and policy tenure appear as mentioned in the grid for all the journey flows of MEL-PL
# In Repeat/Plus/CJ journeys, Premium and policy tenure is recalculated as per the grid if hospicash was opted in the base loan
# There should be no impact on Loan tenure logic, it should work as per the current implementation
# Premium and Policy tenure should be configurable , it should be allowed to update directly in Production by L1/Product team
# Premium, tenure and sum insured to be available on Front end and back end as per the grid
# Tenure/Premium/Sum insured to be passed to all integrations , Emorphis, FinnOne, etc.. Charge_amount tag in finnone submit is passed with updated premium amount. “tenure”, "insuranceSumAssured" , "insurancePremium" are correctly passed in Emorphis request
# Net disbursement calculations should run as per the updated premium and amount should reflect correctly on Front end and back end
# All the documents- Sanction letter, Hospicash form/ certificate etc. should be updated as per current implementation with tenure/premium/sum insured
# Case to be properly disbursed to finnone without any errors when hospicash is opted

key: ML-14001
summary: Overwrite changes on CD rule class
description: Overwrite changes done on CD rule class.

PD team to sync common class from dev to UAT environment
acceptance: User should be able to get Fico validations

key: ML-13949
summary: ROI Revision for PL
description: Current : [https://fincap.atlassian.net/browse/ML-12603|https://fincap.atlassian.net/browse/ML-12603|smart-link] 

Proposed : Need to increase interest rates by 0.5% for each scheme as given in the attached file.
acceptance: * Interest rates should be updated as per grid attached.
* User should be able to submit the loan with new rate to FinnOne
* Should function as per grid for new and  WIP ( cases which have not reached Sanction stage) cases.
* WIP cases with any stage sanction or beyond sanction stage will be submitted to FinnOne with old ROI
* WIP cases on underwriting stage or any prior stage to be checked, BCM to re-enter the loan amount on UW screen if reached UW stage, new ROI should fetch automatically, FinnOne submit to happen with new ROI here
* to be tested for each salary type- salary slip/certificate/cash
* For cash salary type, ROI to be 24%

key: ML-13916
summary: Initial Configuration for Tele-caller journey
description: Valid for MEL/PL/HL/LAP

* “Tele-caller”  profile configuration
* User creation as per user Profile and Role- Bank and IFBL - 2 users for each workflow
* Domain and community link to be be created where tele-callers can login similar to what is shared with IRO/MROs current functionality
* By default- users should be mapped only to MEL BU, Branch mapping should be as per IRO profile
acceptance: # To function as described
# Tele caller profile configuration is done in SFDC
# User are created as per user Profile and Role
# Should be able to assign Business unit to users of tele caller profile, Given, Business unit is MEL, tele caller should be able to view only cases (along with Associated offers) of MEL in his login view
# Given Business unit is PL/MEL/HL/LAP, he should be able to see cases (along with Associated offers)  of the PL/MEL/HL/LAP in login
# Should be able to map one or more or all branches to the user, the cases should be visible as per applicable branch in login

key: ML-13909
summary: ROI Revision for MEL
description: Current : 

MEL schemes  Except MEL Plus -  [https://fincap.atlassian.net/browse/ML-12471|https://fincap.atlassian.net/browse/ML-12471|smart-link] 

MEL Plus-   [https://fincap.atlassian.net/browse/ML-12785|https://fincap.atlassian.net/browse/ML-12785|smart-link] 

Proposed : Need to increase interest rates by 0.5% for each scheme as given in the attached file.
acceptance: * Interest rates should be updated as per grid attached for all schemes- refer both tabs of attachment
* to be tested for new and wip cases
* Updated ROI should be populated on front end and back end as per grid in Bank and IFBL Workflow 
* The Revised ROI should be flown to integrations
* The loan should be properly disbursed
* Should be tested for CJ Journey also
* User should be able to submit the loan with new rate to FinnOne

key: ML-13799
summary: Scheme Master changes on SFDC
description: Applicable for Rural PL scheme only- Bank and IFBL

Current : 

|Existing Scheme Code|Existing Scheme Name|
|52729|PL-RURAL PL|
|55627|RURAL PL-IFBL|

Proposed

|Proposed Scheme Code|Proposed Scheme Name|
|71745|Rural-RPL Bank|
|71744|Rural-RPL IFBL|

* The above change should be updated on front end and back end where ever applicable
* The above change should be passed to the integrations and external systems as applicable

Assumption

# Old Cases will remain as is and old scheme code and Name will be visible
acceptance: * To function as per described
* There is no change wrt  PL Journey
* Scheme code and names to be checked on front end and back end
* Stamping should be appropriate
* The updated code and name should be passed to integrations and external systems as applicable
* All the integrations should work as it is
* WIP cases to be checked for FinnOne submit, the new scheme should not stamp for WIP cases
* Valid for new cases
* FICO eligibility should be calculated as it is
* Cases should be able to submit to FinnOne

key: ML-13795
summary: Journey flow for PL Prime
description: Applicable for Bank and IFBL

Proposed

Creation of a new journey known as PL Prime, the journey to be exact replica of Existing Rural PL except for below changes

# A drop down option should be created in *scheme* field on front end , to allow user to choose PL Prime scheme. Once scheme is chosen, user should be allowed to create a new loan application
# Min and Max loan amount, Tenure options (12,18,24,30,36,42,48) to be fetched from [https://fincap.atlassian.net/browse/ML-13791|https://fincap.atlassian.net/browse/ML-13791|smart-link] 
#  ROI to be fetched from ROI Master,  Similar to ROI master built in [https://fincap.atlassian.net/browse/ML-12822|https://fincap.atlassian.net/browse/ML-12822|smart-link], we need to create a new master for PL Prime . the new master should be used from ML-12822. The inputs are attached for same

h2. 
acceptance: # To function as described
# Scorecard scheme to be stamped on back end properly
# All the APIs should work as it is in case of existing Rural PL
# User should be able to submit the case to FinnOne
# PL Enterprise and Existing Rural PL should function as it is
# ROI should flow as per ROI master
# Any other loan amount apart from mentioned in scheme master not to be allowed in PL Prime scheme
# FICO and FinnOne to accept and process information as per new scheme master
# Apart from changes mentioned in description, the PL Prime to function as existing Rural PL
# ROI should be stamped properly on back end and front end
# New scheme should be stamped at BCM view correctly
# User should be able to pull reports for analysis purpose basis the scorecard scheme
# Re-trigger scenarios to work similar to existing Rural PL

key: ML-13791
summary: Creation of PL Prime Scheme on SFDC
description: Applicable for Bank and IFBL workflow

Proposed : 

a, Two new schemes to be created as per details in attachment
acceptance: The schemes should be available on SFDC

key: ML-13728
summary: Form 60 Content changes
description: *Existing: Income as per cash flow gets updated in #22b of Form 60*

 

*Revised:*

# Income for #22b to be declared by the borrower 
# Same to be captured in a field in case PAN is not available
# Declared income (instead of inflow) to be populated in Form 60- ANNUAL and Loan Application (Total Income Field)
# Should be declared/captured for all app/co-app
# In case the declared income is greater than maintained value (INR2.5L currently), Acknowledgment Number to become mandatory
# In case of MEL Plus, same income as base loan will be used
acceptance: In system generated Form 60, if customer’s declared income (other than agricultural income) > 2.5 lacs, PAN acknowledgement number is mandatory.

key: ML-13617
summary: Addition of new field- Disbursed Date and Time
description: nan
acceptance: To function as per description

key: ML-13492
summary: System to check the ADB or Non ADB logic on click of Skip E-sign,Submit to FinnOne button
description: *Business Case:* SFDC to run the existing ADB/Non ADB check on click of Skip E-Sign,  Submit to FinnOne button

*Applicable BU:* MEL/PL ( All applicable flows)

*Description:*
*Current :* 

# Once Esign process is completed, user will be able to see button- Submit to FinnOne.
# SFDC checks if the loan application is ADB or Non ADB when the FinnOne request is generated post which checkbox field ADB Flag gets stamped on Loan Application.
# If loan application is ADB, field ADB flag will be checked on Loan application and Source Flag flows as Yes in FinnOne request.

*Proposed :*

# Existing checkpoint/flow to check if Loan Application is ADB/Non-ADB to be removed. 
# SFDC will check the existing criteria of whether the Loan Application is ADB or Non ADB on click of 
*Submit to FinnOne* /*Skip Esign Button*
# If Loan Application is ADB, Case will be submitted to finnOne and FinnOne request will be initiated.
# *If Loan Application is Non ADB-*
a. Field value for the field- *ADB Failure Reason* on loan application object on back end should get appended with all possible ADB Failure reasons separated by ";".
b. User will be shown a Document upload section below Esign section. (US- [https://fincap.atlassian.net/browse/ML-13489|https://fincap.atlassian.net/browse/ML-13489|smart-link] )
c. User will be shown a toast message-  "*Loan Application is Non ADB. Kindly upload mandatory documents.*" and FinnOne request will not be generated
acceptance: # To function as described,
# System is running existing checks of ADB/Non ADB. 
# WHEN Loan is *ADB*, then- ADB Flag on Loan Application is getting checked and when Loan is *Non ADB*, then- ADB Flag field on Loan Application remains unchecked.
# Apart from changes described, rest of the functionality of ADB/NON-ADB remains as it is
# WHEN Loan is *Non ADB*, then- toast message is visible as- “*Loan Application is Non ADB. Kindly upload mandatory documents.*“
# WHEN Loan is *Non ADB*, then user is able to see a document upload section below E-Sign section

key: ML-13489
summary: As IRO user, I should be able to see a section to upload mandatory documents for the Non ADB Loan Applications
description: *Business Case:* A new section to be created for user to upload documents, to be visible below E sign section

*Applicable BU:* All applicable MEL/PL flows

*New section to be Mobile Compatible*

*Description:*

# When the case is Non ADB as per [https://fincap.atlassian.net/browse/ML-13492|https://fincap.atlassian.net/browse/ML-13492|smart-link] , User should be able to see a section below Esign section. *This section should be similar to Document Upload screen. Reference screenshot below.* User will be shown list of document records one below other. User will be able to see below column headers. Document Type, Document Name, OSV, Uploaded Date, Is Uploaded, Upload.

!image-20220912-073803.png|width=56.18086696562033%!
 
# Documents to be shown in same sequence as per [https://fincap.atlassian.net/browse/ML-13486|https://fincap.atlassian.net/browse/ML-13486|smart-link] 
# *Document Mandatory Logic-*
The document should be mandatory for the user to upload on this section based on the Rule engine (US- [https://fincap.atlassian.net/browse/ML-13486|https://fincap.atlassian.net/browse/ML-13486|smart-link] ). User will be shown *asterisk* for the documents which are mandatory post running the RULE ENGINE.
# Document upload screen should be same as available in UI of document upload screen on document upload stage. It should be segregated for App and Co-app as per current build on document upload stage. Functioning on UI would be same for upload , Toast Message etc. There will be only two differences a.  Only mandatory documents to be shown in the new section b.  OSV header to be disabled and not shown on UI as this is not valid here.
# Once user uploads document, *DMS* API will get called at backend to upload the document in FileNet against respective Doc Type. Once document is uploaded in FileNet, Document DMS ID will get populated on respective Document Record in SFDC as received in DMS API response. Functionality of DMS API to be as current build.
# System to check if all mandatory documents as per the Rule Engine on click of  Skip E-sign, Submit to FinnOne as applicable on screen. If all mandatory documents are not uploaded, user will not be able to submit the loan to FinnOne. Reference toast message to be visible as “*Loan Application is Non ADB. Kindly upload mandatory documents*”.

7. DMS Document ID should be available for each of the *mandatory* document. If document is uploaded but DMS ID is not available on Document record, show validation- "*Kindly retry Document upload.*" 

8. Once all the validations are met, user will be able to submit the loan application to FinnOne{color:#ff991f}( Submit to FinnOne button will appear once skip E-sign is clicked , Proceed with E-sign/Skip E sign should not appear further){color} . If any of the validations is/are not met, user should not be allowed to submit the loan to FinnOne and toast msg should appear as *Loan Application is Non ADB. Kindly upload mandatory documents*
acceptance: # To function as described
# The DMS ID is getting stamped in backend for the uploaded document
# In document upload section-document type and name should be as per [https://fincap.atlassian.net/browse/ML-13486|https://fincap.atlassian.net/browse/ML-13486|smart-link]
# The documents uploaded should be available on Filenet should be as per [https://fincap.atlassian.net/browse/ML-13486|https://fincap.atlassian.net/browse/ML-13486|smart-link]
# The system generated documents as per existing functionality should be available on Filenet
# FinnOne submit should function as applicable for ADB/Non ADB when all the conditions are met 
# Given the BU is MEL, PL AND Loan Application is *Non ADB*, user is able to submit the loan to finnone only when applicable mandatory documents are uploaded as described
# WHEN Loan is *Non ADB*, then- SFDC is running the mandatory document logic to identify documents which should be mandatory
# Given BU is MEL/PL and the Loan is Non ADB, WHEN user has uploaded all mandatory documents and DMS ID is present for all Documents, then- user is able to submit the loan application to FinnOne/request generated at backend.
# All the mandatory documents should be visible in document upload screen as applicable for the loan application
# Functionality to be tested with Mobile 

key: ML-13486
summary: Rule Engine/Logic to be built in SFDC to make the listed documents mandatory
description: *Business Case:* A rule engine/logic to be built on SFDC to identify and make the listed documents mandatory in case of Non ADB Loan Applications

*Applicable BU:* All applicable MEL/PL flows

*Description:*

# SFDC to build a logic for the documents listed below to be mandatory. Based on the description below, these documents will become mandatory
# Refer below table for list of documents and the respective scenario when the document should be mandatory

|*Sr. No.*|*Document*|*Document Type*|*Document Name*|*Scenario*|
|1|Insurance Document|ESIGN DOCUMENT|For MEL/PL- Credit Protect Insurance Form_NON-ADB
For PL- Group Suraksha_NON-ADB ( when applicable)|If Insurance OTP Sign failed for Applicant/Co-Applicant/Both|
|2|Physical SI|SI DIRECT DEBIT MANDATE FORM|SI DIRECT DEBIT MANDATE FORM_NON-ADB|This document should get mandatory if user has opted for Physical SI for IDFC Bank Account provided for disbursement account in Latest Bank Details object record with Type= Main Bank.|
|3|NACH|NACH|NACH_NON-ADB|**Condition only to work for cases which are not open ECS only**
This document should get mandatory if user has opted for Physical Mandate/E mandate process for a Non-IDFC Bank Account provided for disbursement account in Type= Main Bank.|
|4|Esign Documents|ESIGN DOCUMENT|ESIGN DOCUMENT_NON-ADB|If Esign is not successful|
|5|Estamp Documents|ESTAMP DOCUMENT|ESTAMP DOCUMENT_NON-ADB|If Estamp Status not equal to Successful|

Reference FileNet Screenshot:

!image-20220912-070641.png|width=593,height=346!
acceptance: # To function as described
# Documents should become mandatory to be uploaded as per scenarios

key: ML-13483
summary: New field to be created for ADB Failure Reason stamping
description: Valid : MEL/PL ( All flows)

*Business Case:* A new field to be added on Loan Application obj to capture the ADB failure reasons for a loan application

*Description:*

# A new field to be created on Loan Application object-
Field Name- ADB Failure Reason
Field Type- Free text
# The field should have the ability to capture multiple string values.
# SFDC should be able to store multiple values in ";" separate format.
# Values stored in this value to be as per below table

|*Sr. No.*|*Conditions*|*ADB Failure Reason*-field value to be populated with below free text if corresponding conditions are met|
|1|If Estamp Status not equal to Successful/NotEligble|Estamp Failed|
|2|If Esign is not successful|Esign Failed|
|3|If  Insurance OTP Sign failed for Applicant|OTP Sign Failed for Applicant|
|4|If  Insurance OTP Sign failed for Co-Applicant|OTP Sign Failed for Co-Applicant|
|5|If Main bank has mandate type not equal to { Digital SI/Digital Mandate or  the case is Open ECS case}|Digital Mandate Failed|
|6|When KYC status not equal to >> KYC Not Required ( valid for App)|Stamp field value of  “*KYC Status” “*for Applicant “|
|7|When KYC status not equal to >>KYC Not Required ( valid for Coapp)|Stamp field value of  “*KYC Status” “*for Co-Applicant “|
|8|If Karza Match Percentage For IMPS < 65%|IMPS KARZA < 65%|
acceptance: # To function as described
# user is able to see the field ADB Failure Reason in backend on Loan Application object
# ADB failure reason to be stamped as applicable for the case
# WHEN Loan is *Non ADB*, then- the field “ADB Failure Reason” is getting stamped with all the applicable ADB failure reasons separated by ';'.
# ADB and NOn ADB flow to be tested
# In case of ADB success , there should be no reason stamping in the backend field 

key: ML-13461
summary: Worklist view
description: Note :  

* Valid for New offers uploaded on SFDC. Applicable BU : MEL/PL/HL/LAP
* Tele-caller view will be supported only on desktop. To be tested for PL/HL/LAP once their respective pre approved journeys are developed and available in QA/UAT for testing

# Once Tele-caller logins, only Home and associated offer tab to be shown, rest of the view to be same as current build
# In the Associated offer tab, under loan applications tab- a drop down to be visible for new worklist- “All Offers”  . If the tele-caller is mapped to X, Y, Z Business units and A,B.C Branches, all offers corresponding to X,Y ,Z business unit and A,B,C branches should be only available in “ All Offers” Worklist
# Offer should be visible to all the users mapped to tele-caller profile ( as per current logic of MEL+ IRO ) 
# As per current logic, offers should not be visible to IRO queue, logic to be removed and IRO will be able to view the offers as per [https://fincap.atlassian.net/browse/ML-14164|https://fincap.atlassian.net/browse/ML-14164|smart-link] 
# Tele-caller would be able to see the offers details by 2 ways as per current build:
## List View of Offers - from offers worklist
## On doing global search – Associated offers would be visible and on clicking a record - Offer details page would get opened
# Offers will be uploaded in SFDC. Customer can self start the journey In 2 ways:
## By clicking link from SMS - Covered in [https://fincap.atlassian.net/browse/ML-5386|https://fincap.atlassian.net/browse/ML-5386|smart-link] (current build)
## By clicking on Offer on My First Bharat App. ( current build)
## The SMS content to be sent to Customer should be updated as below which is a change from [https://fincap.atlassian.net/browse/ML-5386|https://fincap.atlassian.net/browse/ML-5386|smart-link].  

*MEL*

Dear valued customer, you are now eligible for a pre-approved Vyapaar Vriddhi loan from IDFC FIRST Bank. To apply, click on {#var#} or open MYFIRST-Bharat app

*PL*

Dear valued customer, you are now eligible for a pre-approved PL Plus loan from IDFC FIRST Bank. To apply, click on {#var#} or open MYFIRST-Bharat app.

*HL/LAP*

_“Dear {Customer Name}_
_As a valued customer, we are delighted to inform you that you are now eligible for a pre-approved Top Up Loan (HL |LAP) from IDFC FIRST Bank.  Apply now by clicking on {link}”_

7. If the customer has initiated the CJ journey by clicking the URL in the SMS, the corresponding associated offer should be removed from the tele-caller queue as per current build for MEL Plus

8.Cases which are uploaded Manually as offers would be visible in this work list. ( as per current build)

9. Offer expiry to work as per current functionality ; for PL+ should work as same as MEL+  , should work as built for HL/LAP pre approved journey. (RHLB-3664 ) . 

10. In the Home Tab, WIP  worklist to be visible,  the cases where tele-caller begins the journey by marking interested, those cases will be visible in WIP worklist

11.In the Home Tab, MEL +Customer Journey cases worklist to be visible, the cases where CJ customer drops off , those cases will be visible in MEL +Customer Journey Cases worklist ( Valid only for MEL/PL)

12. “Create new loan application” should not appear in Home tab for tele-caller login, tele-caller should not be able to view new loan application on login
acceptance: * To function as per description
* Offers to be visible only to Tele-callers queue, Branch IROs should not be able to view the new offers uploaded on SFDC
* WIP and MEL+ Customer journey queues worklist should function properly. Cases should be visibile to Telecaller as described. These cases should not be visible to IRO queue
* If the offer is expired, the offer should not be visible in IRO and telecaller queue
* Customer should get link in SMS so that he can perform journey initiation. If the user has initiated CJ , corresponding offer should not be visibile in telecaller queue.
* Bulk sms trigger logic to be checked
* Offers should be visible to all telecallers 
* Customer should get link in both the Mode of journey initiation
* Customer should be able to continue the journey from the stage where he has left the journey if the case is not dropped off
* Once the Customer clicks on the offer from _MYFIRST-Bharat app_, he will be directed to SFDC Community portal.
* “Create new loan application” should not appear in Home tab for tele-caller login, tele-caller should not be able to view new loan application on login
* Test Bank offers are visible to Tele-caller mapped to Bank workflow only, similarly for IFBL
* If workflow is updated for tele-caller to Bank and IFBL, all the offers ( Bank and IFBL) should be visible in Tele-caller profile

key: ML-13378
summary: Validation to be built on Insurance Screen
description: Valid for MEL/PL/HL/LAP- All flows

Applicability- Credit Protect and Group Suraksha for MEL/PL

Credit shield and Property insurance for HL/LAP 

*Current* : There is no logic to check if the appointee name and nominee name are same and SFDC allows same appointee and Nominee for a loan application

Also, the appointee can be less than 18 years old

*Proposed* : 

SFDC should  not allow Appointee name to be same as Nominee name and appointee should be more than 18 years old. 

First validation

* SFDC should compare Nominee Name and Appointee name once filled on UI by user , if they are same, an error should be shown on UI : “ Nominee and Appointee have same Names, Please update either Nominee or Appointee name to continue further”. Full name of Nominee and appointee not to be allowed to be same

Second Validation

* Appointee age should be more than 18 years , if the user proceeds with a case with appointee less than 18 years, error should appear on screen as “ Appointee can’t be less than 18 years old, Please check the Date of Birth of Appointee”

Case should not be allowed to proceed if the conditions are not met as mentioned above

These both validations should be built on Add Insurance button and Next button both

The validations should run on screen of stage-insurance, substage- insurance entry pending and stage-sanction, substage-insurance pending. These validations should be built on Add Insurance button and Next button both ( as applicable on stage/substage)

Existing UI validation (as attached) on Date of birth of Appointee if available should be removed
acceptance: * To function as per description for mentioned BUs
* Error should appear on UI as per description if the nominee and appointee are same names or if the appointee is less than 18 year old
* The validations should run for Applicant and co-applicant/s both as applicable
* In case of MEL Plus+ IRO/Plus + CJ/ Repeat , the validations should run as mentioned. Update appointee age to be less than 18 years for a disbursed base loan, check in Plus+IRO/CJ/Repeat case if the validations are running
* Existing functionality of mandatory appointee in case of minor nominee should work as it is
* Rest of the functionality of Insurance should work as it is 
* Retrigger scenario to be tested
* Case should be successfully submitted to FinnOne

key: ML-13355
summary: Karza Masking API not to be called out
description: Valid for : MEL/PL/HL/LAP/Gold ( All Products)

Current : EKYC Success cases - Karza Masking API gets called out after EKYC 

Proposed : EKYC Success cases - Karza Masking API should not get called out after EKYC
acceptance: * To function as per description
* Masked Aadhar which will be received in Biometric API callout should be uploaded on FileNet
* On document upload stage- in case of manual upload of  Aadhar document for EKYC case when document becomes mandatory due to change in POI,POA, KARZA MASKING API should be called as is functionality
* For other flows CKYC,SKYC, OCR and manual data entry flow- the functionality should work as it is
* To be tested for Applicant and Co-applicant

key: ML-13334
summary: Addition of fields for Bureau Summary
description: Please note the below changes to be done for Bureau summary in addition to the story PDU-407:

# *Add* button to be added in *Bureau Summary* (Applicant tab) at the Footer section without disturbing the PD Obligations which will work as is.
# *Delete* button can be enabled for the records which are added by the BCM/CCM but not for the already fetched Obligations from Loan Application. 
# This addition will be stored in the field *isPdObligation at pd app end.* SFDC team need not show it seperately (As discussed with Dhruvin and Parth parwal)
# Previously built edit functionality in Bureau section to work as it is.
# Existing Obligations section in the Finance tab to be hidden. 
# Applicant /co-applicant name to be auto populated for each case.
# “Closed date” field to be displayed only when the user is selecting “closed” in the account status dropdown. If user selects “active” in the account status, do not display the closed date field
acceptance: Users should not be able to view existing PD obligations in the Finance tab. Users can edit all the fields for Bureau summary ( After they click on Add button).

For edit Bureau, no change, certain fields to be editable.

key: ML-13143
summary: Addition of EMI due day tag in Emorphis API Request
description: Applicable : MEL/MEL Repeat/MEL+/MEL+CJ/Rural PL

*Current* : EMI due tag is not passed into Emorphis API request

*Proposed* :  A new tag has to be created in API request EMORPHIS_FILENET_UPLOAD which passes the repayment day from SFDC



Name of Tag : "emidueday" : "",

Placement of tag : Sample below

"bankDetails" : {
*“emidueday” : “5”*

"repaymentMode" : "NACH",
"IFSCCode" : "UTIB0000001",
"branchName" : "MAHAL",
"bankName" : "BANK OF MAHARASHTRA",
"accountType" : "Saving",
"accountNumber" : "123456041",
"accountHolderName" : "Kiran"
},



*Dependency :* MULE to add the tag and Emorphis to receive the tag
acceptance: The new tag should be available in the API request EMORPHIS_FILENET_UPLOAD

The API should run successfully as per existing functionality

The documents should be generated and visible on FileNet as per existing functionality

The existing functionality should not be impacted 

key: ML-13093
summary: Latest Document format for Insurance
description: Applicable

* Credit Protect - MEL, MEL+, MEL Repeat, PL, Customer Journey,
* Credit Shield : HL/LAP
* Group Suraksha - PL

*Current* : [https://fincap.atlassian.net/browse/ML-8518|https://fincap.atlassian.net/browse/ML-8518|smart-link] 

*Proposed* : The latest format (attached) to be visible for MEL/PL/HL/LAP

Rest functionality to work as [https://fincap.atlassian.net/browse/ML-8518|https://fincap.atlassian.net/browse/ML-8518|smart-link] 
acceptance: # Post Sanction on Insurance screen, while performing OTP signing Customer is able to view the auto-filled policy document as per the latest expected format.
# Both SMQ & COVID questionnaire are considered as a 1 document and OTP signing is performed on both the documents.
# This updated form should also be generated at Document generation stage for HL/LAP in english language

key: ML-13055
summary: Reject SMS to be sent to Customer for Gold
description: Valid for Gold

*Current* : No SMS is sent to the customer in Gold workflow

*Proposed* : Reject SMS needs to be extended to below stage/substage for Gold loans

The SMS should be sent as per below table . The SMS template is available below the table

|*Stage*|*Sub Stage*|
|Reject|Posidex Reject|
|Reject|Highmark Reject|
|Underwriting|Underwriting Reject|

SMS content

MEL/PL format- 

Dear Sir/Madam, Thank you for choosing IDFC FIRST Bank. Your loan application <<XXXXXXXX>> cannot be processed due to internal policy. Regards, IDFC FIRST Bank
acceptance: * SMS to be triggered from SFDC to Applicant/Co-applicant/s as applicable to the Gold workflow
* SMS triggered to Applicant/coapplicant/s mobile numbers should be as per Reject SMS template.
* SMS should be sent again in case of re-trigger reject scenarios as applicable to the Gold workflow
* SMS should be sent to applicant/coapplicant/s in the all the stage/substage as mentioned in the table

key: ML-13032
summary: Loan application behavior as per the Questionnaire answered- Part 1 for HL/LAP
description: Applicable only for HL/LAP

*Current* : Refer [https://fincap.atlassian.net/browse/ML-8457|https://fincap.atlassian.net/browse/ML-8457|smart-link]

*Change expected in* [https://fincap.atlassian.net/browse/ML-8457|https://fincap.atlassian.net/browse/ML-8457|smart-link]

*If user adds Credit Shield  insurance and ‘Yes’ is selected for any of the questions,* then a pop-up message should appear on front end as - 

# For applicant - 
## “All responses should be ‘No’ to avail <Credit Shield>_(as applicable should be printed here)_ Insurance. Do you want to remove this insurance for Applicant?” with ‘Yes’ (Remove) & ‘No’ (do not remove) buttons.

Apart from this no change in [https://fincap.atlassian.net/browse/ML-8457|https://fincap.atlassian.net/browse/ML-8457|smart-link]  for HL/LAP

h3. *When IRO selects ‘Yes’ option on warning pop-up,  Applicant and co-app in case of HL/LAP:*

Functionality should work as per [https://fincap.atlassian.net/browse/ML-8505|https://fincap.atlassian.net/browse/ML-8505|smart-link] description

If user proceeds with ‘Yes’ (Remove) then, insurance should be removed and case can be processed further.

# Insurance Card of this Applicant and Co-applicant should be deleted and user will land on Insurance screen.
# User can continue further process
# Above is applicable for all the Applicant and Co-applicant(s) who opts for Credit Shield  insurance
acceptance: * To function as per Acceptance criteria for [https://fincap.atlassian.net/browse/ML-8457|https://fincap.atlassian.net/browse/ML-8457|smart-link]   except for changes mentioned in Description above
* For HL/LAP functionality should work as per [https://fincap.atlassian.net/browse/ML-8505|https://fincap.atlassian.net/browse/ML-8505|smart-link] mentioned in description

key: ML-13017
summary: Handling the Composite APIs in Rural Org
description: *User Story:*

Handling the Composite APIs in Rural Org

*Use Case:*

# Handling the Composite APIs in Rural Org.
# Applicable for all Business Units - Rural HL, Rural LAP, Rural MEL, Rural PL, Rural Gold Loan
# Applicable for all composite APIs.

*Details:* 

# Currently, the composite APIs created from Org 3 BUs, are being stored in both “contentdocument” and “attachment” object of service call. 
# This will lead to content size limit issue in future.
# To handle this, SFDC Org3 needs to store the API attachment in “attachement” object only.
# The same should not stored in “contentdocument” object.
# This change will be applicable for new Loans created after deployment of this CR. Existing loans where these services are already initiated, it will be handled through IT activities.



*Applicable APIs:*

# KARZA_AADHAR_MASKING_ATTACH - Request is stored in Attachment and Files
# DMS Request API - Request is stored in Attachment and Files both.
# CBS_SigandPhoto - Request is stored in Attachment and Files both.
# KARZA_OCR_KYC - Request is stored in Attachment and Files both.
# EMAIL_COMMUNICATION - Request is stored in Attachment and Files both.
acceptance: # Checking the storage limit in backend
# above mentioned Composite API created/ initiated from Org3 to be stored in “attachment” object instead of “contentdocument” object. 
# Below API should be stored in Attachment

# MatchDetails - Response is stored in Attachment.
# CKYC_SEARCHV2_ATTACH - Response is stored in Attachment
# KARZA_AADHAR_MASKING_ATTACH - Request is stored in Attachment and Files
# EKYC Biometric - Response is stored in Attachment.
# DMS Request API - Request is stored in Attachment and Files both.
# CBS_SigandPhoto - Request is stored in Attachment and Files both.
# CKYC_DOWNLOAD - Response is stored in Attachment not in files.
# KARZA_OCR_KYC - Request is stored in Attachment and Files both.
# EMAIL_COMMUNICATION - Request is stored in Attachment and Files both.
# PDApp_CaseList_Dashboard - Response is stored in Attachment

key: ML-12975
summary: Displaying income values in PD income section
description: Currently we are displaying only Agriculture income and dairy income on “PD income Details” section on SFDC. 

We need to add below incomes as well:

# PD Business income
# PD other income
# PD household income
# PD Rental income

Above mentioned incomes are displayed in the PD finance income heads section. They will continue to display there and also on PD income section details

Please note: PD business expense to be removed from the pd income details section.
acceptance: There is no change on the UI of PD app. Below 5 income fields to be displayed in the PD income section details. They need not be added in the drop down of “source of income”. Source of income drop down will continue to have only two values: Agriculture income and Dairy income.

# PD Business income
# PD other income
# PD household income
# PD Rental income

key: ML-12967
summary: Error displayed in amount fields
description: On clicking "Add" an error is occurring stating "Please enter value for required fields in assets section".

Error occurs whenever any field is edited. 
acceptance: Not able to input data more than once for any field. Error displayed as "Please enter value for required fields in assets section".

key: ML-12965
summary: Validations re triggering issue
description: *Case 1: Without Clicking on "Previous" bottom*
When the user is editing the Questionnaire input fields without clicking on previous button then the FICO call is not initiated and hence the validations are not getting updated.

*Case 2:* *On Clicking "Previous" button*
First the Previous button is clicked and then the Questionnaire fields are edited. On clicking the Next button the FICO call is initiated and the validations are getting updated.
acceptance: Validation re triggering to be checked thoroughly  

key: ML-12958
summary: Revision to Loan application form for MEL/PL 
description: Applicable for MEL/MEL+/MEL repeat/ MEL+CJ/ PL/ PL Enterprise

Current : Check  ‘Most Important Terms and Charges' and ‘Repayment Account Details'  in Attached Application form

Proposed :  

‘Most Important Terms and Charges' 

# Cheque Bounce Charges (INR) to be revised from Rs 250 to “Rs. 400 + GST as applicable’.
# Cheque/ECS Swap Charges (INR) to be revised from Rs. 500 to ‘Rs. 500 + GST as applicable’.
# Foreclosure Charges (Wherever applicable) to be revised from 4% of principal outstanding to ‘4% of Principal Outstanding + GST as applicable'.

‘Repayment Account Details'

# In ‘Repayment Account Details' section - Additional field to be stamped below ' MICR code’
# The name of this field to be ‘EMI Due Day’ 
# The repayment day of the loan application should be stamped next to ‘EMI Due Day’ - only day number eg. “5”

* Font style to be remain same for change related to  'Most Important Terms and Charges' 
* Font style to be same as MICR code field on Application form for change on  ‘Repayment Account Details
acceptance: # In New and WIP cases application form to be generated and stored on FileNet as described
# Application form should reflect changes as per description
# The content and formatting to match as described
# The location of the new field should be as per description
# Existing functionality of Application form to work as it is

key: ML-12956
summary: Drop down to copy residence/Permanent address as office address to be disabled
description: Applicable for all BU where employment type of applicant/co-applicant can be salaried

Current : User gets option to copy residence address or permanent address as office address in a form of drop down option ( refer attachment)

Proposed : 

* Copy address From Drop down button to be disabled and not shown when the employment type is salaried for applicant/ co-applicant
* User has to manually enter Office address in case of salaried employment type for applicant/co-applicant type
acceptance: # Applicable for all BU where employment type of applicant/co-applicant/s is salaried
# Functionality to work as per description for new and WIP cases (if the case is re-triggered back to data entry stage)
# Functionality should work in case of re-trigger scenarios
# All BU-If the employment type is changed by co-applicant to any drop down value other than Salaried on employment detail entry stage, the copy address drop down button should be available again
# The logic should work for both applicant and co-applicant (all co-applicants if applicable more than one ) in the case
# Office address to be stamped on front end and back end properly and functionality should work as it is apart from change described in the story
# User should be able to submit the case to FinnOne

key: ML-12931
summary: Changes on Sanction Letter
description: Below are *additions* to the Sanction letter

 a) EMI Due Date: 3^rd^ or 5^th^  (depending on value in SFDC request).

 b) Repayment Frequency – Monthly (static)

 c) Moratorium- No (static text)

 d) Moratorium repayment due date – ‘not applicable’ (static tex

  f) “Lock-in period” : 180 days

 

Below are the *changes* to the existing fields on the Sanction letter

a) Cheque bounce Charges - Rs 400 + GST as applicable”.

b) Cheque/ECS Swap Charges - (INR) 500/- + GST as applicable”.

c) Foreclosure Charges *(Wherever applicable)-* 4% of Principal Outstanding + GST as applicable”.
acceptance: New changes to be displayed on SL

key: ML-12914
summary: DMS Callout validation to be built
description: Valid for : MEL/PL/HL/LAP/Gold ( All Products)

*Current* : Without DMS id being called for POI, POA and CKYC photo , cases can move ahead from document upload screen

*Proposed* :  

# SFDC to check if DMS id is called for all mandatory documents/POI-POA-CKYC Photo-Aadhar PDF non mandatory on document upload screen . If not then validation to be given on click of next or submit button "Documents not submitted to FileNet. Kindly retry".
# Retry button to be given If DMS is in New State or DMS API record is not created
## KYC Success type = EKYC/CKYC - POI or POA not mandatory - POI or POA and CKYC Photo document has to be reuploaded form Biometric response or CKYC download response
## Digital Case - Documents uploaded on SFDC has to be resent to FileNet
# If DMS is in Progress the Error message should be visible on UI and same will be raised to Mule/ FileNet team and the case should not move ahead

Need to work in case of EKYC, CKYC,SKYC, OCR and mandatory data entry flow
acceptance: # Need to function as per description

key: ML-12910
summary: Same as applicant functionality 
description: For the same as applicant functionality implemented for [https://fincap.atlassian.net/browse/PDU-400|https://fincap.atlassian.net/browse/PDU-400|smart-link], we need to pick up the details from the latest case closed by the applicant.
acceptance: Last closed case to be picked up for filling details in co applicant questionnaire

key: ML-12878
summary: Customer Journey- Update in Display msg
description: Applicable for CJ

Current : [https://fincap.atlassian.net/browse/ML-6104|https://fincap.atlassian.net/browse/ML-6104|smart-link] 

Proposed: Message displayed to the user to be updated based on following criteria

# OTP successfully submitted on document generation page and case is submitted to FinnOne succesfully - “Your application has been submitted. You will receive your funds shortly. For any queries, please reach out to your relationship officer”
# OTP successfully submitted on document generation page and FinnOne submit failed  - “Please check with the branch team regarding your application’’
# When the Stage/substage changes to- Disbursed/Disbursed after otp successful validation and finnone submit succesful and 24 hours is  not completed -’’Congratulations, your application has been successfully disbursed’’
acceptance: # Functionality to work as per description

key: ML-12858
summary: Open ECS logic change
description: *Valid for : MEL, MEL+, MEL Repeat, Cust. Journey, HL, LAP and PL- Both Bank and IFBL Flow*

Validation to be revised for [https://fincap.atlassian.net/browse/ML-9486|https://fincap.atlassian.net/browse/ML-9486|smart-link] 

As per [https://fincap.atlassian.net/browse/ML-9486|https://fincap.atlassian.net/browse/ML-9486|smart-link] 

# If the DueDay value matches value as stamped in the Due Day master for that Product and Workflow, the case will be eligible for OPen ECS and User can move ahead with OPen ECS
# If the DueDay value does not match the value as stamped in the Due Day master, then OPen ECs will not be eligible and user will go ahead with Fresh ECS

* The options in the Open ECS Mandate drop-down are to be populated only when these criteria are fullfilled for an ECS:-
*# Value in tag “DueDay” received in the OPENECS API response is to be compared with the value stamped in Acceptable Due Days in the Due day master for that Product and Workflow.
*# Other current running validation’s/criteria’s should remain as is of ECS balance & tenure

*Revised*

# Due day value received in the Open ECS API to be compared with Due day applicable for NACH i.e. (3,5) from due day master, 

       a. if the due day received in API is matched , then the case will be eligible for Open ECS and Open ECS will be successful

       b. If the due Day value does not match , then case will not be eligible for open ecs and user will go ahead with Fresh ECS

* The options in the Open ECS Mandate drop-down are to be populated only when these criteria are fullfilled for an ECS:-

       a.   Due day value received in the Open ECS API matches with Due day applicable for NACH i.e. (3,5) from due day master,

        b.  Other current running validation’s/criteria’s should remain as is of ECS balance & tenure

.
acceptance: Function should work with changes mentioned in description : Pls check the AC in ML-9486

# Any other due day apart from 3, 5 should not be allowed for Open ECS
# Should work in  retrigger scenario and WIP cases for applicable BUs

key: ML-12822
summary: Rural PL-Configuration of ROI based on Salary type and Loan Amount
description: _Applicable for Rural PL- Bank and IFBL workflow_

*Current* : 

ROI for Rural PL journey is fetched basis the loan amount, there is no dependency on the salary type of the customer

The ROI for Rural PL is based on [https://fincap.atlassian.net/browse/ML-12603|https://fincap.atlassian.net/browse/ML-12603|smart-link] , it should be updated as per attached ROI grid to include the factor of “Salary Type”. The ROI is hard coded for Cash salary type at 24% 

*Proposed* : 

* ROI to be fetched basis the Salary type and loan amount as per ROI grid, the ROI should depend on the salary type selected on front end under income details section on the applicant data entry stage along with the loan amount . 
* The necessary changes to be done at custom meta data to include salary type as a factor for ROI determination
* The code level logic for Cash salary to be removed and the determination of ROI for CASH salary type will be based on the ROI grid as attached
* The Revised ROI should be stamped on front end and back end of SFDC
* The revised ROI should be passed onto external system via integrations wherever applicable as per the current journey flow
* ROI values and loan amount should be configurable on custom meta data level, SFDC should be able to update values of ROI and loan amount based on salary type whenever desired from Product team in future
acceptance: # ROI should be based on the salary type and loan amount as per the grid
# ROI should stamp properly on front end and back end for Rural PL- Bank and IFBL workflow as per description 
# At custom meta data level, the salary type factor should be available wrt different loan amount for both Bank and IFBL workflow
# The revised ROI should be passed onto external system via integrations wherever applicable as per the current journey flow
# The user should be able to submit the case to FinnOne
# The case should be properly disbursed
# If the loan amount is changed by BCM, the correct ROI should reflect based on loan amount and salary type
# When the case is retriggered, the ROI values should be flowing properly as per loan amount and salary type

9. Unnati workflow should work as it is

key: ML-12819
summary: MEL ROI Logic changes
description: *Business Case:* For MEL, the ROI stamping on the Loan Asset is not happening as per the Policy grid, i.e. the configuration settings> Metadata scheme grid in some of the MEL loan Applications.



It is required to analyze the places where this ROI is currently getting calculated. This calculation is happening at JS level (UI level) in current implementation.



So to simplify this process, the approach would be to redesign the ROI calculation and stamping using one common Apex from the 

# Applicant Entry Next stage, and 
#  If BCM changes Loan amount or scheme, where RoI is supposed to be re-calculated.
# If IRO changes the loan amount or scheme,  RoI is supposed to be re-calculated.





*Technical Considerations:*

The logic for ROI stamping should happen as per the policy grid.

this logic is in place but is at js level and too complex to debug and fix.

This needs to be simplified using apex controller , for setting the ROI and stamping at backend and UI.

Also would need to analyze and understand if by any other means ROI could be updated in a loan.

*Description:*
acceptance: # ROI value should be same as per the scheme ROI maintained in Custom Metadata
# Once user lands on Applicant details screen and captures Requested loan amount, then on click of Next button, the ROI should get stamped on Loan Asset as per the Custom Metadata (custom metadata to be referred- configuration settings)
# On Change of Loan Amount or Scheme by IRO on Loan Details screen, the RoI should get restamped on the Loan Asset as per the Custom Metadata (custom metadata to be referred- configuration settings)
# On Change of Loan Amount or Scheme by BCM on Underwriting, the RoI should get restamped on the Loan Asset as per the Custom Metadata (custom metadata to be referred- configuration settings)
# The same ROI entered on front end and stamped on Loan asset ROI field is stamped on Loan Asset is flowing in FinnOne submit request.
# Scenario on ROI population on Loan Asset to be tested for-
## Bank workflow
## IFBL workflow

key: ML-12785
summary: ROI changes for MEL Plus journey
description: For MEL Plus Bank & IFBL scheme, the below *Revised ROI*  is to be configured

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default","localId":"44d3e164-9433-45f2-bd70-191d289cf850"},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Scheme"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Workflow - Scheme ID"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Min. LA"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Max. LA"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Old ROI"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Revised ROI"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"rowspan":6},"content":[{"type":"paragraph","content":[{"type":"text","text":"MEL Plus "}]}]},{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank- 58695"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"50,001"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"1,00,000"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"26%"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"27%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"1,00,001"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"2,00,000"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"24%"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"25%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"2,00,001"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"3,00,000"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"23%"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"23%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"rowspan":3},"content":[{"type":"paragraph","content":[{"type":"text","text":"IFBL - 58696"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"50,001"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"1,00,000"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"27%"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"28%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"1,00,001"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"2,00,000"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"25%"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"26%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"2,00,001"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"3,00,000"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"24%"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"24%"}]}]}]}]}
{adf}
acceptance: Updated ROI should be populated on front end and back end as per description in Bank and IFBL Workflow

The Revised ROI should be flown to integrations

The user should be able to submit the loan to FinnOne

The loan should be properly disbursed 

Should be tested for CJ Journey also

key: ML-12762
summary: Collateral visit
description: Collateral visit to be created as per sheet
acceptance: Collateral visit to be added. Questionnaire attached

key: ML-12760
summary: Office CPV
description: +*Pre Requisite:*+

# Office CPV should be initiated post data verification
# Case Should be initiated in PD App with API - [https://fincap.atlassian.net/browse/ML-2854|https://fincap.atlassian.net/browse/ML-2854|smart-link]
# Case should be completed with API - 2 - [https://fincap.atlassian.net/browse/ML-4621|https://fincap.atlassian.net/browse/ML-4621|smart-link]

Applicable for HL and LAP
acceptance: Questionnaire to be replicated from MEL and PL for Office CPV- salaried and self employed

key: ML-12758
summary: Residence CPV
description: +*Pre Requisite:*+

# Resi CPV should be initiated post data verification
# Case Should be initiated in PD App with API - [https://fincap.atlassian.net/browse/ML-2854|https://fincap.atlassian.net/browse/ML-2854|smart-link] 
# Case should be completed with API - 2 - [https://fincap.atlassian.net/browse/ML-4621|https://fincap.atlassian.net/browse/ML-4621|smart-link] 

Applicable for HL and LAP
acceptance: Questionnaire to be replicated from MEL and PL for residence CPV

# Resi CPV should be initiated and completed in PD App
# New fields should be visible in UW screen and data should be autopopulated that is filled in PD App.

key: ML-12690
summary: Changes and Income Validation to be built for system generated Form 60 
description: 

*Existing: Income as per cash flow gets updated in #22b of Form 60*

 

*Revised:*

# Income for #22b to be declared by the borrower
# Same to be captured in a field in case PAN is not available
# Declared income (instead of inflow) to be populated in Form 60- ANNUAL
# Should be declared/captured for all app/co-app
# In case the declared income is greater than maintained value (INR2.5L currently), Acknowledgment Number to become mandatory
# In case of MEL Plus, same income as base loan will be used
acceptance: In system generated Form 60, if customer’s declared income (other than agricultural income) > 2.5 lacs, PAN acknowledgement number is mandatory.

key: ML-12664
summary: Field level changes on UI- PART 2
description: In continuation of [https://fincap.atlassian.net/browse/ML-11245|https://fincap.atlassian.net/browse/ML-11245|smart-link] 



Note*:* Applicable only for Bank and not for IFBL.

PF : Processing Fee

*Current* : We don’t have PL Enterprise scheme,

*Proposed* : To offer preferential rates of ROI and PF to existing liability customers , we need to create a new loan journey for PL Enterprise scheme. This new loan journey will be replica of Existing Rural PL scheme with respect to Front and back end apart for points covered below and in [https://fincap.atlassian.net/browse/ML-11245|https://fincap.atlassian.net/browse/ML-11245|smart-link] 

The new loan journey will have same fields on front end and back end in comparison to existing Rural PL except for below changes

* ROI and PF values to be fetched from enterprise master created in [https://fincap.atlassian.net/browse/ML-11243|https://fincap.atlassian.net/browse/ML-11243|smart-link] basis the selection of name of corporate on front end and back end after creating the loan
* At applicant level, stamp the salary type field as Salary slip and should be in non-editable.
* In employment details section, *current employer name* (field from existing rural PL) should be hidden and *name of corporate* field should be automatically stamped to corporate name selected by user while initiating the loan journey. Name of Corporate should be in editable mode with same option of drop down.
*  List of all name of corporates as per Enterprise master built in [https://fincap.atlassian.net/browse/ML-11243|https://fincap.atlassian.net/browse/ML-11243|smart-link]  should be available in this new drop down
* As the list is long, user should be able to type and search corporate name from the drop down
* ROI and PF values to be changed and updated on front end and back end as per the change
* At applicant level, On document upload page, Income Assessment/ Income Proof - Only Salary slip option should be stamped
* At co-applicant level, it should be similar as existing Rural PL scheme for salary type and income assessment/Income proof field

* New scheme and Name of corporate should be stamped at BCM view correctly. Current employer name field should not be shown for BCM view as it is not applicable here
* Stamping of ROI and PF on front end and back end on entire loan journey to be as per Enterprise master
* User should be able to re-trigger the case as it is in Existing PL - the correct values of ROI and PF to flow in such cases.
* User should be able to pull reports for analysis purpose basis the name of corporate , corporate code, scorecard scheme 
acceptance: # The PL enterprise journey should work as mentioned in description
# All the APIs should work as it is in case of existing Rural PL
# ROI and PF should be stamped on Front and back end as per Enterprise master
# BCM should be able to view new scheme and name of corporate at UW and data verification
# FICO and FinnOne to accept and process information as per new scheme master
# User should be able to submit the case to FinnOne
# Applicable values of ROI and PF to flow in integrations as it does in Current Rural PL
# Retrigger scenarios to be tested. 

key: ML-12628
summary: POS amount to be reflected in sanction letter for CJ
description: Applicable for CJ

*Current Flow*

In case of MEL+CJ, in the sanction letter, there is a field with name ***Tentative Foreclosure amount of Existing loan* which is not reflecting actual Principal Outstanding loan amount of Customer. 

*Proposed flow*

# As per Audit team, this field in Sanction letter with name ***Tentative Foreclosure amount of Existing loan* should reflect Principal Outstanding loan amount if applicable for customer.  There is an existing field of POS under loan asset object on SFDC. 
# The above field in the sanction letter should be filled with POS which is existing field stamped at Back end.
# Principal Outstanding is received from FinnOne in the response of LMSVIEWBYLOAN API. The value received in this tag "PRINCIPAL_OUTSTANDING" and same is stamped already on POS under loan asset object on SFDC.
# If LMSVIEWBYLOAN API is not called out and is customer dropped off field gets true, POS will be 0.
# If LMSVIEWBYLOAN API is called out and is customer dropped off field is true or false, POS stamping happens as mentioned in Point 3
# SVC name : EMORPHIS_FILENET_UPLOAD involved to generate the sanction letter should have Foreclosure amount tag value as POS which is stamped on back end .SFDC should pass POS value in below tag to EMORPHIS

      Tag value : "foreclosureAmount"
acceptance: # POS value should reflect in Sanction letter as per description
# If the customer is dropped off before LMSVIEWBYLOAN API is called, 
## If Case is under Mel repeat Scheme then Foreclosure amount field will flow as Flowing currently
## If Case is MEL+ Case then appropriate POS value will flow
# If the customer is dropped off after LMSVIEWBYLOAN API is called, POS should flow appropriately as stamped
# SVC name EMORPHIS_FILENET_UPLOAD should have POS value in tag "foreclosureAmount"

key: ML-12609
summary: Delta deployment for PD app components
description: nan
acceptance: Delta deployment for PD app components

key: ML-12607
summary: Delta deployment for common components
description: nan
acceptance: Deployment for common components of PD app and sfdc

key: ML-12603
summary: 1% ROI increase for RPL 
description: ROI configuration for Rural PL - Bank & Rural PL - IFBL schemes to be revised as per below grid. 



26%: for Loan amount up to Rs. 49,999

23% for loan amount =>50,000 To 99,999

21% for loan amount =>Rs. 1,00,000 To 2,99,999

19% for loan amount =>Rs. 3 Lacs

-For “Cash Salary” ROI to be 25% p.a. for loans between =>50000 to 75000- - Not to be taken up in this story and it will be taken up in future development- Confirmed by [~accountid:60a75ab82009f10068dc8e18] 
acceptance: Updated ROI to be populated for RPL schemes basis loan amount. 

key: ML-12471
summary: Scheme Master_ROI increase by 1 percent
description: Need to increase interest rates by 1% for each scheme as given in the attached file.
acceptance: # Interest rates should be updated as per grid attached.
# User should be able to submit the loan with new rate to Finnone

key: ML-12224
summary: Front End Display of EUC Worklist
description: *Current*: Currently, IRO can’t search cases basis the Loan Application on the EUC worklist and can’t sort out the cases basis the applicant name and Disbursed date. There is no information about the status of EUC completion in the EUC worklist

*Proposed*: 

* IRO should be able to locate EUC Verification case using global search through loan application number. The case should appear under verification in the search results. User should be allowed to go directly to the case number using this path
* IRO should have the option to sort list of cases in EUC worklist for every column  in the ascending and descending order similar to the option we have for Loan applications under Work in Progress
* A new drop down “ Disbursed date” to filter the EUC cases wrt disbursed date should be added on EUC worklist page , user should be able to view the EUC cases in ascending and descending order wrt disbursed date
* “EUC Met” and “URC Updated” columns to be added in the EUC Worklist between Product and Date/Time Opened Column headings. Both columns would have two types of values for every case of EUC Verification : Tick or No tick for any case. Tick and No Tick will be updated as per below logic

       For a new EUC Verification case , the value in EUC met and URC updated should be No Tick by default.

       For a closed EUC Verification case, the value in EUC met and URC updated should be updated to tick  as per below grid

|Loan Purpose Met|EUC Met|
|Yes|Tick|
|No|No tick|
| | |
|Eligible for URC|URC Uploaded|
|No|No Tick|
|Yes|Tick|
acceptance: * EUC Worklist should appear as per description
* IRO should be able to type and search the case basis Loan Application in the global search and would be able to move to the case directly as mentioned in description
* IRO should be able to sort out the cases in ascending and descending order basis the column heading in the EUC worklist
* EUC Met and URC Updated should be stamped properly 

key: ML-12104
summary: Timer to be increased for Autosave functionality- CPV
description: Increase the timer to 3min for Autosave functionality implemented in jira: ML-11377
acceptance: Timer to be increased from 30 sec to 3min for Rural CPV

key: ML-11921
summary: Change of fields for OCPV- SE
description: PD App to use below API fields for both Office CPV.

Relation_with_the_Applicant__c, Negative_CPV_Reason__c
acceptance: Currently we have separate fields for Office CPV Self Employed they are - *Relation_with_the_Applicant_SE__c, Decline_Reason_SE__c.* 



Same values to be shown for salaried and self employed as mentioned below:

Relation with the Applicant:

Applicant Self
Employee
Parent
Sibling
Wife
Child
Relative
Colleague
Others
Owner/Employer
Receptionist
Supervisor

Decline Reason:



|Bad Behavior
Business does not belong to customer
Customer not Interested
Door lock
Family Dispute
Negative -neighbour/Reference check
Poor stock/Activity
Third Party Funding – End Usage
Wrong Info. Provided in application
Any other reason
Negative – Neighbour/Reference check
Negative – Supervisor/Owner feedback
No Information/Entry Not allowed
Not Working/Left Job
Wrong employment info given in application|

key: ML-11901
summary: Change in Due dates master for NACH and SI 
description: *To be applicable for MEL,MEL+, MEL Repeat, MEL+CJ, HL,LAP,PL*

*Repayment dates for NACH and SI to be changed -*

Repayment dates for NACH and SI are to be changed as per the following table:

| |New Repayment date|
|MEL PL BANK|3,5|
|HL LAP BANK|3,5|
|MEL PL IFBL|3,5|
|HL LAP IFBL|3,5|
acceptance: AC1: Repayment dates for NACH and SI to be changed as per the mentioned table.

AC2: In case of fresh ECS, repayment date as 3rd and 5th to be visible only,

AC3: To applicable for MEL,MEL+, MEL Repeat, MEL+CJ,HL/LAP,PL

AC4:  Functionality to  work for HL retrigger scenario and WIP cases

key: ML-11899
summary: Reject SMS to be sent to Customer for MEL/PL/HL/LAP
description: Valid for all applicable products of RMEL/RPL/RHL/RLAP

*Current:* 

For MEL/PL, Reject SMS is triggered  in below stage/substage

|*Stage*|*Substage*|
|Reject|Rejected|
|Underwriting|Underwriting Reject|

For HL/LAP, Reject SMS is triggered only  in below stage/substage

|*Stage*|*Substage*|
|Reject|Rejected|

*Proposed*: 

* *MEL/PL*

Reject SMS needs to be extended to below stage/substage for MEL/PL applicable products

The SMS should be sent as per below table . The SMS template is available below the table

|*Stage*|*Sub Stage*|
|Reject|Posidex Reject|
|Reject|Toxic Rule rejection|
|Reject|Posidex refer rejection|
|Reject|Scorecard Reject|



SMS Template- The SMS Template should be configurable-It should be allowed to update whenever required from product team

|Dear Sir/Madam, Thank you for choosing IDFC FIRST Bank. Your loan application <<XXXXXXXX>> cannot be processed due to internal policy. Regards, IDFC FIRST Bank|

* *HL/LAP*

Reject SMS needs to be extended to below stage/substage for HL/LAP

|*Stage*|*Sub-stage*|
|Underwriting|Underwriting Reject|
|Reject|Posidex Reject|
|Reject|RCU Reject|

SMS Template- The SMS Template should be configurable- It should be allowed to update whenever required from product team

Dear Sir/Madam,

Thank you for choosing IDFC FIRST Bank. We have evaluated your << Home Loan/ Loan Against Property >> LAN <<xxxx>> in line with the bank's internal policy and regret to inform that we are unable to extend a credit facility at this moment.

IDFC FIRST Bank

* The reject sms should be sent to all applicable products of RMEL/RPL/RHL/RLAP based on stage/substage applicable for that product
* If the particular stage/substage is not applicable for any product- logic will not work
* SMS to be triggered from SFDC to Applicant and Co-applicant mobile numbers as applicable
acceptance: * SMS to be triggered from SFDC to Applicant/Co-applicant/s
* SMS triggered to Applicant/coapplicant/s mobile numbers should be as per Reject SMS template.
* SMS should be sent again in case of re-trigger reject scenarios
* SMS should be sent to applicant/coapplicant/s in the all the stage/substage as mentioned in the table
* The current scenario should work as usual
* Scenario-underwriting stage/substage- reject/rejected to be tested (soft rejection) , the reject SMS should be sent to customers  ( existing functionality), and when the case is moved ahead by BCM and reaches sanction stage,  the sanction msg should go to the customer ( existing functionality)

key: ML-11882
summary: Behavior of 'Retrigger' and 'Cancel' buttons 
description: *Behavior of ‘Retrigger Bureau' button* -

If IRO clicks on ‘Retrigger Bureau’ button then expectations are -

# Case should go back to Highmark generation.
# FICO eligibility to be recalculated.
# Case should go to underwriter stage basis updated bureau.
# Documents to be regenerated if changes to loan amount, tenure, required.
# For newly regenerated documents, OTP, E-sign, E-stamp to be regenerated.

*Behavior of ‘Cancel’ button* - 

If IRO clicks on ‘Cancel’ button then expectation are -

# The message will appear on the screen - ‘Do you really want to cancel this case?’ with options - ‘Yes’ and ‘No’.
# If IRO clicks ‘Yes’ - the case would get cancelled and the cancellation reason would be reflected as ‘Sales Cancel’
# If IRO clicks ‘No’ - the case will get back to ‘Retrigger Bureau’ / ‘Cancel’ button.
acceptance: User should be prompted with ‘Retrigger Bureau' and ‘Cancel’ button when the case crossed  .

No case should be processed where the ‘Highmark Generated' date crosses > 29 days.

key: ML-11880
summary: User prompt before 'Submit to Finnone'
description: Highmark generation date should be stamped and passed to FinnOne. 

If ‘current date’ - ‘highmark generation date’ > 29 days, then user should be prompted to retrigger bureau at any stage / sub-stage before submit to FinnOne.

Ex. - If the Highmark is generated in SFDC for one logged in case as on 7th Apr’22 and if the same case remains idle before ‘Submit to FinnOne’ stage till 30 days i.e. 7th May’22 then from 31st day onwards, user should receive an error prompt on or before ‘Submit to FinnOne’ stage.

Error message - ‘*Bureau report generated >29 days ago. Please generate fresh bureau and proceed*’.

Then two buttons should be visible to user - 'Retrigger' and 'Cancel'
acceptance: User prompt when cases ‘Current date - Highmark generated date’ > 29 days.

key: ML-11874
summary: Content additions to Loan application form for MEL/PL 
description: Applicable for MEL/MEL+/MEL repeat/ MEL+CJ/ PL/ PL Enterprise

Current : Check declaration in Attached Application form

Proposed : 

# Need to add Clause mentioned in attached format (Addition to Declaration in Application form) to be added in the declaration section in Loan Application Form
# The clause to be added just below existing text in the declaration . The location is highlighted visually in the attached image (Location for addition of clause)

 
acceptance: # In New and WIP cases application form to be generated and stored on FileNet as described
# Application form should display Clause as per description
# The content and formatting to match as attached format
# the location of the clause should be as per description
# Existing functionality of Application form to work as it is

key: ML-11872
summary: Revisions to Sanction letter
description: 

In 'SCHEDULE/SANCTION LETTER/MOST IMPORTANT DOCUMENT-

# Revise: Cheque Bounce Charges to be revised from Rs. 250 to “Rs. 400 + GST as applicable”.
# Revise: Cheque Swap charges(per swap) to be revised from Rs. 500 to “Rs. 500 + GST as applicable”
# New: field to be displayed under ‘Repayment Mode’- ‘EMI Due Date’. 
# New: “Lock-in period” : 180 days  
acceptance: Application form and sanction letter should reflect updated charges and field in all system generated documents (E-sign, E-stamp)

key: ML-11846
summary: Reject SMS to be sent for Posidex/Scorecard reject cases
description: As Is: Currently, Reject SMS is triggered only for Sanction Reject cases (MEL,PL).

Proposed: Reject SMS should be triggered to Posidex Reject (MEL& PL), Scorecard Rejected cases (MEL), and Autocancelled cases (MEL&PL).
acceptance: Reject SMS should be triggered when MEL, and PL loan applications are Rejected by Posidex (MEL,PL) and Scorecard (MEL).

Stage/Sub-stage: Reject/Posidex Reject & Auto-cancelled cases

 

key: ML-11792
summary: For CJ journey all documents need to be Digitally signed
description: Applicable - CJ Journey

Description:

Current Process:

# For CJ journey when the post document generation when OTP sign is done by the customer. Emorphis API is again called to generate Digitally signed Documents.
# But documents generated by SFDC are not getting generated again with Digitally signed in the system

Proposed

# When the OTP sign is successful by the customer and Emorphis API is again called, the document generated by SFDC needs to be generated again with Digitally signed mention at the left hand side corner of the document.
# Below are the document which needs to be digitally signed
## Application form
## Form 60

Prod case for Reference - 601180604 where all documents are generated with “Digital Sign” printed except Application form and Form 60
acceptance: AC1: Post OTP sign all documents should be OTP sign and uploaded in Filenet

AC2:  For drop off cases the workflow should work as is

key: ML-11756
summary: Code fix for PD
description: Code deployment in lower environment to be done due to code overwrite issue.
acceptance: Deployment of code in lower environments- QA, UAT, Preprod

key: ML-11748
summary: API Node to be changed for NACH OCR
description: API Node should be changed for NACH OCR API

node changes for below tagging. The "c" in the node should be Caps.

IsInitiateNACHScanclicked

 API - Getmandatedtls

Expected - "IsInitiateNACHScanClicked":"true"
acceptance: lkjk

key: ML-11664
summary: Code Fix for Rural CPV
description: Code deployment in lower environment to be done due to code overwrite issue.
acceptance: Code deployment to be done for QA, UAT and preprod as applicable

key: ML-11528
summary: Additional Identifiers to CBS 
description: *Applicable for* - MEL/PL/HL/LAP/GL

*Description* - 

1.) Unable to use MATM tab for cash withdrawals 

2.) Add tags for sending multiple identifiers for accounts opened through Salesforce.

3.) As per the current implementation, in the request structure, we can't send Multiple identifiers to CBS. If the user has PAN and aadhar then only one of the identifiers can be sent.

4.) The user is unable to use withdraw option through the MATM tab. The aadhaar number is showing blank.  This is because the customer account profile Aadhar is not mapped in CBS. Only the Pan number is updated in CBS as per KYC. Cash withdrawal transactions are getting rejected if Aadhar is not mapped against the customer during verification of profile with CBS.

5.) If the customer is not mapped with the Aadhar number in CBS then in such cases cash withdrawal through TAB will not get successful.

*Expected* -

1.) Add tags for sending multiple identifiers for accounts opened through Salesforce.

2.) For new customer creation, We will send 2 Identifier in the create customer API

3.) Currently we have only 1 Tag where either PAN or aadhar is send.

“idtfcn": \{

                                                "idNm1": "749891172815",

                                                "idTp1": "44",

}

4.) as a change we are adding two more Tags where 2nd Identifier would be send.

5.) If PAN and aadhar would always be send in the request if same is present. If both the Identifier are not present on applicant object then any other identifier would be send present on the applicant object

*Tags* -                                       "idtfcn": \{

                                                "idNm1": "749891172815",

                                                "idTp1": "44",

                                                "idNm2": "AHYPC0519O",

                                                "idTp2": "07",

                                    }

 

*Service Name : CBS_CreateCustomer*

*Attached*: Mapping Sheet 
acceptance: # Add tags for sending multiple identifiers for accounts opened through Salesforce.
# If PAN and aadhar both are present then Both identifier should be send
# If any one is present then any one identifier along with other identifier present in Applicant object to be send
# If both are not present then other identifier present in applicant to be send (Can be 1 or 2)
# Form 60 tag in Create account will be send as is.

key: ML-11377
summary: Autosave functionality for rural CPV
description: Autosave functionality to be added in Rural cases: CPV
This will be similar to what was present in Urban.
acceptance: Autosave to happen every 30 sec

key: ML-11375
summary: Autosave functionality for Rural CPV 
description: nan
acceptance: .

key: ML-11356
summary: Document type changes for customer photo and signature
description: *Description* - Document type changes for Customer photo and signature in CKYC

*Applicable for* - MEL/PL/HL/LAP/Gold Loan

*Screen -* 

Document Upload Screen

*Problem* - In a few cases, signatures and photos were not getting updated because of which customers were unable to withdraw funds. The primary reason was - Users were uploading pdf files.

*Solution -* For CKYC Photo and Signature proof documents only *JPEG and JPG* document types are allowed to be uploaded. If the user uploads any other document then an *error should be given to upload the correct format.* 

*Warning Message* - "Upload max file size 4 MB. For Customer Photo upload max file size 1 MB. Supported formats: JPG,JPEG"

*A Validation* needs to be implemented where on CKYC Photo and Signature if someone uploads a file other than jpeg and jpg should throw error.

*Reference -* [https://fincap.atlassian.net/browse/ML-6313|https://fincap.atlassian.net/browse/ML-6313|smart-link] [https://fincap.atlassian.net/browse/ML-10|https://fincap.atlassian.net/browse/ML-10|smart-link] 
acceptance: AC1:  *Validation* to be implemented where the User should be able to upload only JPEG and JPG document type in CKYC Photo and Signature. If the user uploads any other document then an error should be given.

AC2: a.) CKCY EKYC success cases should have the expected format.

        b.) In CBS the photo and signature should be visible.

AC3: The 64 base conversion which happens on EKYC and CKYC cases should get converted to JPEG and JPG and uploaded in respective document 

key: ML-11338
summary: Worklist and queue mapping
description: 

*Current* : once user submits the case post EUC, the case is not visible to IRO in his worklist as per [https://fincap.atlassian.net/browse/ML-2120|https://fincap.atlassian.net/browse/ML-2120|smart-link] 

*Proposed:* 

# Closed EUC cases of the branch should also be visible in the EUC Worklist and user should be able to edit the already submitted EUC cases. If edited, user should be able to re-submit the case and  new information should stamp on SFDC

2.   Queue mapping for EUC to be same as MEL Plus  branch queue mapping. Access for the queues to be merged, on UI the queues should be separate which is existing functionality

*Assumption:* None

*Dependency:* None
acceptance: # Already closed EUC cases should be available in Worklist
#  User should be able to edit the submitted case and re-submit it
# Multiple re-submit to be tested
# Queue mapping for EUC to be same as MEL Plus  branch queue mapping.  Access for the queues to be merged, on UI the queues should be separate which is existing functionality
# The existing flow of [https://fincap.atlassian.net/browse/ML-2120|https://fincap.atlassian.net/browse/ML-2120|smart-link] should hold true apart from above changes

key: ML-11336
summary: New fields to be created to capture URC details
description: *Current* : EUC screen appears as [https://fincap.atlassian.net/browse/ML-2119|https://fincap.atlassian.net/browse/ML-2119|smart-link] 

*Proposed* : As an IRO I should be able to enter URC details and upload URC certificate so that URC details are saved in SFDC.

*Description:* 

# In current EUC screen, below field - Loan Purpose Met, create a new mandatory field - 
‘Eligible for URC’ - Yes/No (Drop down). User should be able to select any of the values in the drop down
# If ‘Yes’ is selected then below mentioned mandatory fields should appear:
 *i. URC No.* - 

          Alphanumeric field with a specific format: _UDYAM-XX-00-0000000_  (or) 19- digit numeric reference number- mandatory

       *ii. URC Generation Date* - Date format field (DD/MM/YYYY)- should be shown in form of calendar


                       An option ‘ Upload URC Certificate’ should be given next to URC Generation date to upload.

                       User should be able to upload URC Certificate as an image JPEG, PNG, or PDF.

                       Multiple document uploads should be allowed.

                       Uploading URC Certificate should be non -mandatory.

                       DMS API should be triggered and the uploaded files should be stored on FileNet with ‘URC Certificate’ tag.

                       DMS ID should be present in DMS API request and  in the Document record for URC Certificate- Document ID is attached

The response for *Eligible for URC, URC No.* and *URC Generation date* should be stamped on SFDC under case created for EUC verification

The above fields should also be added in the report developed in [https://fincap.atlassian.net/browse/ML-2120|https://fincap.atlassian.net/browse/ML-2120|smart-link] for analysis purpose

Fields *Proof of EUC, URC No. , URC Generation Date* and *Upload URC Certificate* fields should appear on Front End as per input field by user in Loan Purpose Met and Eligible for URC                

|Loan Purpose Met|Eligible for URC|Proof of EUC|URC No.|URC Generation date|Upload URC Certificate|
|*No*|*No*|Not visible|Not visible|Not visible|Not visible|
|*No*|*Yes*|Not visible|Mandatory|Mandatory|Visible|
|*Yes*|*No*|Mandatory|Not visible|Not visible|Not visible|
|*Yes*|*Yes*|Mandatory|Mandatory|Mandatory|Visible|

     

The submit button should be enabled as per above grid and only if the mandatory inputs are entered by the user

5.  For MEL Repeat/Plus and CJ Loan,  two field (URC No. and  URC Generation Date) details should get auto-populated basis the previous loan application (if available) in editable mode  and also if the user has selected as Yes in the field “Eligible for URC”. User should be able to enter details if data is not auto-populated or modify the auto-populated details. Rest of the logic should work as per grid and submit function should work as it is.

*Assumption:* None

*Dependency:* None
acceptance: # In EUC screen, new fields to appear as per description
#  URC No. should be allowed as per format
# The new fields should be stamped on SFDC as per description
# The submit button should work as per grid, if the mandatory fields are not updated, user should not be allowed to submit the case
# For MEL Plus/CJ/Repeat- The URC details should auto populate as per description in editable mode
# Multiple files should be allowed to upload as described
# The documents should be uploaded on FileNet
# The DMS ID should be available for URC certificate
# Upload of URC certificate should be as per format

key: ML-11331
summary: Implementing GETDOCUMENTSERVICE ATTACHMENT API in Rural org - HL/LAP/MEL/PL
description: *Description*
GETDOCUMENTSERVICE” API stuck in-progress when large response received from Filenet.

*Service:*
GETDOCUMENTSERVICE Attachment API

*Business Context*

# In SFDC, whenever any documents need to be viewed from FileNet to SFDC then it can be viewed from GETDOCUMENT SERVICE API.
# If there are 50+ documents which are present in Filenet then data present in GETDOUCMENT SERVICE API becomes much more than SFDC can consume/ handle. For very API request & Response Salesforce can consume character limit up to ~140000 characters. If more characters are sent from Mule then SFDC will not be able to accept the response and will revert with character limit exceeded error to Mule. GetDocument service API will remain in "In Progress".

*Proposed Process*

# To solve this problem, we need to create GETDOCUMENT SERVICE API in attachment form. With this SFDC will get response from Filenet in an attachment form and the response content will remain the same.

SVC Name - GETDOCUMENTSSERVICE_ATTACH

Request - \{ "getDocuments" : \{ "filterBean" : \[ \{ "property" : \[ \{ "propertyValue" : "0379478204", "propertyName" : "CF_SFDCLoanNumber" } ] } ], "docClass" : "CF_LOANDOCUMENT", "arg2" : "" } }

The response will be attachment response and SFDC needs to read the composite response 

*MULE*

From MULE side, Service name is already available GETDOCUMENTSERIVCE.

*Reference:*

Referring [https://fincap.atlassian.net/browse/HZT-7198|https://fincap.atlassian.net/browse/HZT-7198|smart-link] implemented for this change in horizontally in different orgs and business Units.
acceptance: # SFDC should be able to consume the Getdocument service in attachment format
# Gold loan should not be impacted due to this change
# Need to check the New API implementation at all places of the work flow

key: ML-11328
summary: Batch Process For Deactivating Users
description: *Description* - Enhancements on the user deactivation batch.

*Applicable for* - MEL/PL/HL/LAP/GL

*Expected -*

*_1.)_* To create a new batch that runs every morning and it identifies the list of users who are not logged in to the system for a fixed period of time( which is configured via the custom settings on the user object) and deactivates them.

*_2.)_* To create a new batch that runs after the user is reactivated, If a user is deactivated via the batch and was reactivated again(isActive on the user is made to true), but the user does not log in even after reactivation. Then, the user should not be deactivated for a specific window period which should be configurable, post the completion of the window period user should be deactivated.

*_3.)_* To create a new batch if the manager gets deactivated.  If X user, has to be deactivated via batch, then we will need to assign Y as the escalation manager of Z.

For example - If Z is the user and his escalation manager is X and Y is the escalation manager of X. Now, X is deactivated then Y will be the escalation Manager of Z.

If a user's escalation manager is getting deactivated via batch, then we will have to assign the Manager's escalation manager as the user's escalation manager.

*Development Approach -* Attached

*Class Name -* DeactivateUserBatch
acceptance: AC1:  To create and run a batch every morning which identifies the list of users who are not logged in to the system for a fixed period of time( which is configured via the custom settings on the user object) and deactivates them.

AC2:  To create a new batch and run when a user is deactivated via the batch and was reactivated again, but the user does not log in even after reactivation. Then, the user should not be deactivated for a specific window period which should be configurable, post the completion of the window period he/she can be deactivated.

AC3: To create a new batch if managers are deactivated. If X user, has to be deactivated via batch, then we will need to assign Y as the escalation manager of Z. (X is the manager of Y and Z is the manager of X )

key: ML-11283
summary: code optimization
description: change of class in code
acceptance: change of classes

key: ML-11275
summary: Autosave functionality for rural and PD
description: Autosave functionality to be added in Rural cases: PD 
This will be similar to what was present in Urban.
acceptance: Autosave to happen every 30 secs.

key: ML-11255
summary: OTP Flooding
description: *Description -*

Issue related to SMS OTP Flooding while clicking on Generate OTP button.

There are a total of two areas in Org3 from where we are generating OTP -

1.) Applicant - Mobile number section

2.) Sanction Stage - Insurance Screen

*Applicable for* - All BU’s in ORG 3

*Issue/Problem* - Sending mobile number in HTTP request which can be trapped and can be used to resend SMS multiple times to generate OTP.

*Acceptance Criteria/Solution:* 

1.) To avoid resending SMS for OTP generation, a check on the task can be implemented at the backend. Once the task is generated, by checking the type of task and the time it is created we can implement the logic. Put a validation if SMS task is created (Generate OTP) then don’t create a new task for next 10 mins, and we can again allow the OTP generation.

2.) 3 attempts are given to generate OTP
acceptance: AC1: To avoid resending/flooding SMS for OTP generation.

AC2: To avoid multiple SMS: Put a validation if SMS task is created (Generate OTP Button) then don’t create a new task for next 10 mins.

key: ML-11245
summary: Field level changes on UI- PART 1
description: Note*:* Applicable only for Bank and not for IFBL.

          PF : Processing Fee

*Current* : We don’t have PL Enterprise scheme, 

*Proposed* : To offer preferential rates of ROI and PF to existing liability customers , we need to create a new loan journey for PL Enterprise scheme. This new loan journey will be replica of Existing Rural PL scheme with respect to Front and back end apart for points covered below and in [https://fincap.atlassian.net/browse/ML-12664|https://fincap.atlassian.net/browse/ML-12664|smart-link] : 

# A drop down option should be created in *scheme* field on front end , to allow user to choose PL Enterprise scheme . The pick list values of drop down would be : PL- Rural PL, PL Enterprise. (PL- Rural to function as per current functionality.  PL Enterprise will allow user to create new loan journey to offer preferential ROI and PF).
# Once user selects PL Enterprise scheme from the drop down mentioned in Point 1 , a new field option with heading as *Name of Corporate* should be enabled for user to select corporate name.
#* List of all name of corporates as per Enterprise master built in [https://fincap.atlassian.net/browse/ML-11243|https://fincap.atlassian.net/browse/ML-11243|smart-link]  should be available in this new drop down
#* As the list is long, user should be able to type and search corporate name
#* This new drop down should be disabled if user selects PL-Rural PL scheme or switches back to PL-Rural PL scheme after opting for PL Enterprise.
#    After selection of corporate name, user should be allowed to create a new loan application
#    The scorecard scheme should be stamped as PL Enterprise on back end basis the [https://fincap.atlassian.net/browse/ML-11151|https://fincap.atlassian.net/browse/ML-11151|smart-link] 
#    Corporate code and name of corporate should be stamped at back end in the loan application under employment details of applicant.
acceptance: # User should be able to create a new loan application as mentioned in description
#  Stamping of new information on back end should be done as mentioned in description
#  Back end stamping should happen as done for Existing Rural PL except for new information
# This should only be applicable for Bank Workflow

key: ML-11243
summary: Enterprise master in SFDC
description: Note : Applicable only for Bank and not for IFBL.

           PF : Processing Fee

*Current* : in SFDC, ROI and PF values are maintained at scheme level in case of existing Rural PL.

*Proposed:* ROI and PF values to be maintained at enterprise level based on following : 

# ROI and PF values to be maintained against each corporate entity with company code (Refer the attachment for the list of corporates)
# When IRO selects the corporate entity from the drop down master as mention in - [https://fincap.atlassian.net/browse/ML-11245|https://fincap.atlassian.net/browse/ML-11245|smart-link] , the corresponding ROI and PF should be populated in SFDC Front end and back end 
# Currently ROI is fetch from Meta Data - but for this Scheme created in [https://fincap.atlassian.net/browse/ML-11151|https://fincap.atlassian.net/browse/ML-11151|smart-link]  the ROI needs to be fetch from enterprise master.
# Currently PF is 2% of loan amount for all PL Cases but for this scheme created in [https://fincap.atlassian.net/browse/ML-11151|https://fincap.atlassian.net/browse/ML-11151|smart-link]  the PF should be populated from enterprise master
# The enterprise master should be configurable, addition of new corporates and changes in ROI and PF values to be allowed when asked from Product team.
#  ROI values in the enterprise master corresponding to any corporate entity should not be outside of range of MINROI and MAXROI as mentioned in scheme master [https://fincap.atlassian.net/browse/ML-11151|https://fincap.atlassian.net/browse/ML-11151|smart-link] , SFDC should put a check at metadata level to ensure ROI is within the range as per scheme master and incorrect ROI  outside range should not be allowed 
acceptance: # Enterprise master is replicated in SFDC as per attachment
# All corporates with Code, name, ROI and PF should be included in the master
# ROI value at metadata level should be checked, incorrect ROI value outside of range as per scheme master not to be allowed 
#  This is applicable only for Bank workflow

key: ML-11222
summary: Changes in NACH Form
description: This story is linked to ML-6075:  Changes in Physical NACH Form,  where need to do some additional changes in the NACH form generated.



*Applicable to:*  All Products - MEL, PL, HL & LAP
acceptance: AC1:  Field " Sponsor Bank code " On the mandate is misspelled as 'Sponser'. The field name is to be recorrected as 'Sponsor Bank Code'.

AC2: Data stamped in Fields on " Sponsor Bank code" and IDFC FIRST BANK LIMITED should be center aligned.

AC3: Bank Name - IDFC FIRST BANK LIMITED to be stamped only in case of successful IMPS  scenario, else it will stay blank.

AC4: "Name as bank details" field is not stamped properly in the Generated Mandate. The number shouldn't be added before the name. Refer - [https://fincap.atlassian.net/browse/ML-11105|https://fincap.atlassian.net/browse/ML-11105|smart-link] 

AC5: Reference 1 field has to stamp the “SFDC Loan id”. Currently, this is stamped in the Reference 2 field. Post this, the Reference 2 field will not stamp the SFDC ID. Refer-[https://fincap.atlassian.net/browse/ML-11104|https://fincap.atlassian.net/browse/ML-11104|smart-link] 

key: ML-11154
summary: 'Purpose of Loan Category' and 'Purpose of Loan Sub-category' fields for All applicable BUs
description: Code should be irrespective of BU, wherever the fields are applicable, logic should work

+*Current:*+

 “Purpose of Loan Category” & “Purpose of Loan Sub-category” fields are captured on SFDC basis dropdown on UI

These values do not flow to FinnOne

+*Proposed*+

Send Data of “Purpose of loan Category” and “Purpose of Loan Sub-category” fields to FinnOne in FInnOne request.

# FinnOne codes to be Maintain against each value of Purpose of Loan category and Purpose of Loan Sub category in SFDC . Attached FinnOne master LOAN_PUR_CAT_SUBCAT.csv from which finnone codes to be used
# The below tags are already present in the Request as part of Gold Loan Development.  We need to send codes as mentioned in attachment in the below tags

"PurposeOfLoanSub_Category" : "",
"PurposeOfLoanCategory" : "",

* 3. Based on the picklist value selected by user for Purpose of Loan Category and Subcategory, the codes corresponding to that Purpose of loan category and subcategory will be passed in above tags to FinnOne
acceptance: # To function as per description
# Need to test all Picklist values available on UI for Purpose of loan category and subcategory  have been mapped to FinnOne Code as per attachement on SFDC
# Tags should flow finnone codes properly as mentioned in the master file for all applicable Purpose of Loan category and subcategory for all BUs
# Case should be submitted to FinnOne Successfully
# Gold functionality should work as it is 
# To be tested for WIP cases
# To be checked for applicable BUs where these fields are available- case should be successfully submitted to FinnOne successfully and the tags should flow with master code as mentioned in description
# Specifically check for below combination 

|Purpose of Loan Category|Purpose of Loan Subcategory|
|Allied Agri|GoatandSheep|
|Other Service|Automobile repair|

key: ML-11151
summary: Scheme Master Creation of Personal Loan for Enterprise Partnership
description: Note : Applicable only for Bank and not for IFBL.

           PF : Processing Fee

*Current :* We don’t offer preferential rates of ROI and PF to existing liability customers , every PL loan is punched using scheme : PL-Rural PL on IRO page

*Proposed :* For existing liability customers, there shall be preferential ROI and PF, to segregate these customers, we will build a new scheme master which will help us to book these customers in a new loan journey called as PL-Enterprise. Following steps to be used :

# New scheme master for enterprise partners needs to be created in SFDC as mentioned in attachment
# Within scheme, Minimum Loan amount (Rs 50,000) and Maximum Loan amount (Rs. 5,00,000) range shall be configured in SFDC. (Same as existing PL policy)
# Loan Tenure:  the complete tenure range from 12 to 48 months with a gap of 6 months i.e. 12, 18, 24, 30, 36, 42, 48 shall be configured in SFDC. 
acceptance: # Scheme master should be created in SFDC as per attachment.
# Applicable values for scheme master should be as per attachment
# This should hold true for Bank workflow

key: ML-11148
summary: Repeat Loan workflow for PL
description: Repeat Loan/Second Cycle of PL loan workflow:



|·         To be valid for Bank and IFBL|
|·         New PL Repeat will be sourced on existing base scheme ( 1 to 1 mapping )- ex : PL Prime Repeat on PL Prime Base Journey|
|·         Insurances to be booked freshly, not to populate from base loan|
|·         No change in Posidex, Highmark stages in SFDC.|
|·         No change on SFDC wrt FICO Eligibility|
|·         Verification, Underwriter and post sanction - No change in SFDC.|

 

 

|*Open Points*|*Open with*|
|List of Fields and data points which are to kept editable/non-editable @enoch.pediredla|Enoch|
|List of Fields and data points to be auto stamped from base loan journey to be shared @enoch.pediredla|Enoch|
|List of Fields and data points which are to be auto-populated on UW screen from Base Journey - @Mohini Gupta|Mohini|
|List of Fields and data points which are to be kept editable/non-editable @Mohini Gupta|Mohini|
|CPV Waiver logics for PL Repeat to be confirmed by FICO/Credit, confirm logics to be re-used from Video PD @Mohini Gupta|Mohini|
|FCRB logic to be retained from MEL repeat, other SFDC logics to be retained from MEL Repeat such as Cycle count, complete list will be shared by @Parth Parwal|Parth|

# SFDC to maintain a counter of cycle number. (Existing MEL functionality, need to be extended to PL)- Replica of MEL Repeat- Refer Jira from Rishika-[https://fincap.atlassian.net/jira/software/c/projects/RMR/boards/162/backlog?issueLimit=100|https://fincap.atlassian.net/jira/software/c/projects/RMR/boards/162/backlog?issueLimit=100|smart-link]. 
# Minimum 9 months base loan vintage should be there (9 EMI’s should have been paid)- {color:#ff991f}To be built on FICO{color}
# No change in Posidex, Highmark stages in SFDC.
# No change on SFDC wrt FICO Eligibility
# Verification, Underwriter and post sanction - No change in SFDC.
# Should work for IFBL and Bank workflows
#  CPV at BCM stage
- *For both Cash and Non-Cash Salaried* - Office CPV and Residence CPV are mandatory. This has to be built at FICO
# CPV waiver logic has to be built to similar to Video PD requirement ( PL repeat)
# FCRB logic to be retained from MEL repeat

*Dependency:* 

# FinnOne to enable FCRB for RPL schemes. 
SFDC Parent Loan ID tag to be passed to FinnOne for FCRB- Same as MEL-[https://fincap.atlassian.net/browse/ML-2044|https://fincap.atlassian.net/browse/ML-2044|smart-link] 
#* Active and Inactive Flag to be incorporated into FCRB logic (SFDC end)
#* If more than 1 Live PL loan, Hardstop at Insurance stage and FCRB would happen for the latest live loan.
# 
acceptance: 1

key: ML-11125
summary: Document deletion for rejected/Disbursed for Cases with DMS ID
description: Currently as per [https://fincap.atlassian.net/browse/ML-10519|https://fincap.atlassian.net/browse/ML-10519|smart-link]

We are deleting the documents which are in Delete/Rejected/Cancelled cases. 

We need to add a logic - that documents which have DMS ID in the record type should be deleted from notes and attachment for the disbursed/Cancel/rejected cases
acceptance: ijoi

key: ML-11121
summary: Scheme configuration changes for MEL
description: Need to replicate the below scheme configuration changes in *SFDC :* 

Highlighted ones are the changes to be made.

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default","localId":"44a232d3-76c8-4ad6-994f-9fb796b64026"},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Flow Type","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Scheme Group","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Scheme Group Code","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[124]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Scheme","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[72]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Scheme Code","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Loan Amount","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Unnati (Check Box)","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"ROI","marks":[{"type":"strong"}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank"}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"MICRO ENTERPRISE LOAN"}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":"332"}]}]},{"type":"tableCell","attrs":{"rowspan":3,"colwidth":[124]},"content":[{"type":"paragraph","content":[{"type":"text","text":"RURAL MICRO ENTERPRISES LOAN-BANK"}]}]},{"type":"tableCell","attrs":{"rowspan":3,"colwidth":[72]},"content":[{"type":"paragraph","content":[{"type":"text","text":"55637   "}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":"60000-200000","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Not applicable"}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure Drop-down values: 12, 18, 24, 30, 36"}]},{"type":"paragraph","content":[{"type":"text","text":"Tenure validation:"},{"type":"hardBreak"},{"type":"text","text":"Loans upto Rs. 200000 = 12 to 36 months"}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Validation basis loan amount"},{"type":"hardBreak"},{"type":"text","text":"Rs. 60000-100000-26%"},{"type":"hardBreak"},{"type":"text","text":"Rs. > 100001 - 200000 - 24%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank"}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"MICRO ENTERPRISE LOAN"}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":"332"}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":"200001-300000"}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"NO"}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure Drop-down values: 12, 18, 24, 30, 36,42, 48, 54, 60","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]},{"type":"hardBreak"},{"type":"text","text":"Tenure Validation","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]},{"type":"hardBreak"},{"type":"text","text":"Loans > Rs.200000-300000- 12 to 60 months","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Validation basis loan amount"},{"type":"hardBreak"},{"type":"text","text":"Rs. > 200001-300000 - 23%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank"}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"MICRO ENTERPRISE LOAN"}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":"332"}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":"200001-300000"}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Yes"}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure Drop-down values: 12, 18, 24, 30, 36,42, 48, 54,60","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]},{"type":"hardBreak"},{"type":"text","text":"Tenure Validation","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]},{"type":"hardBreak"},{"type":"text","text":"Loans > Rs.200000-300000- 12 to 60 months","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"18%","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank"}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"MICRO ENTERPRISE LOAN"}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":"332"}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[124]},"content":[{"type":"paragraph","content":[{"type":"text","text":"RURAL SURROGATE MEL – BANK"}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[72]},"content":[{"type":"paragraph","content":[{"type":"text","text":"57368"}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":">300000-10,00,000","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"NO"}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure Drop-down values: 12, 18, 24, 30, 36,42, 48, 54, 60","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"23%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank"}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"MICRO ENTERPRISE LOAN"}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":"332"}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":">300000-10,00,000","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Yes"}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure Drop-down values: 12, 18, 24, 30, 36,42, 48, 54, 60","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"18%","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"MICRO ENTERPRISE LOAN","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":" ","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[124]},"content":[{"type":"paragraph","content":[{"type":"text","text":"PMSVANIDHI","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[72]},"content":[{"type":"paragraph","content":[{"type":"text","text":"64707","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":"10000-20000","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"NO"}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure Drop-Down values: 12,18","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"24%","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"IFBL"}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"MICRO ENTERPRISE LOAN"}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":"332"}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[124]},"content":[{"type":"paragraph","content":[{"type":"text","text":"RURAL MICRO ENTERPRISES LOAN-IFBL"}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[72]},"content":[{"type":"paragraph","content":[{"type":"text","text":"55636"}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":"60000-200000"}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Not applicable"}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure Drop-down values: 12, 18, 24, 30, 36"},{"type":"hardBreak"},{"type":"text","text":"Tenure validation:"},{"type":"hardBreak"},{"type":"text","text":"Loans upto Rs. 200000 = 12 to 36 months"}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Validation basis loan amount"},{"type":"hardBreak"},{"type":"text","text":"Rs. 60000-100000-27%"},{"type":"hardBreak"},{"type":"text","text":"Rs. > 100001 - 200000 - 25%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"IFBL"}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"MICRO ENTERPRISE LOAN"}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":"332"}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":"200000-300000"}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"NO"}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure Drop-down values: 12, 18, 24, 30, 36,42, 48,54,60","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]},{"type":"hardBreak"},{"type":"text","text":"Tenure Validation","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]},{"type":"hardBreak"},{"type":"text","text":"Loans > Rs.200000-300000- 12 to 60 months","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Validation basis loan amount"}]},{"type":"paragraph","content":[{"type":"text","text":"Rs. > 200001-300000 - 24%"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[62]},"content":[{"type":"paragraph","content":[{"type":"text","text":"IFBL"}]}]},{"type":"tableCell","attrs":{"colwidth":[96]},"content":[{"type":"paragraph","content":[{"type":"text","text":"MICRO ENTERPRISE LOAN"}]}]},{"type":"tableCell","attrs":{"colwidth":[71]},"content":[{"type":"paragraph","content":[{"type":"text","text":"332"}]}]},{"type":"tableCell","attrs":{"colwidth":[124]},"content":[{"type":"paragraph","content":[{"type":"text","text":"RURAL SURROGATE MEL – IFBL"}]}]},{"type":"tableCell","attrs":{"colwidth":[72]},"content":[{"type":"paragraph","content":[{"type":"text","text":"57369"}]}]},{"type":"tableCell","attrs":{"colwidth":[140]},"content":[{"type":"paragraph","content":[{"type":"text","text":">300000-1000000","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"NO"}]}]},{"type":"tableCell","attrs":{"colwidth":[199]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Tenure Drop-down values: 12, 18, 24, 30, 36,42, 48, 54, 60","marks":[{"type":"textColor","attrs":{"color":"#00b8d9"}}]}]}]},{"type":"tableCell","attrs":{"colwidth":[192]},"content":[{"type":"paragraph","content":[{"type":"text","text":"24%"}]}]}]}]}
{adf}
acceptance: # Above mentioned configuration level changes shall be extended to MEL.

key: ML-11118
summary: Obligations information in SFDC for eligibility calculations
description: Need Obligations added under obligations in PD app to flow to SFDC Obligation tab for eligibility calculation of underwriter screen.

*PD App :* Obligations populated from Bureau should be editable in PD app, any changes made by the credit managers in the obligation should flow to SFDC.

Below mentioned fields are Bureau Summary fields which is displayed at underwriter screen  under Obligation Details section:

|S. No|Field in SFDC which is visible on underwriter screen|
|1.|Name|
|2.|Account Type|
|3.|Sanctioned Amount|
|4.|EMI Amount|
|5.|Balance Outstanding|
|6.|Account Status|
|7.|Closed Date|
|8.|Highest DPD in last 2 years|
|9.|KCC/Mudra Loan|

*Validation:* If Account Status is Closed then none of the obligation fields should be editable.

Below are the API Name and object where PD App will save the data

*Object* : Obligation__c

 

*Fields* : Applicant_Name__c,Account_Type__c,Sanctioned_Amount__c,EMI_Amount__c,

Balance_Outstanding__c,Account_Status__c,Closed_Date__c,

Highest_DPD_In_Last_2_Years__c,KCC_Mudra_loan__c
acceptance: # Obligations added under obligations in PD app is flowing to SFDC Obligation tab.
# Obligations populated from Bureau is editable in PD app, any changes made by the credit managers in the obligation is flowing to SFDC.

key: ML-11086
summary: For existing account flow, Account type field value should be visible to user on front end
description: h3. Applicable for:

All Products → MEL, MEL+, MEL Repeat, Cust. Journey, HL & LAP

h3. Use Case:

Before & After Sanction → Disbursement screen → Existing Account flow → User is found as existing and bank accounts are found in CBS of that user

Stage = Data Entry; Sub stage = Disbursement Details Pending

!image-20220209-151749.png|width=1216,height=477!

!image-20220209-151825.png|width=1208,height=448!

!image-20220209-152142.png|width=1288,height=498!

h3. Current:

* When Before & After Sanction → Disbursement screen → Existing Account flow → User is found as existing and bank accounts are found in CBS of that user → User proceeds with one of the existing account, then here user is navigated to a screen where all the account details are displayed. As shown in above screenshot.
* Here, Account type field value is missing/not displayed on front end even though stamped at backend.

h3. Expected:

* For existing account flow → all the details should be displayed to the user. 
* Account type field value should be displayed same as stamped at backend, to user on front end.
acceptance: For existing account flow, Account type field value is visible to user on front end, same as received & stamped at backend.

key: ML-11084
summary: For HL & LAP, NEXT should be allowed for IMPS tech error on disbursement account
description: h3. Applicable for:

Products → HL & LAP

h3. Use Case:

After Sanction → Disbursement screen → Different repayment & disbursement account capturing condition → Manual data entry flow on Disbursement account → IMPS Technical error received on disbursement acc

Stage = Sanction; Sub stage = Disbursement Details Pending

h3. Current:

# After Sanction → Disbursement screen → when Different repayment & disbursement account capturing condition is there → Manual data entry is performed on Disbursement account → There is IMPS verification process.
# Here, when IMPS response gives Technical error then NEXT button to proceed loan further is disabled and user is not able to take loan further.
# The above condition is happening irrespective of whatever flow is selected for Repayment account, but all the flows are successful for repayment account and final decision of processing loan further depends on Disbursement account IMPS result, as this is the last activity for disbursement account journey.
# !image-20220209-150649.png|width=1224,height=458!

h3. Expected:

* After Sanction → Disbursement screen → when Different repayment & disbursement account capturing condition is there → Manual data entry is performed on Disbursement account → Under IMPS verification process → If Technical error is received then same should be considered as success and loan should be allowed to proceed further i.e. NEXT button should be enabled.
* This should work when repayment bank detail entry is filled completely and final decision depends on disbursement bank IMPS result.
* The flow should work same as for Repayment Bank i.e. both success & Technical error are considered as successful scenarios & user is able to proceed loan further. 
** Only for Non-Technical error user is stopped - existing flow should remain as is.
acceptance: * For HL & LAP, when user enter different repayment & disbursement details -> On disbursement account when user performs manual data entry -> Here, while performing IMPS if "Technical Error" is received then, NEXT is allowed to user and he can move the loan ahead._x000D_
* The flow works same as for Repayment Bank i.e. both success & Technical error are considered as successful scenarios & user is able to proceed loan further._x000D_
* Only for Non-Technical error user is stopped - existing flow should remain as is.

key: ML-11082
summary: For new account opening flow, Account Type field should not be editable after Finnone dedupe callout
description: h3. Applicable for:

All Products → MEL, MEL+, MEL Repeat, Cust. Journey, HL & LAP

h3. Use Case:

After Sanction → Disbursement screen → New Acc opening flow → After Open Acc is successful

Stage = Sanction; Sub stage = Disbursement Details Pending

h3. Current:

* After Sanction → Disbursement screen → New Acc opening flow → After Open Acc is successful, User has to perform Account verification process by clicking on “Verify” button as shown in below screenshot
* !2022-02-09_19h26_52.png|width=841,height=333!
* Clicking on this button, FinnOne dedupe callout gets triggered. After this callout gets successful, more account details are visible as shown in below screenshot.
* !2022-02-09_19h28_28.png|width=855,height=400!
* Here, “Account Type” field remains editable.   

h3. Expected:

* After Sanction → Disbursement screen → New Acc opening flow → After Open Acc is successful → User performed successful Account verification process by clicking on “Verify” button → More account details are visible on screen.
* Here, “Account Type” field is not editable to user. 
acceptance: For any product -> for new account opening flow -> Account Type field is not editable after Finnone dedupe callout is successful.

key: ML-11074
summary: Additional questions in SE Office CPV Questionnaire
description: Need additional below mentioned questions with respective Option values for SE Office CPV Questionnaire: (Refer attachment for details)

||Group Name||Question||Question Order||Response Type||Mandatory Question||Option Values||
|CPV - Office|Office Address|64|Free Text|FALSE|Auto-populated-Editable|
|CPV - Office|Within Geo Limit| |Picklist|TRUE|Yes
No|
|CPV - Office|Profile| |Picklist|TRUE|Normal Profile
Activities involving forced labour
Agri labourer
Antique Dealers ( KYC High Risk )
Anti-Social Elements
Any other profile as defined based on local portfolio & market conditions
Any person disqualified by law
Any person where it is not possible to collect or repossess due to danger to field staff
Astrologers / Purohit
Auto Spare Dealers/Garage Owners
Bars, liquior, wine shops, Bar Restaurant owners
Blue Collar Emps / Class IV Govt Emps
Building Constructor / Constructor / Labour Contractor
Building Material Suppliers
Cable TV operators
Call Centre Executives
Chit Fund Operators / Nidhi Companies / Private Money Lenders / Loan Cos. / SE operating finance business / Employed or engaged in offline gambling/ online gambling / Lottery Business (KYC High Risk)
Consultants operating from residence
Criminal background/underworld connection/terrorist/ persons engaging in smuggling
Cyber Cafes
Drivers / Motor mechanics
Employed and Engaged in Collection agencies / verification agencies, DSA
Employees in Production or trade in weapons and ammunition
Employees of cable operator
Employees of collection agencies
Employees of DSAs/ DMAs/ Other such outsourcing firms.
Employees of Leasing business/small financiers/chit financiers
Employees of outsourced agencies empanelled with IDFC Bank (Unless specifically approved)
Employees of Plantation companies/time share companies & holiday resorts
Employees working as insurance brokers
Employees working in Bars/ Casinos
Employees working in multi-level marketing companies.
Film Industry related people Films and TV actors
Financer
Hatcheries / Agriculture
House wifes
Houses of Worship , Religious Organization and Charities, Trust and Society
Insurance and Commission agents
Journalist who is at the position of Reporter/Editor/Chief Editor
Lawyers/Lawyers in family
Manpower Consultants/Man power Consultants operating from residence
Massage parlours / beauty parlour
Medical Practitioner ( Non - Qualified )
Mine and Quarry workers
Money Exchangers (KYC High Risk)
Motor Training Schools
Multi Level marketing Profiles
Non IATA travel Agency
Police and Direct family members of policemen including paramilitary forces or connected to police department
RTO agents/RTO officials/Forest officials who are allotted the gun/Trade union officials
Standalone cyber cafe worker
Traders in animals (excluding poultry/chicken/fisheries)/sand/timber worker
Working with Big Scrap traders
Working with Lottery trader|
|CPV - Office|Trade Reference 1 Check Name|65|Free Text|TRUE|Free text|
|CPV - Office|Trade Reference 1 Remarks|66|Picklist|TRUE|Positive
Negative|
|CPV - Office|Trade Reference 2 Check Name| |Free Text|TRUE|Free text|
|CPV - Office|Trade Reference 2 Remarks| |Picklist|TRUE|Positive
Negative|

* In SFDC, same fields along with picklist values should be present for the PD app to save the values in case object successfully.
* Same should be visible on SFDC UW screen under verification tab

*Assumptions:* None

*Dependency:* None
acceptance: # Fields functionality is achieved as mentioned in description above.
# All the new fields along with the required picklist values are available in SFDC.

key: ML-11070
summary: Picklist changes in Self Employed Office CPV Questionnaire
description: Need to have below mentioned changes in Self Employed Office CPV quesionnaire: (Refer the attachment for details

# Change in picklist values with respective questions as mentioned below:

||Group Name||Question||Question Order||Response Type||Mandatory Question||Option Values||
|CPV - Office|Relation with the Applicant|4|Picklist|TRUE|Applicant Self
Employee
Parent
Sibling
Wife
Child
Relative|
|CPV - Office|Type of Business Ownership|60|Picklist|TRUE|Self-Owned
Ancestral/Parental
Partnership
Pvt Ltd
Others|
|CPV - Office|Type of Business Premises|61|Picklist|TRUE|Resi-cum-office
Shop
Roadside vendor
Godown
factory
Commercial flat
Office building|
|CPV - Office|Applicant's Role|62|Picklist|TRUE|Partnership
Proprietorship
Salaried-PSU
Salaried-PVT
Salaried-Govt
Salaried- Prop
Salaried - Partnership
Others|
|CPV - Office|Decline Reason|68|Picklist|FALSE|Bad Behavior
Business does not belong to customer
Customer not Interested
Door lock
Family Dispute
Negative -neighbour/Reference check
Poor stock/Activity
Third Party Funding – End Usage
Wrong Info. Provided in application
Any other reason|

* In SFDC, same picklist values should be present for the PD app to save the values in case object successfully.

*NOTE:* Many of the picklist values are already existing in SFDC. Hence SFDC needs to create only those values which are not available. Refer attachment - “PD questionnaire SFDC picklist field update” for the values which needs to be created in SFDC.

2, For Mandatory question - Person met/spoken - need a free text response type with a maximum limit of 50 characters.  

*Assumptions:* None

*Dependency:* None
acceptance: # Fields functionality is achieved as mentioned in description above.
# All the drop down values are present in SFDC against the respective field mentioned above.
# Mandatory question - Person met/spoken -  is a free text response type field with a maximum limit of 50 characters.

key: ML-11032
summary: Picklist changes in Salaried Office CPV Questionnaire
description: Need to have below mentioned changes in Salaried Office CPV quesionnaire: (Refer attachment for details)

# Change in picklist values with respective questions as mentioned below:

||Group Name||Question||Response Type||Mandatory Question||Option Values||
|CPV - Office|Relation with the Applicant|Picklist|TRUE|Applicant - Self
Colleague
Others
Owner/Employer
Receptionist
Supervisor|
|CPV - Office|Organisation Type|Picklist|TRUE|Individual
MNC
NGO
Others
Partnership
Private limited
Proprietorship
PSU
Public Ltd|
|CPV - Office|Designation|Picklist|TRUE|Accountant
Assistant Manager
Clerk/ Data Entry Operator
Helper
Labour
Manager
Other
Receptionist
Sales Executive
Supervisor
Teacher|
|CPV - Office|Decline Reason|Picklist|FALSE|Bad Behavior
Customer not interested
Door lock
Negative – Neighbour/Reference check
Negative – Supervisor/Owner feedback
No Information/Entry Not allowed
Not Working/Left Job
Wrong employment info given in application|

* In SFDC, same picklist values should be present for the PD app to save the values in case object successfully.

*NOTE:* Many of the picklist values are already existing in SFDC. Hence SFDC needs to create only those values which are not available. Refer attachment - “PD questionnaire SFDC picklist field update” for the values which needs to be created in SFDC.

2, For Mandatory question - Person met/spoken - need a free text response type with a maximum limit of 50 characters.  

*Assumptions:* None

*Dependency:* None
acceptance: # Fields functionality is achieved as mentioned in description above.
# All the drop down values are present in the SFDC against the respective field mentioned above.
# Mandatory question - Person met/spoken -  is a free text response type field with a maximum limit of 50 characters.

key: ML-11028
summary: Picklist changes in Residence CPV Questionnaire
description: Need to have below mentioned changes in Residence CPV quesionnaire: (Refer the attachement for details)

# Change in picklist values with respective questions as mentioned below:

||Group Name||Question||Question Order||Response Type||Mandatory Question||Option Values||
|CPV - Residence|Relation with the Applicant|4|Picklist|TRUE|Applicant                                  
Brother
Colleague
Daughter 
father
Husband
Mother
Sister
Son
Wife
Friend 
Relative
Father in law
Mother in law
Other
Applicant self
Others|
|CPV - Residence|Residence Status|7|Picklist|TRUE|Self Owned
Rented
Friend House
Inlaw house
Parental owned
PG/Shared accommodation
Relative house
Corporate Provided
Mortgaged
Owned
Pagdi
Relative Owned
Bachelor
Under construction
Transit accommodation
Company provided accomodation|
|CPV - Residence|Durable Available|13|Picklist|TRUE|Average
Good
Poor|
|CPV - Residence|Type of House|15|Picklist|TRUE|Flat
Independent house
Bunglaw
Pacca
Semi Pacca|
|CPV - Residence|Type of Location|17|Picklist|TRUE|Slums
Negative area
Comm Dom Area
Restricted area
Normal|
|CPV - Residence|Decline Reason|24|Picklist|Conditional mandatory, if CPV decision negative|Bad Behavior
Negative -neighbour/Reference check
Customer not Interested
Door lock
Any other reason
Family Dispute
Poor stock/Activity|

* In SFDC, same picklist values should be present for the PD app to save the values in case object successfully.

*NOTE:* Many of the picklist values are already existing in SFDC. Hence SFDC needs to create only those values which are not available. Refer attachment - “PD questionnaire SFDC picklist field update” for the values which needs to be created in SFDC.

2. Addition of below mentioned three questions with a picklist response type field of yes and No values.

||Group Name||Question||Question Order||Response Type||Mandatory Question||Option Values||
|CPV - Residence|Within Geo Limit| |Picklist|TRUE|Yes
No|
|CPV - Residence|Whether Applicant or direct family member is in police| |Picklist|TRUE|Yes
No|
|CPV - Residence|Whether Applicant or direct family member is in politically involved/active| |Picklist|TRUE|Yes
No|

* In SFDC, same fields along with picklist values should be present for the PD app to save the values in case object successfully.
* The same fields should be visible to BCM on UW Verification tab

*Assumption:* None

*Dependency:* None
acceptance: # All the picklist field functionality is achieved as mentioned in description above for Residence CPV.

key: ML-10952
summary: Enabling "Initiate NACH Scan" button on Response Time Exceeded scenario
description: h3. Current

* As given in [https://fincap.atlassian.net/browse/ML-9466|https://fincap.atlassian.net/browse/ML-9466|smart-link] , once the timer is over but API 2 response is *not* received then, below happens:
*# Timer pop is closed & Physical NACH Status is updated as “Response time exceeded”
*# In this scenario, user is not able to initiate NACH scan again as "Initiate NACH Scan" button is disabled to user on front end.

h3. Expected

* Once the timer is over but API 2 response is not received then, below happens:
*# Timer pop is closed & Physical NACH Status is updated as “Response time exceeded”
* In this scenario, *user should be able to initiate NACH scan again*
* "Initiate NACH Scan" button should be enabled to user on front end.
* Complete Nach scan functionality can be reinitiated as implemented, in this scenario as well.
acceptance: "Initiate NACH Scan" button is enabled to IRO/MRO on front end, when Physical NACH Status = Response Time Exceeded

key: ML-10946
summary: For MEL+ & Repeat, Base loan residence address should be flown in Address match API
description: h3. Story

As a IRO, when I perform address match for the top-loan of any customer i.e. MEL+ or Repeat, then Base loan residence address should flow in the API instead of EKYC or CKYC address.  

h3. Use Case

# Applicable for: MEL+  & Repeat
# Screen: Applicant screen 
# SVC Name of the Karza Address Match API is - KARZA_ADDRESS_MATCH

h3. Details

# To know when SFDC triggers address match API, kindly refer [https://fincap.atlassian.net/browse/ML-143|https://fincap.atlassian.net/browse/ML-143|smart-link] 
# Refer Story [https://fincap.atlassian.net/browse/ML-6327|https://fincap.atlassian.net/browse/ML-6327|smart-link] for API details and implementation 
# Currently, when the karza address match API is triggered by IRO on Applicant details screen, then SFDC sends 2 addresses in the request - 
## EKYC or CKYC Address & 
## SFDC residence address of current loan i.e. currently edited by IRO.
# Here, after this story development, *for MEL+ and Repeat cases, SFDC should now send the “Base loan Residence Address” in above parameter 'a'* i.e. Base loan Residence Address should be sent instead of EKYC or CKYC Address. Parameter 'b' should remain as is.
# This needs to be done only for top up loans i.e. MEL+ & Repeat, as the base loans of the customer has the latest updated details and hence, same needs to be checked under this API, so that correct details can be populated for IRO on front end.
# Rest, Address match logic & functionality should remain as is.
acceptance: For MEL+ & Repeat journeys, SFDC now sends “Base loan residence address” as parameter 'a' in KARZA_ADDRESS_MATCH API.

key: ML-10931
summary: Fetching documents for MEL+ & Repeat loans from FileNet
description: h3. Story

As a IRO, I should be able to view the customer documents on document upload screen and customer photo & signature should be flown to CBS, for MEL+ & MEL Repeat applications.

h3. Prerequisite

h3. Assumptions

h3. Use Case

# Applicable to → MEL+ & MEL Repeat 
# Screens → Document Upload screen & Disbursement screen → Create new account flow → CBS_SigandPhoto API
# Fetch document from FileNet

h3. Details

*Current Problem Statement*

# Currently, when an existing customer take a MEL+ or MEL Repeat loan then, SFDC fetches all the documents of that customer from its Base loan i.e. previous latest loan.
# But, SFDC also implemented [https://fincap.atlassian.net/browse/ML-10519|https://fincap.atlassian.net/browse/ML-10519|smart-link] , where now SFDC is hard deleting documents of loan applications with below stages:
## Stage - Disbursed
## Stage - Reject
## Stage - Cancel
# This created blocker for MEL+ & Repeat journeys, as SFDC is not getting any documents from base loan for such MEL+ & Repeat customers. Hence, a different architecture level handling needs to be done.

*Expected*

# For new MEL+ or Repeat loans, where SFDC has deleted all the relevant the documents against their base loans, now SFDC needs to fetch those documents from FileNet.
# SFDC already has all the relevant SVC name & tags mapping of Filenet and same needs to be reused to get the documents for the new loans being created.
# Where to trigger this API & how to trigger it → This call needs to be taken by the architect and needs to be added in comments.
# On new MEL+ & Repeat loans → 
## Documents of base loan i.e. documents of that customer are to be shown on Document screen. 
## Customer Signature & photo is also sent to CBS on Disbursement screen → Create new account flow → CBS_SigandPhoto API
acceptance: # For new MEL+ or Repeat loans, if the base loan documents are deleted then SFDC fetches all the relevant documents from Filenet and journey is not blocked due to same.
## Documents of base loan i.e. documents of that customer are shown on Document screen.
## Customer Signature & photo is also sent to CBS on Disbursement screen → Create new account flow → CBS_SigandPhoto API

key: ML-10928
summary: Updated codes to be sent under CBS_CreateAccount & CBS_DebitCard
description: h3. Updated codes to be sent under CBS_CreateAccount & CBS_DebitCard

h3. Use Case:

# After Sanction → When user clicks on Open Account button → CBS_CreateAccount API 
# If user has opted for Debit Card then → After Sanction → When user clicks on Open Account button → CBS_DebitCard API 

h3. Applicable to:

Org 3 all products - MEL(all products), PL, HL, LAP & Gold Loan

h3. Details:

h4. New RBI Codes to be sent under CBS_CreateAccount API:

# This API is triggered for a loan application when that loan is applicable/opted for Create New Account flow.
# After Sanction → When user clicks on Open Account button → CBS_CreateAccount API is triggered only after the CBS_CreateCustomer API is successful.
# *Current:*
## Under this API, below hard coded values are flowing for below tags:
## {noformat}"rbiClssCtgryCr":110,
"rbiClssCtgryDr":310,
"rbiClssCdDr":311,
"rbiAcctSgmntCd":111,{noformat}
# *Expected:*
## Now, below hardcoded values should flow for below tags:
## {noformat}"rbiClssCtgryCr":180,
"rbiClssCtgryDr":350,
"rbiClssCdDr":383,
"rbiAcctSgmntCd":189,{noformat}

----

h4. New BINNb Code to be sent under CBS_DebitCard API:

# This API is triggered for a loan application when that loan is applicable/opted for Create New Account flow & toggle for Debit Card is YES (user opted for debit card).
# After Sanction → When user clicks on Open Account button → CBS_DebitCard API is triggered only after the CBS_CreateCustomer & CBS_CreateAccount API’s are successful.
# *Current:*
## Under this API, below hard coded value is flowing for below tag:
## {noformat}"BINNb": "401613";
"cardTp": "41";
"prdTp": "71"{noformat}
# *Expected:*
## Now, below hardcoded values should flow for below tags:

{noformat}"BINNb": "608118";
"cardTp": "31";
"prdTp": "29"{noformat}

Bin - 608118: RUPAY PLATINUM

Product Type - 29: Rupay plat Vishesh ALSA

Card Type - 31: Rupay plat Vishesh ALSA
acceptance: Correct expected values as given in description are being sent under expected tags of API request CBS_CreateAccount & CBS_DebitCard, from SFDC to CBS.

key: ML-10890
summary: Validation to be put on the field
description: For MEL+ Cases - As "No of years in curent business" has become editable we have to put below validation_x000D_
_x000D_
1. If the user enter any value in the field then the validation should be to enter value > 3 Yrs_x000D_
2. Or user can move ahead without adding any value
acceptance: For MEL+ Cases - As "No of years in curent business" has become editable we have to put below validation_x000D_
_x000D_
1. If the user enter any value in the field then the validation should be to enter value > 3 Yrs_x000D_
2. Or user can move ahead without adding any value

key: ML-10739
summary: 'No. of years in current business'' Field  to be made editable and non-mandatory in MEL Plus
description: *User Story:*
As an IRO/MRO, I need the field "*_No. of years in current business_*" to be *_editable_* and *_non-mandatory_* in the MEL PLUS Journey 

*Use Case:*

* In the MEL Journey, Employment details section of Employment screen

*Details:*

* Currently "No. of years in current business" field is mandatory in MEL Journey
* In MEL Plus Journey, this field needs to be editable and Non Mandatory 
!No. of years in current business.png|width=97.48953974895397%!

 
acceptance: 1. The field "No of years in current business" must be editable and non-mandatory in the MEL Plus journey

-2. For MEL Repeat, this has to be mandatory field-

key: ML-10705
summary: Monthly turnover calculation to be updated for Kirana Persona for PD Case
description: Monthly turnover calculation to be updated for Kirana Persona for PD Case

Daily Sales Invoice: Daily Footfall * Average Bill size of Customer

Monthly Turnover Revenue: Daily Sales Invoice * No of days operational in month 

As per the above calculation, it should be : 2*2 = 4 (Daily Sales Invoice); 4*2 = 8 (Monthly Turnover)
acceptance: nan

key: ML-10681
summary: Address fields are not populated on Underwriter screen.
description: h3. Story:

As a BCM, I should be able to able to view the CPV address while UW, so that I can verify all the details.

h3. Use Case:

* BCM → UW stage → Verifications tab → CPV sub tab → Location section → Address details 

h3. Details:

* Address was not visible when CPV was closed from PD App on BCM UW stage, Verifications tab → CPV sub tab → Location section → Address details information are not visible in the underwriter screen.
** Address Line1
** Address Line2
** Address Line3
** Pincode
** District 
* Same should be visible as stamped at applicant level on SFDC backend. Applicant level → Resi/Office Address → should be displayed here as well. 
* As SFDC sends the address details to PD App and same when verifications are closed from PD App, then this office address was not visible to BCM on SFDC frontend, as SFDC populates PD App fetched details from persona case. But, this address is not sent by PD App to SFDC. Hence, address under CPV tab is not visible currently to BCM on SFDC frontend & same should be populated from SFDC backend stored addresses at applicant level. 
* This is applicable to all the list of applicants & for all the CPV.
acceptance: All the addresses for all the list of applicants are visible to BCM on front end when BCM UW stage, under Verifications tab → CPV sub tab → Location section → Address details.

key: ML-10649
summary: Handling the cases without applicant
description: Cases with applicant as null should not be fetched and completed cases more than 30 days should not be displayed on APP
acceptance: Cases where applicant is null should not be fetched. 

key: ML-10572
summary: Document deleted Field creation in Document details
description: Need to create a new Field in Document Details record._x000D_
_x000D_
Field Name- Document deleted_x000D_
_x000D_
This is created in order to have a check on the records where documents are deleted. Documents are deleted to clean up the storage space in SFDC._x000D_
_x000D_

acceptance: Need to create Field in Document records for reporting purpose

key: ML-10519
summary: Documents to be deleted for Certain stage
description: Currently the content version are not getting deleted.

Proposed:

For below stage and substage SFDC should delete the content Version (Notes and attachment) in document details

1. Stage - Disbursed
2. Stage - Reject
3. Stage - Cancel

This will help in creating storage in SFDC





*NOTE 22.12.2021 : Please ensure the Bureau report deletion in this CR. The bureau report is not deleted in batch, since it does not have “document id” in it.*
acceptance: Document content version should be deleted post the Stage are achieve in SFDC

key: ML-10517
summary: API 4 Structure Changes
description: h3. Current:

API 4 was developed as given in initial requirement which is covered in [https://fincap.atlassian.net/browse/ML-9475|https://fincap.atlassian.net/browse/ML-9475|smart-link] . Below was the structure developed.

[^API 4.txt]

h3. Expected:

API 4 complete structure is changed and now should be in below format. SVC name is also updated to “NACH_Verification”

[^Book3.xlsx]

h3. Assumptions:

Rest all functionality/requirement except the API structure remains same as covered in ML-9475
acceptance: API 4 structure is developed as per the latest changes expected as given in attachment

key: ML-10509
summary: Pincode Cache related Issue
description: Problem – In the previous functionality when first time the code runs all the Pin Codes are fetched from backend and stored in cache for some limited time. When the user again submit the pincode within some limited time the pincode are fetched from cache to save time and memory. But the problem we were facing was some amount of pin code was getting deleted from cache. And when the next time we submit our pincode they are fetched from cache and if pincode is not there it shows invalid pincode(as some are deleted from cache).

Need to add the Code as per attachment
acceptance: Pincode cache issue should not occur

key: ML-10297
summary: As a customer, I should be able to view the New updated TnC content under the consent SMS TnC link. 
description: h3. Story:

As a customer, I should be able to view the New updated TnC content under the consent SMS TnC link. 

h3. Use Case:

# Consent screen → OTP SMS triggered
# TnC link sent in SMS → clicking on link, TnC page gets opened → Here, TnC content update

h3. Applicable to:

Org 3 all products - MEL(all products), PL, HL, LAP & Gold Loan

h3. Details:

# On consent screen, when IRO/MRO enters mobile number of customer, as SMS is triggered to customer with TnC link.
# This will same for Bank & IFBL & this will be visible to all the list of applicants.
# Clicking on the TnC link of SMS, a page gets opened with TnC. Like screenshot below
# !TnC Content update.png|width=1280,height=2346!
In this content, as shown the highlighted in red box → this specific content needs to be updated with below new content. Only the box lined will be replaced with below lines, rest complete content should remain as is.

{{I/We state, declare, confirm and agree that the Bank has duly explained to me/us that IDFC Param/ Vishesh Asset linked Savings account (ALSA) will be converted to Vishesh Savings account where there is a requirement to maintain Average Monthly Balance (AMB) requirement of Rs 5,000/-. Charges basis latest schedule of charges hosted on bank website will be applicable if: -}}
{{a) Loan account not set-up within 3 (three) months of Asset Linked Savings Account opened (i.e. Param / Vishesh account) and/or}}
{{b) Loan account closed and no other Live Asset relationship with IDFC FIRST Bank}}
acceptance: New T&C content is visible to user under the consent SMS TnC link.

key: ML-10278
summary: As a IRO/MRO, I should be able to view the latest bureau report for rejected cases, so as I can understand why the application was rejected.
description: h2. As a IRO/MRO, I should be able to view the latest bureau report for rejected cases, so as I can understand why the application was rejected.

h3. Use Case

* Rejected and cancelled cases
* “View Bureau” button on Loan Details page of a loan application ONLY for rejected and cancelled cases.
* For All product

h3. Details

* As implemented in [https://fincap.atlassian.net/browse/ML-6324|https://fincap.atlassian.net/browse/ML-6324|smart-link] , for rejected and cancelled cases → "View Bureau" button is visible on Loan Details page of a loan application for 7 Days - from the day it was rejected or cancelled. (days are configurable). PFA Screenshot
* Here, whenever user clicks on the “View Bureau” button, every time SFDC should fetch for latest Bureau from FileNet. 
* Implementation of API calling is already there on Highmark approved stage screen (PFA screenshot), same should be implemented here as well. Below is the API flow implemented:
** “GETDOCUMENTSERVICE” API to create the doc detail record at SFDC.
** On the basis of Doc detail record’s FileNet ID, “VIEWDOC_ATTACH” API should get triggered, which will pull the bureau report from FileNet.
* Once, the APIs are successful, IRO/MRO should be able to view the latest Bureau Report on SFDC front end.
acceptance: For rejected and cancelled cases → IRO/MRO are able to view the latest Bureau Report on SFDC front end.

key: ML-10259
summary: CR - Additional tag’s to be included in FinnOne Submit API for handling multiple MICR logic in FinnOne
description: Story:

This CR is linked to [https://fincap.atlassian.net/browse/ML-7071|https://fincap.atlassian.net/browse/ML-7071|smart-link] . We need to add three new tags under the array of Instrument Details in the FinnOne API

Details:

|Tag Name|Tag Description|Salesforce Mapping Field|
|<IFSCCode><IFSCCode>|Mandate IFSC Code|Field = IFSC_Code__c  
Type = String
Object = Bank_Detail__c|
|<ecsMicrCode></ecsMicrCode>|1st EMI PDC MICR - SBD|SEND BLANK VALUE|
|<ecsIFSCCode><ecsIFSCCode>|1st EMI PDC IFSC Code- SBD|SEND BLANK VALUE|
|</Instrument>| | |
acceptance: 1. All the fields functionality is achieved as mentioned in description above for MICR/IFSC, Bank Name and Branch Name

key: ML-10257
summary: CR - Further changes to Physical NACH Form
description: h2. Story*:*

This story is linked to [https://fincap.atlassian.net/browse/ML-6075|https://fincap.atlassian.net/browse/ML-6075|smart-link],  where need to do some additional changes in NACH form generated.

h2. Use Case:

* Document Generation stage - NACH form content/format update

h2. Document Generation stage - NACH form:

* NACH form is generated on Document Generation stage.
* This story is linked to ML-6075, in which SFDC has already done some changes on the Physical NACH form format yet there are few new changes that needs to be taken care of as below:

# "To Debit" field to have an extra value - "*SB-NRO*". The new values now shall be "*_SB/ CA/ CC/ SB-NRE/ SB-NRO/ Other_*"
# The Title of the Mandate instruction form should be bolder and placed between hashtags -*##Mandate Instruction Form for NACH ##*
# When a print is taken, the Dimensions of the mandate has to be as per NPCI standards. - *8” x 3 2/3”*
# Require 2 more *“dots”* to be added for the 3rd mandate at the bottom and the dot size must be reduced to achieve point #3.

*PFA Nach Form*
acceptance: The Physical NACH form is generated as per attached document and is updated with the latest expected changes mentioned in description.

key: ML-10247
summary: New VISHESH accounts to be included in CBS APIs
description: h3. Story:

New VISHESH accounts to be included in CBS APIs

h3. Use Case:

# Data entry → Search Existing Customer API
# Open New Account screen → Account Type LOV update
# Create New Account API Details Update

h3. Applicable to:

Org 3 all products - MEL(all products), PL, HL, LAP & Gold Loan

h3. Search Existing Customer API Details:

Data entry → Search Existing Customer API

SVC Name: CBS_SearchCustomer

*For IFBL workflow - New development needed & same should be tested.*

* Currently, for IFBL cases system searches for all accounts except Shakti and PARAM account category.
* Here, system should include PARAM accounts in the list, where now system should search for all accounts except SHAKTI sub-category of account. Should work same as Bank workflow.

----

h3. Open New Account screen → Account Type LOV update:

!New acc opening screen-20211129-105843.png|width=1422,height=800!

* On Disbursement screen → for create new account flow, there is a field as “Account Type” → under this field now only “Vishesh ALSA” should be visible as a LOV & autopopulated.
* No other values should be visible to user, as now system should allow users to create only Vishesh accounts.

----

h3. Create New Account API Details:

After Sanction -> Disbursement screen -> Create new account button → On click of this button, this api gets triggered. First, create customer happens and after that is successful, create account gets triggered (existing functionality)

SVC Name: CBS_CreateAccount

* Currently, SFDC sends PARAM account details under Create new account API tags i.e. "productType"=”2000' & "subProductType"=”5004”. 
* Now, Vishesh ALSA product details should be sent *always* under Create New Account API instead of PARAM details.
* Details of this account are as below:

|*NEW ACC TYPE*|*NEW SUB_TYPE*|*Product Description*|
|2000|5011|Vishesh ALSA|

* Tags under which the details sent in the api are:
** Acc type under "productType" = 2000
** sub_type under "subProductType" = 5011
* PFA create account API details for reference

[^CBS_Create Account.txt]


acceptance: * For IFBL workflow, system now includes PARAM accounts as well in search existing customer API. 
* CBS Search Customer API includes new VISHESH accounts for both Bank & IFBL workflows, & same are visible to user on front end.
** Currently in Search Existing Account API, system searches for all accounts except SHAKTI sub-category of account. Now, in the list of accounts, new VISHESH accounts should also be visible under front end table.
* On Open New Account screen → Account Type LOV now shows “Vishesh ALSA” as a value on front end & no other account type is there.
* CBS Create Account API now send VISHESH account details always instead of PARAM always.

key: ML-10245
summary: Debit Card API to trigger as per the toggle selection done for creating new account
description: h3. Story:

Debit Card API to trigger as per the toggle selection done for creating new account

h3. Use Case:

# Debit card toggle button visibility
# New T&C content to be displayed on New Account opening screen
# After Sanction -> Disbursement screen -> Create new account button
# If user opted for Debit Card, then this API trigger to happen

h3. Applicable to:

Org 3 all products - MEL(all products), PL, HL, LAP & Gold Loan

h3. Details:

*Debit Card - Toggle button on new account opening screen:*

* Refer screenshot attached for reference
* Currently while data entry i.e. before sanction, there is a toggle button on new account opening screen for all the projects as “Do you want cheque Book”. Similarly, now there should be 1 more toggle visible besides this toggle as “Do you want Debit Card”.
* This debit card toggle button will also have same logic as of Cheque book toggle i.e. if applicant is literate then only this  toggle will be visible on front end and debit card api will trigger only if user opts for the same.
** Debit card toggle will not be visible on front end at all, if applicant is illiterate. 
** Refer story for logic - [https://fincap.atlassian.net/browse/ML-6400|https://fincap.atlassian.net/browse/ML-6400|smart-link] 
** Field “Literate Type” is added for all the products → Only for Primary Applicant → on Employment screen under Personal Details
* The toggle button behavior should be same as cheque book toggle. This toggle should show default value as NO. User can toggle it to Yes, if they want to opt debit card.

----

*New T&C content to be displayed on new account opening screen, before/after sanction both:*

# When user selects New account opening flow, then when he lands on Before & After sanction -> New account opening screen new T&C content to be displayed at the bottom of screen as below:
# {{I/We state, declare, confirm and agree that the Bank has duly explained to me/us that IDFC Param/ Vishesh Asset linked Savings account (ALSA) will be converted to Vishesh Savings account where there is a requirement to maintain Average Monthly Balance (AMB) requirement of Rs 5,000/-. Charges basis latest schedule of charges hosted on bank website will be applicable if: -}}
{{a) Loan account not set-up within 3 (three) months of Asset Linked Savings Account opened (i.e. Param / Vishesh account) and/or}}
{{b) Loan account closed and no other Live Asset relationship with IDFC FIRST Bank}}
# There should a *checkbox* before the content as we have for the consents on disbursement screen.
# As taking consent is mandatory before performing any action, hence same ticking this checkbox is mandatory for user to enable the ‘Open Account’ button. Open account button should be disabled till user checks the consent.

----

*Debit card API trigger after sanction:*

* If user has marked the above new debit card toggle as YES & he lands on After sanction -> New account opening screen and clicks on "Open Account" button, then a Debit card API should be triggered.
* API Trigger to happen only in below flow:
** Create Customer 
** Create Account
** Cheque book API & Debit card API - If create customer & account is successful, then only cheque book & debit card APIs should get triggered. This logic is already there for cheque book api, same should be there for debit card.
** Refer flow screenshot attached for reference 
* This debit card api is a backend api i.e. SFDC triggers this at backend and no results are visible to customer on frontend.
* Debit card API details are in below document:

[^CBS_Debit Card.txt]


acceptance: # “Do you want Debit Card” toggle button is visible to IRO/MRO on New Account Opening screen while data entry i.e. before sanction
# Debit card toggle button is only visible for literate applicants and not for illiterate applicants - same as cheque book toggle implemented.
# New T&C consent content is visible to user on front end which is mandatory for him to tick to initiate Open Account flow.
# Debit Card API gets triggered if user has opted for debit card on After sanction -> disbursement screen when he clicks on "Open Account" button

key: ML-9701
summary: FICO scorecard rejection reason should be visible on front end
description: *Story*

As an IRO, I should be able to view the FICO/Scorecard Reject reason on the front end

*Use Case*
IRO → Before Sanction flow → 2nd FICO callout screen (after the Loan & Product screen)

*Details*

* Currently a pop up is displayed on the SFDC frontend when a Rejection is received from FICO (PFA Screenshot - Fico Error). This should instead *displayed in the component* along with a *Reject reason* as in case of POSIDEX (PFA of Screenshot - Posidex example_Error)
*  Need to implement when stage = *Reject*   & sub-stage = *Scorecard Reject*.
* SFDC needs to read tag *_"DeclineReason"_* and this is already being done and saved under field Loan Application Detail → Stage → “Error Message“. This same field should be visible on front end.

*_\[Please Note - The above POSIDEX screen shot is just for your reference. A similar implementation of error message has to be done for FICO after the Loan & Product screen]_*

[~accountid:5e65f17a308ac10ced39d6d4] [~accountid:5e1822e2c578120daca5b494] [~accountid:5fb8dccbf8b012006977d6d6] 
acceptance: IRO should be able to view the FICO/Scorecard Reject reason on the front end

key: ML-9574
summary: As a IRO User, I would like to update the minimum loan amount to 60k for the MEL product.
description: As a IRO User, I would like to update the minimum loan amount to 60k for the MEL product.

As a IRO/BCM User, I would like to update the minimum loan amount to 60k for the MEL product.

*Use Case* - 

For MEL Product, the minimum loan amount is 60000k for all the respective schemes.

*Details* - 

Below is the manual input screen for the Loan Amount to be entered by an IRO User.

!image-20210924-053324.png|width=642,height=132!

The second screen is the input screen for BCM to update the Loan Amount - 

!image-20210924-053534.png|width=50%!

|*Scheme Code*|*Scheme Name*|*Loan Amount*|
|55637|RURAL MICRO ENTERPRISES LOAN-BANK|-Rs. 45,000- 50,000            ----------> 27%-
Rs. >50,000 – 1,00,000           ---------->26%
Rs. > 1,00,000 – 2,00,000           ---------->24%
Rs. > 2,00,000 – 3,00,000           ---------> 23%|
|58694|MEL-REPEAT BANK|-Rs. 45,000- 50,000            ----------> 27%-
Rs. >50,000 – 1,00,000           ---------->26%
Rs. > 1,00,000 – 2,00,000           ---------->24%
Rs. > 2,00,000 – 3,00,000           ---------> 23%|
|58695|MEL PLUS BANK|-Rs. 45,000- 50,000            ----------> 27%-
Rs. >50,000 – 1,00,000           ---------->26%
Rs. > 1,00,000 – 2,00,000           ---------->24%
Rs. > 2,00,000 – 3,00,000           ---------> 23%|
|57368|RURAL SURROGATE MEL – BANK|Rs. >300,000 –5,00,000             ---------->23%|
|55636|RURAL MICRO ENTERPRISES LOAN-IFBL|-Rs. 45,000- 50,000            ---------->28%-
Rs. >50,000 – 1,00,000            ---------->27%
Rs. > 1,00,000 – 2,00,000            ----------> 25%
Rs. > 2,00,000 – 3,00,000            ---------->24%|
|58697|RURAL MEL REPEAT-IFBL|-Rs. 45,000- 50,000            ---------->28%-
Rs. >50,000 – 1,00,000            ---------->27%
Rs. > 1,00,000 – 2,00,000            ----------> 25%
Rs. > 2,00,000 – 3,00,000            ---------->24%|
|58696|MEL PLUS IFBL|-Rs. 45,000- 50,000            ---------->28%-
Rs. >50,000 – 1,00,000            ---------->27%
Rs. > 1,00,000 – 2,00,000            ----------> 25%
Rs. > 2,00,000 – 3,00,000            ---------->24%|
|57369|RURAL SURROGATE MEL – IFBL|Rs. >3,00,000 –5,00,000             ---------->24%|

* *Configurational Changes -* 
* Here is the link to the  [https://idfcfirstbank-rural--preprod.my.salesforce.com/a0z?fcf=00B2w000008L902|https://idfcfirstbank-rural--preprod.my.salesforce.com/a0z?fcf=00B2w000008L902] , Master Scheme Objecct, where minimum loan amount field to be updated to 60000k.
* Custom Metadata type needs to be updated with the minimum loan amount,here is the link in preprod - [https://idfcfirstbank-rural--preprod.my.salesforce.com/m04?setupid=CustomMetadata|https://idfcfirstbank-rural--preprod.my.salesforce.com/m04?setupid=CustomMetadata] 
acceptance: Minimum Loan amount field to be above 60000k.

IRO user to input the data on the mentioned field.

BCM user to input the data on the mentioned field in the underwriting stage. 

key: ML-9529
summary: As a System User, I would like to update the new field on Integration Object with the timestamp value which will capture the response timing in milliseconds.
description: *Changes to be done :* 

Create a new field in the Integration Message  Object- TAT (Response Parse)

As there is not Before Update trigger of IM, in apex class IMessageAfterUpdateTriggerHandler calculate the TAT.

TAT is to be calculated only when Status field of IM is changed from ‘In Progress’ to ‘Responded’

Stop the IM trigger processing during the update of the field.



||*Object*||*Field Name*||*Data Type*||
|Integration Message|{{TAT (Response Parse)}}|Number|

**This is applicable for all Business Unit - HL,PL,LAP,MEL,MEL+,Repeat.

This field is not editable
acceptance: Response timing is stored after any integration call.

Response timing is stored in milliseconds.

Response timing is stored in the mentioned field.

Response timing is stored after the request is received.

key: ML-9526
summary: Proper District Names to be displayed and districts with no crops also to be handled in Agri Section 
description: As a UW or BCM, the user should be able to select the list of districts which are applicable for the corresponding state retrieved from the loan application state under the dropdown field District in the Agri Income section for the Agri Income selection. The districts should also be displayed in such a way that the districts with crops are to be populated in an alphabetical order. Districts with no crops are to be removed from the list of districts 

The district names should come proper as per the state and it should only come in the dropdown if it has the crops. Dependent fields should be visible or reset after selecting or changing the parent fields

Districts list should be retrieved from the Global Masters of District (type as District) and the districts labels are available in the field “Name”
acceptance: nan

key: ML-9505
summary: Rural CPV Cases - RCPV and OCPV Comments Labels Update
description: As a UW, the user should be able to view the below mentioned text in the comments label for the corresponding verification types OV and RV

* OCPV (Self Employed) : *Please mention Trade Reference Check remarks, Relationship with Applicant and Person Met Info in Comments*
* RCPV : *Please mention Relationship with Applicant and Person Met Info in Comments*
* OCPV (Salaried) : *Please mention Relationship with Applicant and Person Met Info in Comments*
acceptance: nan

key: ML-9499
summary: Need to send updated values of Pan and Form 60 in APIs 
description: h3. Story:

Need to send updated values of customer in APIs - CBS create customer & create account

h3. Use Case:

* Applicable to - MEL, PL, HL & LAP (All Products)
* Screen - Disbursement screen
* APIs - CBS Create Customer & CBS Create Account
* Flow - Disbursement -> Create New IDFC Account flow

h3. Details:

*Create Customer*

# SVC Name - CBS_CreateCustomer
# Currently Identifier stamped in CKYC Identifier is flowing. All the identifiers master is already maintained at backend with codes such as below:
## !image-20210906-124348.png|width=934,height=234!
# Now if multiple identifiers are added for the primary applicant, then below identifiers should flow under this request. 
## If PAN is added for primary applicant, then PAN should flow in this
## If PAN is not is added for primary applicant, then whatever 1st identifier is added that will flow.
# Rest API should remain as current implemented. Values flown under tags are as below and tag names will remain the same and same names will be repeated:
## "idTp1" - Identifier code is flown under this tag
## "idNm1" - Identifier number is flown under this tag
# PFB API Req - Search for "idtfcn" array

[^Create Customer.txt]

*Create Account*

# SVC Name - CBS_CreateAccount 
# Tag - "form60Flag"
# If form 60 is selected then “1” should flow in Create account API in below Tag. Currently, “S” is flowing which is wrong.
# If form 60 is NA then “N” will flow - as currently working.
# PFB API Req

[^Create Account.txt]


acceptance: All the updated values are flowing to CBS from SFDC as mentioned in description for below APIs:

# SVC Name - CBS_CreateCustomer
# SVC Name - CBS_CreateAccount

key: ML-9486
summary: Org 3 | User Story 2 | Open ECS Due Day value should match the Acceptable Due Days value stamped in the scheme master
description: h3. User Story:

As a IRO/MRO, I should be able to go ahead with Open ECS only when all the expected criteria’s are satisfied so that correct data stamping will happen.

h3. Use Case:

# Disbursement screen → Manual Data Entry → OPEN ECS functionality
# Applicable for → All MEL products → MEL, MEL+, MEL Repeat, Cust. Journey, HL, LAP and PL- Both Bank and IFBL Flow
# Refer attachment for screenshot, video & component details

h3. Details:

*Current:*

# Currently, when existing Open ECS are found for a customer in a new loan application, all the existing ECS options are provided to the customer in the Open ECS Mandate drop-down, if the tenure and balance amount of loan application are valid.
## Existing implementation [https://fincap.atlassian.net/browse/ML-6091|https://fincap.atlassian.net/browse/ML-6091|smart-link] 
## Here, system validates Open ECS mandate details (fetched from Finnone basis of customer’s CRN), wherein the ECS balance & tenure are compared with the loan details i.e. Loan amount & tenure.
## If the norms are met then application is considered as Open ECS, otherwise it is considered as Fresh ECS.
# In case of multiple repayment account options are fetched in existing ECS check Ex: HDFC and ICICI i.e. multiple accounts are fetched from FinnOne for that CRN, then all are displayed to the user on front end and its given to user to select one of the bank after customer’s consent.

*Expected:*

# In this story, 1 more validation/criteria needs to be introduced once the OPENECS API returns response and existing Open ECS Mandate are found linked with the CRN, from Finnone.
# Due Day Value will be received from the OPen ECS api response. 
# If the DueDay value matches value as stamped in the Due Day master for that Product and Workflow, the case will be eligible for OPen ECS and User can move ahead with OPen ECS
# If the DueDay value does not match the value as stamped in the Due Day master, then OPen ECs will not be eligible and user will go ahead with Fresh ECS

* The options in the Open ECS Mandate drop-down are to be populated only when these criteria are fullfilled for an ECS:-
*# Value in tag “DueDay” received in the OPENECS API response is to be compared with the value stamped in Acceptable Due Days in the Due day master for that Product and Workflow.
*# Other current running validation’s/criteria’s should remain as is of ECS balance & tenure

*Finnone Submit*

* ECS details are flown to FinnOne and same should remain as is.
acceptance: # Along with ECS tenure & balance logic, system now runs 1 more logic of “DueDay value matches the Acceptable Due Days value as stamped in the Due Day Master as given in description.
# If the logic is met then only user is able to select that ECS details from front end.
# If the logic is not met, user should be able to move with fresh ECS
# If the OPen ECS Validation are failed then User can move with Fresh ECS of the same bank details are received from Open ECS (Existing Functionality)
# If Open ECs is successful and user still moves with Fresh ECS then he should not be allowed to Move with same bank details as received from Open ECS(Existing Functionality)

key: ML-9485
summary: Org-3-User Story-1- As a user I want to store the acceptable EMI payment due day for a scheme in the scheme masters in SFDC for MEL
description: # A field to be introduced in the Scheme masters: Acceptable Due Days, only for BU = MEL
# The field to store only the day pertaining to a certain scheme for EMI repayment.
# Data Type: Numeric, e.g. 02, 05, 10
# Field Type: Comma Separated
# The value to be updated when the scheme masters are updated by FinnOne, in case any change in the existing value in the field is made.
acceptance: MEL Scheme masters should have due day value populated.

key: ML-9475
summary: User Story 7: API 4 Details - Part 2
description: h3. User Story:

As a IRO/MRO, when I will click on Check Status button, then API 4 should get triggered and SFDC should show me latest response on front end

h3. Prerequisite:

[https://fincap.atlassian.net/browse/ML-6081|https://fincap.atlassian.net/browse/ML-6081|smart-link] - Check Status button is visible to user on front end & user has clicked on it

h3. Use Case:

# Eligible for NACH Scan condition → User Initiated NACH Scan on Document Generation Screen
# Timer for the NACH scan is ended and user is either performing esign or estamp
# *Physical NACH Status = In Progress or Response time exceeded* & User clicks on Check Status button from front end, below API 4 to trigger

h3. Details

# In continuation to [https://fincap.atlassian.net/browse/ML-6081|https://fincap.atlassian.net/browse/ML-6081|smart-link] , when user clicks on *A Check Status* button and below API should be triggered. 
# !image-20210901-073627.png|width=672,height=522!



*API Details:*

# On click of Check Status button, SFDC will check the value of Physical NACH Scan and Mandate ID on the bank detail record and update the fields on front end respectively.
# If the value of *Physical NACH Status = In Progress* *or Response time exceeded*
## An API, API_4 will be triggered to get the status directly from SFDC to Mule.
## The values of Physical NACH Status, Mandate ID, UMRN and Rejection Reason on bank detail object and Physical NACH Status and Mandate ID on front screen will be updated accordingly.
# Verification request via API_4, will be used to fetch the transaction status in single or bulk.
# If Mandate ID present for this Bank detail then same will flow under tag “TpslRegNo” otherwise mandate ID will not flow. Always, MerchantRequestNo will flow in this API.
# *During development, API structure of API 4 got completely changed and hence now same is covered as a CR under* [https://fincap.atlassian.net/browse/ML-10517|https://fincap.atlassian.net/browse/ML-10517|smart-link] 

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default","localId":""},"content":[{"type":"tableRow","content":[{"type":"tableHeader","attrs":{"colwidth":[63]},"content":[{"type":"paragraph","content":[{"type":"text","text":"API","marks":[{"type":"strong"}]}]}]},{"type":"tableHeader","attrs":{"colwidth":[66]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Field in API","marks":[{"type":"strong"}]}]}]},{"type":"tableHeader","attrs":{"colwidth":[80]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Field on Frontend","marks":[{"type":"strong"}]}]}]},{"type":"tableHeader","attrs":{"colwidth":[68]},"content":[{"type":"paragraph","content":[{"type":"text","text":"UI Component","marks":[{"type":"strong"}]}]}]},{"type":"tableHeader","attrs":{"colwidth":[83]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Field at Backend","marks":[{"type":"strong"}]}]}]},{"type":"tableHeader","attrs":{"colwidth":[78]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Object ","marks":[{"type":"strong"}]}]}]},{"type":"tableHeader","attrs":{"colwidth":[78]},"content":[{"type":"paragraph","content":[{"type":"text","text":"New/ Existing","marks":[{"type":"strong"}]}]}]},{"type":"tableHeader","attrs":{"colwidth":[61]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Data Type","marks":[{"type":"strong"}]}]}]},{"type":"tableHeader","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Possible Values","marks":[{"type":"strong"}]}]}]}]},{"type":"tableRow","content":[{"type":"tableHeader","attrs":{"rowspan":10,"colwidth":[63]},"content":[{"type":"paragraph","content":[{"type":"text","text":"API_4","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"rowspan":10,"colwidth":[66]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Status"}]}]},{"type":"tableCell","attrs":{"rowspan":10,"colwidth":[80]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical NACH Status"}]}]},{"type":"tableCell","attrs":{"rowspan":10,"colwidth":[68]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Mandate Status section"}]}]},{"type":"tableCell","attrs":{"rowspan":10,"colwidth":[83]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical NACH Status"}]}]},{"type":"tableCell","attrs":{"rowspan":10,"colwidth":[78]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank Detail"}]}]},{"type":"tableCell","attrs":{"rowspan":10,"colwidth":[78]},"content":[{"type":"paragraph","content":[{"type":"text","text":"New"}]}]},{"type":"tableCell","attrs":{"rowspan":10,"colwidth":[61]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Free Text"}]}]},{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"The value received in API request will be a single alphabet. The value to be populated in the field will be basis the given mapping:-(This should be configurable and Master changes)"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"I - Initiated"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"A - TPSL Rejected "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"B - TPSL Approved"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"R - TPSL Rejected"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"U - NPCI Acknowledged "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Z - Final Rejected"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"S - Final Approved "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"C - Cancelled"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":"D - Deactivated"}]}]}]},{"type":"tableRow","content":[{"type":"tableHeader","attrs":{"rowspan":2,"colwidth":[63]},"content":[{"type":"paragraph","content":[{"type":"text","text":"API_4","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[66]},"content":[{"type":"paragraph","content":[{"type":"text","text":"TpslRegNo"}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[80]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Mandate Id"}]}]},{"type":"tableCell","attrs":{"colwidth":[68]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Mandate Status section"}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[83]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Mandate Id"}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[78]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank Detail"}]}]},{"type":"tableCell","attrs":{"colwidth":[78]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Front Screen – New;"}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[61]},"content":[{"type":"paragraph","content":[{"type":"text","text":"AlphaNumeric"}]}]},{"type":"tableCell","attrs":{"rowspan":2,"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[68]},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]},{"type":"tableCell","attrs":{"colwidth":[78]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank Detail object - Existing"}]}]}]},{"type":"tableRow","content":[{"type":"tableHeader","attrs":{"colwidth":[63]},"content":[{"type":"paragraph","content":[{"type":"text","text":"API_4","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[66]},"content":[{"type":"paragraph","content":[{"type":"text","text":"RejectionReason"}]}]},{"type":"tableCell","attrs":{"colwidth":[80]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Rejection Reason"}]}]},{"type":"tableCell","attrs":{"colwidth":[68]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Mandate Status section"}]}]},{"type":"tableCell","attrs":{"colwidth":[83]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical NACH Rejection Reason"}]}]},{"type":"tableCell","attrs":{"colwidth":[78]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank Detail"}]}]},{"type":"tableCell","attrs":{"colwidth":[78]},"content":[{"type":"paragraph","content":[{"type":"text","text":"New"}]}]},{"type":"tableCell","attrs":{"colwidth":[61]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Free Text"}]}]},{"type":"tableCell","attrs":{"colwidth":[183]},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]}]}]}
{adf}
acceptance: # *A Check Status* button is visible to user on front end under Physical NACH Scan section, for updating the status of Physical NACH Scan field
# User is be able to click on Check Status button and the API 4 is triggered as given in description

key: ML-9473
summary: User Story 3: Initiate NACH Scan timer pop-up - Part 2
description: h3. User Story:

As a IRO/MRO, I should be able to perform NACH Scanning on Document generation screen, if user proceeds with Physical option for mandate registration.

h3. Use Case:

# Initiate NACH Scan on Document Generation Screen

h3. Details:

!image-20210901-073602.png|width=672,height=522!

# In continuation to [https://fincap.atlassian.net/browse/ML-6077|https://fincap.atlassian.net/browse/ML-6077|smart-link] , Once the section is visible to user he will then click on *Initiate NACH Scan* button on which below to follow.
# When user clicks on *Initiate NACH Scan* button, then a configurable timer should be visible as a pop-up to user on front end, during which user is expected to perform NACH OCR via SO App.
## Timer should be similar as we have for Esign/Estamp
## Keep the timer of 10 mins for now (Configurable)
## !image-20210712-052823.png|width=1422,height=677!
On timer pop-up, a message should be displayed as “Please scan Mandate using SO APP for LAN – XXXXXX.”
## Cancel option should not be there on pop-up
## SFDC screen to be freeze when Timer is running
## Status to sync back if status received within the 10 mins timer from inbound API i.e. if API2 is received then pop-up should get closed.
# When this pop-up is visible to user on front end - the value of Physical NACH Status to be updated to “In Progress”, both on front screen and bank detail record.
# If Mandate status not received within the timer visible to user on front end i.e. API 2 is not received and timer gets exhausted, then Physical NACH Status to be updated as “Response time exceeded” and Check status button will get enabled in this scenario.
# API triggering on *Initiate NACH Scan* button is covered in [https://fincap.atlassian.net/browse/ML-6079|https://fincap.atlassian.net/browse/ML-6079|smart-link] 
# Check Status button is covered in [https://fincap.atlassian.net/browse/ML-6081|https://fincap.atlassian.net/browse/ML-6081|smart-link] 
acceptance: # A new section is visible for all the BUs → On Document Generation screen → right after Document Generation is successful, below document generation card → with Section header “NACH Scan”.
# After declaring, user is able to view & click on *Initiate NACH Scan* button. Clicking on this timer is visible on front end.
# Section shows all the fields/messages as given in description.

key: ML-9466
summary: User Story 5: User initiates NACH Scan via SO App - API 2
description: h3. User Story:

As a IRO/MRO, I should be able to perform NACH Scanning via SO app, and communication between SO app & SFDC should happen accordingly.

h3. Use Case:

# Eligible for NACH Scan condition → Initiate NACH Scan on Document Generation Screen
# User opens SO app & starts NACH scanning process 
# Communication via API 1 & API 2 between SFDC & SO App during this stage.

h3. Details:

# Below APIs should be read by SFDC, only when timer is on on front end. Otherwise should not be read by SFDC, and SFDC should not send any response back to SO app.
# In continuation to [https://fincap.atlassian.net/browse/ML-6077|https://fincap.atlassian.net/browse/ML-6077|smart-link] , when user clicks on *Initiate NACH Scan* button and timer is visible on front end, then user is expected to do NACH Scan process on SO App.
# User initiates the physical NACH Scan process from SO App. Here, SO App requests SFDC for bank details via an inbound API - API_1 covered in [https://fincap.atlassian.net/browse/ML-6079|https://fincap.atlassian.net/browse/ML-6079|smart-link]

*API 2*

# After API 1 an inbound API from SO app to SFDC, API_2 will bring the Mandate ID and Physical NACH Status in request.
# The value as received in field “Status” in request of API_2 will be sent in response of API_2.
# The value of Physical NACH Status and Mandate ID on bank detail record will be updated once API_2 sync to SFDC.
# Once the timer is over of 10 mins or API 2 response is received, below to happen:
## Timer pop will be closed and updated status as received under API 2 will be visible on front end under Physical NACH Status.
## User can initiate e-stamp/sign & Stage substage will be updated as per the same.
# Once the timer is over but API 2 response is not received then, below to happen:
## Timer pop will be closed & Physical NACH Status to be updated as “Response time exceeded” 
## -Check status button will get enabled in this scenario.-
# When Response time gets exceeded OR API 2 response is received then, user can initiate e-stamp/e-sign & Stage substage will be updated as per the same
# Rejection reason should always be displayed on front end besides Mandate ID as per below field mapping.
# The value will be updated as per below table basis the field in API -

||*API*||*Field in API*||*Field on Frontend*||*UI Component*||*Field at Backend*||*Object*||*New/ Existing*||*Data Type*||*Possible Values*||
||*API_2*|Status|Physical NACH Status|Mandate Status section|Physical NACH Status|Bank Detail|New|Free Text|# Initiated;  2. Final Approved|
||*API_2*|TpslRegNo|Mandate Id|Mandate Status section|Mandate Id|Bank Detail|Front Screen – New; Bank Detail object - Existing|AlphaNumeric|752723617|
||*API_2*|ErrorDescription|Rejection Reason|Mandate Status section|Physical NACH Rejection Reason|Bank Detail|New|Free Text|Mandateregisteredsuccessfully|
||*API_2*|MandateType|NA|NA|NACH Type|Bank Detail|New|Free Text|Printed|
||*API_2*|isOCRMatch|NA|NA|OCR Type|Bank Detail|New|Free Text|True,  False|

[^API 2 (342c092a-13fd-463c-b45f-e5ef8fc08885).txt]


acceptance: Communication between SO App & SFDC is happening as given in description via 2

key: ML-9463
summary: NACH Scan section visibility to DV Ops - Checker/Maker user
description: h2. User Story

As a DV Ops checker/Maker user, I should be able to view the NACH Scan section while performing DV ops checker actions.

h2. Use Case

# DV Ops user
# Stage Sub-stage → “DV Ops” - “Checker Pending” or “Maker Pending”
# Screen → Instrument Details tab
# PFA screenshot

h2. Details

# A DV Ops user should also view the complete “NACH Scan” section as visible to MRO on Document Generation screen as covered in story - [https://fincap.atlassian.net/browse/ML-6077|https://fincap.atlassian.net/browse/ML-6077|smart-link] on Instrument Details tab, while performing DV OPS CHECKER and Maker.
# Complete Nach Scan section functionality, buttons enabling/disabling, conditions should work as it will work on Document Generation screen for MRO. Hence, all the APIs should work here as well.
# Refer screenshot for section placement and same should be enabled to Ops user only on Stage Sub-stage → “DV Ops” - “Checker Pending” or “Maker Pending”
# DV ops user should able to perform NACH Scan process or check status and same should be able to view the updated status as received on front end.
# Rest [https://fincap.atlassian.net/browse/ML-9459|https://fincap.atlassian.net/browse/ML-9459|smart-link] will remain as is and only section visibility is covered under this ticket.

h2. Assumptions: 

# If section visibility cannot be handled at stage sub-stage level, then it will be visible always on Instrument Details screen.
# Section working should be like:
## Maker Pending stage - visible& buttons would be editable as - [https://fincap.atlassian.net/browse/ML-6081|https://fincap.atlassian.net/browse/ML-6081|smart-link] 
## Checker Pending stage - visible & editable - [https://fincap.atlassian.net/browse/ML-6081|https://fincap.atlassian.net/browse/ML-6081|smart-link] 
acceptance: # “NACH Scan” section is visible to DV Ops Checker user under screen Instrument Details tab.
# Section placement is done as given in screenshot.
# Complete section functionality is working as covered in different stories:
## [https://fincap.atlassian.net/browse/ML-6077|https://fincap.atlassian.net/browse/ML-6077|smart-link] 
## [https://fincap.atlassian.net/browse/ML-6078|https://fincap.atlassian.net/browse/ML-6078|smart-link]
## [https://fincap.atlassian.net/browse/ML-6078|https://fincap.atlassian.net/browse/ML-6078|smart-link]
## [https://fincap.atlassian.net/browse/ML-9466|https://fincap.atlassian.net/browse/ML-9466|smart-link] 
## [https://fincap.atlassian.net/browse/ML-6080|https://fincap.atlassian.net/browse/ML-6080|smart-link]
## [https://fincap.atlassian.net/browse/ML-6081|https://fincap.atlassian.net/browse/ML-6081|smart-link]

key: ML-9459
summary: User Story 8: Submit to FinnOne Conditions - HL & LAP
description: h3. User Story:

As a DV by Ops Checker, I should be able to click on FinnOne Submit button when below conditions are achieved.

h3. Prerequisite:

# [https://fincap.atlassian.net/browse/ML-6077|https://fincap.atlassian.net/browse/ML-6077|smart-link] & user has initiated NACH Scan process
# For HL & LAP on document generation stage no conditions are there and hence for HL & LAP cases will be submitted to DV Ops maker/checker as per current flow i.e. NACH scan status will not hamper moving ahead from document generation screen. User can submit the case to DV Ops.

h3. Use Case:

# Eligible for NACH Scan condition → User Initiated NACH Scan on Document Generation Screen
# User has initiated NACH Scanning process and results are there or in progress
# User completes Esign/Estamp → MRO submits case to DV by Ops
# DV Ops maker is completed → Loan is under DV ops Checker → Now clicking on FinnOne submit button as per below conditions

*Overall Condition:*

# 24hrs logic need to implement and this hrs should be kept configurable in SFDC. Currently keep it as 24 hrs.
# If any of the below condition is achieved then case can be submitted to Finnone by DV Ops Checker:
## Any status from below (Initiated/In Progress) & >=24 hrs, then case can move ahead +OR+
## Success status irrespective of hours, then case can move ahead
# Otherwise case cannot be submitted to FinnOne in any of the other combinations

*Details:*

As a DV Ops Checker, I want to be able to submit a case to FinnOne only when Physical NACH scan is successful and a Mandate ID has been received or case is stuck for more than 24 hours*(this time to be kept configurable on SFDC, it can be reduced or increased)*.

# When Loan is in ownership of DV Ops Checker and on click of Submit button at the bottom of the screen, post DV Ops maker completion, *SFDC to let the case get submitted to FinnOne if* :-
## Physical NACH Status = Initiated/ NPCI Final Approve/ Acknowledge/ TPSL Approve/ Final Approved/ TPSL Approved/ NPCI Acknowledged/ Final Approved AND Mandate ID is not blank
+*OR*+
## The time difference between system time when user clicks on Submit button and NACH Scan datetime field value stored in bank detail object +>= 24 hours+
# If the The value of Physical NACH Status = In Progress/Error/ Response time exceeded/ Deactivated /TPSL Initial Reject/ NPCI Final Reject NPCI Initial Reject/ Cancelled/ TPSL rejected/ Final rejected, then there are 2 conditions which needs to be considered as below:
## If the time difference between system time when user clicks on Submit button and NACH Scan datetime field value stored in bank detail object is +>= 24 hours+, then on click of Submit button by DV Ops Checker, *SFDC to let the case get submitted to FinnOne*
## If the time difference between system time when user clicks on Submit button and NACH Scan datetime field value stored in bank detail object is +< 24 hours+, then on click of Submit button by DV Ops Checker, *SFDC to NOT let the case get submitted to FinnOne.*
### A validation message should be displayed as "Case can be submitted to FinnOne only after 24hrs of NACH Scan or If NACH is approved.“

*Batch to schedule:*

*A scheduled batch to run every 5 hours* (to be kept configurable), which will check if the time difference between when the batch was run and value in NACH Scan datetime field >= 24 hours.

# If time difference >= 24 hours, loan will be auto-submitted to FinnOne even if Mandate ID is not generated and Physical NACH Status =In Progress/ Error/ Response time exceeded/ Deactivated /TPSL Initial Reject/ NPCI Final Reject NPCI Initial Reject/ Cancelled/ TPSL rejected/ Final rejected.
# If time difference <= 24 hours, no action to be taken on the loan by the batch job.
acceptance: # DV Ops Checker is able to click on FinnOne submit as per the conditions mentioned in description:
## If any of the below condition is achieved then case can be submitted to Finnone
### Any status from below (Initiated/In Progress) & >=24 hrs, then case can move ahead +OR+
### Success status <24 hrs, then case can move ahead
## Otherwise case cannot be submitted to FinnOne in any of the other combinations
# *A scheduled batch runs every 5 hours* (to be kept configurable), which will check if the time difference between when the batch was run and value in NACH Scan datetime field >= 24 hours.

key: ML-9454
summary: Org 3- Reduce Karza API timer to 60 Sec
description: # The timer for Karza name match IMPS when KARZA_NAME_MATCH API is triggered is to be reduced to 60 seconds. Currently it is set at 2 minutes.
# Karza Match For IMPS Status to be set as “Response time Exceeded” in case no response is received via the API in 60 seconds.
acceptance: # User should be able to proceed ahead with Mandate registration, if API response is not received in 60 seconds/1 minute.
# “Karza Match For IMPS Status” on Applicant record to be set as “Response time Exceeded” in case no response is received via the API in 60 seconds.
# Customer name drop-down to be enabled again, when timer of 60 seconds expires.

key: ML-9453
summary: Org 3- Increase Karza name match IMPS attempt for each applicant/co-applicant
description: # Currently, for each applicant/co-applicant on the loan application, user can attempt Karza name match IMPS only once.
# In the proposed implementation, Karza name match IMPS can be attempted for a configurable number of times for each applicant/co-applicant.
# The configurable count to be set to 3 for now.
# For each Applicant/Co-Applicant, user can attempt Karza name match IMPS by clicking on Verify button upto the configurable count.
# If the number of attempts are exhausted, the name of Applicant/Co-Applicant to be removed from Customer name drop-down for attempting Karza name match IMPS.
acceptance: # Customer name drop-down in the IMPS Section while registering mandate should contain the name of all Applicant/Co-applicants before 1^st^ attempt.
# If user has attempted name match 3 times for the same applicant/co-applicant(to be kept configurable), Applicant Name to be removed from the drop-down.
# User should be able to proceed ahead with Mandate registration post the 1^st^ attempt of Karza name match IMPS, whether response is received successfully or not.

key: ML-9452
summary: Org -3 : Beneficiary Name Status stamping logic to be updated
description: 1. Currently, once IMPS_FUNDTRANSFER API response is received, a system check happens which compares value received in tag “cdtrNm” with the account holder name captured on the bank detail record.

* The value of “cdtrNm” is stamped in field “Beneficiary Name” on the bank detail record.


2. In the proposed implementation, Beneficiary Name is to be compared with field “Applicant Full Name” stored on Applicant record where Type = Applicant.
3. The field: Beneficiary Name Status on bank detail record to be populated basis this comparison.

acceptance: # The Beneficiary Name Status to be populated basis comparison between Applicant Full Name for the primary applicant and the Beneficiary name received in IMPS_FUNDTRANSFER API.
# There should be no change in the existing workflow for Mandate registration basis Beneficiary Name Status.

key: ML-9415
summary: Different Income Heads to be added for the PD Cases - Household, Rental, Business, Other Income
description: As a UW, the user should be able to view the different income heads post the case submission or closure

* Business Income
* Household Income
* Rental Income
* Other Income



These different income heads would be available on PD Case object - existing case object and include the new fields 

(These labels to be in sync with the Source of Income in Income Object Details)



The corresponding mapping sheet of the Income Head and Assessment Question Title (Assess_Engine__Question__c):

* Business Income - Monthly turnover / revenue (Rs.)
* Household Income - Income from other earning members in the family (Rs.)
* Rental Income - Income from Rental (Rs.)
* Other Income - Income from Farm Equipment (Rs.) + Income from Other Sources (Rs.)



Also the business expense to be populated at the case object level - For the total business expense for different Personas as per the proposed logic
acceptance: As a UW, the user should be able to view the different income heads in the corresponding fields on PD Income Details object or Case Object 

SFDC Team to consume the same from our end to create the new records in the income details object against the loan application 

key: ML-9405
summary: New fields to be visible on Office CPV case details for Self Employed to BCM while UW
description: h3. User Story:

As a BCM, I should be able to view 2 new fields on Office CPV case details, for Self Employed applicants, while UW

h3. Use Case:

# BCM UW Stage - Verifications Tab - Office CPV - Refer below screenshot
# Applicable to - MEL

h3. Details:

*New Fields to be visible*

* The updated fields *"Trade Reference Check"* and *"Trade Reference Check Remarks"* for Self-Employed Office CPV case are visible on the PD App, but post submission of the case from the app to SFDC → the fields and their values are not visible in the case details on the UW view in SFDC. 

!image-20211028-111950.png|width=1393,height=399!

* The fields should be visible under BCM → Verifications → CPV → Office CPV section → Other Details

*Remove field*

!image-20211028-112956.png|width=1386,height=390!

* The fields for Neighbor check have been removed from the PD app, but they are still visible in the details for the case on UW view.
* Need to remove field visibility from front end
acceptance: * 2 new Trade reference field should be visible in UW View as mentioned in desc
* Neighbor check field should be removed from front end for UW

key: ML-9396
summary: Org 3 | UMRN no. stamping for EMANDATE API 
description: h3. User Story:

UMRN number should be stored at bank detail object as received in Digital Mandate response.

h3. Use Case:

* Disbursement Screen → Manual Data Entry → Digital Mandate
* Applicable for → All Products → MEL, MEL+, MEL Repeat, Cust. Journey, PL,HL & LAP and gold loan

h3. Details:

*Existing*

# A field: UMRN Number is already present at Bank detail object, as created in [https://fincap.atlassian.net/browse/ML-6078|https://fincap.atlassian.net/browse/ML-6078|smart-link] 
# This field already stores value received during NACH Scan API 3, on document generation.

*Expected*

# This field should also store value when user performs digital mandate process on Disbursement screen. 
# In an inbound API SVC Name: EMANDATE, the value is received in tag “UMRN”.
# The same existing backend field should be used to stamp this value as well because a loan can be eligible for either digital mandate OR physical nach scan process. Hence, we can use same field for value stamping.
# The value to be stamped in the backend in the bank detail record, when the value in field Merchant Transaction Reference Number on main bank detail record = "MerchantTxnRefNumber" tag value in EMANDATE API response.

*Finnone details:*

# Same should flow to FinnOne under "UMRN" tag in FinnOne submit API, under the instrument detail section. The same is also flowing currently for NACH OCR Eligible cases
# FYI point - The value captured in UMRN Number in the latest main bank detail record to be flown to FinnOne. 
acceptance: # System captures UMRN number for both the below processes as eligible, at backend UMRN field created at main bank record object:
## Nach Scan OR
## Digital Mandate
# For, digital mandate - The value is stamped in the backend in the bank detail record, when the value in field Merchant Transaction Reference Number on main bank detail record = "MerchantTxnRefNumber" tag value in EMANDATE API response.
# Only the value present in the latest bank detail record is flown to FinnOne.
# If the UMRN Number is blank in the latest bank detail record, no value should flow to FinnOne.

key: ML-9392
summary: Bulk Approval/Rejections of loan curtailment deviation for MSME/SC-ST to be actioned by person higher than Original Approving Authority level
description: h3. Story:

As a L2 and above level BCM, I should be able to bulk approve & reject the MSME cases assigned to me.

h3. Use Case:

# BCM → L2 and above Level → Both Bank & IFBL

h3. +Current Details+ 

# As per the functionality built in [https://fincap.atlassian.net/browse/ML-2061|https://fincap.atlassian.net/browse/ML-2061|smart-link] , currently below happens:
## BANK: 
### L1 BCM cannot *Approve* or *Reject* MSME cases. Only L2 or above level BCMs can take these decisions on MSME cases.
### Hence, L1 BCM will *Forward* the MSME cases to L2 or above level BCMs
## IFBL:
### L1 BANK BCM cannot *Approve* MSME cases & L1 IFBL BCM cannot *Reject* MSME cases. 
#### Only L2 or above level BANK BCMs can approve IFBL MSME cases &
#### L2 or above level IFBL BCMs can reject IFBL MSME cases.
### Hence, L1 IFBL BCM will *Forward* the MSME case to IFBL L2 or above level of BCMs for *Reject*
### L1 IFBL BCM will *Recommend* the MSME case to L1 or above level BANK BCMs for MSME cases to *Approve*
# +In System, MSME cases can be categorized by flag maintained at loan application detail “MSME Profile Case”. If this is checked, then that loan is to be considered as a MSME case loan.+
#* This flag is checked when PSL Main Category for a case is having any of the below values:
#** Manufacturer or Engineering
#** Medical and Health Services
#** Other Services
#** Retail Trade
#** Tourism
#** Wholesale Trade

----

h3. +Expected Details+ 

*IFBL Recommend Logic Update:*

# Currently, IFBL L1 BCM can *Recommend* any MSME case to +L1 or above+ level Bank BCMs for cases to *Approve.*
# Here, need to restrict as → IFBL L1 BCM can *Recommend* any MSME case to +*L2 or above*+ level Bank BCMs for cases to *Approve.*

----

*New radio buttons visible*

# This needs to be implemented only for Bank BCMs & for MSME cases. Below should be visible only when a Bank UW is taking Forward decision for a MSME case. 
# On Underwriting → Decision pop-up → Only when “Forward” Decision is selected by a BCM → Then, 2 new radio buttons should be visible as → 
## Approval
## Rejection
# BCM can select only 1 option at a time and then only should be able to take forward decision.
# This value should be saved at backend, so that same can be used for worklist filtering. This will help system to understand for what reason the cases are forwarded to higher authority BCMs.
# Rest functionality of Decision pop-up & decisions should remain as is.

----

*New Worklists creation*

# Here, due to this restriction for L1 UWs → the MSME cases are piled up at L2 or above end and they need to have Bulk Approve or Reject functionality. 
# New worklists should be visible to L2 & above level BCM under Underwriting as below:
## Bank BCMs - 
### MSME Rejection - 
#### This will show all the Bank MSME cases which are forwarded to that BCM level for Rejection, from any Bank BCMs.
#### SFDC should read if it is a MSME case → Forward decision is taken with “Rejection” value (New field introduced above) 
### MSME Bank Approval - 
#### This will show all the Bank MSME cases which are forwarded to that BCM level for Approval, from any Bank BCMs
#### SFDC should read if it is a MSME case → Forward decision is taken with “Approval” value (New field introduced above) 
### MSME IFBL Approval - This will show all the IFBL MSME cases which are recommended to that BCM level for Approval, from any IFBL BCMs
## IFBL BCMs - 
### MSME Rejection - This will show all the IFBL MSME cases which are forwarded to that BCM level for Rejection, from any IFBL BCMs

----

*Bulk Approve / Reject*

# Once the cases are visible to Bank/IFBL BCMs under respective worklists, Bulk Approve / Reject functionality should be available to them as existing available to Bank BCM.
# Bulk Approve or reject process should be same as implemented → Checkboxes will be visible in front of each record under that worklist → top right there will be button visible as Approve / Reject. Clicking on button that action should work.
# Bulk Approve functionality should be available under worklist to L2 & above level BCM → “MSME Bank Approval” & “MSME IFBL Approval” → Only to Bank BCMs. And, “MSME Rejection” → for both Bank & IFBL BCMs
# *Conditions:*
## While Approving → If any of the case from the multiple selected is having any Deviation open i.e. no decision is taken on a deviation, then bulk approve should does not work only for that loan and works for all the other loans where the condition was satisfied. 
### Any other validations applied under bulk approving, same should available here i.e. all the conditions should work as is.
### All the validation should be displayed as current implemented.

## While Approving → If all the deviations has decisions taken on it, then bulk approve activity should be considered as successful and message should be visible as:
!image-20210813-164841.png|width=511,height=84!

### Stage substage of the selected cases should be updated to “Sanction” “Insurance Pending” 

## While Rejecting → There is no condition which needs to be taken into consideration and whatever the status might be, the selected cases should be marked as Rejected i.e. bulk reject activity should be considered as successful and message should be visible as “Selected underwritings “REJECTED” successfully\!
### Stage substage of the selected cases should be updated to “Reject” “Rejected” 

----
acceptance: * Bulk Approval/Rejections of loan curtailment deviation for MSME/SC-ST to be actioned by person higher than Original Approving Authority level - This requirement is achieved.
* 2 new radio buttons are visible to BCM UWs while taking forward decision on MSME cases
* New Worklist are visible as expected given in description
* Bulk approve / reject functionality is working as expected given in description

key: ML-9391
summary: Every MSME cases should be closed within 14 days TAT
description: h3. Story

As a IRO & BM, I should receive an email with the list of all the MSME cases which will be getting auto-cancelled in system if not processed, so that we can work on the same.

h3. Use Case

# IRO & BM → Email should be triggered by system
# MSME cases if not processed → auto-cancelled in system

h3. Details

* As per RBI Compliance Issue (Grade-II), every MSME cases should be closed within 14 days TAT and there is no deviation allowed. As of now there is no tracking in SFDC for this clause. Hence, need to have below conditions in SFDC.
* +In System, MSME cases can be categorized by flag maintained at loan application detail “MSME Profile Case”. If this is checked, then that loan is to be considered as a MSME case loan.+
** This flag is checked when PSL Main Category for a case is having any of the below values:
*** Manufacturer or Engineering
*** Medical and Health Services
*** Other Services
*** Retail Trade
*** Tourism
*** Wholesale Trade

*IRO & BM → Email should be triggered by system*

# An email should get triggered to IRO & BCM on their email IDs on 10^th^ day of a MSME case i.e. 10th day after the created date of that case.
# The email should be triggered only for below users:
## IRO - Only to those IROs who has punched the MSME cases -and are not yet decisioned by BCM-
## BCM - Who has the MSME cases in his UW pending queue -and has not yet taken any decision on it-
## Cases should be considered under this criteria are those whose Stage substage is not FinnOne-FinnOne Submit on the day of trigger
# Email Description: 
## To: Intended IROs & BCMs Email IDs
## Subject: Auto Cancellation of MSME Cases
## Body: To comply with MSME regulations, these cases would be auto-cancelled in system if not processed within 3 days. Below should be the list of cases.
## Cases details to be displayed are LAN, Customer Name, Stage.
# Email should be auto triggered by SFDC as soon as the 10th day is started for such cases i.e. at night.

*MSME cases if not processed → auto-cancelled in system*

# The MSME cases which are not processed by IRO & BCM even after email trigger or due to any other reason then such MSME cases should get auto cancelled by SFDC irrespective of its stage on the 13th day i.e. 13th day after the created date of that case.
# SFDC should auto cancel such MSME cases on 13^th^ day, Stage substage should be updated for such cases as “Cancel” “Auto-Cancelled”
# Such cases can be re-logged in by IRO post auto cancellation.
acceptance: # IRO & BM → Emails are triggered by system on 10th day of a MSME case i.e. 10th day after the created date of that case, with the details mentioned in description
# MSME cases if not processed till 13th day → SFDC auto-cancelled such cases irrespective of its stage on the 13th day i.e. 13th day after the created date of that case.
## Stage substage should be updated for such cases as “Cancel” “Auto-Cancelled”

key: ML-9302
summary: Posidex Reject Reason should be visible on front end
description: h3. Story

As a IRO, I should be able to view the Posidex Reject reason on front end

h3. Use Case

# IRO → Before Sanction flow → Posidex callout screen

h3. Details

* Currently, in Posidex Reject the details are not visible to IRO on front end. PFA Screenshot
* On above screen, Reject reason should also be visible to IRO. Need to implement when stage sub-stage → Posidex - Posidex Reject.
* SFDC need to read tag "LoanRejectReason" and this is already being done and saved under field Loan Application Detail → Stage → “*Error Message*“. This same field should be visible on front end.
* PFA Posidex Reject Response.
acceptance: Posidex Reject Reason are visible on front end as received in tag

key: ML-9301
summary: MEL - FICO Rejection stage and substage changes for Posidex Refer rejected cases
description: h3. Story:

This requirement is related to [https://fincap.atlassian.net/browse/ML-4263|https://fincap.atlassian.net/browse/ML-4263|smart-link] . 

ML-4263: Is applicable for PL and this story will be applicable only for MEL, MEL + & Repeat.

h3. Details:

# Complete logic developed in [https://fincap.atlassian.net/browse/ML-4263|https://fincap.atlassian.net/browse/ML-4263|smart-link] will remain as is. 
# Only change is in the deviation codes for MEL.
# The Deviation received in FICO response on rejection should be saved in SFDC and visible to UW in UW screen. This will be non editable to the UW.
# The deviation codes for MEL Posidex Rejection are as below:
## Live Loan Rule:
### PSX_LLR_034 - Live loan count reject rule
### PSX_LLR_035 - Live loan count reject rule
### PSX_LLR_036- Live loan count reject rule
## Previous rejected rule :
### PSX_PRR_017 - Application previously rejected to be declined
## Bad customer rule :
### PSX_BAD_005 - Bad performance on CFL - Declined
### PSX_BAD_007 - Bad performance on CFL - Declined
## Flagged account :
### PSX_T2M_001 - Flagged Account Decline
# When the case is rejected by above condition then Message should be visible to IRO - Existing functionality should be there as is - Customized message should be visible as “Posidex Policy Norms not met - \{_Deviation received in Response name from above 4_}”
acceptance: Updated deviation codes are visible to UW & IRO for a MEL, MEL + & Repeat case.

key: ML-9299
summary: Hard stop at Insurance screen if more than 1 MEL loans are Active for a Customer
description: h3. User Story:

As a user, I should not be able to proceed ahead if the customer is having multiple live loans, as having only 1 active loan is allowed for a customer.

h3. Use Case:

# For MEL Repeat → After BCM Sanction → Insurance screen → Next
# For MEL+ → Insurance screen →Next
# API → FinnOne Submit API

h3. Details:

# Requirement is - A customer can have only 1 MEL and 1 MEL+ or repeat loan as an active loan and same needs to be maintained on SFDC.

!image-20210804-143154.png|width=710,height=484!



*Front end*

# Hence, for MEL+ & MEL Repeat cases on Post sanction Insurance Screen → Next, if that customer is having more than 1 active loan then a hard stop will be there on this screen and user cannot proceed ahead the loan punching for that particular journey.
# If for the customer on CRN level there are multiple loan IDs which are having Live Loan as yes then there should be a hard stop at below stages:
## MEL+ journey → Insurance screen → Next
## MEL Repeat → After BCM Sanction → Insurance screen → Next
## When user will click on Next for such cases, then a message should be displayed on the Insurance details as "Customer has following active loans- abc, xyz. Xyz would be closed from system at the time of disbursal.Please close other loans manually before proceeding further. “
Where xyz is latest loan.
## With this message visible on screen, complete screen will become read only and user cannot Move ahead
## Hard stop on stage sub-stage → Sanction - Insurance Pending
# If there are only 1 previous active loans including this loan, then above Message should not be visible to user on front end.
# Once, the previous active loans (other loans than current) are closed, then current loan should be proceed ahead when user opens the same and should be landed on Disbursement screen, to continue loan punching.

*Logic*

# This check should be applied only for MEL+ & MEL Repeat cases 
# To implement this hard stop, SFDC needs to check the loans taken for that customer (who is opting loan - Primary Applicant) i.e. check the CRN of that customer and check for all the loan IDs associated to it. 
# Here, products to be considered are - MEL (Except PM Swanidhi) , MEL+ & MEL Repeat disbursed loans.
# For the associated loan IDs check for the Live Loan check box, if more than 1 loan (previous/base loans) is having live loan count as yes - Excluding current punching loan, then current i.e. latest loan ID should not be allowed to proceed ahead of after sanction → insurance screen.
# Here, if current loan along with one more previous loan is the live/active loan and all the previous loans are closed/inactive then same validation should not run and user can proceed ahead without any hard stop at insurance stage.

*MEL+ FinnOne Submit Logic Change*

# Currently, the base loan is sent to FinnOne on which the MEL+ offer was raised. This logic needs to be updated with - now when a MEL+ case will be submitted to FinnOne then “Latest disbursed active base loan” should be flown and not the base loan on which the offer was raised.
## FinnOne ID should be send to FinnOne in the tag - “TopupAggrementID”
# If no Active loan is present then topup flag should not be send to FinnOne (As currently implemented)
# This logic is currently working correct for a Repeat journey. Same should be updated for MEL+.
acceptance: # For MEL+ & MEL Repeat cases on Insurance Screen → Loan details pop-up if that customer is having more than 1 active loans Apart from this loan then a hard stop is there on this screen and user cannot proceed ahead the loan punching for that particular journey.
# This check is applied only for MEL+ & MEL Repeat cases.
# A pop up for such cases is visible with a message as “"Customer has following active loans- abc, xyz. Xyz would be closed from system at the time of disbursal.Please close other loans manually before proceeding further. “
Where xyz is latest loan.
# The “Latest disbursed active base loan” is sent to FinnOne in MEL+ journey.

key: ML-9296
summary: Document upload to be made mandatory if any additional identifier is added on applicant details screen
description: h3. Story:

As a IRO/MRO, I should be asked to upload the document as mandatory for the Additional Identifier added on Applicant Details screen.

h3. Use Case:

# Check for additional identifier added → From Applicant details screen → Personal Identifier section → Additional Identifier
# Document upload to be made mandatory → On Document Upload screen

!image-20210804-112234.png|width=50%!

!image-20210804-112239.png|width=1196,height=367!

!image-20210804-112244.png|width=564,height=191!



h3. Details:

*Current:*

# Currently, If POI & POA is selected on applicant screen and is mandatory, then user has to upload the document for the identifier selected under POI & POA on Document screen, as a mandatory document.
# But, still there is a provision for user to add additional identifier on Applicant screen and no document upload is mandatory in such scenario.

*Expected:*

# If user has added any additional identifier other than the identifier which is selected under POI & POA then that identifier document upload will be mandatory for the user.
# e.g. If under POI → user has selected Aadhar & under POA → user has selected Passport. And added an Additional Identifier → Voter ID, then whatever identifier user has added other than POI/POA identifier, that identifier document upload will become mandatory, means here Voter ID will become as a mandatory doc upload for user.
# The POI/POA doc upload - mandatory/non mandatory conditions/scenarios → will remain as existing. No change in that.
# Here, now system is expected to read the other additional identifier added by user, excluding to what is selected under POI/POA.

*Document Upload Screen:*

# As per mentioned above, system will read the other additional identifier added by user, excluding to what is selected under POI/POA, and same should be visible to user on Document upload screen as a mandatory document to upload.
# As per given above example, here user will now see Voter ID as a separate record under Document screen table and will be visible as a mandatory doc upload. 
# This should work for all the additional identifiers added by the user on applicant screen.
# This should work for all - applicant, co-applicant & guarantor - for all the products.
# Document upload functionality should work as existing and no change in that. As existing, Aadhar masking should work on Aadhar uploaded if additional identifier added is Aadhar.

*Document Details:*

Below are the details for DMS callout -

All such additional identifier documents come under Document type:

|212482|KYC|A|

Document Sub type should be used as per the identifier name selected:

# Voter ID
# Passport
# Aadhar card
# Driving license
# NREGA
# NPR
acceptance: # System reads the other additional identifier added by user, excluding to what is selected under POI/POA, and same is visible to user on Document upload screen as a mandatory document to upload.
# This works for all the additional identifiers added by the user on applicant screen & for all - applicant, co-applicant & guarantor - for all the products.
# DMS (FileNet) call out happens once document is uploaded. All the existing functionality remains as is.

key: ML-9244
summary: Neighbor check 2 and Trade Reference Check changes in Residence and SE Office CPV Cases 
description: For Residence CPV Cases, Neighbor Check 2 fields have to be added along with the existing Neighbor Check 1

Update the existing mapping of Neighbor Check 1 fields as well. Please find the mapping for the respective fields:

* *Neighbor check 1*:      CPV_Neigh_Check_1__c
* *Neighbor 1 Remarks*: CPV_Neigh_Check_1_Remarks__c 
* *Neighbor check 2*:      CPV_Neigh_Check_2__c
* *Neighbor 2 Remarks*: Neigh_Check_2_Remarks__c



For *Self Employed* OV CPV Cases, Trade Reference fields have to be displayed instead of Neighbor Check 

* *Trade Reference Check*: Trade_Reference_Check__c
* *Trade Reference Check Remarks*: Trade_Reference_Remarks__c
* Remove Neigh Check Name and Remarks as well

No changes in the existing data types or drop down values for the above mentioned fields
acceptance: As a BCM or CCM, the user should be able to fill out these below mentioned details for the respective CPV Cases

* Neighbor Check 1 and Remarks for Residence CPV
* Neighbor Check 2 and Remarks for Residence CPV
* Trade Reference Check and Remarks for Office CPV Self Employed

The above mentioned details have to be made as editable for the respective Credit Mangers roles and the existing list of values and validations to be continued on PD App as well

The user should be able to close the cases with these updated details on PD App and the user should be able to view these additional details on UW View as well (Covered by Rural SFDC Team)

key: ML-9243
summary: Resi and office CPV cases can be completed from both SFDC and PD APP 
description: h3. User Story:

As a BCM, I should be able to view & edit Resi/Office CPV case on SFDC as well as PD App

h3. Use Case:

# BCM Verifications stage - Office CPV & Resi CPV
# Applicable to - MEL - All applicant/co-applicant

h3. Details:

# Currently, BCM is not able to view & edit Office & Resi CPV cases on SFDC for MEL, as same are completed via PD App.
# Now, BCM should be able to complete CPV from both SFDC and PD APP. Hence, CPV cases needs to be made View & editable on SFDC front end.
## The functionality will remain same as implemented i.e. cases will be visible to BCM under Cases tab → All Open Cases worklist - Existing functionality just need to enable it
## Cases will be editable only when loan application stage substage = Verification - Verification pending - Existing functionality just need to enable it
# Same field list should be visible to BCM, when he checks CPV case on worklist or via global search
# Status of CPV should be sync in both the system on real time basis.
## If any case is closed from SFDC, then same will not visible on PD app as PD app shows only Open cases - FYI point
## Important point to take care of is - If any case is closed from PD app, then same should be reflected on SFDC.
### Such cases should be visible as closed on SFDC and same should not be editable to BCM
acceptance: * BCM is able to complete the Office & Resi CPV cases from both SFDC & PD App
* Cases status gets synced back real time in both the systems.
* In SFDC, all the previous implementation for closing the cases is enabled as mentioned in description

key: ML-9229
summary: Assessment Engine changes and Case related list changes in Rural Personas
description: # Field level validation on *No of days operational in a month* for all Personas (wherever the field is applicable)
## *Validation* : Number less than or equal to 31 and Number more than zero
## *Validation Message*: Cannot accept any number more than 31 or less than zero
# Display *Persona name* in PD Report post case closure instead of Assessment Name for all Personas
# "*Monthly Turnover/revenue*" in the Income section to be calculated as (Average Order Size)*(No of Orders per Month) for *Textile Manufacturing Persona* on basis of overall amount earned - Also to be handled in the PD Report accordingly
## Monthly Turnover Revenue to be considered for summary section for summary calculation and Machine List Income should not be considered in the calculation
# Remove/Hide *Monthly turnover question* in Cattle Rearer Persona from front end UI - Also to be handled in PD Report accordingly
acceptance: As BCM or CCM, the user should be able to fill out the details as mentioned above in the description in the financial tab

* *No of days operational in a month* for all Personas (wherever the field is applicable)
* "*Monthly Turnover/revenue*" for *Textile Manufacturing Persona*

As a BCM or CCM, the user should be able to view the below changes in the PD Report

* *Persona name* in PD Report post case closure instead of Assessment Name for all Personas

key: ML-9225
summary: Formula Change for the field
description: Formula for below fields need to be changed

Field - % incremental cash flow

Formula:

Total Current Income (which is addition of All Income added in income section)- (Total Income of Previous Loan (Which is added in the same section) /Previous Income))  *100
acceptance: nan

key: ML-9222
summary: Without "ESIGN_BIOMETRIC_CODE" on the Bank detail, user is shown the Adhar Biometric option.
description: # ESIGN BIOMETRIC CODE on bank detail object to be populated basis tag “ESIGN BIOMETRIC CODE” value received in GETIFSCDETAILS API.
# Biometric option to be enabled post selecting Aadhar Based Emandate selection only if ESIGN BIOMETRIC CODE is not blank.
# If ESIGN BIOMETRIC CODE is blank, the option to be disabled/not shown on screen.

Sample Case Loan id : 0102039

Similarly

# Esnd OTp and Send Link option should be visible only if “ESIGN_OTP_CODE"  is visible in GETIFSC API
# If “ESIGN_OTP_CODE” is blank then option should be disabled.
acceptance: Biometric option should be visible when Biometric Code is available in Get ifsc

key: ML-9213
summary: ROI Changes for MEL+ Customer journey
description: For MEL+ Customer journey - on 1st Page the ROI should be changed as per the Loan amount changes . The ROI grid should be same as Currently thee for MEL+.



The Logic should work same as MEL+ normal journey.
acceptance: o

key: ML-9172
summary: Separate Business Categories to be created for Manufacturing, Trading, Services for Rural Personas 
description: As a BCM, the user should be able to select the correct business categories for the Specialized Business Categories

|[Business Category|https://idfc--ruraldev.my.salesforce.com/m0Z?fcf=00B0k000002Gc1E&setupid=CustomMetadata&lsi=3]|[Persona|https://idfc--ruraldev.my.salesforce.com/m0Z?fcf=00B0k000002Gc1E&setupid=CustomMetadata&lsi=4]|[Assessment Name|https://idfc--ruraldev.my.salesforce.com/m0Z?fcf=00B0k000002Gc1E&setupid=CustomMetadata&lsi=6]|
|Manufacturing Business Others|Specialized Business Manufacturing|Specialized Business Manufacturing|
|Trading Business Others|Specialized Business Trading|Specialized Business Trading|
|Services Business Others|Specialized Business Service|Specialized Business Service|

As a BCM, the user should be able to see the Persona under the selected business category in the applicant tab

As a BCM, the user should be able to select the value of constitution from the available dropdown values 

* Public Limited Company
* Individual
* Individual-Mutual Fund
* Partnership
* Proprietor
* HUF
* Trust
* Society
* Private Limited
acceptance: nan

key: ML-9156
summary: MEL-PL Sprint 21 Regression Bugs
description: nan
acceptance: Story for REgression bugs

key: ML-9024
summary: Get Documents API should be read as an attachment by SFDC
description: h3. Use case:

# Highmark Screen → Fetch Bureau Report → Get Documents API
# Document screens → Refresh Button → Get Documents API
# Applicable to all products of Rural
## Highmark screen → IRO & MRO 
## Document screens → IRO, MRO, BCM, CCM, RCU user, Ops user

h3. Current:

# Currently SFDC receives request response as in the text format.
# This caused issues SFDC.

h3. Need to implement:

SFDC need to read the GET DOCUMENTS API as an attachment and then store accordingly.

h3. Assumptions:

Request structure will be same.

h3. WIP Cases Handling:

Not required
acceptance: Get Documents API is read as an attachment by SFDC

key: ML-8986
summary: Agri Income Functionality - New PD Income Details Object Implementation
description: As a BCM or UW, the user should be able to fill out the agri income details on PD App along with other income details on financial tab, once the user has started the respective PD case and completed the applicant tab details so that the respective details filled by UW would flow to Income details on UW layout

For agri income implementation, the global masters of district and crop will be referred for the user selection as picklist and *Income Per Acre* global master will be referred to retrieve agri income per acre basis on the district against the respective state which would be retrieved from branch location field

* On the front end, the BCM or the end user would be able to select from the drop down “*Source of Income*” as Agri income initially and then user will be able to select the list of values for “*District*” and at the back end, the drop down to display the district picklist values dynamically on State retrieved
* In the similar way, the user will be able to select the list of values for “*Crop*” and at the back end, the drop down to display the Crop picklist values dynamically on the selection of District
* Then the user should be able to proceed ahead to fill out details of *Area* (Number of Acres for line item)
* Post entry of these details, the total income from district crop combination will be calculated and the same aggregate value of overall agri income would be updated
* The user should be able to add multiple records with different combinations of district and crop. Basis on this overall agri income has to be displayed in summary section should be available in financial tab along with dairy income
* The user should be able to edit or delete any of the records which were entered earlier in the section
* None of the information related to the agri income previously entered at the IRO stage to be retrieved or will be used in the calculation of agri income in all Persona PD Cases

All the details have to be captured in PD Income details object against the respective fields selected – the other fields related to Dairy Income would be blank in such cases
acceptance: As a BCM or UW, the user should be able to fill out the agri income details under PD Income section on financial tab for a PD Case in PD App. 

* The user should be able to select the district from all applicable list of districts for the given state which would be retrieved from loan application branch location field
* The user should be able to select the crop from all applicable list of crops for a given district which was selected earlier
* The user should be able to see the Income Per acre post selection of crop on basis of crop and district combination 
* The user should be able to enter the area for the corresponding crop and district combination, post which the income will be auto-calculated (Area*Income Per Acre)
* The user should be able to view and edit the details which were entered earlier - Agri income records
* The user should be able to add multiple records of crop and district combination
* The user should be able to view the overall Agri income in the PD Income Details section
* The user should be able to view the overall Agri and Dairy Income in the summary section  

key: ML-8985
summary: Dairy Income Functionality - New PD Income Details Object Implementation
description: As a BCM or UW, the user should be able to fill out the dairy income details on PD App along with other income details on financial tab, once the user has started the respective PD case and completed the applicant tab details so that the respective details filled by UW would flow to Income details on UW layout

For dairy income implementation, the global masters of animal and breed will be referred for the user selection as picklist and *Income from each animal* global master will be referred to retrieve dairy income from each animal basis on the state which would be retrieved from branch location field

* On the front end, the BCM or the end user would be able to select from the drop down “Source of income” as dairy income initially and then user will be able to select the list of values for “*Animal*” and “*Breed*” and then be able to proceed ahead to fill out details of “*Number of Milch animals*”
* Post entry of these details, the total income from animal breed combination will be calculated and the same aggregate value of overall dairy income would be updated
* The user should be able to add multiple records with different combinations of animal and breed. Basis on this overall dairy income has to be displayed in summary section should be available in financial tab
* The user should be able to edit or delete any of the records which were entered earlier in the section
* None of the information related to the dairy income previously entered at the IRO stage to be retrieved or will be used in the calculation of dairy income in all Persona PD Cases

All the details have to be captured in PD Income details object against the respective fields selected – the other fields related to Agri Income would be blank in such cases
acceptance: As a BCM or UW, the user should be able to fill out the dairy income details under PD Income section on financial tab for a PD Case in PD App. 

* The user should be able to select the animal from all applicable list of animals
* The user should be able to select the breed from all applicable list of breeds
* The user should be able to see the Income from each animal on basis of animal and breed combination for a given state which would be retrieved from loan application branch location at the backend
* The user should be able to enter the number of milch animals for the corresponding animal and breed combination, post which the income will be auto-calculated (Number of Milch Animals*Income from each animal)
* The user should be able to view and edit the details which were entered earlier - Dairy income records
* The user should be able to add multiple records of animal and breed combination
* The user should be able to view the overall Dairy income in the PD Income Details section
* The user should be able to view the overall Dairy and Agri Income in the summary section  

key: ML-8984
summary: New Income details section to be created against PD Case to capture Dairy and Agri Income
description: As a BCM/UW, the user should be able to add the income records “Agri Income” and “Dairy Income” under the income section in Financial tab of PD App, so that the details can be sent to Income details on UW layout. It has to be displayed on income details in PD PDF report and BCM completing PD information tab from the community page records

* On Persona case, income of applicant or co-applicant is captured and same needs to be shown on SFDC front end to BCM under Income Details Tab → PD Income Details section as records
* PD Community should not populate or retrieve the entries added by IRO and would create new records in PD Income details (End user - BCM/UW to enter the new details)
* Rural SFDC should read values for below Income Heads: *Agricultural* Income and *Dairy* Income from related list
* On Persona, these values are captured under various Persona cases for both app and co-app
* Rural SFDC needs to read the data from a Persona case → Related list → Question Responses 
** Business Income
** Household Income
** Rental Income
** Other Income
* *State* Name should be added in the PD Income Details section [~accountid:5ed4ae522bea5a0c2f1584d4] [~accountid:5eff355078797a0bb70b44cc] 
* Rural SFDC would still retrieve the respective records from the related list - The corresponding mapping document with the respective question titles will be maintained at Rural SFDC Team end - PD Community team not to maintain  the above mentioned income heads in the PD Income Details related object
* On the summary section in Financial tab of PD Case (Community Page), the Agri and Dairy Income heads to be displayed together - under one common heading as “*Agri and Dairy Income*”
* In the similar way, household, rental and other income heads to be displayed under one common heading as “*Household, Rental and Other Income*”
* *Business Income* head should be present on PD Report instead of *Total Income* head [~accountid:5ed4ae522bea5a0c2f1584d4] [~accountid:5eff355078797a0bb70b44cc] 
* Rename the group name from *Income (First section)* to *Business Income* in UI, Summary and PD report for all personas
* Updated Credit Req: *Income Details* section to be renamed as *Agri and Dairy Income* in the financial tab [~accountid:5f97a52db38e610071fb23b8] [~accountid:5ffd47fdb66825010eed3e32] [~accountid:5ed4ae522bea5a0c2f1584d4] [~accountid:5eff355078797a0bb70b44cc] 



E.g. System will find values under persona as below:

* Owner has source of Income from Dairy, then PD Team needs to create a record under head Dairy Income
* Then UW/BCM to add values of - Animal, Breed, Number of Milch Animal
* As per above data, PD Community needs to show a record on the related list (new object)
* Rural SFDC Team should read the attached PD Income Details fields and create separate records for all the Dairy Income Head as available
* Owner has source of Income from Agri, then PD Team needs to create a record under head Agri Income
* Then UW/BCM to add values of - District, Crop, Area (Number of Acres)
* As per above data, PD Community needs to show a record on the related list (new object)
* Rural SFDC Team should read the attached PD Income Details fields and create separate records for all the Agri Income Head as available

 

PD Income Details object and its respective fields creation

* "Source of Income"
* "Total Income"
* "CaseID"
* "Applicant/Co-Applicant"
* "Breed"
* "Animal"
* "Number of Milch Animal"
* "Income Per Animal"
* "Crop"
* "Districts"
* "Area"
* "Income Per Acre"
* "Persona"
* “Loan Application ID”

These newly created related lists have to be made available on the loan and case related lists page layouts
acceptance: As a BCM or UW, the user should be able to fill out the dairy income and agri income details under PD Income section on financial tab for a PD Case in PD App

Similar acceptance criteria as quoted in [https://fincap.atlassian.net/browse/ML-8985|https://fincap.atlassian.net/browse/ML-8985|smart-link]  and [https://fincap.atlassian.net/browse/ML-8986|https://fincap.atlassian.net/browse/ML-8986|smart-link]  would be applicable 

Along with the afore mentioned points, additional points:

* The user should be able to see the *State* Name for which the afore mentioned list of values to be displayed for the respective dependent drop down fields - Covering both Agri and Dairy Income 
* The user should be able to view on the summary section in Financial tab of PD Case, the Agri and Dairy Income heads displayed together - under one common heading as “*Agri and Dairy Income*”
* In the similar way, the user should be able to view the household, rental and other income heads under one common heading as “*Household, Rental and Other Income*”
* The user should be able to view the Agri and Dairy Income details in PD Report which would be created on PD Case
* The user should be able to view the income heads in the summary section in PD Report (pdf report file)
* The user should be able to view the income details entered for Agri and Dairy Income in the related lists against the case object - PD Income details

key: ML-8817
summary: MEL-PL Sprint 20 Regression Bugs
description: nan
acceptance: To add regression bugs

key: ML-8792
summary: Applicant office and residence address should be stamp at Applicant object
description: At Applicant object there are 2 Lookup fields

# Residential address
# Office address

SFDC Needs to stamp these field with concatenated data of the address

Residential address = Address line 1+ Address ine 2+ address line 3 + Landmark + district +State + City + Pincode.

Same logic should be applicable for All products.
acceptance: CPV photo should be visible to UW

key: ML-8790
summary: IFSC Code should flow in Caps in FinnOne
description: Currently IFSC Code is flowing in small Case to finnone submit request due to which the ADB cases are going in exception._x000D_
_x000D_
Ex: = idfb008978_x000D_
_x000D_
Proposed_x000D_
In SFDC and FinnOne submit request IFSC Code should flow be stored in Caps - _x000D_
_x000D_
Ex: - IDFB008978_x000D_
_x000D_
This should be applicable for all scenario and all products
acceptance: IFSC Should flow in caps

key: ML-8731
summary: MEL-PL Sprint 19 Regression Bugs
description: nan
acceptance: This is for regression bugs

key: ML-8730
summary: MEL+ CJ - Regression bugs
description: nan
acceptance: To report regression bugs 

key: ML-8719
summary: ADB Logic should run on finnone submit Request creation
description: Currently the logic for ADB is set on FInnOne submit stage substage. Same should be run on finnone request generation
acceptance: Currently the logic for ADB is set on FInnOne submit stage substage. Same should be run on finnone request generation

key: ML-8718
summary: Karza match logic changes for ADB Condition
description: For Scenario where Karza IMPS Match is valid and Karza match percentage is > 65% the case should be ADB cases_x000D_
_x000D_
For scenario where Karza IMPS Match is not valid then Karza cndition should be considered for ADB. And All other condition should be true for ADB Case
acceptance: ADB condition should be true for Karza valid cases with percentage > 65% and non valid case

key: ML-8716
summary: Aadhar mandate Switching functionality
description: There should be a functionality where aadhar mandate option should be off from backened and user will not get aadhar mandate option on front end.

We should be able to switch between Aadhar Mandate visibility - True and false
acceptance: na

key: ML-8649
summary: CAM Report Field mapping update
description: h3. User Story:

As a BCM/IRO, I should be able to view the correct values on CAM Report, as captured on loan application.

h3. Use Case:

# Applicable for MEl -and PL-
# BCM - CAM Report - 2 fields
# IRO - Document Generation - CAM Report - 2 fields

!image-20210618-062128.png|width=1449,height=482!

h3. Current:

Fields - “Present Job/Business Years” & “Present Job/Business Months” are currently mapped with Applicant fields - “Duration At Current Job (Years)” & “Duration At Current Job Months” but, these fields are not captured for Applicant and hence, CAM Report is always showing value as 0.

h3. Expected Details:

CAM report fields “Present Job/Business Years” & “Present Job/Business Months” should display values as per below logic, for Applicant:

# If Applicant Employment Type = Self-employed, then only “Present Job/Business Years” field should display the value from “No. of years in current business” field, captured on Employment screen.
# If Applicant Employment Type = Salaried, then both “Present Job/Business Years” & “Present Job/Business Months” fields should display the value from the “Duration At Current Job Years” & “Duration At Current Job Months”, captured on Employment screen.

Field mapping should be done for Applicant only, as CAM report section is of Applicant only.

!image-20210618-063018.png|width=1190,height=320!

!image-20210618-063040.png|width=1182,height=234!
acceptance: CAM Report Fields - “Present Job/Business Years” & “Present Job/Business Months” mapping is updated as per above logic and correct values are displayed as captured on Employment screen, as per Applicant Employment type.

key: ML-8644
summary: CKYC Search API should be read as an attachment by SFDC
description: h3. Use case:

KYC flow → CKYC Search

h3. Current:

# Currently in ORG3, SFDC is using v2 of CKYC integration.
# In this version SFDC receives request response as in the text format.
# This caused text max limit issue and resulted in search API not receiving to SFDC.

h3. Need to implement:

# SFDC need to read the CKYC Search API as an attachment and then store accordingly.
# CKYC will be sending response to SFDC as an attachment.
# PFA Request Response 

h3. Assumptions:

# CKYC Download API already works as an attachment and in this ticket only need to work on CKYC Search API.
#  SFDC will send request to CKYC as current implemented and no change in that.
acceptance: SFDC reads CKYC Search API as an attachment and then store accordingly.

key: ML-8632
summary: Only for MEL: Income records to be auto populated from PD app
description: h3. User Story:

As a BCM, I should be able to view the income records under Income section displayed on Income Details tab.

h3. Use Case:

# BCM UW Stage - Income Details Tab - Income Details Sections
# Records/rows visible as fetched from Persona data
# Applicable only to MEL product - BCM - Bank & IFBL.

h3. Details:

!image-20210617-132203.png|width=1480,height=397!

# On Persona case, income of applicant & co-applicant(s) is captured and same needs to be shown on SFDC front end to BCM under Income Details Tab → Income Details section as records.
# System should -not- *replace* the entries added by IRO and should create new records of Persona. *Only Persona added income should be visible on front end* and all the other entries added by IRO/BCM should be deleted.
# SFDC should read values for below Income Heads:
## Agricultural Income
## Dairy
# System needs to match the data captured on Persona with the SFDC fields, like below:
## On Persona, these values are captured under various Persona’s for both app & co-app.
## SFDC needs to read the data from a Persona case → PD Income Details Object
## Need to search for tags - as given in attachment
## Read/store this for both app & co-app.
## Need to combine the values so as to match with SFDC Heads and show as a record on front end.
# E.g. System will find values under persona as below:
## Owner has source of Income from Dairy = Yes, then SFDC needs to create a record under Head Dairy
## Then need to read & add values of - Animal, Breed, Number of Milch Animal 
## As per above data, system needs to show a record on front end.
# SFDC should read the attached Persona fields (multiple - app/co-app wise) and create separate records for all the Income Heads as available.
# Existing functionality should be achieved here i.e. single record for same source of income for a App/Co-app should be created.
acceptance: # SFDC reads persona data entered for Income Details and shows records on front end to BCM as per the logic explained above for below income heads:
## Agricultural Income
## Dairy
# BCM is able to view records under Income Details Tab → Income Details section.
# System should -not- *replace* the entries added by IRO and should create new records of Persona. *Only Persona added income should be visible on front end* and all the other entries added by IRO/BCM should be deleted.

key: ML-8631
summary: Expense Details fields auto population from Persona Details
description: h3. User Story:

As a BCM, I should be able to view the Expense Details auto populated from the values as captured on Persona case.

h3. Use Case:

# BCM UW Stage - Income Details Tab - Expense Details section
# Applicable only to MEL product - BCM.

h3. Details:

!image-20210617-115209.png|width=100%!

h3. No. of Adults & No. of Children fields:

# “No. of Adults” & “No. of Children” these fields are visible to BCM under Income Details Tab → Expense Details section. These are visible at application level on front end.
# These fields are also captured on Resi CPV case as well, for both App & Co-app. 
# Hence, on front end SFDC needs to show the values captured on Resi CPV case. 
## As Resi CPV has values at applicant level, SFDC needs to show sum of both app + coapp and display total values under “No. of Adults” & “No. of Children”
# SFDC needs to read “No of Adults” & “No of children” below from a Resi CPV case and store this for both app & co-app.
# SFDC will replace the data entry done by IRO with the Persona data.
# These values will be auto populated as per above logic but BCM can edit these values populated.

h3. Business Expenses field:

# There is a field as “Business Expenses” under expense details, same also needs to be populated from Persona details.
# SFDC already captures the Business Expenses under ticket [https://fincap.atlassian.net/browse/ML-8561|https://fincap.atlassian.net/browse/ML-8561|smart-link] in table 10 row. Same value should be populated here under this field.
# SFDC will replace the data entry done by IRO with the Persona data.
# This values will be auto populated as per above logic but BCM can edit these values populated.
acceptance: # Below fields under Income Details → Expense Details section are auto populated from below:
## Resi CPV and total of all the list of applicant(s) is visible on front end:
### No. of Adults
### No. of Children
## Persona Details values and total is visible on front end:
### Business Expenses

key: ML-8591
summary: Only for MEL: Adding a new income Head In income section
description: h3. User Story:

As a BCM, I should be able to view a new income header as “Business Income” under Income section on Income Details screen, so that I am able to view the details for the same as captured on Persona case.

h3. Use Case:

# BCM UW Stage - Income Details Tab
## New “Source of Income” value to be introduced as “Business Income”
## Records/rows visible as fetched from Persona data
# Applicable only to MEL product - to BCM - Bank & IFBL

h3. Details:

!image-20210621-122515.png|width=1213,height=262!

!image-20210617-064231.png|width=50%!

!image-20210617-064235.png|width=50%!



h3. “Business Income” - New Income Head for BCM:

# To BCM → on Income Details Tab → under Income Details, when BCM clicks on ADD INCOME button, a new Source of Income value to be introduced as “Business Income”, for all the list of applicant(s).
# When this income head is selected, only 1 field to enter income source should be visible as “Monthly Income from this source”, same as it is visible for other/rental/household Income heads.
# All the other functionality should be same as other/rental/household Income heads. Multiple times income head entries are allowed, but only 1 record should be visible on table outside. This entry will keep on adding the Primary income of the entries added - Existing Functionality. 
# All the latest records of income added should be visible to IRO, if case is returned after adding this income record - Existing functionality.

h3. Records/rows visible as fetched from Persona data

# On Persona case, income of applicant & co-applicant(s) is captured and same needs to be shown on SFDC front end to BCM under Income Details Tab → Income Details section as records.
# System should -not- replace the entries added by IRO and should create new records of Persona.
# SFDC should read values for below Income Heads:
## Household Income
## Other
## Rental Income
## Business Income
# System needs to match the data captured on Persona with the SFDC fields, like below:
## On Persona, these values are captured under various Persona’s for both app & co-app.
## SFDC needs to read the data from a Persona case → PD Income Details Object
## Need to search for persona questions - as given in attachment - PFA sheet for details
## Read/store this for both app & co-app.
## Need to combine the values so as to match with SFDC Heads and show as a record on front end.
# SFDC should read the attached Persona fields and create separate records for all the Income Heads as available.
# Existing functionality should be achieved here i.e. single record for same source of income for a App/Co-app should be created.
acceptance: # To BCM → on Income Details Tab → under Income Details, when BCM clicks on ADD INCOME button, a new Source of Income value is visible as “Business Income”, for all the list of applicant(s). 
## All the functionality is same as mentioned in description
# SFDC reads persona data entered for Income Details and shows records on front end to BCM as per the logic explained above for below income heads:
## Household Income
## Other
## Rental Income
## Business Income
# System -does not- replace the entries added by IRO and creates new records of Persona.

key: ML-8561
summary: BCM UW Stage - New PD Tab visibility
description: h3. User Story:

As a BCM, I should be able to view a new tab under Verifications as “PD” so that I am able to view the Persona case details on this tab.

h3. Use Case:

# BCM UW Stage - Verifications Tab
# New sub menu to be introduced as “PD”
# Applicable to all products but visible only to MEL product.

h3. Details:

!image-20210616-131821.png|width=202,height=162!

# A new sub menu to be visible to BCM under Verifications tab as “*PD*”.
# This tab will be visible to all the BANK & IFBL BCMs and to all the levels of BCM on UW stage.
# This is applicable to all the Products - MEL, PL & MEL Repeat but currently this *tab will be applicable/visible on front end  only for MEL*.

h3. PD Tab:

!image-20210616-160612.png|width=50%!

!image-20210616-160559.png|width=50%!

# When BCM will click on PD sub menu, the screen view and functionality will be same as CPV sub menu. As shown in above screenshots. - existing functionality
# New UI/UX designing should be achieved here.
# At first a collapsed record will be visible with few details & a VIEW button. 
# Clicking on VIEW button, that record will expand and more details will be displayed.
# BCM will be only able to view the details on PD tab, same as of CPV tab view.
# Details will be displayed for both Applicant & Co-applicant.

When the record will be visible in collapsed mode, below fields should be visible:

||*S.N.*||*Field Name*||*PD API Response tag to read*||
|1|Applicant Name|Name of the Applicant for whom the persona case was initiated|
|2|PD Done By|UW who has completed the PD|
|3|PD Status|“Case.Case_Resolution__c” → Result - Closed/Pending|
|4|Applicant Constitution|“Case.Constitution_for_PD__c” → Constitution|

When clicked on VIEW button of a record, below fields should be visible:

||*S.N.*||*Field Name*||*PD API Response tag to read*||
|1|PD Done By|UW who has completed the PD|
|2|Date Of Meeting|PD Closed Date|
|3|Business Category|“Case.Business_Category__c” → Business Category|
|4|Persona|“Case.Persona__c” → Persona|
|5|Nature Of Business|“Case.Nature_of_Business__c” → Nature of Business|
|6|Person Contacted|“Case.Person_Contacted__c” → Person Contacted|
|7|Business Description|“Case.PD_Business_Description__c” → Business Description|
|8|Total Income (Rs)|Assessment_Response Object|
|9|Other sources of Income (Rs)|Assessment_Response Object|
|10|Total Business Expense (Rs)|Assessment_Response Object|
|11|Loan Obligation (Rs)|PD_Obligation__c Object|
|12|Net Disposable Income (Rs)|Assessment_Response Object|
|13|Earning of other members in the family (Rs)|This is one of the Question from *Other Income* Group|
|14|Total Household Expenses (rs)|This should show value from below formula:
(No. of Adults * 1000) + (No. of Children * 750)|
|15|Assets (Rs)|PD_Asset__c Object|
acceptance: # For BCM on UW Stage, New PD Tab is visible under Verifications sub menu.
# Clicking on PD tab, Persona details are visible in the similar way of CPV tab view.
# On PD tab, at first records are visible as collapsed with a VIEW button.
# Clicking on View button of a record, more details are visible of that record.
# Fields visible are as mentioned in description. All the correct values are visible under fields as expected.
# Details will be displayed for both Applicant & Co-applicant.
# New UI/UX design is achieved for this PD Tab.

key: ML-8518
summary: Document to be visible in new format while OTP signing
description: h3. Story:

As a IRO, I should be able to view the latest format of DOGH form while performing OTP signing, on insurance screen post sanction stage.

h3. Use Case:

* After sanction Insurance Screen - OTP signing - New DOGH format 
* Credit Protect - MEL, MEL+, MEL Repeat, PL, Customer Journey,HL/LAP
* Group Suraksha - PL

h3. Details:

# After BCM sanction/approval for any loan application, OTP signing of Insurance DOGH form is performed on Insurance screen, for the applicant(s) who opted for HDFC insurance i.e. Credit Protect or Group Suraksha (for PL only). - existing functionality
# On this screen as given in [https://fincap.atlassian.net/browse/ML-24|https://fincap.atlassian.net/browse/ML-24|smart-link]  , an SMS is triggered to customer for performing OTP signing. In this SMS there is a link, clicking on which customer can view the auto-filled DOGH/Policy document in English. - existing functionality
# This updated form should also be generated at Document generation stage for HL/LAP
# Here, the auto-filled DOGH/Policy document in English visible to customer should be as per the latest format as given in attachment.
## Credit Protect Insurance form and Group suraksha Form format should be visible.
## COVID questionnaire is added as an extra page in this form. Same should also be visible to customer.
# The format & forms data population should work as given in attachment. PFA the same.
# Both SMQ & COVID questionnaire should be considered as a 1 document and OTP signing should be performed on both the documents.

h3. Assumptions:

# As implemented in [https://fincap.atlassian.net/browse/ML-158|https://fincap.atlassian.net/browse/ML-158|smart-link] , SFDC will keep on sending the tag "isDigitallySigned" at applicant level to Emorphis on Document Generation stage.
# This Document Generation will be done by Emorphis and SFDC is not having any role in it.
# SFDC should show auto-filled Policy document with new format only while OTP signing on insurance screen.
acceptance: # Post Sanction on Insurance screen, while performing OTP signing Customer is able to view the auto-filled policy document as per the latest expected format.
# Both SMQ & COVID questionnaire are considered as a 1 document and OTP signing is performed on both the documents.

key: ML-8506
summary: Customer Journey behavior as per the Questionnaire answered
description: h3. Story:

As a Customer, My loan application should get dropped off, if I select YES option for any of the questionnaire question, for Primary Applicant.

h3. Prerequisite:

Questionnaire set is visible on insurance screen as given in [https://fincap.atlassian.net/browse/ML-8450|https://fincap.atlassian.net/browse/ML-8450|smart-link] 

h3. Use Case:

* Insurance Screen - Primary Applicant & if No is selected for all the applicants
* Credit Protect - MEL+ Customer Journey

h3. Details:

* As covered in ML-8450, by default NO option will be populated for all the questions. But, same is editable to customer and he can change the selection.
* Answering all the questions is mandatory for user to proceed.

h3. *A] 'No' is selected for all the questions:*

If ‘NO’ is selected for all questions of applicant, then case is allowed to move ahead to next stage.

h3. *B] If any question is answered as ‘Yes’ - For Applicant/Co-applicant:*

The logic of mandatory life insurance for applicant/co-applicant remains as is for all the journeys.

Apply below check/condition when user clicks on SAVE button of the insurance card. 

# *If ‘Yes’ is selected for any of the questions,* then a pop-up message should appear on front end as - 
# “All responses should be ‘No’ to avail Credit Protect Insurance. Case would be cancelled. Do you want to proceed?” with ‘Yes’ (Cancel) & ‘No’ (do not cancel) buttons, where No option should be highlighted.
## *No* - If user selects & proceeds with ‘No' (do not cancel) then, the pop-up gets closed and user lands on insurance screen where below is visible to user:
### All questions where ‘Yes’ was selected by user will only remain editable. 
### All the other questions where response was already ‘no’ will remain non-editable/disabled.
### In this scenario, user can only update the ans of the questions where there was Yes, as No ones are disabled.
## *Yes* - If user proceeds with ‘Yes’ (Cancel) then, again a pop-up should appear to user on front end as- 
### ‘Do you really want to cancel the case?’ with ‘Yes’ & ‘No’ buttons
### If user selects & proceeds with ‘Yes’ - 
#### Case should be dropped off & below Message should be visible to the Customer “Dear customer, our Relationship Officer will contact you for further processing of Loan Application - 123456” - existing functionality
#### Drop off reason should be stamped as - ‘Opted out of Insurance’
#### All the drop off behavior should be applicable here - existing functionality and case should land on “Sanction” “Insurance Pending” Stage
### If ‘No’ the case should land on questionnaire page. And above 2.a to follow.
acceptance: h3. *A] 'No' is selected for all the questions:*

If ‘NO’ is selected for all questions of applicant/co-applicant, then case is allowed to move ahead to next stage.

h3. *B] If any question is answered as ‘Yes’ - For Applicant/Co-applicant:*

# If Customer selects YES for any question of applicant and clicks on Add insurance, then a pop-up is visible as “All responses should be ‘No’ to avail Credit Protect Insurance. Case would be cancelled. Do you want to proceed?” with ‘Yes’ (Cancel) & ‘No’ (do not cancel)
# On clicking YES - another pop-up is visible as ‘_Do you really want to cancel the case?_’ with ‘Yes’ & ‘No’ buttons
## If selects yes - then loan application is dropped off
## If selects no - user lands on insurance screen & below follows
# On clicking NO - 
## user lands on insurance screen & all questions where ‘Yes’ was selected by user are only editable.
## All the other questions where response was already ‘no’ are non-editable/disabled.

key: ML-8505
summary: Loan application behavior as per the Questionnaire answered: Part 2
description: h3. Story:

As a IRO, if any question is answered as yes then I should be able to view a pop-up with warning messages, for both applicant & Co-applicant.

h3. Prerequisite:

# Questionnaire set is visible on insurance screen as given in [https://fincap.atlassian.net/browse/ML-8450|https://fincap.atlassian.net/browse/ML-8450|smart-link]

h3. Use Case:

* Insurance Screen - Applicant & Co-applicant questionnaire set
* Credit Protect - MEL, MEL+, MEL Repeat, PL
* Group Suraksha - PL

h3. Details:

In continuation to story [https://fincap.atlassian.net/browse/ML-8457|https://fincap.atlassian.net/browse/ML-8457|smart-link] , when any question is answered as yes then a pop-up is visible to IRO and on that pop-up IRO selects Yes option for both applicant/co-applicant, then below should happen: 

h3. *When IRO selects ‘Yes’ option on warning pop-up, for Applicant: Applicable for MEL/PL only*

If user proceeds with ‘Yes’ (Cancel) then, again a pop-up should appear to user on front end as- 

# ‘Do you really want to cancel the case?’ with ‘Yes’ & ‘No’ buttons
# If user selects & proceeds with ‘Yes’ - 
## Case should be cancelled and cancellation reason should be saved on system- ‘Opted out of Insurance’
## Stage - Substage should get updated to “Cancel” “Auto Cancel”
## Reason for cancelation should be auto stamped as - “Opted out of Insurance”
# If ‘No’ the case should land on questionnaire page. And above 2.a to follow.

h3. *When IRO selects ‘Yes’ option on warning pop-up, for Co-applicant in Case of MEL/PL and Applicant and co-app in case of HL/LAP:*

If user proceeds with ‘Yes’ (Remove) then, insurance should be removed and case can be processed further.

# Insurance Card of this Co-applicant should be deleted and user will land on Insurance screen where other cards will be visible.
# User can continue further process
# Above is applicable for all the Co-applicant(s) who opts for Credit Protect/Group Suraksha insurance, in all the journeys. 
acceptance: When any question is answered as yes for both applicant/co-applicant, then a warning pop-up is visible to IRO and on that pop-up IRO selects Yes option, then below is achieved:

h3. *For Applicant:*

# On clicking YES - another pop-up is visible as ‘_Do you really want to cancel the case?_’ with ‘Yes’ & ‘No’ buttons
## If selects yes - then loan application is cancelled
## If selects no - user lands on insurance screen & below follows

h3. *For Co-applicant:*

# On clicking YES - 
## Insurance is removed and case can be processed further.
## Insurance Card of the Co-applicant is deleted and user will land on Insurance screen where other cards will be visible.



Pop-ups to be displayed after “Add Insurance” button is selected by IRO. 

key: ML-8504
summary: MEL+ Customer Journey - Questionnaire to be displayed
description: h3. Story:

As a Customer, I should be able to view the Questionnaire on Insurance screen where I can answer the same.

h3. Use Case:

* Insurance Screen - New Questionnaire to be displayed for below
* Credit Protect - MEL+ Customer Journey

h3. Details:

# A new questionnaire set should be visible to Customer on Insurance screen under Credit Protect Insurance.
# PFA the questionnaire set file & Customer journey screens.
# The questionnaire set has 12 questions and options can be selected of the same as Yes or No.
# Yes or No should be radio buttons and user can select only 1 option from the same.
# By default NO option should be selected/ticked for all the questions.

The questionnaire set should be visible in below format:

!image-20210615-062737.png|width=50%!
acceptance: # For MEL+ Customer Journey - Customer is able to view the new questionnaire set on Insurance screen under Credit Protect Insurance.
# The questionnaire set has 12 questions and options can be selected of the same as Yes or No.
# Yes or No should be radio buttons and user can select only 1 option from the same.
# By default NO option should be selected/ticked for all the questions.

key: ML-8457
summary: Loan application behavior as per the Questionnaire answered: Part 1
description: h3. Story:

As a IRO, if any question is answered as yes then I should be able to view a pop-up with warning messages, for both applicant & Co-applicant

h3. Prerequisite:

Questionnaire set is visible on insurance screen as given in [https://fincap.atlassian.net/browse/ML-8450|https://fincap.atlassian.net/browse/ML-8450|smart-link] 

h3. Use Case:

* Insurance Screen - Applicant & Co-applicant questionnaire set
* Credit Protect - MEL, MEL+, MEL Repeat, PL
* Group Suraksha - PL

h3. Details:

* As covered in ML-8450, by default NO option will be populated for all the questions. But, same is editable to user and he can change the selection.
* Answering all the questions is mandatory for user to proceed i.e. ADD INSURANCE button should be enabled only when all 12 questions are answered, otherwise should be disabled.

h3. *A] 'No' is selected for all the questions:*

# If ‘NO’ is selected for all questions of that particular applicant/co-applicant, then insurance card should be successfully saved on clicking Add Insurance button.
# And If ‘NO’ is selected for all the questions and for all the list of applicants, then case is allowed to move ahead to next stage when user clicks on NEXT button.

h3. *B] If any question is answered as ‘Yes’:*

The logic of mandatory life insurance for applicant remains as is for all the journeys.

Apply below check/condition when user clicks on ADD INSURANCE button of the insurance card, for applicant/co-applicant. 

*If user adds Credit Protect/Group Suraksha insurance and ‘Yes’ is selected for any of the questions,* then a pop-up message should appear on front end as - 

# For applicant - 
## “All responses should be ‘No’ to avail <Credit Protect/Group Suraksha>_(as applicable should be printed here)_ Insurance. Case would be cancelled. Do you want to proceed?” with ‘Yes’ (Cancel) & ‘No’ (do not cancel) buttons, where No option should be highlighted.
# For Co-applicant - 
## “All responses should be ‘No’ to avail <Credit Protect/Group Suraksha>_(as applicable should be printed here)_ Insurance. Do you want to remove this insurance for co-applicant?” with ‘Yes’ (Remove) & ‘No’ (do not remove) buttons.

h3. *When IRO selects ‘No’ option on above pop-up, for both app/co-app:*

If user selects & proceeds with ‘No' (do not cancel/remove) then, the pop-up gets closed and user lands on insurance screen where below is visible to user:

# All questions where ‘Yes’ was selected by user will only remain editable. 
# All the other questions where response was already ‘no’ will remain non-editable/disabled.
# In this scenario, user can only update the ans of the questions where there was Yes, as No ones are disabled.

h3. *When IRO selects ‘Yes’ option on above pop-up, for both app/co-app:*

Covered in [https://fincap.atlassian.net/browse/ML-8505|https://fincap.atlassian.net/browse/ML-8505|smart-link]  
acceptance: h3. *A] 'No' is selected for all the questions:*

If ‘NO’ is selected for all questions of that particular applicant/co-applicant, then insurance card should be successfully saved on clicking Add Insurance button. If same is achieved for all the applicants, then case is allowed to move ahead to next stage when user clicks on NEXT button.

h3. *B] If any question is answered as ‘Yes’:*

# Below messages are visible:
## For applicant -
### “All responses should be ‘No’ to avail <Credit Protect/Group Suraksha>_(as applicable should be printed here)_ Insurance. Case would be cancelled. Do you want to proceed?” with ‘Yes’ (Cancel) & ‘No’ (do not cancel) buttons, where No option should be highlighted.
## For Co-applicant -
### “All responses should be ‘No’ to avail <Credit Protect/Group Suraksha>_(as applicable should be printed here)_ Insurance. Do you want to remove this insurance for co-applicant?” with ‘Yes’ (Remove) & ‘No’ (do not remove) buttons.
# On clicking NO, on above pop-up for both app/co-app, below is followed - 
## User lands on insurance screen & all questions where ‘Yes’ was selected by user are only editable.
## All the other questions where response was already ‘no’ are non-editable/disabled.

key: ML-8450
summary: Insurance Screen - Questionnaire to be displayed
description: h3. Story:

As a IRO, I should be able to view the Questionnaire on Insurance screen where I can answer the same.

h3. Use Case:

* Insurance Screen - New Questionnaire to be displayed for below
* Credit Protect - MEL, MEL+, MEL Repeat, PL, Customer journey (Can also refer [https://fincap.atlassian.net/browse/ML-8504|https://fincap.atlassian.net/browse/ML-8504|smart-link] ), HL/LAP
* Group Suraksha - PL

h3. Details:

# A new questionnaire set should be visible to IRO on Insurance screen.
# This questionnaire will be visible at applicant level both applicant and co-applicant. Hence, same should be visible to under Credit Protect card/Group Suraksha (only for PL case) below Nominee details and above Add Insurance button.
# If nominee is minor, then below appointee details and above Add Insurance button, questionnaire should be visible.
# PFA the questionnaire set file.
# The questionnaire set has 12 questions and options can be selected of the same as Yes or No.
# Yes or No should be radio buttons and user can select only 1 option from the same.
# This questionnaire set will be visible under each Credit Protect card added for all the list of applicants. Only for PL, same should be visible for Group Suraksha insurance as well.
# This questionnaire should be visible to all the products - MEL, MEL+, MEL Repeat, PL.
# By default NO option should be selected/ticked for all the questions.

!image-20210615-062012.png|width=1224,height=508!

The questionnaire set should be visible in below format: (Configurable questions)

!image-20210615-062737.png|width=790,height=562!

 
acceptance: # On Insurance screen, IRO is able to view the questionnaire set under Credit Protect card below Nominee details and above Add Insurance button.
# If nominee is minor, then below appointee details and above Add Insurance button, questionnaire is visible.
# The questionnaire set has 12 questions and options can be selected of the same are as Yes or No. 
# The options are radio buttons and user is able to select only 1 option from Yes or no.
# The questionnaire set is visible under each Credit Protect card added for all the list of applicants and co - applicants.
# The questionnaire set has 12 questions as given in attached file.
# By default NO option should be selected/ticked for all the questions.
# It is applicable for mobile view also.

key: ML-8297
summary: Existing Customer’s Bank Accounts table need to restructure
description: As per the new UI requirement we need to re restructure the Existing Customer’s Bank Accounts table code.
acceptance: nan

key: ML-8213
summary: Need to stamp E-Stamp status as Fail for few scenarios
description: h3. Story:

E-stamp status should get stamp as “Fail” for below scenarios

h3. Use case:

* Document Generation screen → E-stamp functionality 
* When e-stamp is in progress → stamping E-stamp status

h3. Details:

# Currently, for below 2 scenarios e-stamp status is getting stamped as below:
## User initiated e-stamping from SFDC and has performed 2 retry attempts as well but e-stamp failed all the times, then SFDC stamps e-stamp status as “Not Eligible”.
## When user has initiated e-stamping from SFDC and timer is visible, but SO app does not send API 1 or 2 to SFDC. User again restarts timer 2 times (2 retry attempts) but then also SO app does not send API 1 or 2 to SFDC, then in this scenario SFDC stamps e-stamp status as “Skipped” 
# For both the above scenarios, SFDC is expected to e-stamp status as “Failed” and not as given above.

Applicable for all products
acceptance: SFDC stamps e-stamp status as “Failed” for below scenarios:

# User initiated e-stamping from SFDC and has performed 2 retry attempts as well but e-stamp failed all the times.
# When user has initiated e-stamping from SFDC and timer is visible, but SO app does not send API 1 or 2 to SFDC. User again restarts timer 2 times (2 retry attempts) but then also SO app does not send API 1 or 2 to SFDC.

key: ML-8107
summary: Retry Karza OCR if failed or Enter data manually - Part 2
description: h3. Story:

As a IRO/MRO, I am able to view the details fetched from Karza OCR success for Residence Address

h3. Prerequisite:

# Application has EKYC or CKYC successful.
# On Applicant Details page - User selects Yes for OCR to run
# User has uploaded a document successfully for Identifier or Applicant Details or Residence Address

h3. Use Case:

# On Applicant Details page - for Identifier or Applicant Details or Residence Address
# User selects Yes for OCR to run & uploaded doc successfully 
# KARZA OCR API was triggered but Failed

h3. Details:

*In continuation to story* [https://fincap.atlassian.net/browse/ML-7076|https://fincap.atlassian.net/browse/ML-7076|smart-link] *, if scenario “Document is correct but Technical error in API” is achieved, below to follow:*

# On the same pop-up where user selects document & uploads as given in ML-7073, a message to appear as “_We regret the inconvenience._” with below buttons:
## Retry
## Enter Manually
## Here, document selection & Upload button will still be visible to user & editable. It will be upto user to upload the document again or not.
# If user selects Retry:
## Again KARZA_OCR API call out to made by SFDC. (as developed)
## Only 1 retry to be allowed.
# If user selects Enter Manually OR In case if the call out gets failed even after 1 retry, then:
## For Identifier or Personal details - this story to follow - [https://fincap.atlassian.net/browse/ML-6944|https://fincap.atlassian.net/browse/ML-6944|smart-link] 
## For Residence address - this story to follow - [https://fincap.atlassian.net/browse/ML-6971|https://fincap.atlassian.net/browse/ML-6971|smart-link] 
acceptance: # For failure reason - Document is correct but Technical error in API - below is followed:
# Along with above message, a pop up to appear with a message as “_We regret the inconvenience._” with below buttons:
## Retry
### If user selects Retry:
#### Again KARZA_OCR API call out to made by SFDC. (as developed)
#### Only 1 retry is allowed.
## Enter Manually
### If user selects Enter Manually OR In case if the callout gets failed even after 1 retry, then:
#### For Identifier or Personal details - this story to follow - [ML-6944]
#### For Residence address - this story to follow - [ML-6971]

key: ML-8106
summary: Repeat case: BCM Financial Tab Field Updates
description: h3. User Story:

As a BCM, for MEL Repeat case while Underwriting on Financial Tab, I should be able to enter 0 value under few fields and should be able to view correct formula For field “% incremental cash flow”.

h3. Use Case:

* MEL Repeat cases only
* BCM - Financial tab

h3. Details:

*0 value should be accepted:*

On BCM Financial tab, under Previous Loan Details section, below fields should accept 0 values:

# EMIs Paid
# Peak DPD (Days)
# No. of DPD Bet 8-14
# No. of DPD bet 15-30
# Last 3 months DPD (Days)

!image-20210602-133402.png|width=50%!

*Field “% incremental cash flow” formula change:*

On BCM Financial tab, under Previous Loan Details section, field “% incremental cash flow” value should be calculated as per updated formula as below:

(Total Income of Previous Loan (Which is added in the same section) – Total Current Income (which is addition of All Income added in income section)/Previous Income))  *100

And its value should be shown in percentage.

!MicrosoftTeams-image (6)-20210602-133936.png|width=50%!
acceptance: BCM Financial Tab Field Updates are done as below:

# Below fields accepts 0 values & no error is given:
## EMIs Paid
## Peak DPD (Days)
## No. of DPD Bet 8-14
## No. of DPD bet 15-30
## Last 3 months DPD (Days)
# Field “% incremental cash flow” value is calculated as per updated formula as below:
## (Total Income of Previous Income (Which is added in the same section) – Total Current Income (which is addition of All Income added in income section)/Previous Income))  *100

key: ML-8101
summary: Re-use
description: nan
acceptance: The UW should be allowed to select multiple values from Document Type dropdown values

key: ML-7681
summary: PD Questionnaire Updated for Others Persona - Manufacturing, Trading, Services 
description: nan
acceptance: nan

key: ML-7680
summary: Dairy Income Calculation on basis of different Milch Animals
description: nan
acceptance: nan

key: ML-7679
summary: Agri Income Functionality - Assessment Engine Changes
description: nan
acceptance: nan

key: ML-7675
summary: User Story 4: If API_1 success then API_2 triggers & its responses - Part 2
description: h3. User Story:

As a IRO/MRO, when I am in process of Biometric Aadhar Mandate on SO App and SFDC fails to send back the required details by SO app.

h3. Prerequisite:

* User selects Biometric option for Aadhar mandate and a pop up on SFDC screen is visible to user with a timer & user is in process of completing the flow from SO app
* The response sent back from SFDC to SO App for API_1 got successful - API details as covered in [https://fincap.atlassian.net/browse/ML-6068|https://fincap.atlassian.net/browse/ML-6068|smart-link] 

h3. Use Case:

* All Journeys → Disbursement flow → Biometric option for Aadhar mandate is in progress
* SFDC front end is showing a pop-up with timer to user & user is in process of completing the flow from SO app
* SO app requested few details to SFDC via API_1 and the response sent back from SFDC to SO App for API_1 got successful.

h3. Details:

* If SO app requested few details to SFDC via API_1 and the response sent back from SFDC to SO App for API_1 got successful. then SO will sync back the final status to SFDC by API_2.
* API_2 structure is covered in [https://fincap.atlassian.net/browse/ML-6071|https://fincap.atlassian.net/browse/ML-6071|smart-link] 
* In continuation to API response when timer is on and is success/failed are covered in [https://fincap.atlassian.net/browse/ML-6069|https://fincap.atlassian.net/browse/ML-6069|smart-link] 

h3. *Scenarios when API_2 response received to SFDC & timer is Expired:*

*A] Timer is expired and response received before user clicks on Proceed - Not clicked Proceed:*

# When timer has expired and user has not clicked on Proceed button on base screen even after choosing any option for Mandate registration and during this time if API 2 response is synced back to SFDC then a toast message should be visible to user on front end as - “Mandate Processed\! Reloading the page.”
# After showing above toast message the screen should get refreshed and latest status received should get updated on front end.
## *If Status = Success*
### Mandate Status has to be stamped as success in back end.
### Status on base screen to be updated as Success
### A Notification to be shown: “Mandate registration is successful.”
### Bank details to be frozen
### Case can move ahead.
### In this scenario, case should move ahead with the selected mandate type i.e. Aadhar mandate - biometric and no other option should be allowed. User can move ahead the case for this scenario considering as a success scenario.
## *If Status = Failure/Abort*
### A new Bank detail record to be created in back end
### The Mandate registration to be re-initiated basis the option chosen.
### Status on base screen to be updated as Error
### In this scenario, user needs to select different mandate type to proceed ahead as given above in failure section

*B] Timer is expired and response received after user clicks on Proceed button - Clicked on Proceed:*

# If timer is expired and user has clicked on Proceed button to initiate the mandate registration process again with the new mandate type selected then below should happen.
# If API_2 response is received in this scenario, then same should get stamped at backend under that bank detail record which was created for Biometric Aadhar Mandate.
# A new bank detail record will be created for new mandate type.
# Even if biometric is success in this scenario, user will have to proceed with the new mandate type selected and this biometric response will be stamped for reporting purpose at back end.
acceptance: API_2 response received to SFDC after timer expired are working as given in description.

A] Timer is On and response received then as per the response received flow is continued.

B] Timer is expired & user has not proceeded with any other mandate type and API response is received then latest response is visible to user on front end and user needs to proceed with biometric aadhar mandate only.

C] Timer is expired & user has proceeded with any other mandate type and API response is received then response is stampd at back end under that bank detail record and user needs to proceed ahead only with the new mandate type selected.

key: ML-7668
summary: User Story 8: "Select Mandate Type" options visibility change
description: h3. User Story:

As a IRO/MRO, I should be able to view all the options as received in NACH FLAG scenario at once i.e. first time except Physical.

h3. Prerequisite:

* User has clicked on GET IFSC button and Get IFSC API is successful
* Value of NACH_FLAG is received

h3. Use Case:

* All Journeys → Disbursement flow → GET IFSC button
* Get IFSC API is successful → NACH FLAG tag is received and value is there with SFDC

h3. Details:

# SFDC reads the NACH_FLAG tag value received in Get IFSC API call out and as per the code received, Mandate options are displayed to user on front end under field "Select Mandate Type".
## Refer [https://fincap.atlassian.net/browse/ML-2742|https://fincap.atlassian.net/browse/ML-2742|smart-link] for codes received for the mandate type visibility
# Here, currently system shows options in below priority, consider code received = A:
## 1st → Only Digital is displayed and then if this is failed 
## 2nd → Both Digital & Aadhar are displayed and if both are failed then 
## 3rd → Only Physical are displayed
# System is expected to update the Mandate visibility as to show all the values applicable as per the code except physical from the start and then display physical when any of the displayed mandate type gets failed. 
# All the values will be visible to user from 2nd run itself. This will work something like below for our above example consider code received = A:
## 1st → Both Digital & Aadhar are displayed and if any 1 gets failed then 
## 2nd → All Digital, Aadhar & Physical will be displayed
acceptance: # In Disbursement flow for field "Select Mandate Type", System shows all the values applicable as per the code received in tag NACH_FLAG except physical from the start itself. 
# Then displays physical when any of the visible mandate type gets failed. 
# All the values will be visible to user from 2nd run itself. Below is working for example consider code received = A:
## 1st → Both Digital & Aadhar are displayed and if any 1 gets failed then
## 2nd → All Digital, Aadhar & Physical will be displayed

key: ML-7667
summary: User Story 5: Structure of API_1 - Part 2
description: h3. User Story:

Inbound API_1 received from SO app to SFDC requesting for details and SFDC sending response of API_1 to SO app.

h3. Prerequisite:

* User selects Biometric option for Aadhar mandate and a pop up on SFDC screen is visible to user with a timer as given in & user is in process of completing the flow from SO app.
* SO App has requested SFDC for certain information as given in [https://fincap.atlassian.net/browse/ML-6068|https://fincap.atlassian.net/browse/ML-6068|smart-link] 

h3. Use Case:

* All Journeys → Disbursement flow → Biometric option for Aadhar mandate is in progress
* SFDC front end is showing a pop-up with timer to user
* User is in process of completing the flow from SO app

h3. Details:

# This is a Inbound API from SO app to SFDC where SO App will request SFDC for certain information via an API: API_1
# SFDC needs to check below scenarios and decide what to send as a response back to SO app or consider as failure.
# The communication for API_1 should happen in the similar way of e-signing. Below error messages should flow to SO app as per the scenario same as it is flown during esigning process.
# Failure message should be sent to SO App, as per the scenario it is getting achieved:

||*Scenario*||*Message*||
|Invalid Loan number|Mandate registration failed due to Invalid Loan Number\! Kindly Retry.|
|Invalid SO User|Mandate registration failed due to Invalid IRO\! Kindly Retry.|
|Mandate registration is completed|Mandate registration failed as already performed successfully\! Kindly Retry.|
|“Adhar Biometric Authentication” Pop up Timer not on|Mandate registration failed due to timer expiry\! Kindly Retry.|
|Any other technical failure|Mandate registration failed\! Kindly Retry.|



# If SO app requests SFDC for data after timer expiry then SFDC should not respond back.
acceptance: SFDC checks scenarios and decide what to send as a response back to SO app or consider as failure.

key: ML-7642
summary: HL & LAP: Employee dedupe should run for non IDFC staff loans
description: h3. Story

As a MRO, If I enter an IDFC employee mobile number on customer consent screen under mobile number field, then System should not allow me to go ahead if the customer is not IDFC staff and if customer is IDFC staff then system should not run employee dedupe and allow me to go ahead.

h3. Use Case:

# Applicable for HL & LAP
# MRO - Create New Loan Application
# Customer Consent screen - 1st screen of a journey

h3. Details:

# Currently and with this epic, Employee dedupe will run on all employee mobile numbers as mentioned in the master and given in ML-7516.
# However, ONLY for HL and LAP – we do give loans to internal employees (IDFC Staff) which means in case the specific application is a staff case then system should restrict this dedupe to be run for such cases so that application can be proceed ahead.
# If for HL & LAP, the application is not for IDFC staff then Employee dedupe should run as given in [https://fincap.atlassian.net/browse/ML-7516|https://fincap.atlassian.net/browse/ML-7516|smart-link] 

h3. New Field Display

!image-20210528-074824.png|width=624,height=407!

!image-20210528-074812.png|width=626,height=404!

# A new field to be visible on Create New Application pop up after selecting product type as HL or LAP as “Staff loan”, below Scheme field as shown in above screenshots
# This field will be a mandatory field and will have drop down as - Yes / No

*If user selects Staff Loan = YES* 

# If MRO selects yes for staff loan and clicks on Create new application button, then MRO will land on consent screen as existing.
# Here, on consent screen - mobile number field, the Customer Dedupe should not run i.e. [https://fincap.atlassian.net/browse/ML-7516|https://fincap.atlassian.net/browse/ML-7516|smart-link] *should not work* in this scenario as this loan is for Internal IDFC employee itself.

*If user selects Staff Loan = NO*

# If MRO selects no for staff loan and clicks on Create new application button, then MRO will land on consent screen as existing.
# Here, on consent screen - mobile number field, the Customer Dedupe should run i.e. [https://fincap.atlassian.net/browse/ML-7516|https://fincap.atlassian.net/browse/ML-7516|smart-link] *should work* as given in the story and MRO should not be allowed to go ahead if he enters employee mobile number.

*Employment screen - “IDFC FIRST BANK Staff” field*

# For HL & LAP journeys, on employment screen there is a field as “IDFC FIRST BANK Staff” where currently MRO selects as yes or no.
# As now the selection is being done on start of the journey, this “IDFC FIRST BANK Staff” field on employment screen should become non-editable to MRO always.
# This field will be visible to MRO on front end and should auto populate the selection of Yes or No as selected by MRO at the start of the journey.
# MRO should not be allowed to change the selection on employment screen and if he wants to do the same any how will lead to cancelling the case and punching a new one with the expected value.
acceptance: # For HL & LAP product, a new field is visible as “Staff loan” on create new application pop-up
# If Staff Loan = YES, then [https://fincap.atlassian.net/browse/ML-7516|https://fincap.atlassian.net/browse/ML-7516|smart-link] does not work and MRO can proceed by entering internal employee mobile number.
# If Staff Loan = NO, then [https://fincap.atlassian.net/browse/ML-7516|https://fincap.atlassian.net/browse/ML-7516|smart-link] does work and MRO cannot proceed by entering internal employee mobile number.
# On Employment screen - “IDFC FIRST BANK Staff” field behaviour is working as given in description

key: ML-7516
summary: Mobile number check as per master on Consent screen
description: h3. Story

As a IRO, If I enter an IDFC employee mobile number on customer consent screen under mobile number field, then System should not allow me to go ahead.

h3. Use Case:

# Applicable for MEL, MEL+,  MEL Repeat & PL
# IRO - Create New Loan Application 
# Customer Consent screen - 1st screen of a journey

h3. Details:

!image-20210524-113417.png|width=366,height=397!

# On 1st screen of a loan journey - Consent Screen, if IRO enters mobile number of an internal IDFC employee then system should not allow him to go ahead and a validation should be visible on front end.
# When user enters mobile number and clicks on “Send OTP” button, then SFDC need to match the entered mobile number with the new master maintained in SFDC for Employee Mobile Numbers as given in - [https://fincap.atlassian.net/browse/ML-7336|https://fincap.atlassian.net/browse/ML-7336|smart-link]
# If the mobile number is found as a match with Employee mobile number then, system should not allow IRO/MRO to proceed ahead with this mobile number and a validation should be visible on front end as “*_Mobile Dedupe match. Kindly enter correct Number_*”.
# If the mobile number is not found as a match with Employee mobile number then, system should continue the flow and generate the OTP.
acceptance: # If IRO enters an IDFC employee mobile number on customer consent screen under mobile number field, then System does not allow him to go ahead.
# A validation is visible on front end as “*_Mobile Dedupe match. Kindly enter correct Number_*”.
# If mobile number is not a match with internal employee mobile number, then system continues the flow and generates the OTP.

key: ML-7510
summary: Disbursement - Repayment Mode & EMI Day Updates
description: h3. Story:

On Disbursement screen, need to update Repayment Mode option for IFBL only & EMI/Repayment Day for SI/NACH cases - Bank & IFBL

h3. Use Case:

# Disbursement Screen of IRO
# Repayment Mode field - IFBL
# EMI/Repayment Day only for SI/NACH cases - Bank & IFBL

h3. Details:

On Disbursement screen of a journey, after Karza IMPS flow completion “Repayment Mode” field is visible to IRO. And as per the Repayment Mode selected, “EMI Day” field options are visible to IRO.

!image-20210524-110449.png|width=1338,height=496!



*Repayment Mode - Updates for only IFBL all journeys:*

!image-20210524-110138.png|width=359,height=162!

# Currently, for IFBL journey of MEL & PL “DIRECT CASH COLLECTION” option is visible to IRO along with SI & NACH options.
# This screenshot is just for FYI
# Here, only for IFBL journeys of MEL & PL Products, we need to disable option of Cash.
# System to hide/disable option “DIRECT CASH COLLECTION” from front end for IRO.
# For Bank, below options will continue to be shown as:
## DIRECT CASH COLLECTION
## SI
## NACH



*Repayment Day - Updates for SI/NACH - Bank & IFBL all journeys:*

!image-20210524-110611.png|width=673,height=167!

# Currently, for Bank flow if Repayment Mode = NACH or SI, then “2,5,10” values are visible under EMI day field.
# And for IFBL flow
## If Repayment Mode = NACH, then “2,5,7,10” values are visible under EMI day field.
## If Repayment Mode = SI, then “2,5,10” values are visible under EMI day field.
# Here, system should now show only values as “*2,5,7*” on front end for EMI Day field for below conditions:
## For both IFBL & BANK
## If Repayment Mode = NACH or SI
# For Repayment Mode = DIRECT CASH COLLECTION, values will continue to be shown as 1-15.
acceptance: # Only for IFBL journeys of MEL & PL Products, The cash option is disabled.
## System hide/disable option “DIRECT CASH COLLECTION” from front end for IRO.
# System now shows only values as “*2,5,7*” on front end for EMI Day field for below conditions:
## For both IFBL & BANK
## If Repayment Mode = NACH or SI

key: ML-7489
summary: PD Verification cases to be visible at UW
description: nan
acceptance: nan

key: ML-7473
summary: [ PMD ] Avoid empty catch blocks
description: {panel:bgColor=#deebff}
Put Debug Statements wherever catch blocks are empty

System.debug('Exception : ' + e);
{panel}

|Class Name|Line|Rule set|Rule|
|CF_All_initMandat_cc_test.cls|98|Error Prone|EmptyCatchBlock|
|DVOpsScreen_CC_Test.cls|69|Error Prone|EmptyCatchBlock|
|EmailUtility_Test.cls|77|Error Prone|EmptyCatchBlock|
|GlobalUtility_Test.cls|786|Error Prone|EmptyCatchBlock|
|IFB_ALL_DocUploadModal_CC_Test.cls|147|Error Prone|EmptyCatchBlock|
|IFB_ALL_DocUploadModal_CC_Test.cls|152|Error Prone|EmptyCatchBlock|
|IFB_ALL_DocUploadModal_CC_Test.cls|157|Error Prone|EmptyCatchBlock|
|IFB_ALL_DocUploadModal_CC_Test.cls|162|Error Prone|EmptyCatchBlock|
|IFB_ALL_HunterRemarkResponseProcessorT.cls|89|Error Prone|EmptyCatchBlock|
|IFB_ALL_HunterRemarkResponseProcessorT.cls|96|Error Prone|EmptyCatchBlock|
|IFB_ALL_InsuranceResponseProcessor_Test.cls|120|Error Prone|EmptyCatchBlock|
|IFB_ALL_TakeOwnership_CC_Test.cls|196|Error Prone|EmptyCatchBlock|
acceptance: nan

key: ML-7466
summary: HL & LAP - Credit Shield - Member Information Form
description: h3. As a IRO, Credit Shield - Member Information Form is generated on Document Generation screen & I am able to view the same on FileNet.

h3. _Assumptions:_

_This is a Vernac document but SFDC will generate document only in English language. Rest all the other language documents will still be generated by Emorphis and this is not in scope of SFDC._

h3. Use Case:

# HL & LAP - Document Generation screen
# FileNet upload after generation success
# Credit Shield - Member Information Form development and data population

h3. Document format & data population:

# Document format needs to be developed as attached, from SFDC.
# The document should show data populated as per field mapping given in the attachment.

h3. Details/flow:

# When IRO lands on Document generation screen, along with other documents generated by SFDC,Credit Shield - Member Information Form should also get generated now.
# The form should be generated as per the format attached & Data should be populated as per the field mapping given in form.
# After successful generation of form, same should be uploaded in FileNet. 
# FileNet Doc Type & ID:
## Doc Type - ESIGN DOCUMENT
## Doc ID - 
## Status - 
## Doc Sub Type - Credit Protect Insurance Form
## Doc Sub Type ID - 
# To be generated for both - Applicant & Co-applicant(s) - if opted Credit Protect insurance for both HL & LAP.
acceptance: # For HL & LAP - Credit Shield - Member Information Form is generated by SFDC on document generation screen.
# Document is visible in expected format and populates the details as expected - as attached
# After successful generation, document is uploaded on FileNet and same is visible to IRO.
# Rest flow is same as existing. Form is generated for both - Applicant & Co-applicant(s) - if opted Credit Protect insurance for both HL & LAP.

key: ML-7462
summary: [ PMD ] IFB_ALL_PosidexreferUpdateRespProcessor
description: {panel:bgColor=#deebff}
If already fixed in DEV org, then initiate the movement.
{panel}

|Class Name|Line|Rule set|Rule|Description|
|IFB_ALL_PosidexreferUpdateRespProcessor.cls|131|Performance|AvoidSoqlInLoops|Avoid Soql queries inside loops|
acceptance: nan

key: ML-7461
summary: [ PMD ] - IFB_ALL_Karza_Aadhar_Masking_ReqGen
description: {panel:bgColor=#deebff}
If already fixed in DEV org, then initiate the movement.
{panel}

|Class Name|Line|Rule set|Rule|Description|
|IFB_ALL_Karza_Aadhar_Masking_ReqGen.cls|86|Performance|AvoidDmlStatementsInLoops|Avoid DML statements inside loops|
acceptance: nan

key: ML-7460
summary: [ PMD ] - IFB_ALL_InsuranceResponseProcessor
description: {panel:bgColor=#deebff}
If already fixed in DEV org, then initiate the movement.
{panel}

|Class Name|Line|Rule set|Rule|Description|
|IFB_ALL_InsuranceResponseProcessor.cls|93|Performance|AvoidDmlStatementsInLoops|Avoid DML statements inside loops|
acceptance: nan

key: ML-7458
summary: [ PMD ] - IFB_ALL_Finnone_Stub
description: {panel:bgColor=#deebff}
If already fixed in DEV org, then initiate the movement.
{panel}

|Class Name|Line|Rule set|Rule|Description|
|IFB_ALL_Finnone_Stub.cls|914|Performance|AvoidSoqlInLoops|Avoid Soql queries inside loops|
|IFB_ALL_Finnone_Stub.cls|1063|Performance|AvoidSoqlInLoops|Avoid Soql queries inside loops|
acceptance: nan

key: ML-7380
summary: Need to store details of EKYC/CKYC response in separate data points
description: h2. Story:_x000D_
Need to store details of EKYC/CKYC response in separate data points_x000D_
_x000D_
h2. Use Case:_x000D_
# EKYC success response_x000D_
# CKYC success response_x000D_
_x000D_
h2. Details:_x000D_
# This is a back end handling story._x000D_
# For all the applications which are EKYC or CKYC successful then the response received from EKYC or CKYC should be stamped/stored in a separate field._x000D_
# EKYC/CKYC data should not be overwritten with OCR success data. 2 different data points should be maintained
acceptance: # For all the applications which are EKYC or CKYC successful then the response received from EKYC or CKYC is getting stamped/stored in a separate field._x000D_
# EKYC/CKYC data is not overriding with OCR success data. _x000D_
# 2 different data points are maintained in back end

key: ML-7358
summary: Karza Name Match API to trigger only for POA OCR success cases
description: h3. Story:

When Karza OCR is performed on Residence Address and gets successful, then SFDC to trigger *Karza Name Match API* automatically.

h3. Prerequisite:

# Karza OCR is successful for Residence address.

h3. Details:

# In continuation to [https://fincap.atlassian.net/browse/ML-6972|https://fincap.atlassian.net/browse/ML-6972|smart-link] , only after Karza OCR is successful for Residence Address.
# SFDC should trigger *Karza Name Match API* automatically immediately after the Karza OCR is successful in the same loader.
# PFA Karza Name Match API details
# In this API Full Name entered In applicant screen and Full Name received from OCR details have to be send in the request.
# Basis the Data, Karza will send the Name Match percentage in the Response.

*Back end stamping:*

# This Percentage needs to be stored in SFDC under a new field as “Name Match Percentage”.
# There should be another percentage field in SFDC as “Name match” which should be a configurable field and will store the passing criteria for name match. Currently, keep the name match value as 65%.
# SFDC should compare the “Name Match Percentage” received from Karza and “Name match” value set for passing and accordingly should be considered as Karza Name Match API success or failed.

*Condition:*

# If “Name Match Percentage” >= 65% then, Karza name match should be considered as successful and story [https://fincap.atlassian.net/browse/ML-6972|https://fincap.atlassian.net/browse/ML-6972|smart-link] to follow.
# If “Name Match Percentage” < 65% then, Karza name match should be considered as failed and below should work.

h4. Karza Name Match API failed:

# Details of OCR should NOT be populated on Residence Address and complete OCR should be considered failed if the Karza Name Match % is below 65%.
# Karza OCR Failed functionality should be continued in this scenario which is covered in below story -[https://fincap.atlassian.net/browse/ML-7076|https://fincap.atlassian.net/browse/ML-7076|smart-link] 
acceptance: # SFDC triggers *Karza Name Match API* automatically immediately after the Karza OCR is successful in the same loader visible to customer.
# Back end stamping for karza name match API is done as given in description.
# If “Name Match Percentage” >= 65% then, Karza name match is considered as successful and story [https://fincap.atlassian.net/browse/ML-6972|https://fincap.atlassian.net/browse/ML-6972|smart-link] follows.
# If “Name Match Percentage” < 65% then, Karza name match is considered as failed and below works:
## Details of OCR are NOT be populated on Residence Address and complete OCR is considered as failed.
## Karza OCR Failed functionality is continued in this scenario which is covered in below story -[https://fincap.atlassian.net/browse/ML-7076|https://fincap.atlassian.net/browse/ML-7076|smart-link]

key: ML-7348
summary: Mandate amount logic is not configured in the current build.
description: The Mandate Amount displayed when user selects aadhar mandate should run as per below logic

|Aadhar Based  Mandate- Amount Logic|If the loan amount <= 1 lakh then mandate amount should be AS-IS (Mandate amount =loan amount)|
|Aadhar Based  Mandate- Amount Logic|If loan amount is > 1 lakh & EMI < 1 lakh then mandate amount should be 1 lakh|
|Aadhar Based  Mandate- Amount Logic|If EMI amount is > 1 lakh mandate type should be freeze at physical mandate. A message to be shown on UI stating “Please proceed with Physical Mandate”. If Emi amount is >1 lakh|
acceptance: The  Mandate ammount should be displayed as per logic mention when user select aadhar mandate

key: ML-7337
summary: [ALOG-12715811] IFB_ALL_CDRuleResponseHandler - SObject row was retrieved via SOQL
description: {panel:bgColor=#deebff}
SObject row was retrieved via SOQL without querying the requested field: Loan_Application__c.IsRefer__c
{panel}

|Stack Trace|Class.IFB_ALL_CDRuleResponseHandler.processResponse: line 429, column 1
Class.IFB_ALL_CdRuleResponseProcessor.process: line 135, column 1
Class.CF_ALL_IntegrationResponseProcessor.processServiceResponse: line 85, column 1
Class.CF_ALL_IntegrationResponseProcessor.process: line 124, column 1
Class.IMessageAfterUpdateTriggerHandler.mainEntry: line 50, column 1
Class.TriggerDispatcherBase.execute: line 119, column 1
Class.Integration_MessageTriggerDispatcher.afterUpdate: line 39, column 1
Class.TriggerFactory.execute: line 73, column 1
Class.TriggerFactory.createTriggerDispatcher: line 24, column 1
Trigger.IntegrationMessageTrigger: line 3, column 1|
|Reference Info| |
|Reference Id|a0h8p000000712HAAQ|
|Message|SObject row was retrieved via SOQL without querying the requested field: Loan_Application__c.IsRefer__c|
acceptance: CDRULE response should be successfully parsed

key: ML-7336
summary: Master to be maintained in SFDC for all Employee Mobile numbers
description: h3. Story:

A master to be maintained in SFDC with all the employees Mobile Numbers

h3. Assumptions:

# This master will be updated by Product in production and will be maintain by them in future
# Only Mobile number will be stored in the Master no other data is required.

h3. Details:

# SFDC needs to store a master of employees Mobile Numbers
# Currently there is no such master maintained at SFDC end with employee mobile numbers
acceptance: A master is maintained in SFDC with all the employees Mobile Numbers 

key: ML-7325
summary: Validations to be imposed on Banking section for PL
description: * Applicable for PL journey.
* Need to keep fields ready for MEL as well, but needs to hidden from front end. Keep it in back end only.
* BCM Tab - Income Details
* Applicable for Primary Applicant & Co-applicant(s)

h2. Validations to be imposed on Banking section for PL

*Salary Type*

# This field is captured by IRO in PL journey for Primary Applicant on Applicant details & for co-applicant(s) on Employment Details screen. For BCM, same is visible on Applicant Tab
# This field values can be - Cash/Salary Certificate/Salary Slip
# In continuation to story [https://fincap.atlassian.net/browse/ML-7154|https://fincap.atlassian.net/browse/ML-7154|smart-link] , This complete Banking section for BCM would become mandatory/non mandatory as per salary type field.
# Below are the conditions, SFDC needs to handle;
## If salary type = Cash, then complete Banking section will become non mandatory for BCM to enter at UW. He can skip data entry of Financial tab and proceed ahead.
## If salary type = Salary Certificate/Salary Slip (other than cash), then complete Banking section will become Mandatory for BCM to enter at UW. He should not be able to skip data entry of Financial tab → Banking section in this scenario and mandatory fields validation should run in this case, if tries to switch from this tab. - existing functionality
## If BCM tries to approve such loan application then validation message should be visible as “Banking section mandatory to enter. Kindly fill the details.” and should not be able to approve the case without entering details in these sections.

*Average Balance*

# In continuation to story [https://fincap.atlassian.net/browse/ML-7154|https://fincap.atlassian.net/browse/ML-7154|smart-link] , there is a field introduced as “Average Balance”.
# A Validation needs to be implemented as - Average Balance to be at least equal to RPL EMI amount for both applicant and co-applicant. 
## EMI Amount is captured under Loan Asset Details at backend and same is visible to BCM at Loan tab.
# For below condition of average balance, this validation should be visible to BCM while approving the application - “Average Balance is less than EMI Please check”
## IF Total Average Balance of (App + Co-app ) < EMI amount for that PL case, then UW will not be able to approve the case and above message should be visible to him.
acceptance: Validations are imposed on Banking section for PL as given in description as:

# If salary type = Cash, then complete Banking section becomes non mandatory for BCM to enter at UW. He can skip data entry of Financial tab and proceed ahead.
# If salary type = Salary Certificate/Salary Slip (other than cash), then complete Banking section becomes Mandatory for BCM to enter at UW. 
## He is not able to skip data entry of Financial tab → Banking section in this scenario and mandatory fields validation is executed in this case, if tries to switch from this tab.
# For below condition of average balance, a validation is visible to BCM while approving the application as - “Average Balance is less than EMI Please check”
## IF Total Average Balance of (App + Co-app ) < EMI amount for that PL case, then UW will not be able to approve the case and above message should be visible to him.

key: ML-7154
summary: For PL journey, Banking fields should be visible to BCM
description: h3. Story:

As a BCM, I should be able to view the Financial Tab while UW for a PL application, which will show Banking fields for data entry.

h3. Use Case:

# PL - BCM
# BCM tab - new tab to show “Financial”
# Banking section under Financial tab

h3. Details:

# Currently “Financial” tab is not visible to any BCM while UW a PL loan application. Need to introduce/show this “Financial” tab to all BCMs while UW a PL loan application.
# On this tab, need to show Banking Section. Banking section functionality should work as implemented for HL & LAP, like this section will be visible as blank with a ADD button to add a new record entry. 
# !image-20210517-101114.png|width=1492,height=568!
Clicking on ADD should open a pop-up with fields where BCM will perform Data Entry. 
# On clicking ADD button for Banking section, a pop-up should be visible  with below fields, so that BCM can perform data entry:
# 1 formula field is Average Balance. And its value will be populated as =  (Addition of 15 Fields from the Credit Entry Table)/15

!image-20210517-104243.png|width=50%!

PFA the field details file.

[^ML-7154 - Banking Field Details (a4b05765-495a-447f-b696-51bb9439666d).docx]

*Data flow to FICO:*

# The data entry done should be flown in FICO 2nd callout (on click on Calculate Eligibility button) from BCM, if the record entry is selected as “to be consider for eligibility” = YES, under Banking section.
# PFA the tags flowing to FICO in HL. Let’s keep them same for Rural PL.

[^Banking Tag flow to FICO.txt]

----

h3. Buttons

# On this Add pop-up, below buttons should be visible:
## *Save* 
### Clicking on this button, will save the record details of all the fields entered above and the pop-up will get closed.
### A row will be visible after saving under Banking section with columns as:
#### Applicant Type
#### Bank Name
#### Account No.
#### Min Balance
#### Max Balance
#### Avg. Balance
#### To be eligible
## *Close*
### Clicking on this button, the pop-up will get closed and the records will not be saved.
# After saving, at record level below button should be visible:
## *Delete*
### Clicking on this dustbin icon, a pop-up will get opened with a confirmation message as given below.
### If user selects Delete, then record will be hard deleted i.e. deleted from backend
### If user selects cancel, then message will be closed & user will land on Financial Tab.

!image-20210517-112311.png|width=1211,height=221!

!image-20210517-112301.png|width=50%!





----

h3. HL & LAP field validation update:

# The banking section is currently visible in HL & LAP journey as well to BCM & MRO both.
# Here, we need to just accept 0 as an input in these fields for HL & LAP. Currently, 0 is not allowed to enter.
# PFA field details file for details. 0 should be accepted in below fields at both MRO & BCM level:
## Number of Months Held
## Min Balance
## Max Balance
## No of inwards cheque returns
## No of outwards cheque returns
## No of EMI bounces
## No. of credit entry
## No. of debit entry
## Total credited amt
## Total debited amt
acceptance: For PL:

# “Financial” tab is visible to all BCMs for performing UW task of a PL loan application.
# Banking section is visible on “Financial” tab to BCM.
# BCM is able to add the Banking details record as the functionality of HL & LAP i.e. given in description.
# Fields are visible & validations work on fields as given in attachment.
# Average Balance shows the correct value i.e. average of Credit Data Entry table.

For HL & LAP:

# 0 as an input is accepted in the fields as given in description.

key: ML-7076
summary: Retry Karza OCR if failed or Enter data manually - Part 1
description: h3. Story:

As a IRO/MRO, I am able to view the details fetched from Karza OCR success for Residence Address

h3. Prerequisite:

# Application has EKYC or CKYC successful.
# On Applicant Details page - User selects Yes for OCR to run
# User has uploaded a document successfully for Identifier or Applicant Details or Residence Address

h3. Use Case:

# On Applicant Details page - for Identifier or Applicant Details or Residence Address
# User selects Yes for OCR to run & uploaded doc successfully 
# KARZA OCR API was triggered but Failed

h3. Details:

When user selects YES option to run OCR but, OCR got failed from below stories, then mentioned requirement should work:

[https://fincap.atlassian.net/browse/ML-6970|https://fincap.atlassian.net/browse/ML-6970|smart-link] 

[https://fincap.atlassian.net/browse/ML-6972|https://fincap.atlassian.net/browse/ML-6972|smart-link]

h4. Karza OCR Failed:

# There are can be 3 Failure scenarios as below. And as per scenario customised toast message should be visible to user:
## *Wrong document is uploaded by the user - “Kindly Upload the document selected for correct data.”* 
### Above message should be displayed for all the above scenarios:
#### SFDC to read the document type received from Karza and if the document type is not what user has selected on front end then above toast message should be given.
#### If both sides are uploaded but of 2 different documents then above toast message should be given.
#### If user uploads same side of document under both front & back
### In this scenario, User will not get any retry button and only upload will be visible for him.
### After uploading any document, OCR api will be called automatically and user does not need to click on any button 
## *Karza Name match Failure*
### If Name match is < 65% then OCR is failed. In this below toast message should be visible to user “_Document uploaded is not matching the customer Name. Kindly provide POA Document._” 
### Retry option to be not given in this scenario and user cannot upload the document as well.
### This should be considered as failure and [https://fincap.atlassian.net/browse/ML-6971|https://fincap.atlassian.net/browse/ML-6971|smart-link] to follow
## *Document is correct but Technical error in API*
### Toast message to be displayed to user as - “_Technical failure._” and story [https://fincap.atlassian.net/browse/ML-8107|https://fincap.atlassian.net/browse/ML-8107|smart-link] to follow.
# Failure reason to be stamped at the back end in two new fields viz “Karza POI OCR Response Failure Reason” and “Karza POA OCR Response Failure Reason“.
## If Karza is retried then, both the failure reasons should be stamped here. Reasons should be identifiable as 1st try: <reason>; 2nd try: <reason>
acceptance: # There are can be 3 Failure scenarios as below. And as per scenario customised toast message should be visible to user:
## Wrong document is uploaded by the user - Can upload document again
## Karza Name match Failure - Cannot retry - Failed - POA mandatory - this story to follow ML-6971
## Document is correct but Technical error in API - Can retry - this story to follow ML-8107
# Failure reason to be stamped at back end in a new field “Karza POI OCR Response Failure Reason”.
## If Karza is retried then, both the failure reasons are stamped here. Reasons are identifiable as 1st try: <reason>; 2nd try: <reason>

key: ML-7073
summary: Choose & Upload a document to run Karza OCR
description: h3. Story:

As a IRO/MRO, I should be able to choose & upload a document on which I want to run OCR

h3. Prerequisite:

# Application has EKYC or CKYC successful.
# User has clicked on edit button of sections - Personal Identifier or Applicant Details or Residence Address
# Selected YES option to run the OCR

h3. Use Case:

# Applicant Details page
# Edit button of sections - Personal Identifier or Applicant Details or Residence Address

h3. Details:

When user selects YES option to run OCR from below stories, the mentioned requirement should work:

[https://fincap.atlassian.net/browse/ML-6944|https://fincap.atlassian.net/browse/ML-6944|smart-link] 

[https://fincap.atlassian.net/browse/ML-6971|https://fincap.atlassian.net/browse/ML-6971|smart-link] 

h4. If user clicks on Yes, another pop up to open:

# If the user clicks on “Yes” button, another pop up to appear which asks the user to choose the document that he would like to upload. 
# On this pop up, a message should appear on the screen as -”_Please select a document to upload_” with a drop down of below values & a upload button.
## Aadhaar Card
## Voter Id Card
## Passport
# This pop up will have a Cross button on top right corner, as per new UI for user to cancel the OCR process.
# Once the user selects the document that he wants to upload, he should be able to upload that document as well. Existing document upload functionality should work here.
# User will need to upload both back & front side of the document, to perform OCR successfully.
# If User has Uploaded any one side and OCR for the same is successful, then a Message should be given below Upload button as – “Kindly upload another side of the document”
# Once both Back and Front side of the document is uploaded by the User, then only system should consider it as OCR Successful.
## SFDC needs to keep a track of - OCR is being done for POI or POA. As need to show/update the details accordingly.
### If OCR is being done for POI, then only demographic details should be updated.
### If OCR is being done for POA, then only Resi address should be updated.
# After uploading a doc, below to continue -
## If user came from ML-6944, then [https://fincap.atlassian.net/browse/ML-6970|https://fincap.atlassian.net/browse/ML-6970|smart-link] 
## If user came from ML-6971, then [https://fincap.atlassian.net/browse/ML-6972|https://fincap.atlassian.net/browse/ML-6972|smart-link] 
# Once the Karza OCR is successful, a DMS call will be made to FileNet where SFDC will upload the documents to filenet which were uploaded by user on this pop-up.
# After Karza OCR is successful and even if DMS call is failed/success, the Karza OCR will be considered as successful and the above pop-up will get auto closed and user will land on applicant details screen with the latest data auto populated.
acceptance: # On clicking Yes for OCR, another pop up is visible where a drop down is displayed to user with doc names to upload. Doc names are visible as:
## Aadhaar Card
## Voter Id Card
## Passport
# User is able to upload the document successfully for the selected doc name.
# User needs to upload both back & front side of the document, to perform OCR successfully.
# If User has Uploaded any one side and OCR for the same is successful, then a Message is visible below Upload button to user as – “Kindly upload another side of the document”.
# Once both Back and Front side of the document is uploaded by the User, then only system consider it as OCR Successful.
## SFDC keeps a track of - OCR is being done for POI or POA.

key: ML-7072
summary: User Story 2: Handling of WIP and Re-triggered cases
description: # If the loan application lands on the section to enter MICR and IFSC after launch of the build, the fields will be displayed according to new build.
# If the loan application has already landed on the section to enter MICR/IFSC and triggers  GETIFSCDTLS API, the fields and bank detail record will be as per existing implementation.
## If GETIFSCDTLS returns multiple sets of values, only the 1st set of values will be stamped and bank detail record will be generated basis those.
# For cases retriggered back to GDA, post click on Clear Bank Detail, the MICR/IFSC/Bank Name/Branch Name must be in drop-down format and new bank detail records should be generated post confirmation on the values by selecting from drop-down.
acceptance: .

key: ML-7002
summary: PSL Details Screen Updates
description: h3. Story:

As a Customer, I should be able to fill only mandatory details for PSL and if details are available in base loan then same should be stamped at back end and I should not be able to view PSL screen on front end.

h3. Use Case:

# Confirm Your Details - PSL Details

h3. Current Implemented:

# PSL details screen is always visible to customer on front end.
# Details are auto populated from base loan if available otherwise not and customer enters manually then.
# This is mandatory for customer to enter.

h3. Expected Changes:

# PSL details screen may or may not be visible to customer on front end journey as per the PSL data availability from Base loan.
# To achieve this, SFDC needs to maintain old and new PSL mapping in SFDC Master.
# Data from base loan should be populated/stamped at backend on new mel+ customer journey loan basis the new master.
# If any field data like “Plant and machinery” and “Annual sales turnover” is not present only then those fields will be visible to customer on front end to enter manually. 
## If any fields data is missing then only those fields should be visible on front end and other auto populated fields should be hidden & only stamped at backend.
# If all details are present then the “PSL Section” should not be visible on front end. Only personal and insurance section should be visible.
# PFA updated PSL master with old & new mapping.
acceptance: # PSL details screen visibility to customer on front end journey works as per the PSL data availability from Base loan.
# Data from base loan is populated/stamped at backend on new mel+ customer journey loan basis the new master.
# If any field data like “Plant and machinery” and “Annual sales turnover” is not present then only those fields are visible to customer on front end to enter manually, and others are not visible.
# If all details are present then the “PSL Section” should not be visible on front end. Only personal and insurance section should be visible.

key: ML-6972
summary: Details fetched from Karza OCR success for Residence Address
description: h3. Story:

As a IRO/MRO, I am able to view the details fetched from Karza OCR success for Residence Address

h3. Prerequisite:

# Application has EKYC or CKYC successful.
# On Applicant Details page - User selects Yes for OCR to run
# User has uploaded a document successfully for Residence Address
#  [https://fincap.atlassian.net/browse/ML-7073|https://fincap.atlassian.net/browse/ML-7073|smart-link]
# [https://fincap.atlassian.net/browse/ML-7358|https://fincap.atlassian.net/browse/ML-7358|smart-link] is successful

h3. Use Case:

# On Applicant Details page - Residence Address
# User selects Yes for OCR to run & uploaded doc successfully 
# KARZA OCR API was triggered and successful

h3. Details:

# In continuation to [https://fincap.atlassian.net/browse/ML-7073|https://fincap.atlassian.net/browse/ML-7073|smart-link]
# On successful upload, KARZA_OCR API call out to made automatically by SFDC. Existing implementation to run for Karza Callout here.
# On the front end, a toast message to appear as ”_Please wait while we fetch the address details._” with a loader.
# Karza OCR Failed → Covered in below ticket -[https://fincap.atlassian.net/browse/ML-7076|https://fincap.atlassian.net/browse/ML-7076|smart-link]
# Only when OCR is performed for Residence Address, SFDC to trigger *Karza Name Match API* automatically after Karza OCR API call is successful. 

h4. Karza Name Match API covered in - 

[https://fincap.atlassian.net/browse/ML-7358|https://fincap.atlassian.net/browse/ML-7358|smart-link] 

h4. After Karza Name Match API Success: 

*Address Details screen:*

# Karza Address OCR should be considered only both API are successful - Karza Name match & Karza OCR
# On OCR success the address fetched will be auto populated on front end.
# A message popup will be seen “OCR Successful POA document is waived off”
# In case of success, if the user attempts OCR again, a validation message to thrown on front end as - “_OCR already successful. Please enter manually._”
## Here, if user enters manually then from story - [https://fincap.atlassian.net/browse/ML-6971|https://fincap.atlassian.net/browse/ML-6971|smart-link] section “*If user clicks on Enter Manually, no pop up should appear*” to follow.
# *Proof of Address* Field:
## This field should be non-editable in case EKYC and CKYC successful. The document type selected by user in EKYC and CKYC, should be visible as auto populated in this field.
## In case of any change after digital KYC (EKYC/CKYC) successful – the document selected in OCR needs to updated in this field i.e. same should be visible here as auto populated and field should be non-editable.
## Only in the case of manual data entry by user, this field should become editable and mandatory to fill by user.

*Back end Stamping:*

# A new field to be created on back end as “POA OCR” which will be a text field & on success this Text field will be update with the identifier user has selected for OCR
# On success below should be stamped:
## IsPOAChange = No
## KYC Status Type = KYC Not Required
## KYC Document Type : EKYC/CKYC
## Mandatory document: No Docs Mandatory
## OVD Captured: POI: Not Required POA: Not Required
## On document upload screen → POA should be visible as non mandatory

*Document Upload screen:*

# The document uploaded by user should be visible as auto uploaded on Document screen under POA.
# Aadhar redact functionality should run on doc upload screen (as implemented) if doc uploaded for OCR is Aadhar.
acceptance: *Applicant Details screen:*

# On successful upload, KARZA_OCR API call out is made automatically by SFDC.
# On OCR success the Address is auto populated on front end. Demographic section is NOT impacted due to this POA OCR.
# In case of success, if the user attempts OCR again, a validation message to thrown on front end as - “_OCR already successful. Please enter manually._”
# On success back end data is stamped as mentioned.

*Proof of Address* Field:

# This field is non editable in case of EKYC and CKYC successful and document selected in digital KYC is visible here as auto populated.
# If OCR is performed, then document selected for OCR is auto populated under this field and this field is non editable.
# Only in case of manual data entry, this field becomes editable and mandatory for user to enter.

*Document Upload screen:*

# The document uploaded by user is visible as auto uploaded on Document screen under POA.
# Aadhar redact functionality runs on doc upload screen (as implemented) if doc uploaded for OCR is aadhar.

key: ML-6971
summary: Initiate to run OCR or Enter details manually - Residence Address
description: h3. Story:

As a IRO/MRO, system should ask me if I want to run OCR or enter details manually when I click on edit of Residence Address

h3. Prerequisite:

# Application has EKYC or CKYC successf and hence, Ekyc or Ckyc received address is populated on - Residence address.
# User has manually updated/changed Residence address on Applicant/Co-app Detail screen
# Karza Address Match API has been triggered once & the match % received is < 80% - [https://fincap.atlassian.net/browse/ML-143|https://fincap.atlassian.net/browse/ML-143|smart-link]

h3. Use Case:

# Applicant Details page - Residence Address
# Only if the address match % received is < 80% then, immediately on landing Applicant Details → OCR requirement to implement

h4. Condition:

# For 1st time EDIT - IRO/MRO will have to manually edit the address fetched from eKYC or cKyc as given in -  [https://fincap.atlassian.net/browse/ML-6326|https://fincap.atlassian.net/browse/ML-6326|smart-link]
# On clicking next - Karza address match API will be triggered. Here, if the match % received is < 80%, then user lands on Applicant details.
# Immediately on landing Applicant Details, then below OCR requirement should work.
# In short - Only if the address match % received is < 80% then, for such cases only OCR functionality should be applicable otherwise not.

h3. OCR Details:

# For a loan application which has EKYC or CKYC success, and when *IRO/MRO lands on Applicant Details,* then below pop-up should be visible to user automatically by system.
# A pop up should appear on the screen with message as -”_Would you like to provide an Aadhaar Card/ Voter Id Card/ Passport” to perform an OCR to prefill data. This will enable Waiving off POI/POA_” with below 2 buttons on pop-up.
# Two buttons to be made available on the pop up
## Yes
## Enter manually

h4. i] If user clicks on Yes, another pop up to open → Covered in below ticket

[https://fincap.atlassian.net/browse/ML-7073|https://fincap.atlassian.net/browse/ML-7073|smart-link]

h4. ii] If user clicks on Enter Manually, no pop up should appear:

# If the user clicks on “Enter Manually” button or Karza Name match Failure or Failed after 1 retry of Karza OCR, no pop-up should appear on screen & only Residence Address fields should become editable.
# Karza OCR address should not be populated under Residence address and user will view the latest updated details under this section.
# If user edits - Address Line 1, 2, 3 & Pin-code then, below stamping should happen:
## IsPOAChange = Yes
## KYC Status Type = Address Proof Required
## KYC Document Type : EKYC/CKYC
## Mandatory document: POA mandatory
## OVD Captured: POI Not Required ; POA (As per identifier selected in Identifier proof)
## On document upload screen → POA should be visible as mandatory
acceptance: # OCR functionality is applicable for cases - only if the Karza address match % received is < 80% otherwise not.
# For a EKYC or CKYC success loan application, on editing the Residence Address user is able to view a pop up where system asks user whether he wants to upload doc for OCR or to proceed manually.
# On clicking Enter Manually or Karza Name match Failure or Failed after 1 retry of Karza OCR, the Resi Address become editable & POA becomes mandatory.
## Karza OCR address is not populated under Residence address and user views the address fetched from EKYC/CKYC.
# On manual data entry back end data is stamped as mentioned.

{panel:bgColor=#e3fcef}
For EKYC or CKYC success cases, address fetched is auto populated under Resi address:

# For 1st time edit - Karza address match API is triggered only 1 time & if match% < 80% then again user lands on Applicant Details page itself
# Here, system should ask for Karza OCR pop-up only 1 time to run OCR only once.

POA waiver provision will be given to a user for only 2 times at applicant level for a loan application.
{panel}

key: ML-6970
summary: Details fetched from Karza OCR success for Personal Identifier or Applicant Details
description: h3. Story:

As a IRO/MRO, I am able to view the details fetched from Karza OCR success for Applicant Details

h3. Prerequisite:

# Application has EKYC or CKYC successful.
# on Applicant Details page - User selects Yes for OCR to run
# User has uploaded a document successfully for either Applicant Details section
#  [https://fincap.atlassian.net/browse/ML-7073|https://fincap.atlassian.net/browse/ML-7073|smart-link] 

h3. Use Case:

# On Applicant Details page - clicked on Edit button of sections -  Personal Identifier & Applicant Details
# User selects Yes for OCR to run & uploaded doc successfully 
# KARZA OCR API was triggered and successful

h3. Details:

# In continuation to [https://fincap.atlassian.net/browse/ML-7073|https://fincap.atlassian.net/browse/ML-7073|smart-link]
# On successful upload, KARZA_OCR API call out to made automatically by SFDC. Existing implementation to run for Karza Callout here.
# On the front end, a toast message to appear as ”_Please wait while we fetch the details._” with a loader.

h4. Karza OCR Success:

*Applicant Details screen:*

# On OCR success the demographic data will be auto populated on front end and Identifier details should be visible under identifier section.
# A message popup will be seen “OCR Successful POI document is waived off”
# Since, this is only POI OCR, only demographic data should be auto populated from OCR & address details should not get updated.
# In case of success, if the user attempts OCR again, a validation message to thrown on front end as - “_OCR already successful. Please enter manually._”
## Here, if user enters manually then from story - [https://fincap.atlassian.net/browse/ML-6944|https://fincap.atlassian.net/browse/ML-6944|smart-link] section “*If user clicks on Enter Manually, no pop up should appear”* to follow.
# *Proof of Identity* Field:
## This field should be non-editable in case EKYC and CKYC successful. The document type selected by user in EKYC and CKYC, should be visible as auto populated in this field.
## In case of any change after digital KYC (EKYC/CKYC) successful – the document selected in OCR needs to updated in this field i.e. same should be visible here as auto populated and field should be non-editable.
## Only in the case of manual data entry by user, this field should become editable and mandatory to fill by user.

*Back end Stamping:*

# A new field to be created on back end as “POI OCR” which will be a text field & on success this Text field will be update with the identifier user has selected for OCR
# On success below should be stamped:
## IsPOIChange = No
## KYC Status Type = KYC Not Required
## KYC Document Type : EKYC/CKYC
## Mandatory document: No Docs Mandatory
## OVD Captured: POI: Not Required POA: Not Required
## On document upload screen → POI should be visible as non mandatory

*Document Upload screen:*

# The document uploaded by user should be visible as auto uploaded on Document screen under POI.
# Aadhar redact functionality should run on doc upload screen (as implemented) if doc uploaded for OCR is Aadhar.

h4. Karza OCR Failed → Covered in below ticket

[https://fincap.atlassian.net/browse/ML-7076|https://fincap.atlassian.net/browse/ML-7076|smart-link] 
acceptance: *Applicant Details screen:*

# On successful upload, KARZA_OCR API call out is made automatically by SFDC.
# On OCR success the demographic data is auto populated on front end and Identifier details are visible under identifier section. Address section is impacted NOT due to this POI OCR.
# In case of success, if the user attempts OCR again, a validation message to thrown on front end as - “_OCR already successful. Please enter manually._”
# On success back end data is stamped as mentioned.

*Proof of Identity* Field:

# This field is non editable in case of EKYC and CKYC successful and document selected in digital KYC is visible here as auto populated.
# If OCR is performed, then document selected for OCR is auto populated under this field and this field is non editable.
# Only in case of manual data entry, this field becomes editable and mandatory for user to enter.

*Document Upload screen:*

# The document uploaded by user is visible as auto uploaded on Document screen under POI.
# Aadhar redact functionality runs on doc upload screen (as implemented) if doc uploaded for OCR is aadhar.

key: ML-6944
summary: Initiate to run OCR or Enter details manually - Identifier or Applicant Details
description: h3. Story:

As a IRO/MRO, system should ask me if I want to run OCR or enter details manually when I click on edit Applicant Details

h3. Prerequisite:

Application has EKYC or CKYC successful.

h3. Use Case:

# Applicant Details page
# Edit button of sections - Personal Identifier & Applicant Details

h3. Details:

# For a loan application which has EKYC or CKYC successful, when *IRO/MRO clicks on edit button of Applicant Details section,* then below pop-up should be visible.
# A pop up should appear on the screen with message as -”_Would you like to provide an Aadhaar Card/ Voter Id Card/ Passport_” _to perform an OCR to prefill data. This will enable Waiving off POI/POA._” with below 2 buttons on pop-up.
## Two buttons to be made available on the pop up
### Yes
### Enter manually

h4. i] If user clicks on Yes, another pop up to open → Covered in below ticket

[https://fincap.atlassian.net/browse/ML-7073|https://fincap.atlassian.net/browse/ML-7073|smart-link] 

h4. ii] If user clicks on Enter Manually, no pop up should appear:

# If the user clicks on “Enter Manually” button or Failed after 1 retry of Karza OCR, no pop-up should appear on screen & only below fields should become editable as per the EDIT button clicked on.
## If user clicked on Personal Identifier EDIT
### Identifiers should become editable 
## If user clicked on Applicant Details EDIT
### Title, Name (first + middle + last) & DOB to be made editable
# Karza OCR details should not be populated under Identifier or Applicant Detail and user will view the latest updated details under this section.
# Below stamping should happen:
## IsPOIChange = Yes
## KYC Status Type = ID Proof Required or KYC required (As per logic)
## KYC Document Type : EKYC/CKYC
## Mandatory document: POI mandatory or POI and POA Mandatory (As per logic)
## OVD Captured: POI (As per identifier selected in Identifier proof) ; POA Not Required
## On document upload screen → POI should be visible as mandatory
acceptance: # For a EKYC or CKYC success loan application, on editing the identifier or personal/applicant details user is able to view a pop up where system asks user whether he wants to upload doc for OCR or to proceed manually.
# On clicking Enter Manually or Failed after 1 retry of Karza OCR, the sections become editable & POI becomes mandatory.
## Karza OCR details are not populated under Identifier or Applicant Detail and user views the details fetched from EKYC/CKYC.
# On manual data entry back end data is stamped as mentioned.

key: ML-6914
summary: Change in SVC Name for whatsapp_Optin
description: The SVC Name configured for whats app API needs to be changed to below SVC Name- _x000D_
_x000D_
SVC Name - Optin_Serv
acceptance: API should be successful with new SVC NAme - SVC Name - Optin_Serv

key: ML-6888
summary: PL - Group Suraksha
description: h3. As a IRO, Group Suraksha is generated on Document Generation screen & I am able to view the same on FileNet.

h3. _Assumptions:_

_This is a Vernac document but SFDC will generate document only in English language. Rest all the other language documents will still be generated by Emorphis and this is not in scope of SFDC._

h3. Use Case:

# PL - Document Generation screen
# FileNet upload after generation success
# Group Suraksha development and data population

h3. Document format & data population:

# Document format needs to be developed as attached, from SFDC.
# The document should show data populated as per field mapping given in the attachment.

h3. Details/flow:

# Only for PL, For applicant this insurance would be mandatory for LA <= 2 Lacs. Hence, will be generated only for such loan applications for applicant only.
# When IRO lands on Document generation screen, along with other documents generated by SFDC, Group Suraksha should also get generated now.
# The form should be generated as per the format attached & Data should be populated as per the field mapping given in form.
# After successful generation of form, same should be uploaded in FileNet. 
# FileNet Doc Type & ID:
## Doc Type - ESIGN DOCUMENT
## Doc ID - 
## Status - 
## Doc Sub Type - Group Suraksha Form
## Doc Sub Type ID - 
acceptance: # PL - Group Suraksha Form is generated by SFDC on document generation screen.
# Only for PL, For applicant this insurance would be mandatory for LA <= 2 Lacs. Hence, is generated only for such loan applications for applicant only.
# Document is visible in expected format and populates the details as expected - as attached
# After successful generation, document is uploaded on FileNet and same is visible to IRO.

key: ML-6887
summary: MEL, MEL Plus, MEL Repeat & PL - Hospicash MEF_Insurance Form
description: h3. As a IRO, Hospicash MEF_Insurance Form is generated on Document Generation screen & I am able to view the same on FileNet.

h3. _Assumptions:_

_This is a Vernac document but SFDC will generate document only in English language. Rest all the other language documents will still be generated by Emorphis and this is not in scope of SFDC._

h3. Use Case:

# MEL, MEL Plus, MEL Repeat & PL - Document Generation screen
# FileNet upload after generation success
# Hospicash MEF_Insurance Form development and data population

h3. Document format & data population:

# Document format needs to be developed as attached, from SFDC.
# The document should show data populated as per field mapping given in the attachment.

h3. Details/flow:

# When IRO lands on Document generation screen, along with other documents generated by SFDC, Hospicash MEF_Insurance Form should also get generated now.
# The form should be generated as per the format attached & Data should be populated as per the field mapping given in form.
# After successful generation of form, same should be uploaded in FileNet. 
# FileNet Doc Type & ID:
## Doc Type - ESIGN DOCUMENT
## Doc ID - 
## Status - 
## Doc Sub Type - Hospicash Insurance form
## Doc Sub Type ID - 
# To be generated for both if opted - App & Co-app
acceptance: # For MEL, MEL Plus, MEL Repeat & PL - Hospicash Insurance form is generated by SFDC on document generation screen.
# Document is visible in expected format and populates the details as expected - as attached
# After successful generation, document is uploaded on FileNet and same is visible to IRO.
# Rest flow is same as existing. Form is generated for both if opted - App & Co-app

key: ML-6886
summary: MEL, MEL Plus, MEL Repeat & PL - Hospicash MEF_Application Form
description: h3. As a IRO, Hospicash MEF_Application Form is generated on Document Generation screen & I am able to view the same on FileNet.

h3. _Assumptions:_

_This is a Vernac document but SFDC will generate document only in English language. Rest all the other language documents will still be generated by Emorphis and this is not in scope of SFDC._

h3. Use Case:

# MEL, MEL Plus, MEL Repeat & PL - Document Generation screen
# FileNet upload after generation success
# Hospicash MEF_Application Form development and data population

h3. Document format & data population:

# Document format needs to be developed as attached, from SFDC.
# The document should show data populated as per field mapping given in the attachment.

h3. Details/flow:

# When IRO lands on Document generation screen, along with other documents generated by SFDC, Hospicash MEF_Application Form should also get generated now.
# The form should be generated as per the format attached & Data should be populated as per the field mapping given in form.
# After successful generation of form, same should be uploaded in FileNet. 
# FileNet Doc Type & ID:
## Doc Type - ESIGN DOCUMENT
## Doc ID - 
## Status - 
## Doc Sub Type - Hospicash Application form
## Doc Sub Type ID - 
# To be generated for both if opted - App & Co-app
acceptance: # For MEL, MEL Plus, MEL Repeat & PL - Hospicash Application form is generated by SFDC on document generation screen.
# Document is visible in expected format and populates the details as expected - as attached
# After successful generation, document is uploaded on FileNet and same is visible to IRO.
# Rest flow is same as existing. Form is generated for both if opted - App & Co-app

key: ML-6885
summary: MEL, MEL Plus, MEL Repeat & PL - Group Credit Protect Plus- Enrolment Form
description: h3. As a IRO, Group Credit Protect Plus- Enrolment Form is generated on Document Generation screen & I am able to view the same on FileNet.

h3. _Assumptions:_

_This is a Vernac document but SFDC will generate document only in English language. Rest all the other language documents will still be generated by Emorphis and this is not in scope of SFDC._

h3. Use Case:

# MEL, MEL Plus, MEL Repeat & PL - Document Generation screen
# FileNet upload after generation success
# Group Credit Protect Plus- Enrolment Form development and data population

h3. Document format & data population:

# Document format needs to be developed as attached, from SFDC.
# The document should show data populated as per field mapping given in the attachment.

h3. Details/flow:

# When IRO lands on Document generation screen, along with other documents generated by SFDC, Group Credit Protect Plus- Enrolment Form should also get generated now.
# The form should be generated as per the format attached & Data should be populated as per the field mapping given in form.
# After successful generation of form, same should be uploaded in FileNet. 
# FileNet Doc Type & ID:
## Doc Type - ESIGN DOCUMENT
## Doc ID - 
## Status - 
## Doc Sub Type - Credit Protect Insurance Form
## Doc Sub Type ID - 
# To be generated for both - App & Co-app (if opted)
# Only for PL, For applicant this insurance would be mandatory for LA > 2 lacs. Hence, will be generated only for such loan applications.
acceptance: # For MEL, MEL Plus, MEL Repeat & PL - Group Credit Protect Plus- Enrolment Form is generated by SFDC on document generation screen.
# Document is visible in expected format and populates the details as expected - as attached
# After successful generation, document is uploaded on FileNet and same is visible to IRO.
# Rest flow is same as existing. Form is generated for both - App & Co-app (if opted)

key: ML-6884
summary: MEL, MEL Plus, MEL Repeat & PL - Disbursement Request Form
description: h3. As a IRO, Disbursement Request Form is generated on Document Generation screen & I am able to view the same on FileNet.

h3. _Assumptions:_

_This is a Vernac document but SFDC will generate document only in English language. Rest all the other language documents will still be generated by Emorphis and this is not in scope of SFDC._

h3. Use Case:

# MEL, MEL Plus, MEL Repeat & PL - Document Generation screen
# FileNet upload after generation success
# Disbursement Request Form development and data population

h3. Document format & data population:

# Document format needs to be developed as attached, from SFDC.
# The document should show data populated as per field mapping given in the attachment.

h3. Details/flow:

# When IRO lands on Document generation screen, along with other documents generated by SFDC, Disbursement Request Form should also get generated now.
# The form should be generated as per the format attached & Data should be populated as per the field mapping given in form.
# After successful generation of form, same should be uploaded in FileNet. 
# FileNet Doc Type & ID:
## Doc Type - ESIGN DOCUMENT
## Doc ID - 
## Status - 
## Doc Sub Type - Disbursement request Form
## Doc Sub Type ID - 
acceptance: # For MEL, MEL Plus, MEL Repeat & PL - Disbursement Request Form is generated by SFDC on document generation screen.
# Document is visible in expected format and populates the details as expected - as attached
# After successful generation, document is uploaded on FileNet and same is visible to MRO.
# Rest flow is same as existing.

key: ML-6883
summary: MEL, MEL Plus, MEL Repeat & PL - TnC Vyappar Vriddhi 
description: h3. As a IRO, TnC Vyappar Vriddhi document is generated on Document Generation screen & I am able to view the same on FileNet.

h3. _Assumptions:_

_This is a Vernac document but SFDC will generate document only in English language. Rest all the other language documents will still be generated by Emorphis and this is not in scope of SFDC._

h3. Use Case:

# MEL, MEL Plus, MEL Repeat & PL - Document Generation screen
# FileNet upload after generation success
# TnC Vyappar Vriddhi form development and data population

h3. Document format & data population:

# Document format needs to be developed as attached, from SFDC.
# The document should show data populated as per field mapping given in the attachment.

h3. Details/flow:

# When IRO lands on Document generation screen, along with other documents generated by SFDC, TnC Vyappar Vriddhi form should also get generated now.
# The form should be generated as per the format attached & Data should be populated as per the field mapping given in form.
# After successful generation of form, same should be uploaded in FileNet. 
# FileNet Doc Type & ID:
## Doc Type - ESIGN DOCUMENT
## Doc ID - 
## Status - 
## Doc Sub Type - Sanction Letter
## Doc Sub Type ID - 
acceptance: # For MEL, MEL Plus, MEL Repeat & PL - TnC Vyappar Vriddhi document is generated by SFDC on document generation screen.
# Document is visible in expected format and populates the details as expected - as attached
# After successful generation, document is uploaded on FileNet and same is visible to MRO.
# Rest flow is same as existing.

key: ML-6873
summary: Optimize class IFB_ALL_Karza_Adhar_Masking_ResProcessor
description: Class : IFB_ALL_Karza_Adhar_Masking_ResProcessor_x000D_
_x000D_
Class is not optimized and many for loops are happening. This may impact if bulk transactions happen.
acceptance: nan

key: ML-6871
summary: APIDEV1 Simluation ORG - Mock API Setup
description: This user story contains task for the APIs which are not configured in Simluation ORG.
acceptance: This user story contains task for the APIs which are not configured in Simluation ORG.

key: ML-6865
summary: 2 Mailing Address field present in Address Object
description: Remove one field which is not being used
acceptance: nan

key: ML-6782
summary: For MEL/PL - "toBeConsideredForEligibility" should be sent true/false in CDRULE callout as per BCM selection on front end 
description: h3. Actual:

# For MEL/PL - "toBeConsideredForEligibility" is always sent as true (hard coded) in CDRULE callout irrespective of BCM selection on front end.

h3. Expected:

# For MEL/PL - "toBeConsideredForEligibility" should be sent as “true” or “false” in CDRULE callout, as per BCM selection on front end.
# This is applicable for Financial Tab below sections:
## Income Details
## Banking Details
# *true* will flow if *yes* selected & *false* will flow if *no* is selected by user.

!image-2021-05-04-16-52-51-612.png|width=200,height=183!

!image-2021-05-04-16-55-17-983.png|width=200,height=183!

 
acceptance: Consider for eligibility should be send to FICO basis user selection on frontend

key: ML-6627
summary: Office CPV Self Employed Case Questionnaire - PD Community
description: nan
acceptance: nan

key: ML-6626
summary: Office CPV Salaried Case Questionnaire - PD Community
description: nan
acceptance: nan

key: ML-6625
summary: Residence CPV Case Questionnaire - PD Community
description: nan
acceptance: nan

key: ML-6523
summary: Applicant tab for OCPV or RCPV Case - PD Community
description: Applicant tab to be displayed with the basic details of the applicant and Co-Applicant along with the loan application related details as mentioned below:
(Auto-populated Values)

*Loan Related Information*

* Login Date: Case.CreatedDate
* Requested Loan Amount: Case.loan_application__r.Requested_Loan_Amount__c
* Scheme: Case.loan_application__r.Scheme__c

*Applicant Related Information*

* Customer Name: Applicant__c.Customer_Name__c
* Customer City: Address__c.City__c
* Customer State: Address__c.State__c
* Address: Address__c.Line_1__c, Address__c.Line_2__c, Address__c.Line_3__c
* Landmark: Address__c.Landmark__c
* Pincode: Address__c.Pincode__c

*Co-Applicant Related Information*

* Co-Applicant Name Applicant__c.Customer_Name__c
* Relationship with Applicant Applicant__c.Relationship_With_Applicant__c
* Co-Applicant Address Same as above details (City, State, Address, Pincode)

As a Credit Manager (BCM), once I start my CPV Case (either RCPV or OCPV), I should be able to see the Applicant tab in my PD App with all the above mentioned details. This should be the landing page of the Community to be rendered in PD App for RCPV and OCPV (Salaried and Self Employed)
acceptance: As a Credit Manager (BCM), once I start my CPV Case (either RCPV or OCPV), I should be able to see the Applicant tab in my PD App with all the above mentioned details. This should be the landing page of the Community to be rendered in PD App for RCPV and OCPV (Salaried and Self Employed)

key: ML-6522
summary: Differentiating the PD, Office CPV, Resi CPV Cases - PD Community
description: nan
acceptance: nan

key: ML-6493
summary: For toxic rule rejection case sub-stage is displayed as scorecard reject
description: For toxic rule rejection The substage logic should be changed.

In Decline reason description has changed from FICO and FICO will send below Descriotion in the Tag.

“Scorecard Toxic rule rejected- Overdue Amount in existing loan
Scorecard Toxic rule rejected- Frequent DPD in existing unsecured loan
Scorecard Toxic rule rejected- Frequent DPD in existing secured loan”

SFDC needs to read only the prefix “Scorecard Toxic rule rejected” in order to chhange the substage to “Toxic rule rejection”

And same should be visible to MRO with complete description received in the Decline reason tag
acceptance: SFDC needs to read only the prefix “Scorecard Toxic rule rejected” in order to chhange the substage to “Toxic rule rejection”

And same should be visible to MRO with complete description received in the Decline reason tag

key: ML-6476
summary: In Customer_offer api all tags are flowing as null
description: When the Request to fetch offer is received from Bharat App the CRN send in the request will have a prefix “C” or “U”.

SFDC needs to ignore that prefix and only consider the Number after that prefix
acceptance: SFDC should not read the prefix "C" when CRN is received from Bharat App

key: ML-6459
summary: HL & LAP - Credit Shield - DOGH form
description: h3. As a MRO, Credit Shield - MEF DOGH document on Document Generation screen & I am able to view the same on FileNet.

h3. _Assumptions:_

_This is a Vernac document but SFDC will generate document only in English language. Rest all the other language documents will still be generated by Emorphis and this is not in scope of SFDC._

h3. Use Case:

# Document Generation screen
# FileNet upload after generation success
# Credit Shield - MEMBER ENROLLMENT FORM – Declaration of Good Health development and data population

h3. Document format & data population:

# Document format needs to be developed as attached, from SFDC.
# The document should show data populated as per field mapping given in the attachment.

h3. Details/flow:

# When MRO lands on Document generation screen, along with other documents generated by SFDC, Credit Shield - MEMBER ENROLLMENT FORM – Declaration of Good Health form should also get generated now.
# This document will be generated if user has selected Credit Shield Insurance for either App or co-app
# The form should be generated as per the format attached & Data should be populated as per the field mapping given in form.
# After successful generation of form, same should be uploaded in FileNet.
# FileNet Doc Type & ID:
## Document Type - ESIGN DOCUMENT
## Doc ID -
## Status -
## Document Name - Credit Protect Insurance Form
## Doc Sub Type ID -
# To be generated for both - Applicant & Co-applicant(s) - if opted Credit Protect insurance for both HL & LAP.
acceptance: # For HL & LAP - Credit Shield - *MEMBER ENROLLMENT FORM – Declaration of Good Health* document is generated by SFDC on document generation screen.
# Document is visible in expected format and populates the details as expected - as attached
# After successful generation, document is uploaded on FileNet and same is visible to MRO.
# Rest flow is same as existing. Form is generated for both - Applicant & Co-applicant(s) - if opted Credit Protect insurance for both HL & LAP.

key: ML-6452
summary: POI and POA Waiver Basis OCR - Part 2
description: h3. As a IRO/MRO, POI/POA should be waived off as per the OCR result. - Part 2

h3. Use Case:

# Applicant/Co-app Details screen

h3. Details:

+*Scenario 3: User changes the Identity Proof to some other Identifier*+

# Upload option from the previous identifier will be removed and would be visible in new identifier
# If the user does not upload new identifier and do OCR then
## KYC Document Type : Digital
## KYC Status Type: KYC required
## Mandatory document: POI and POA mandatory
## OVD Captured: POI (As per identifier selected in Idnetifier proof) ; POA (As per identifier selected in address proof)
# *If user upload OCR and does OCR then scenario 1 would repeat*

All these scenario will also work for retrigger scenario

# address received from OCR should be parsed in SFDC in such a way that no special character (Which SFDC does not accept in address line 1,2,3) should be autopopulated on front end and max 40 character should be stamped in one field.
acceptance: POI and POA should be waived for OCR Success cases

key: ML-6409
summary: Ownership document to be made mandatory at Application level
description: h3. As a IRO, I should be able to upload Ownership Document on Document Upload screen, as it is a Mandatory document.

h3. Use Case:

# Document Upload screen
# Filenet upload

h3. Details:

# Once IRO lands on Document Upload screen, he should be able to view a row for uploading “Ownership document”.
# This document is a Mandatory document at application level and hence this will be uploaded only at primary applicant level. Uploading provision should not be visible for Co-app(s).
# This document should be mandatory for IRO to upload on Document Upload screen - in all scenarios. Should not be able to proceed ahead without the same.
# Once, the document is uploaded, same should be uploaded to FileNet - as per current process.
## FileNet Doc Type & ID:
### Doc Type - Ownership Proof (Either Home Or Office)
### Doc ID - 10000000069
### Status - A
### Doc Sub Type - Ownership Proof (Either Home Or Office)
### Doc Sub Type ID - 381
# On Front end row should be visible as below:
## Document Type - Ownership Document
## Document Name - Doc Type as above
acceptance: IRO is able to upload the Ownership document as mandatory document at Application level under Primary applicant.

Same document is uploaded to FileNet as well, once upload is successful.

key: ML-6400
summary: Disbursement: Open New Bank Account screen & API updates
description: h3. For Disbursement: Open New Bank Account flow, Cheque book API option to be visible & API to be triggered only for Literate primary applicant. 

h3. Prerequisite:

“Illiterate Type” Field is created as mentioned in [https://fincap.atlassian.net/browse/ML-6399|https://fincap.atlassian.net/browse/ML-6399|smart-link] 

h3. Use Case:

# Disbursement flow → Open New Bank Account screen
# Cheque Book needed toggle button
# Cheque Book API

h3. Details:

h4. Rename toggle button on Disbursement screen:

# Currently toggle button label is given as →  “DO you want Cheque book and debit card”
# Same needs to be updated as → “Do you want cheque Book”

h4. If applicant “literate Type” = Literate

# If user selects Literacy = Literate on employment screen, then only the toggle button “Do you want cheque Book” should be visible on front end in Disbursement flow →  Open New Bank Account screen.
# Here, if user opts for cheque book i.e. toggle = YES,
## Then only trigger Cheque Book API, while new account creation (as per existing)
# If user does not opt for cheque book i.e. toggle = No,
## Then Cheque Book API should not be triggered, while new account creation (as per existing)

h4. If applicant “literate Type” = Illiterate

# If user selects Literacy = Illiterate on employment screen, then the toggle button “Do you want cheque Book” should NOT be visible on front end in Disbursement flow →  Open New Bank Account screen.
# And Cheque Book API should not be triggered, while new account creation
acceptance: # Toggle button on Disbursement flow → Open New Bank Account screen is renamed from “DO you want Cheque book and debit card” to → “Do you want cheque Book”
# If applicant is literate, then only Cheque Book toggle is visible and if user opts for it, then only Cheque Book API is triggered while account creation.
# If applicant is illiterate, then Cheque Book toggle is not visible on front end.

key: ML-6399
summary: Field creation on Employment Details screen
description: h3. As a IRO/MRO, I should be able to select Primary Applcant’s Literacy on Employment Details screen

h3. Use Case:

# Employment screen - Personal Details 
# Only for Applicant

h3. Details:

# Only for Primary Applicant → on Employment screen under Personal Details, a new field should be visible as “Literate Type”.
# The field would be mandatory
# This field will have drop down options as - Literate and Illiterate 
# This field should not be visible to Co-app(s)/ Guarantor (for HL & LAP)
# This field should get stamped at back-end as well at applicant level.
acceptance: “Illiterate Type” - A new field is created on Employment Details screen under Personal Details, only for primary applicant.

key: ML-6339
summary: Deletion Batch for Application Logs in Production
description: A batch to be written for Production to delete the Application Logs records which are 6 months old to reduce the storage space.

{panel:bgColor=#deebff}
Keep the time span of (6 months) as configurable.
{panel}

{color:#ff5630}*Also, use the hard deletion syntax in apex.*{color}

Below is the syntax : 

{noformat}Database.emptyRecycleBin(sObjectList);{noformat}
acceptance: Application Logs which are 6 months old should be deleted

key: ML-6333
summary: As a IRO/MRO, I should be able to view the updated POI/POA/OCR waiver as per the Karza Address Match API response received
description: h2. Story:

As a IRO/MRO, I should be able to view the updated POI/POA/OCR waiver as per the Karza Address Match API response received

h2. Use Case:

# Ekyc & Ckyc success - Residence address
# Manual update/change address on Applicant/Co-app Detail screen
# Karza Address Match API triggered
# Karza Address Match API - Success & Failure

h2. Description:

# In continuation to story [https://fincap.atlassian.net/browse/ML-6326|https://fincap.atlassian.net/browse/ML-6326|smart-link] , user updated the Resi address and Karza Address Match API was triggered.
# Since the API trigger & the threshold comparison is happening a loader is visible to user on front end.
# The case success/failure depends on below 2 tags:
## “Address Match Percentage” field which stores value of "score" tag
## "match" : "True"

h3. Threshold field creation at back end - configurable

# There should be a configurable “Threshold” field at back end in SFDC, which will store a value. 
# For initial development consider the threshold as 80%
# The “score” tag value received in API will be compared with this threshold value.

h3. Karza Address Match API - Success

# If the “Address Match Percentage” is above 80 and match is true, then Loader will be stopped and a toast message to be shown on the front end “Address Update Successful. POA is waived”.
# On address match success below should be stamped at back end:
## POA Collection to be waived
## IsPOAChanged = No
## KYC Status = Depending upon the POI change.
### If POI changed then it should be “POI mandatory”
### If No POI change then “KYC not required”
## POA to reflect as non-mandatory on document upload screen
## Complete POA back end logic should be waived
# For success scenarios, user will be navigated to next screen automatically after success message is displayed on front end. 

h3. Karza Address Match API - Failure

# If the “Address Match Percentage” is below 80 and match is true/false, then Loader will be stopped and a toast message to be shown on the front end - “Address has been changed. Please provide POA.”
# If there is no response from Karza API or there is any other technical failure, then a toast message to be shown on the front end - “Updated address is significantly different from the previous address. Please provide POA”
# On failure, below should be stamped at back end:
## Collection of POA to become mandatory
## IsPOAChanged = Yes
## KYC Status =depending upon POI and POA changes
### If POI is also changed then “KYC required”
### If only POA is changed then “POA required”
## POA to reflect as mandatory on document upload screen
## Complete POA back end logic should be mandatory
# For failure scenarios, user will be landed on Applicant/Co-applicant Details screen itself after failure message is displayed on front end. 
# Here, user will then select/upload POA and user should not be allowed to go ahead if POA is not uploaded/selected.
# Below Message should be visi bel to user on document upload screen as well for app and co-app
## If the “Address Match Percentage” is below 80 and match is true/false, then Loader will be stopped and a toast message to be shown on the front end - “Address has been changed. Please provide POA.”
## If the “Address Match Percentage” is above 80 and match is true, then Loader will be stopped and a toast message to be shown on the front end “Address Update Successful. POA is waived”.
acceptance: # A configurable “Threshold” field is created at back end in SFDC.
# Success & Failure scenarios are considered & the flow is continued for the same as mentioned in description.

key: ML-6331
summary: Store EKYC address received for EKYC success cases at SFDC 
description: h2. Story

Store EKYC address received for EKYC success cases at SFDC 

h2. Description

# Need to store EKYC received address at SFDC backend. This should be stored at Applicant level only.
# This address needs to be send in Karza Address Match API (if triggered) for EKYC success cases. - Covered in [https://fincap.atlassian.net/browse/ML-6327|https://fincap.atlassian.net/browse/ML-6327|smart-link] 
acceptance: # EKYC address received for EKYC success cases is stored in SFDC at applicant level.

key: ML-6327
summary: KARZA_ADDRESS_MATCH API Development
description: h2. Story

KARZA_ADDRESS_MATCH API development

h2. Description

# SVC Name of the Karza Address Match API is - KARZA_ADDRESS_MATCH
# PFA request response for the same.
# This API will get triggered automatically from SFDC, only when EKYC-CKYC success case Resi address is changed/updated on Applicant/Co-applicant Details screen.
# In request SFDC needs to send 2 addresses:
##  Ekyc/Ckyc address received - 
### CKYC address is already stored in SFDC at applicant level and same needs to sent.
### EKYC address should be taken as mentioned in - [https://fincap.atlassian.net/browse/ML-6331|https://fincap.atlassian.net/browse/ML-6331|smart-link] 
#### This address should be sent only in this API and no where else such as FICO etc.
## SFDC Resi address i.e. edited by user
# SFDC to read 2 tags from the response at address level -
## "score" : 0.98,
## "match" : "True"

h3. Address Match Percentage - field creation

# A new field to be created at back end as - “Address Match Percentage”
# This field should be maintained at applicant level and will store the value of tag "score" received in API for applicant address compared.
# This field should store value as percentage.
acceptance: # API SVC Name is KARZA_ADDRESS_MATCH
# In request SFDC sends 2 addresses:
## Ekyc/Ckyc address received
## SFDC Resi address i.e. edited by user
# SFDC reads 2 tags from the response at address level -
## "score" : 0.98,
## "match" : "True"
# “Address Match Percentage” a new field is created and “score” tag value is stored in this field.

key: ML-6326
summary: As a IRO/MRO, when I update/change the address received from EKYC/CKYC, then Karza Address Match API should happen 
description: h2. Story:

As a IRO/MRO, when I update/change the Resi address which was received from EKYC/CKYC, then Karza Address Match API should happen for that address.

h2. Use Case:

# Ekyc & Ckyc success - Residence address
# Manual update/change address on Applicant/Co-app Detail screen
# Karza Address Match API triggered otherwise Not

h2. Description:

# After Ekyc/Ckyc is successful for a customer, IRO/MRO lands on Applicant Details screen.
# Ekyc/Ckyc address received is auto populated on Applicant/Co-applicant Residence address on front-end.
# Here, If IRO/MRO updates/changes the Residence Address & clicks on NEXT button of Applicant Details, then Karza Address Match API should be triggered.
# SFDC to trigger this API automatically at back end and a loader will be visible to the user on front end during this time.
## Through this API, a match calculation will be received for the address fetched from the digital KYC & the address which was edited just now by user.
## API details are covered in story - [https://fincap.atlassian.net/browse/ML-6327|https://fincap.atlassian.net/browse/ML-6327|smart-link] 
## As per the response POI/POA/OCR Waiver will be decided.
# This API should be triggered same as above for Co-applicant as well. 
# This is not applicable for HL/LAP - Guarantor.
# If the ekyc/ckyc received address (resi address) is not changed/updated, then this Karza Address Match API should not triggered by SFDC and the flow will continue as currently working.
# Success/Failure response scenarios is covered in - [https://fincap.atlassian.net/browse/ML-6333|https://fincap.atlassian.net/browse/ML-6333|smart-link]
# For API failure scenarios, user lands on Applicant/co-app details page only and then again clicks on NEXT button to proceed ahead, after uploading/selecting POA. Here, the Karza Address Match API should NOT be triggered again, on clicking next button.
acceptance: # After Ekyc/Ckyc is successful for a customer, IRO/MRO lands on Applicant Details screen.
# If IRO/MRO here updates/changes the Resi Address which was received from Ekyc & Ckyc, and clicks on NEXT button of Applicant Details, then Karza Address Match API gets triggered by SFDC automatically at back end.

key: ML-6324
summary: View Bureau button on loan application details
description: h3. As a IRO, I should be able to view bureau button for rejected & cancelled cases, on loan details page.

h3. Use Case:

# Rejected and cancelled cases
# Loan details page of a loan application

h3. Details:

# IRO should be able to view a "View Bureau" button on Loan Details page of a loan application ONLY for rejected and cancelled cases.
# This button visibility on loan details page should be made configurable for days. 
# Currently keep the visibility of this button for 7 Days, from the day it was rejected or cancelled. 
acceptance: # IRO is able to view a "View Bureau" button on Loan Details page of a loan application ONLY for rejected and cancelled cases.
# This button visibility on loan details page is made configurable for days.
# The visibility of this button is set to 7 Days, from the day it was rejected or cancelled.

key: ML-6314
summary: Farmer field to be added in PSL Logic
description: h3. As a IRO, I should be able to select farmer type under Priority Sector Lending section on Loan & Product screen.

h3. Use Case:

# Loan & Product → Priority Sector Lending section

h3. Details:

# A new field to be added in SFDC as "Farmer Type" under Priority Sector Lending section on Loan & Product screen
# This field will be visible on front end basis the PSL Sub classification, as per given in the master otherwise not.
# Refer master as attached in EPIC.
# This field will be a drop-down field & will have below values:
## Marginal
## Small
# Basis the Farmer type selected, Borrower category will be stamped in Back-end and send to FinnOne.
acceptance: # New field “Farmer Type” is visible basis the master logic and borrower category should be stamped in the same.

key: ML-6313
summary: .Png File should not be allowed to Upload for POI,POA and CKYC Photo
description: h3. As a IRO/MRO, I should not be allowed to upload images/files other than the expected format and in allowed size.

h3. Use Case:

# Applicant/Co-applicant Details screen
# Document Upload screen

h3. Details:

# The validation should be imposed only for document types: 
## Proof of identity
## Proof of Address
## CKYC Photo
# The file format that should be allowed to Upload for above Doc Types are - ".tif"  , ".tiff" , ".pdf" , ".jpeg" , ".jpg" 
# Size allowed with max limit as 350Kb.
# If user tries to upload any file for above document types then, an error message to be displayed to the user as - "Kindly upload file which is in ".tif"  , ".tiff" , ".pdf" , ".jpeg" , ".jpg" only with Size limit as 350Kb."
# This is applicable for both screens Applicant/co-applicant details & document upload screen. Also, for both app & co-app(s) including guarantor for HL & LAP (if applicable).
acceptance: # Document is allowed to upload which satisfies the Condition as mentioned above,  otherwise error message is visible.
# Validation is present on both screens Applicant/co-applicant details & document upload screen.
# The validation is imposed only for document types:
## Proof of identity
## Proof of Address
## CKYC Photo

key: ML-6106
summary: UI Change: Document Generation + Click wrap Screen
description: UI Change: Document Generation + Click wrap Screen

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Document Generation + Click wrap Screen is developed as given in screenshots

key: ML-6105
summary: UI Change: Bank Details Screen | Existing Bank Details screen
description: UI Change: Bank Details Screen | Existing Bank Details screen

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Bank Details Screen | Existing Bank Details screen is developed as attachment

key: ML-6104
summary: UI Change: Processing Screen | Retry Screen/ Drop off Screen/ Congratulations screen
description: UI Change: Processing Screen | Retry Screen/ Drop off Screen/ Congratulations screen

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Processing Screen | Retry Screen/ Drop off Screen/ Congratulations screen is developed as per attachment.

key: ML-6100
summary: Technical Story: Back navigation & Edit logic implementation
description: h3. Progress Bar

# Progress bar should be back & forward enabled.
## Customer can go back to any screen by progress bar icons.
## Customer should be allowed to go forward directly only to those screens which are explored by him.

h3. User goes back to any screen

# When user goes to any screen from progress bar, on landing everything will be read only with an edit button.
# Goes back & Edit
## If edited, stage & sub stage will be updated with the current stage
## User will now has to proceed screen by screen by clicking on NEXT button of every screen i.e. no direct jumping on any further stage and he will have to navigate stage by stage.
## Personal details -
### Even if he clicks on Edit & selects no on pop-up, still this scenario will be considered as edit scenario and point 2.a to follow.
# Goes back & does not Edit
## If not edited, then no stage updating required
## If not edited, he can jump on any stage directly through progress bar, only to those explored by the user.
acceptance: text

key: ML-6094
summary: Change in the Karza tags position for Karza IMPS API
description: h3. Current:

Currently we are sending the Karza tags in below array position for Org 3  

!image-20210416-120527.png|width=453,height=439!

                           

h3. Expected:

We need to send tags as in below array: 

!image-20210416-120532.png|width=526,height=409!
acceptance: Karza tags are flowing as mentioned in description.

key: ML-6091
summary: OPen ECS Functionality
description: •	User will have the option to choose existing ECS option. If the customer is eligible for existing ECS (Mandate details) then there is no need to proceed with Fresh ECS.
•	check ECS availability to be auto fetched basis the CRN (UCIC) once landed on disbursement page, there is a checkbox button which appears on the UI “Fetch ECS details”. An API callout happens which checks the FinnOne database on the basis of customer’s CRN.
•	If the customer’s Open ECS mandate details exists in FinnOne for repayment account chosen wherein the mandate amount and tenure norms are met, below details get auto populated on the UI:
	Open ECS Mandate
	Original open ECS amount
	Original open ECS tenor
	Current balance amount
	Current balance tenor
	Bank name
	Account type
	MICR Code
	Account number
	Mandate type
	Mandate ID
	Destination account holder

•	For Open ECS, two new fields also to be displayed along with the Banking information displayed from FinnOne on SFDC: If the case is Digital Mandate then 
1)Mandate ID 
2)Mandate Type 
•	For Open ECS, two new fields also to be displayed along with the Banking information displayed from FinnOne on SFDC: If the case is E-NACH Mandate then
1)	UMRN ID
2)	Mandate Type

•	For Open ECS, two new fields also to be displayed along with the Banking information displayed from FinnOne on SFDC: If the case is Physical Mandate then
Mandate Type --> <<Physical>>

•	In case of multiple repayment account options fetched in existing ECS check Ex: HDFC and ICICI then user to select one of the bank after customer’s consent. 
•	Existing open mandate cases details to flow to FinnOne as selected by user in SFDC irrespective to Digital, Aadhar based Mandate Registration or physical mode. FinnOne to provide tags:
1)  Bank & Mandate details to flow to FinnOne for existing open mandate cases only.
2)  Details will flow basis the open mandate ID selected by user at frontend SFDC system, it may be digital,             Aadhar based Mandate Registration or physical.
•	Bank & Mandate details to flow to FinnOne for existing open mandate cases only & should be non-editable.
•	Details will flow basis the open mandate ID selected by user at frontend SFDC system, it may be digital or physical.
•	-CAS Instrument details -For existing mandate type, placeholder of first EMI PDC / SPDC & bank account details & mandate details LOV should be freezed. For new & no open mandate it should be un freezed for the user to select.-
•	There will be a button called “Verify”, this has to be mandatorily click which will basically trigger an SMS to the customer to provide an intimation of the account number selected for Repayment in Open ECS.
•	If in the backend, SMS is successfully triggered, SFDC will consider it as a success scenario and account verification status turns to success.
•	At the submission of Disbursement stage, system to validate open ECS balance & tenure with the loan details, in case validation fails due to balance amount & tenure not sufficing the current loan then system to reverse back the stage to select the Fresh ECS & then normal flow for fresh ECS will flow.
•	There will be a flag at Generate DA that will be offset basis the limit check functionality of Open ECS.
•	If the existing ECS details are not fetched, user can retry or proceed with collecting Fresh ECS.
•	Upon click of Fresh ECS checkbox, Existing ECS checkbox gets unchecked automatically.

This is the existing build for other Bus, please check

CR 2: Account Validation for Open ECS -P2

1.	Currently at Disbursement Stage, the open ECS Mandate details prepopulate on load of Disbursement page.
2.	Despite the availability of Open ECS details, if the user starts filling in fresh bank details by selecting Fresh Mandate, the below validation to be imposed.
3.	After the user enters the Account No on Disbursement and clicks on Verify button, a validation will run to compare the account No entered on Disbursement Stage against the Account No fetched from Open ECS.
a.	If Account No entered on Disbursement Stage <> Account No fetched from Open ECS, 
the user should be allowed to move ahead as per the current process. 
b.	If Account No entered on Disbursement Stage = Account No fetched from Open ECS,
A validation to be shown on front end stating
“There is an existing open ECS available against the Account. Please proceed ahead with existing Open ECS.”

4.	At the submission of Disbursement stage, system to validate open ECS balance & tenure with the loan details, in case validation fails due to balance amount & tenure not sufficing the current loan then system to reverse back the stage to select the Fresh ECS & then normal flow for fresh ECS will flow. This account validation will be applicable for all BUs. 

2 placeholders for capturing account no and system should validate that Account no entered in both fields is same or not – Product team to confirm
acceptance: ECS Flow is developed as given in description

key: ML-6084
summary: User Story 10: Values to be sent to FinnOne
description: *Details:*

# In case of Emandate Status = Success and RegistrationOption = Physical, Mandate ID will be sent to FinnOne in the finnone submit API.
# If UMRN is received in the API_3 request, the same will have to be passed in the FinnOne submit request from SFDC for Physical mandate cases too.
acceptance: Values are sent to FinnOne as given in description

key: ML-6083
summary: User Story 9: Handling of WIP and retriggered cases
description: h3. Details

# For All products - WIP cases, if a case is submitted *i.e. moved to or moving next from Document generation screen* post deployment of this build, then *user will have to do the physical NACH scan*, if RegistrationOption = Physical and ECS Type = Fresh ECS on the latest bank detail record created.
## Post Sanction i.e. BCM Approved, Cases moving Next from Disbursement screen → to Document Generation screen, hence NACH Scan is mandatory for such cases if they comes under eligibility.
# For All products - WIP cases, if the case was submitted *(i.e. from esign stage)* post deployment of this build, then *user will NOT have to do the physical NACH Scan at DV ops stage fo HL and LAP*
## Post Sanction i.e. BCM Approved, Cases are already on document generation screen i.e. already moved ahead from Disbursement screen → to Document Generation screen, hence no need to perform NACH Scan for such cases.
# For HL & LAP cases, which are re-triggered from DV by Ops - As the disbursement screen is Disabled for both pre and post sanction No new Bank record is created
## When IRO lands on Scan NACH Section post retrigger he will be able to see the section and below button will be enable on the same logic as mention in [https://fincap.atlassian.net/browse/ML-6081|https://fincap.atlassian.net/browse/ML-6081|smart-link] 
### Initiate NACH Scan - If this button is enabled then he can reinitiate the scan process again.
### Check Status - If this button is enable he will be able to call API 4 again
acceptance: WIP (All BUs) & Retriggered (HL & LAP) cases are handled as given in description

key: ML-6082
summary: User Story 8: Submit to FinnOne Conditions - MEL & PL
description: h3. User Story:

As a IRO, I should be able to click on FinnOne Submit button when below conditions are achieved.

h3. Prerequisite:

[https://fincap.atlassian.net/browse/ML-6077|https://fincap.atlassian.net/browse/ML-6077|smart-link] & user has initiated NACH Scan process

h3. Use Case:

# Eligible for NACH Scan condition → User Initiated NACH Scan on Document Generation Screen
# User has initiated NACH Scanning process and results are there or in progress
# IRO completes Esign/Estamp → Now clicking on FinnOne submit button as per below conditions

*Overall Condition:*

# 24hrs logic need to implement and this hrs should be kept configurable in SFDC. Currently keep it as 24 hrs.
# If any of the below condition is achieved then case can be submitted to Finnone
## Any status from below &  >=24 hrs, then case can move ahead +OR+
## Success status irrespective of hours, then case can move ahead
# Otherwise case cannot be submitted to FinnOne in any of the other combinations

*Details:*

As a IRO, I want to be able to submit a case to FinnOne only when Physical NACH scan is successful and a Mandate ID has been received or case is stuck for more than 24 hours*(this time to be kept configurable on SFDC, it can be reduced or increased)*.

# On click of Submit button at the bottom of the Document Generation screen, post esign/estamp section, *SFDC to let the case get submitted to FinnOne if* :-
## Physical NACH Status = -Initiated-/ NPCI Final Approve/ Acknowledge/ TPSL Approve/ Final Approved/ TPSL Approved/ NPCI Acknowledged/ Final Approved AND Mandate ID is not blank
+*OR*+
## The time difference between system time when user clicks on Submit button and NACH Scan datetime field value stored in bank detail object +>= 24 hours+
# If the The value of Physical NACH Status = In Progress/Error/ Response time exceeded/ Deactivated /TPSL Initial Reject/ NPCI Final Reject NPCI Initial Reject/ Cancelled/ TPSL rejected/ Final rejected, then there are 2 conditions which needs to be considered as below:
## If the time difference between system time when user clicks on Submit button and NACH Scan datetime field value stored in bank detail object is +>= 24 hours+, then on click of Submit button, *SFDC to let the case get submitted to FinnOne*
## If the time difference between system time when user clicks on Submit button and NACH Scan datetime field value stored in bank detail object is +< 24 hours+, then on click of Submit button, *SFDC to NOT let the case get submitted to FinnOne.*
### A validation message should be displayed as "Case can be submitted to FinnOne only after 24hrs of NACH Scan or If NACH is approved.“

*HL & LAP difference:*

# The above conditions are not valid for HL & LAP on document generation stage and same will work on DV Ops Checker when he will submit the case to Finnone.
# Here, for HL & LAP cases will be submitted to DV Ops maker as per current flow i.e. NACH scan status will not hamper moving ahead from document generation screen. User can submit the case to DV Ops.
# All the conditions of HL & LAP are covered in [https://fincap.atlassian.net/browse/ML-9459|https://fincap.atlassian.net/browse/ML-9459|smart-link] 

*Batch to schedule:*

*A scheduled batch to run every 5 hours* (to be kept configurable), which will check if the time difference between when the batch was run and value in NACH Scan datetime field >= 24 hours.

# If time difference >= 24 hours, loan will be auto-submitted to FinnOne even if Mandate ID is not generated and Physical NACH Status =In Progress/ Error/ Response time exceeded/ Deactivated /TPSL Initial Reject/ NPCI Final Reject NPCI Initial Reject/ Cancelled/ TPSL rejected/ Final rejected.
# If time difference <= 24 hours, no action to be taken on the loan by the batch job.
acceptance: # IRO is able to click on FinnOne submit as per the conditions mentioned in description:
## If any of the below condition is achieved then case can be submitted to Finnone
### Any status from below (Initiated/In Progress) & >=24 hrs, then case can move ahead +OR+
### Success status <24 hrs, then case can move ahead
## Otherwise case cannot be submitted to FinnOne in any of the other combinations
# *A scheduled batch runs every 5 hours* (to be kept configurable), which will check if the time difference between when the batch was run and value in NACH Scan datetime field >= 24 hours.

key: ML-6081
summary: User Story 7: Check status button & API 4 trigger - Part 1
description: h3. User Story:

As a IRO/MRO, when I will click on Check Status button, then API 4 should get triggered and SFDC should show me latest response on front end

h3. Prerequisite:

[https://fincap.atlassian.net/browse/ML-6078|https://fincap.atlassian.net/browse/ML-6078|smart-link] - Check Status button is visible to user on front end

h3. Use Case:

# Eligible for NACH Scan condition → User Initiated NACH Scan on Document Generation Screen
# Timer for the NACH scan is ended and user is either performing esign or estamp
# *Physical NACH Status = In Progress or Response time exceeded* & User clicks on Check Status button from front end, below to happen

h3. Details

*Check Status Button:*

# In continuation to [https://fincap.atlassian.net/browse/ML-9473|https://fincap.atlassian.net/browse/ML-9473|smart-link]  , when user clicks on Initiate NACH scan button and a timer is visible on front end, then final status from SO app will be received to SFDC. 
# This API is an inbound API and hence no expected time duration is there. Hence, we need to show a check status button on front end.
# *A Check Status* button to be introduced in the Physical NACH Scan section. The button will come in picture for user only post click on Initiate NACH Scan button.
# A message to be displayed to user below *A Check Status* button: “Kindly click on Check Status button to update the value of field Physical NACH Status after processing on SO App.”
# The Initiate NACH Scan button to be frozen till the time the value of Physical NACH Scan field is updated as Error / Deactivated /TPSL Initial Reject/ NPCI Final Reject/ NPCI Initial Reject/ Cancelled.
# The *Check Status* button enabling & disabling is mentioned below.
# On click of *Check Status* button, below API should be triggered. 
# !image-20210901-073627.png|width=672,height=522!



*Check Status button on front end:*

# Check Status button will stay *enabled only when*, if the updated value of *Physical NACH Status = In Progress or Response time exceeded*
# Check Status button will be *disabled* if, below is achieved:
## Physical NACH Status = Error/ Deactivated/ Cancelled/ TPSL rejected/ Final rejected and user will be asked to re-initiated NACH Scan +OR+ Error/ Response time exceeded/ Deactivated /TPSL Initial Reject/ NPCI Final Reject NPCI Initial Reject/ Cancelled/ TPSL rejected/ Final rejected
### A notification to be shown on the top of the page, ”NACH Scan failed. Kindly retry.” and should also be visible under section “NACH Scan”
### Check Status Button will be Disabled and Initiate NACH Scan Button will get enabled
### On Click on Initiate NACH Scan Button the complete timer flow will initiate - [https://fincap.atlassian.net/browse/ML-9473|https://fincap.atlassian.net/browse/ML-9473|smart-link] and new Bank record will get created Duplicate to previous on with Physical NACH Status = In Progress and Mandate ID as Blank.
## Physical NACH Status = Initiated/ Final Approved/ TPSL Approved/ NPCI Acknowledged/ Final Approved +OR+ Initiated/ NPCI Final Approve/ Acknowledge/ TPSL Approve/ Final Approved/ TPSL Approved/ NPCI Acknowledged/ Final Approved and Mandate ID is generated
### A notification to be shown on the top of the page, “NACH Scan successful\!” and should also be visible under section “NACH Scan”
### Both the Initiate NACH Scan & Check Status button to remain Disabled.
### The Physical NACH Status on UI and Bank details object to be updated as received in Latest API.
### The Mandate ID to be stamped in the front screen and the bank detail object.

*API 4 Details are covered in -* [https://fincap.atlassian.net/browse/ML-9475|https://fincap.atlassian.net/browse/ML-9475|smart-link]  
acceptance: # *A Check Status* button is visible to user on front end under Physical NACH Scan section, for updating the status of Physical NACH Scan field
# Physical NACH Status = In Progress or Response time exceeded, user should be able to click on Check Status button 
# Button is enabled & disabled for user as given in description

key: ML-6080
summary: User Story 6: Status sync from API_3 - Ingenico to SFDC
description: h3. User Story:

SFDC should read API 3 and take necessary action as per the response received.

h3. Prerequisite:

[https://fincap.atlassian.net/browse/ML-6079|https://fincap.atlassian.net/browse/ML-6079|smart-link] - both the APIs are completed and SFDC is waiting for API 3 now. But on front end user has proceed ahead of NACH Scan section.

h3. Use Case:

# Eligible for NACH Scan condition → User Initiated NACH Scan on Document Generation Screen
# Timer for the NACH scan is ended and user is either performing esign or estamp

h3. Details

The basic objective of this API is to push the Status of the Mandate Registration from Ingenico to the Merchant server i.e. SFDC - its an Inbound API

*API 3 Details:*

# The response post Physical NACH Status is stamped as Initiated will be received to SFDC in an inbound S2S API via mule: API_3.
# This API is received from Ingenico to SFDC:
## S2S push is done to the Merchant for status of Mandate Registration
## S2S push will be done to the merchant server at End of Day as per the status in the Ingenico system
## S2S push will be done on the basis of Push instead of records. One Push may carry more than 1 records
# The API_3 will be inbound to SFDC more than 1 time.
# Each time API_3 is received in SFDC, the Physical NACH Status is to be updated in the bank detail object.
# The value of *MTSSerialNo* received in request of API_3 is to be compared with the value stored in *Mandate ID* in the bank detail record. The value for Physical NACH Status is to updated basis the MTSerialNo.

[^API 3.txt]

*If API 3 sends failure:*

# If the value in field Physical NACH Status = Error / Deactivated /TPSL Initial Reject/ NPCI Final Reject/ NPCI Initial Reject/ Cancelled; the user will have to initiate NACH OCR again.
# Once the response is received below to happen on front end:
## A notification to be shown on the top of the page, ”NACH Scan failed. Kindly retry.” and should also be visible under section “NACH Scan”
## Initiate NACH Scan button will get enabled i.e. the button will be enabled to user only in error
## Check Status Button will get Disabled
## Status will be visible to user on front end, as stamped on backend

*If API 3 sends success:*

# If the value in field Physical NACH Status = Initiated/ Final Approved/ TPSL Approved/ NPCI Acknowledged/ Final Approved; Check Status button will be +Enabled+ -disabled-.
# Once the response is received below to happen on front end:
## A notification to be shown on the top of the page, “NACH Scan successful\!” and should also be visible under section “NACH Scan”
## Buttons will remain disabled - Initiate NACH Scan -& Check Status-  
## Check Status button will remain enabled - *As user may want to get updated status*

*Back end handling:*

The value will be updated as per below table basis the field in API (can refer the excel attached too):-

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default","localId":""},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[48]},"content":[{"type":"paragraph","content":[{"type":"text","text":"API","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[80]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Field in API","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[55]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Field on Frontend","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[67]},"content":[{"type":"paragraph","content":[{"type":"text","text":"UI Component","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Field at Backend","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[63]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Object ","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[73]},"content":[{"type":"paragraph","content":[{"type":"text","text":"New/ Existing","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[56]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Data Type","marks":[{"type":"strong"}]}]}]},{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Possible Values","marks":[{"type":"strong"}]}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"rowspan":9,"colwidth":[48]},"content":[{"type":"paragraph","content":[{"type":"text","text":"API_3"}]}]},{"type":"tableCell","attrs":{"rowspan":9,"colwidth":[80]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Status Flag"}]}]},{"type":"tableCell","attrs":{"rowspan":9,"colwidth":[55]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical NACH Status"}]}]},{"type":"tableCell","attrs":{"rowspan":9,"colwidth":[67]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Mandate Status section"}]}]},{"type":"tableCell","attrs":{"rowspan":9,"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical NACH Status"}]}]},{"type":"tableCell","attrs":{"rowspan":9,"colwidth":[63]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank Detail"}]}]},{"type":"tableCell","attrs":{"rowspan":9,"colwidth":[73]},"content":[{"type":"paragraph","content":[{"type":"text","text":"New"}]}]},{"type":"tableCell","attrs":{"rowspan":9,"colwidth":[56]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Free Text"}]}]},{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"The value received in API request will be a single alphabet. The value to be populated in the field will be basis the given mapping:-"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"N – Final Approved"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Y – Deactivated"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"U – NPCI Acknowledged"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"B – TPSL Approved"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"R – TPSL Rejected"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Z – Final Rejected"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"G – NPCI Initial Reject"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":"D - Cancelled"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[48]},"content":[{"type":"paragraph","content":[{"type":"text","text":"API_3"}]}]},{"type":"tableCell","attrs":{"colwidth":[80]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Rejection_Reason"}]}]},{"type":"tableCell","attrs":{"colwidth":[55]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Rejection Reason"}]}]},{"type":"tableCell","attrs":{"colwidth":[67]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Mandate Status section"}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical NACH Rejection Reason"}]}]},{"type":"tableCell","attrs":{"colwidth":[63]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank Detail"}]}]},{"type":"tableCell","attrs":{"colwidth":[73]},"content":[{"type":"paragraph","content":[{"type":"text","text":"New"}]}]},{"type":"tableCell","attrs":{"colwidth":[56]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Free Text"}]}]},{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":" If NACH Status tag value = Y, then stamp value from tag “Deactivation Reason“ or else for all the other values always stamp tag “Rejection Reason“"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"colwidth":[48]},"content":[{"type":"paragraph","content":[{"type":"text","text":"API_3"}]}]},{"type":"tableCell","attrs":{"colwidth":[80]},"content":[{"type":"paragraph","content":[{"type":"text","text":"UMRN_No"}]}]},{"type":"tableCell","attrs":{"colwidth":[55]},"content":[{"type":"paragraph","content":[{"type":"text","text":"N/A"}]}]},{"type":"tableCell","attrs":{"colwidth":[67]},"content":[{"type":"paragraph","content":[{"type":"text","text":"N/A"}]}]},{"type":"tableCell","attrs":{"colwidth":[81]},"content":[{"type":"paragraph","content":[{"type":"text","text":"UMRN"}]}]},{"type":"tableCell","attrs":{"colwidth":[63]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Bank Detail"}]}]},{"type":"tableCell","attrs":{"colwidth":[73]},"content":[{"type":"paragraph","content":[{"type":"text","text":"New"}]}]},{"type":"tableCell","attrs":{"colwidth":[56]},"content":[{"type":"paragraph","content":[{"type":"text","text":"Free Text"}]}]},{"type":"tableCell","attrs":{"colwidth":[165]},"content":[{"type":"paragraph","content":[{"type":"text","text":" "}]}]}]}]}
{adf}
acceptance: API 3 is configured at SFDC and reads it whenever received. SFDC takes decision as per the response received in API 3.

key: ML-6079
summary: User Story 5: User initiates NACH Scan via SO App - API 1
description: h3. User Story:

As a IRO/MRO, I should be able to perform NACH Scanning via SO app, and communication between SO app & SFDC should happen accordingly.

h3. Use Case:

# Eligible for NACH Scan condition → Initiate NACH Scan on Document Generation Screen
# User opens SO app & starts NACH scanning process 
# Communication via API 1 & API 2 between SFDC & SO App during this stage.

h3. Details:

Below APIs should be read by SFDC, only when timer is on on front end. Otherwise should not be read by SFDC, and SFDC should not send any response back to SO app.

*API 1*

# In continuation to [https://fincap.atlassian.net/browse/ML-6077|https://fincap.atlassian.net/browse/ML-6077|smart-link] , when user clicks on *Initiate NACH Scan* button and timer is visible on front end, then user is expected to do NACH Scan process on SO App.
# User initiates the physical NACH Scan process from SO App.
# Here, SO App requests SFDC for bank details via an inbound API - API_1.
## SFDC send the requested details to SO App in the response of API_1.
## API_1 name: GETMANDATEDTLS
## This is an existing API which is to be used here.
# All the Error messages between SO APP - SFDC communication (as implemented in estamp/aadhar biometric) should also be applicable here. 
# Below are additional parameter that SFDC needs to send in API 1 Response to app server:
## {{"orgId":}} - ORG ID needs to be sent in this tag. This parameter is used to differentiate between different Orgs and their different environments.
## {{"CRM_ID":}} - Primary Applicant record ID needs to be sent in this tag.
## {{"MerchantRequestNo":}} - Main Bank record ID needs to be sent in this tag.
## {{"IsInitiateNACHScanclicked":}} - Need to send hardcoded value as “True” always.
# Failure message should be sent to SO App, as per the scenario it is getting achieved:

||*Scenario*||*Message*||
|Invalid Loan number|NACH Scan failed due to Invalid Loan Number\! Kindly Retry.|
|-Invalid SO User-|-NACH Scan failed due to Invalid IRO\! Kindly Retry.-|
|“NACH Scan” Pop up Timer not on SFDC front end|NACH Scan failed due to timer expiry\! Kindly Retry.|
|NACH Scan is completed - API 2 is done and NACH Status is “Initiated” -not Approved-|NACH Scan is in Progress\!|
|NACH Scan is completed - API 2 is done and NACH Status is “Final Approved” or any other|NACH Scan is Completed\!|
|Any other technical failure|NACH Scan failed\! Kindly Retry.|

[^API 1 (837b5ea6-4778-43d7-86ca-a46494743534).txt]

*API 2* - Covered in [https://fincap.atlassian.net/browse/ML-9466|https://fincap.atlassian.net/browse/ML-9466|smart-link] 
acceptance: Communication between SO App & SFDC is happening as given in description via API 1

key: ML-6078
summary: User Story 4: Backend handling
description: h3. User Story:

As a IRO/MRO, I should be able to Check Status of the NACH Scanning on Document generation screen.

h3. Use Case:

# Check Status of NACH Scanning on Document Generation Screen
# Backend handling of Initiate NACH Scan

h3. Prerequisite:

[https://fincap.atlassian.net/browse/ML-6077|https://fincap.atlassian.net/browse/ML-6077|smart-link] 

h3. Backend handling:

Fields to be introduced in the bank detail object:

# *Physical NACH Status* - 
## The value to be set as New when in case RegistrationOption = Physical and ECS Type = Fresh ECS, on the latest bank detail record created.
## The value of this field will be updated each time API_3 request is received in SFDC. 
## The value of MTSSerialNo received in request of API_3 is to be compared with the value stored in *Mandate ID* in the bank detail record. The value for Physical NACH Status is to updated basis the MTSerialNo.
## History tracking is to be enabled for this field. This field will be used for reporting purposes.
## Same value will be visible on front end under “Physical NACH Status”
# *NACH Scan datetime*- 
## The date and time on click of Initiate NACH Scan button to be stored.
## Type: datetime
## This field will capture the date and time for the first click of Initiate NACH Scan button.
## Only First time click value should be visible here i.e. when was NACH scan initiated 1st time for this application
## The value stamped in this field should not be over-written once populated, even after multiple clicks on Initiate NACH Scan button, in the same bank detail record.
# *Mandate ID* - 
## Mandate ID received for the transaction
## Same value will be visible on front end under “Mandate ID”
## The value for this field will be received in API 2 under tag TpslRegNo tag
# *Physical NACH Rejection Reason*
## History tracking is to be enabled for this field.
## Rejection Reason should also be visible on front end always besides Mandate ID field, which shows value from backend field - Physical NACH Rejection Reason.
## Value should be updated as is received from API2 from tag - “ErrorDescription”
## Value should be updated as is received for API 3 or API 4
### If NACH Status tag value = Y, then stamp value from tag “Deactivation Reason“ or else for all the other values always stamp tag “Rejection Reason“
# *NACH Scan Hours*
## This field should capture the hours required to complete the NACH Scan process.
## From First initiated till the time NACH Status is received as Approved or 24 hrs is completed.
# *NACH Type*
## The value for this field will be received in API 2 under MandateType tag
# *OCR Type*
## The value for this field will be received in API 2 under isOCRMatch tag
# *UMRN_No*
## The value for this field will be received in API 3 under {{"UMRN_No"}} tag

Back end stamping is done as per the values received in below APIs:

# API 2 covered in [https://fincap.atlassian.net/browse/ML-9466|https://fincap.atlassian.net/browse/ML-9466|smart-link] 
# API 3 is covered in [https://fincap.atlassian.net/browse/ML-6080|https://fincap.atlassian.net/browse/ML-6080|smart-link] 
# API 4 is covered in [https://fincap.atlassian.net/browse/ML-9475|https://fincap.atlassian.net/browse/ML-9475|smart-link]  
acceptance: # Backend handling is done for below fields as given in description:
## Physical NACH Status
## NACH Scan datetime
## Mandate ID
## Physical NACH Rejection Reason
## NACH Scan Hours
## NACH Type
## OCR Type

key: ML-6077
summary: User Story 3: New Section introduction - "NACH Scan" - Part 1
description: h3. User Story:

As a IRO/MRO, I should be able to perform NACH Scanning on Document generation screen, if user proceeds with Physical option for mandate registration.

h3. Use Case:

# Eligible for NACH Scan condition
# NACH Scan section visible on Document Generation Screen

h3. Condition for NACH Scan:

# When a loan application proceeds to Document Generation screen and all the documents are generated successfully, SFDC to check if the RegistrationOption = Physical and ECS Type = Fresh ECS, in the latest bank detail record created.
## If yes, user will be eligible to attempt Physical NACH Scan and the new section “NACH Scan” will be visible to user on front end.
### Loan will traverse through new stage - substage
## If no, the section: “NACH Scan“ will be bypassed and will not be visible to user on front end. 
### Loan will Not traverse through new stage - substage

h3. New Section - NACH Scan:

!image-20210709-093508.png|width=50%!

# When an application is eligible for NACH Scanning, → A new section to be introduced for all the BUs → On Document Generation screen → right after Document Generation is successful, below document generation card → with Section header “*NACH Scan*”.
# When user will arrive on this section, the loan application stage substage should be updated to → “Mandate” “NACH OCR Pending” → New stage substage creation
# Cancel option should not be there under this section anywhere.

*Section Details:*

# On this section a message should be visible to user always as “-If signed physical NACH is not present,- “+Take Print of NACH form and take signature of customer.+”
# Below the above message another message with a check box for user declaration should be visible as “I have taken the print out of the Physical Mandate form and have got it signed from the customer.”
!image-20210901-073602.png|width=672,height=522!
# Below above messages, a button should be displayed with name “*Initiate NACH Scan”.*
## This button will get enabled only once user ticks the checkbox, otherwise will be disabled.
# Below initiate NACH scan button, 3 fields should be visible as:
## Physical NACH Status
## Mandate ID
## Rejection Reason
# The value of the Physical NACH Status will be “New” and Mandate ID to be blank, on landing/fresh start i.e. before clicking *Initiate NACH Scan* button.
# User will then click on *Initiate NACH Scan* button, after which the working is covered in [https://fincap.atlassian.net/browse/ML-9473|https://fincap.atlassian.net/browse/ML-9473|smart-link] 
acceptance: # When RegistrationOption = Physical and ECS Type = Fresh ECS user is eligible for Physical NACH Scan.
# A new section is visible for all the BUs → On Document Generation screen → right after Document Generation is successful, below document generation card → with Section header “*NACH Scan*”.
# Under this section, user is able to view the messages as given in description and a check box for declaration.
# Section shows all the fields/messages as given in description.
# New UI/UX is achieved for this new section.

key: ML-6076
summary: Reuse
description: 1. API’s to be used for the build:-

a.       API_1: GETMANDATEDTLS - existing
b.       API_2: Physical NACH Initiated - new
c.       API_3: Physical_NACH_Status - new
d.       API_4: Physical_NACH_Status_Confirm- new

2. The section to be introduced at the last stage-substage before FinnOne submission.

Fields to be stamped. : -


|+*API*+|+*Field in API*+|+*Field on Frontend*+|+*UI Component*+|+*Field at Backend*+|+*Object*+|+*New/ Existing*+|+*Data Type*+|+*Possible Values*+|
|API_2|Status|Physical NACH Status|Mandate Status section|Physical NACH Status|Bank Detail|New|Free Text|# Initiated
# Final Approved|
|API_2|TpslRegNo|Mandate Id|Mandate Status section|Mandate Id|Bank Detail|Front Screen – New;
 
Bank Detail object - Existing|AlphaNumeric| |
|API_3|Status Flag|Physical NACH Status|Mandate Status section|Physical NACH Status|Bank Detail|New|Free Text|The value received in API request will be a single alphabet. The value to be populated in the field will be basis the given mapping:-
 
N – NPCI Final Approve
Y – Deactivated
U – Acknowledge
B – TPSL Approve
R – TPSL Initial Reject
Z – NPCI Final Reject
G – NPCI Initial Reject
D - Cancelled|
|API_3|Rejection_Reason|NA|NA|Physical NACH Rejection Reason|Bank Detail|New|Free Text| |
|API_3|UMRN_No|NA|NA|UMRN|Bank Detail|New|Free Text| |
|API_4|Status|Physical NACH Status|Mandate Status section|Physical NACH Status|Bank Detail|New|Free Text|The value received in API request will be a single alphabet. The value to be populated in the field will be basis the given mapping:-
 
I - Initiated
A - TPSL Approved R - TPSL rejected
U - NPCI Acknowledged Z - Final rejected
S - Final Approved C - Cancelled
D - Deactivated|
|API_4|TpslRegNo|Mandate Id|Mandate Status section|Mandate Id|Bank Detail|Front Screen – New;
 
Bank Detail object - Existing|AlphaNumeric| |
|API_4|RejectionReason|NA|NA|Physical NACH Rejection Reason|Bank Detail|New|Free Text| |

3. Physical NACH Status field update

a.       The value of this field will be updated each time API_3 request is received in SFDC.

b.       The value of MTSSerialNo received in request of API_3 is to be compared with the value stored in *Mandate ID* in the bank detail record.

c.       The value for Physical NACH Status is to updated basis the MTSerialNo.

d.       History tracking is to enabled for this field in the bank detail object.

e.       This field will be used for reporting purposes.
acceptance: .

key: ML-6075
summary: User Story 1: Changes in Physical NACH Form
description: h3. Story:

As a IRO, I should be able to view the NACH form in the latest format.

h3. Use Case:

# Disbursement Screen - Manual Data Entry stage - “Account Holder Name”
# Document Generation stage - NACH form content/format update

h3. Document Generation stage - NACH form:

# NACH form is generated on Document Generation stage.
# The Physical NACH form format has to be updated as per attached document

h3. Disbursement screen stage - Manual Data Entry stage - “Account Holder Name”:

# On Disbursement Screen - Manual Data Entry stage - “Account Holder Name” field should have below validations
# User should be able to able enter the Account Holder Name only of -35- *40 characters length* including spaces.
# Two spaces cannot be taken at once. A field level validation should be displayed to user on front end as “Account Holder Name cannot contain trailing spaces, numbers and special characters“
acceptance: # The Physical NACH form is generated as per attached document and is updated
# On Disbursement Screen - Manual Data Entry stage - “Account Holder Name” field has validations as mentioned in description

key: ML-6072
summary: User Story 7: AePS error message stamping
description: h3. Story:

New back end creation for storing AePS error message in Bank detail object

h3. Use Case:

* All Journeys → Disbursement flow → Aadhar mandate eligible for a case
* Aadhar mandate → cases which are eligible for AePS- Aadhar linking status check service.

h3. Details:

# A new field as “*AePS error message*” to be created in bank detail object.
# This field should store the value received in the AadharEmandate_AePsStatus API request from SO App in the *tag: ErrorMsg*. 
# This API is covered in [https://fincap.atlassian.net/browse/ML-77|https://fincap.atlassian.net/browse/ML-77|smart-link] 
# This will be applicable for all cases which are eligible for AePS- Aadhar linking status check service.
acceptance: # A new field as “*AePS error message*” is created in bank detail object.
# This field stores the value received in the AadharEmandate_AePsStatus API request from SO App in the *tag: ErrorMsg*. API is covered in [https://fincap.atlassian.net/browse/ML-77|https://fincap.atlassian.net/browse/ML-77|smart-link]

key: ML-6071
summary: User Story 6: Structure of API_2
description: h3. User Story:

Inbound API_1 received from SO app to SFDC requesting for details and SFDC sending response of API_1 to SO app.

h3. Prerequisite:

* User selects Biometric option for Aadhar mandate and a pop up on SFDC screen is visible to user with a timer as given in & user is in process of completing the flow from SO app.
* The response sent back from SFDC to SO App for API_1 got successful and API_2 triggers as given in [https://fincap.atlassian.net/browse/ML-6069|https://fincap.atlassian.net/browse/ML-6069|smart-link] 

h3. Use Case:

* All Journeys → Disbursement flow → Biometric option for Aadhar mandate is in progress
* SFDC front end is showing a pop-up with timer to user & user is in process of completing the flow from SO app
* SO app requested few details to SFDC via API_1 and the response sent back from SFDC to SO App for API_1 got successful.

h3. Details:

* If SO app requested few details to SFDC via API_1 and the response sent back from SFDC to SO App for API_1 got successful. then SO will sync back the final status to SFDC by API_2.
* API_2 should be configured in SFDC with below structure, so that above communication can happen.

*1. Name of API* - AadharMandate_BiometricConfirmation

*2. Request from SO App to SFDC*
\{
LoanNumber
TransactionIdentifier
TransactionReference
merchantCode
merchantTransactionIdentifier
merchantTransactionRequestType
responseType
transactionState
merchantAdditionalDetails
paymentMethodToken
paymentMethodInstrumentAliasName
paymentMethodInstrumentToken
paymentMethodBankSelectionCode
paymentMethodACSBankAcsFormName
paymentMethodACSBankAcsHttpMethod
paymentMethodACSBankAcsParams
paymentMethodACSBankAcsUrl
paymentMethodOTPInitiator
paymentMethodOTPMessage
paymentMethodOTPNumberOfDigit
paymentMethodOTPTarget
paymentMethodOTPType
paymentMethodPaymentTransactionAmount
paymentMethodPaymentTransactionBalanceAmount
paymentMethodPaymentTransactionBankReferenceIdentifier
paymentMethodPaymentTransactionDateTime
paymentMethodPaymentTransactionErrorMessage
paymentMethodPaymentTransactionIdentifier
paymentMethodPaymentTransactionRefundIdentifier
paymentMethodPaymentTransactionStatusCode
paymentMethodPaymentTransactionStatusMessage
paymentMethodPaymentTransactionInstructionId
paymentMethodPaymentTransactionInstructionStatusCode
paymentMethodPaymentTransactionInstructionErrorcode
paymentMethodPaymentTransactionInstructionErrordesc
paymentMethodPaymentTransactionReference
paymentMethodAuthenticationType
paymentMethodAuthenticationSubType
paymentMethodErrorCode
paymentMethodErrorDesc
error
merchantResponseString
pdfDownloadUrl
}

*3. Response from SFDC to SO App*
\{
paymentMethodPaymentTransactionStatusCode
}

*In case, no request has been received to SFDC from SO App, the response from SFDC will be sent as Null in paymentMethodPaymentTransactionStatusCode to SO App.*
acceptance: API_2 is configured in SFDC with above structure, so that communication can happen between SO app & SFDC.

key: ML-6070
summary: User Story 5: Structure of API_1 - Part 1
description: h3. User Story:

Inbound API_1 received from SO app to SFDC requesting for details and SFDC sending response of API_1 to SO app.

h3. Prerequisite:

* User selects Biometric option for Aadhar mandate and a pop up on SFDC screen is visible to user with a timer as given in & user is in process of completing the flow from SO app.
* SO App has requested SFDC for certain information as given in [https://fincap.atlassian.net/browse/ML-6068|https://fincap.atlassian.net/browse/ML-6068|smart-link] 

h3. Use Case:

* All Journeys → Disbursement flow → Biometric option for Aadhar mandate is in progress
* SFDC front end is showing a pop-up with timer to user
* User is in process of completing the flow from SO app

h3. Details:

# This is a Inbound API from SO app to SFDC where SO App will request On request from SO App, SFDC needs to send the requested information in response. 
# SO App will request SFDC for certain information via an API: API_1
# On request from SO App, SFDC needs to send the requested information in response. 
# SFDC to send the latest Bank details created at back end as in response of API_1 to SO App.
# API_1 should be configured in SFDC with below structure, so that above communication can happen. 
# The mandate registration will only move ahead if the stage-substage are as defined in the expected API response.
# Failure Response will be send as per the scenarios - Covered in [https://fincap.atlassian.net/browse/ML-7667|https://fincap.atlassian.net/browse/ML-7667|smart-link] 
# If there is no failure then complete expected response will be sent back to SO app.

*Name of API* - AadharMandate_Biometric 

*Request to SFDC from SO App:-*
\{
"requestHeaderSource"
"LoanNumber",
"Username"
}

*Response from SFDC to SO App:-*
\{
Username
Substage
Stage
LoanNumber
TransactionIdentifier
TransactionReference
ConsumerIdentifier
ConsumerAccountNo
consumerAccountType
consumerMobileNumber
paymentInstrumentIFSC
paymentMethodToken
PaymentInstructionLimit
PaymentInstructionFrequency
PaymentInstructionStartDateTime
PaymentInstructionEndDateTime
PaymentInstructionDebitFlag
PaymentInstructionDebitDay
ConsumerAccountHolderName
}
acceptance: API_1 is configured in SFDC with above structure, so that communication can happen between SO app & SFDC.

key: ML-6069
summary: User Story 4: If API_1 success then API_2 triggers & its responses - Part 1
description: h3. User Story:

As a IRO/MRO, when I am in process of Biometric Aadhar Mandate on SO App and SFDC fails to send back the required details by SO app.

h3. Prerequisite:

* User selects Biometric option for Aadhar mandate and a pop up on SFDC screen is visible to user with a timer & user is in process of completing the flow from SO app
* The response sent back from SFDC to SO App for API_1 got successful - API details as covered in [https://fincap.atlassian.net/browse/ML-6068|https://fincap.atlassian.net/browse/ML-6068|smart-link] 

h3. Use Case:

* All Journeys → Disbursement flow → Biometric option for Aadhar mandate is in progress
* SFDC front end is showing a pop-up with timer to user & user is in process of completing the flow from SO app
* SO app requested few details to SFDC via API_1 and the response sent back from SFDC to SO App for API_1 got successful.

h3. Details:

* If SO app requested few details to SFDC via API_1 and the response sent back from SFDC to SO App for API_1 got successful. then SO will sync back the final status to SFDC by API_2.
* API_2 structure is covered in [https://fincap.atlassian.net/browse/ML-6071|https://fincap.atlassian.net/browse/ML-6071|smart-link] 

h3. *Back end fields stamping*

The Mandate related fields to be populated in the bank detail object:-

# eMandate status - paymentMethodPaymentTransactionStatusMessage; → 
## If the value received in API = Initiated, Emandate status is to be stamped as Success.
## Whatever be the status - Error/ Success/ Response time exceed, the same will get stored here, as well as in the emandate status field which is visible to user on front end.
# Error Message - paymentMethodPaymentTransactionErrorMessage
## The message received under this tag should be visible as a toast message on failure
## There can be two error messages we will get in API 2 :
### Abort , Status code 0392 – PaymentMethodPaymentTransanctionErrorMessage “Transaction aborted”.
### Failure, Status code 0399 - PaymentMethodPaymentTransanctionErrorMessage “TE-47- User Terminated EKYC process”
# TPSL Transaction Id – paymentMethodPaymentTransactionIdentifier
# Tpsl Transaction DateTime – paymentMethodPaymentTransactionDateTime
# Mandate Id - paymentMethodPaymentTransactionInstructionId

h3. *If the Mandate Final status is received as Success & the timer is ON on front end:*

# “Adhar Biometric Authentication” pop up visible to the user should disappear and user should land on base screen.
# Toast message to be shown on top of the screen as: “Mandate registration is successful.”
# The bank details should get frozen and user can go ahead on the next screen of the case to complete the loan application flow.
# Mandate Id to be populated on the bank detail object as received in response of API_2 from SO App.
# Status field to be updated as Success visible on front end in the Mandate registration section on the base screen.
# Details related to mandate to flow in FinnOne submit as per current implementation.

h3. *If the Mandate Final status is received as Failure or Error & the timer is ON on front end:*

# “Adhar Biometric Authentication” pop up visible to the user should disappear and user should land on base screen.
# Status field to be updated as Failure or Error visible on front end in the Mandate registration section on the base screen.
# As per error received - toast message to be shown on top of the screen as: “Mandate registration has failed due to <Error Message>\! Kindly Retry”
## Error message as stamped from the reponse
# User can then select any option from Aadhar based e-mandate i.e. Send link, B2B or Biometric(eSign).
# User can also choose another option from Mandate type drop-down i.e. Digital Mandate, Aadhar based Mandate and Physical Mandate option, as per the bank eligibility .
# A new Bank detail record to be created in back end for the same.

h3. Scenarios when API_2 response received to SFDC but *timer is expired* are covered in

[https://fincap.atlassian.net/browse/ML-7675|https://fincap.atlassian.net/browse/ML-7675|smart-link] 
acceptance: # If SO app requested few details to SFDC via API_1 and the response sent back from SFDC to SO App for API_1 got successful. then SO syncs back the final status to SFDC by API_2.
# API_2 response is read by SFDC and the flow is continued as per the Success & Failure response received as given in description above, when timer is ON.
# Back end field stamping is done as per the description.

key: ML-6068
summary: User Story 3: API_1 communication between SO app & SFDC
description: h3. User Story:

As a IRO/MRO, when I am in process of Biometric Aadhar Mandate on SO App and SFDC fails to send back the required details by SO app, then I should be able to initiate a fresh Mandate process again.

h3. Prerequisite:

* User selects Biometric option for Aadhar mandate and a pop up on SFDC screen is visible to user with a timer as given in [https://fincap.atlassian.net/browse/ML-6067|https://fincap.atlassian.net/browse/ML-6067|smart-link]  
* & user is in process of completing the flow from SO app

h3. Use Case:

* All Journeys → Disbursement flow → Biometric option for Aadhar mandate is in progress
* SFDC front end is showing a pop-up with timer to user
* User is in process of completing the flow from SO app

h3. Details:

# Once the timer on pop-up starts, user is expected go to SO App and proceed with the Mandate registration process.
# Once user starts process on SO app, SO app requests SFDC for certain information via an API: API_1
# API_1 structure is covered in [https://fincap.atlassian.net/browse/ML-6070|https://fincap.atlassian.net/browse/ML-6070|smart-link] 
## The mandate registration will only move ahead if the stage-substage are as defined in the expected API response.
# If the API response is successfully captured on SO App’s end, user can proceed for mandate registration on SO App.
# If the API 1 gets failed due to any reason then below should work for user.

*Front end behaviour if the SFDC sent response back to SO app gets failed:*

# If API_1 fails due to any reason then below toast message should be displayed on the top of the screen as “Mandate registration failed\! Kindly Retry.”
# The Pop-up which was visible to user on screen with header “Adhar Biometric Authentication” will get disappeared and user will land on the base screen.
# User can then select any option from Aadhar based e-mandate i.e. Send link, B2B or Biometric(eSign).
# User can also choose another option from Mandate type drop-down i.e. Digital Mandate, Aadhar based Mandate and Physical Mandate option, as per the bank eligibility .
acceptance: # When the biometric aadhar mandate is in progress from SO app by user, then SO App can request SFDC for certain information via API_1. 
# [https://fincap.atlassian.net/browse/ML-6070|https://fincap.atlassian.net/browse/ML-6070|smart-link] works here as expected
# If the response from SFDC to SO app is failed somehow then below is followed:
## If API_1 fails due to any reason then below toast message should be displayed on the top of the screen as “Mandate registration failed\! Kindly Retry.”
## “Adhar Biometric Authentication” pop up gets disappeared
## User can select any option from Aadhar based e-mandate i.e. Send link, B2B or Biometric(eSign)
## User can also choose another option from Mandate type drop-down i.e. Digital Mandate, Aadhar based Mandate and Physical Mandate option, as per the bank eligibility.
# If the API response sent from SFDC is successfully captured on SO App’s end, then user can proceed for mandate registration on SO App → [https://fincap.atlassian.net/browse/ML-6069|https://fincap.atlassian.net/browse/ML-6069|smart-link] to follow


key: ML-6067
summary: User Story 2: Creation of new bank detail for proceeding with Biometric option under Aadhar mandate
description: h3. User Story:

As a IRO?MRO, if I select Biometric option for Aadhar mandate then I should get a pop up on SFDC screen with a timer so that I can perform further process by navigating to SO app.

h3. Prerequisite:

User has selected Biometric option under Aadhar Mandate and clicked on proceed button as given in [https://fincap.atlassian.net/browse/ML-6066|https://fincap.atlassian.net/browse/ML-6066|smart-link]  

h3. Use Case:

* All Journeys → Disbursement flow → Aadhar mandate can be performed on the case
* Biometric option selected and proceeded 

h3. Details:

# On selection of Biometric option and click of Proceed button → A pop-up to appear on screen. The base screen to be frozen and become non-editable.
# *Pop up details:*
## Header - Adhar Biometric Authentication
## Message to be displayed on pop-up below header as “Please initiate Biometric Authentication through SO App using Adhar Biometric option for Loan application XXXXXXXX.”
## A configurable timer to be created and the count-down to be displayed on the pop-up. Current  to keep as - 5 mins
# The Aadhar mandate Status on the base screen should be updated to “In Progress”.
# User is expected to go to SO App and proceed ahead with the mandate registration by eSigning.
# *Back end stamping:*
## A new bank detail record to be created - for this biometric aadhar mandate process in backend at SFDC.
## The field Aadhar Mandate Mode to be stamped as “Biometric”.
acceptance: # On selection of Biometric option and click of Proceed button → A pop-up appears on screen & the base screen gets frozen and becomes non-editable.
# The pop up has below details:
## Header - Adhar Biometric Authentication
## Message below header as “Please initiate Biometric Authentication through SO App using Adhar Biometric option for Loan application XXXXXXXX.”
## Timer 
# For this biometric aadhar mandate process in backend at SFDC → A new bank detail record is created
# Aadhar Mandate Mode ise stamped as “Biometric” at backend
# After pop up is visible [https://fincap.atlassian.net/browse/ML-6068|https://fincap.atlassian.net/browse/ML-6068|smart-link] to follow

key: ML-6066
summary: User Story 1: Introducing Biometric option
description: h3. Story:

As a IRO/MRO, I should be able to view the biometric option under Aadhar based mandate registration along with other options so that I can proceed with the same.

h3. Use Case:

* All Journeys →  Disbursement flow (Non IDFC Bank details journey)→ Aadhar mandate eligible for a case
* Aadhar mandate → Aadhar linking in Bank account API callout initiated & is successful
* Aadhar mandate can be performed on the case

h3. Details:

!image-20210529-153212.png|width=1151,height=284,alt="Like this"!



# When an application is Aadhar e-mandate eligible and Aadhar mandate can be performed for a case, then for such cases user to be provided an option: “Biometric” along with Send link & B2B Journey options.
# This is to be provided as a radio button option before the other options - B2B and Send Link - on the above screen. 
# The Biometric option to be the 1st option to be provided, in the bnak detail/sanction/generate DA screen.
# User should be able to select the option and click on Proceed button for mandate registration.
# This option has to be provided for both AePS and self-declaration journeys of Aadhar based e-mandate.
acceptance: # When an application is Aadhar e-mandate eligible and Aadhar mandate can be performed for a case, then for such cases an option: “Biometric” is visible along with Send link & B2B Journey options.
# This is placed at 1st radio button and then Send link & then B2B option are visible.
# User can select this option and proceed ahead then [https://fincap.atlassian.net/browse/ML-6067|https://fincap.atlassian.net/browse/ML-6067|smart-link] to follow

key: ML-5779
summary: UI Change: Skip and Proceed Button - Back end logic validation
description: UI Change: Skip and Proceed Button - Back end logic validation

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Skip and Proceed Button - Back end logic validation

key: ML-5775
summary: UI Change: Confirm your details | Part 3 - Insurance Screen | Confirm Loan Details
description: UI Change: Confirm your details | Part 3 - Insurance Screen | Confirm Loan Details

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Confirm your details | Part 3 - Insurance Screen | Confirm Loan Details

key: ML-5774
summary: UI Change: Confirm your details | Part 2 - PSL Details
description: UI Change: Confirm your details | Part 2 - PSL Details

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Confirm your details | Part 2 - PSL Details

key: ML-5773
summary: UI Change: Confirm your details | Part 1 - Personal Details & Pop up UI
description: UI Change: Confirm your details | Part 1 - Personal Details & Pop up UI

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Confirm your details | Part 1 - Personal Details & Pop up UI

key: ML-5737
summary: Technical Story: Call Emorphis Again after Click Wrap successful
description: Once the click wrap is successful, SFDC will call Emorphis again in backend with ESIGN Status as “Yes” 

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.

[~accountid:5e1822e2c578120daca5b494] - Kindly confirm on tag mapping for this API.
acceptance: Once the click wrap is successful, SFDC will call Emorphis again in backend with ESIGN Status as “Yes” 

key: ML-5736
summary: Technical Story: Documents visible to customer handling
description: Review Your Details - Documents visible to customer handling

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: Documents visible to customer handling

key: ML-5735
summary: Customer Screen 5: Review Your Details: Documents generated visible to customer
description: h1. On Document Generation screen when documents are generated successfully, all the documents will be visible to customer on screen

h3. Use Case:

# Documents generated successfully
# Documents visible to customer

h3. Description:

# When documents are generated successfully as given in [https://fincap.atlassian.net/browse/ML-5624,|https://fincap.atlassian.net/browse/ML-5624,] all the generated documents should be visible to customer on screen.
# Document visibility - 
## Documents will be visible 1 below the another like below:
###  
!image-20210514-110332.png|width=226,height=647!

## Clicking on any 1 document from the list, then the document will be visible like below:
### !image-20210514-110514.png|width=255,height=648!
# Once documents are visible, customer should be able to complete the Click Wrap process as given in - [https://fincap.atlassian.net/browse/ML-5626|https://fincap.atlassian.net/browse/ML-5626]
# Below documents should be generated and visible to customer:
acceptance: # When documents are generated successfully as given in https://fincap.atlassian.net/browse/ML-5624, all the generated documents should be visible to customer on screen in the way as mentioned in description._x000D_
# All the documents are visible to customer as per above description list.

key: ML-5644
summary: Business Unit to be send in below response API - eKYC
description: or below API Business Unit Tag to be send for Rural hl, LAP MEL and PL_x000D_
_x000D_
Esign API 1_x000D_
_x000D_
EKYC API 1_x000D_
_x000D_
ESTAMP API1_x000D_
_x000D_
Attached is the sample request and response_x000D_
_x000D_
COMPONENTS IMPACTED : _x000D_
 [^EKyc Request-Reponse with Business Unit.docx] _x000D_
IFB_ALL_EKYCLoanIDValidCheckReqProWrpr_x000D_
IFB_ALL_EKYCLoanIDValidCheckReqProcessor_x000D_

acceptance: Business Unit to be send in below response API

key: ML-5633
summary: Aadhar last 4 digits to flow to FinnOne
description: In FinnOne submit request Aadhar last 4 digits should flow in below Tag_x000D_
_x000D_
NCM_ADHARID_C_x000D_
_x000D_
Below tag should flow empty - "AadharNo"_x000D_
Currently masked aadhar is flowing in the same_x000D_
_x000D_

acceptance: Aadhar last 4 digits should flow in FInnOne in the tag mentioned

key: ML-5626
summary: Customer Screen 5: Review Your Details: Click Wrap
description: h2. When customer has successfully generated the Documents, he will then have to perform digital signing (click wrap process) for the generated docs.

h2. Pre-requisite:

Documents are generated successfully & are visible to him as given in [https://fincap.atlassian.net/browse/ML-5735|https://fincap.atlassian.net/browse/ML-5735|smart-link] 

h2. Description

# Once the documents are generated successfully & are displayed to him, then below the list of documents as a Message would be visible to the User as - “Kindly Validate the same with the OTP Received on Registered Mobile Number” with SEND OTP button.
# Once the User clicks on “SEND OTP”, an SMS with OTP will be send to customer mobile number by SFDC. PFB SMS content:
## Dear Customer,
 
Your Loan Application 0347178545 has been processed. Please click on the link to view and digitally sign your Sanction letter along with Terms & Conditions. [https://cfsurvey.secure.force.com//bilplclickwrap/?id=a320I00000HbqJv&linkId=d3b224fda156113a0af1927bef40137d|https://cfsurvey.secure.force.com/bilplclickwrap/?id=a320I00000HbqJv&linkId=d3b224fda156113a0af1927bef40137d]
 
Regards
IDFC FIRST Bank
# On the bottom of the complete doc Kit, Customer will have option to Enter OTP, to do digital Sign.
## Field name - “Enter OTP” with text box
## Timer of 5 mins currently - this should be configurable
## Verify & Proceed button
# Customer will enter OTP in the above text field and click on Verify & Proceed button to verify OTP.
# OTP verification/Click wrap will be performed and a loader will be visible to customer on front end.
# Below OTP success & failure scenarios will follow:

h3. *OTP Success:*

# If OTP is entered correctly, then the click wrap is considered as successful and below message will be visible to customer on screen 
## “_Congratulations\!\! Your Application is successfully submitted. You will receive funds in your account shortly. Contact your Branch for any query or support._”
# Once the click wrap is successful, the journey will stopped here for the Customer with above message visible on screen.
# In backend SFDC will call Emorphis again now with ESIGN Status as “Yes” 
## @yashopriya – need to discuss  this handling. Covered in - [https://fincap.atlassian.net/browse/ML-5737|https://fincap.atlassian.net/browse/ML-5737|smart-link] 
# After Emorphis success - Finnone will be called as given below in section FinnOne Submit

h3. *OTP Failed:*

# If the OTP is not successful OR user has not entered OTP within 5 Mins on the documents screen, then a message should be visible to retry OTP - “_Incorrect OTP/Time exceeded. Regenerate OTP_”.
# A button would be present “Regenerate OTP”. On clicking of which a new OTP will be send to Customer registered mobile number.
# Customer will have option to retry/regenerate OTP 3 times.
# *Drop Off* - 
## Even after 3rd attempt if the OTP is not validated/incorrect, then the case will be treated as a dropoff with reason – Clickwrap failed.
## Customer should get below message should be visible to the User - _“Dear Customer, Kindly contact nearest branch for information regarding you loan Application  - “SFDC Number””_

h3. FinnOne Submit:

# Post Emorphis API success as mentioned in - [https://fincap.atlassian.net/browse/ML-5737|https://fincap.atlassian.net/browse/ML-5737|smart-link] 
# The case will move/submitted to FinnOne automatically by SFDC at backend. 
# If finnone submit is failed, then the case will be visible to IRO with stage substage as “Submit to FinnOne”. With retry option. As working currently. No change.
# If finnone submit is successful, then the case stage and substage would be “Predisbursal” “Predisbursal Pending” as is and here also case will be visible to IRO.

h3. MEL+ Customer journey flow is completed here after Finnone submit.
acceptance: # Once the documents are generated successfully & are displayed to him, then below the list of documents a Message is visible to the User as - “Kindly Validate the same with the OTP Received on Registered Mobile Number” with SEND OTP button.
# Customer is able send SMS and enter the same for verification on screen.
# OTP success & failure scenarios are followed as given in description
# Finnone submit happens as given in description

key: ML-5624
summary: Customer Screen 5: Review Your Details: Document Generation
description: h1. When customer proceeds from Bank Details screen, Customer will land on Document Generation screen

h2. Pre-requisite:

Customer has completed his Bank Details entry & clicked on “Proceed” from Bank Details page.

h2. Description

# Once the Mandate/SI is completed, User will be moved to next stage of Review Your Details: Document Generation.
# As the clicks “Next” from bank details Page – a popup will be visible to the user - “_Mandate is done successfully_”.
# There will be a drop down as “Select Language” with language options, which user will select and click on “Next”.
# After selecting language & clicking on NEXT, documents will be generated as current implementation and list of documents generated will be same as MEL+ journey - only those which are eligible for E signing. Refer below story for the same:
## [https://fincap.atlassian.net/browse/RMP-117|https://fincap.atlassian.net/browse/RMP-117|smart-link] 
# When the User clicks on “Next” on the screen -popup- – Emorphis API will be called out at back-end to generate all Documents as per current logic. No Change.
# If documents are generated successfully then, a message will be displayed as “_Documents generated successfully”_
# Documents visibility is covered in below story & same will be followed for the next process: [https://fincap.atlassian.net/browse/ML-5735|https://fincap.atlassian.net/browse/ML-5735|smart-link] 
# *Drop off* - 
## If the user doesn’t select anything and there is an inactivity for 24 hrs, then the user will be consider as a drop off and Case will be visible on Document generation stage to IRO. 
## Reason - Inactivity
# Emorphis API:
## If the API is failed for Emorphis, below error will be visible to User - “S_orry\!\! Facing some technical error. Kindly retry_” with a Retry button. 
## *Drop off* - 
### If Even after 3rd retry if the API is not successful, then the case will be consider as a drop off  with the reason of clickwrap failed and a message will be visible to the User as - _“Dear Customer, Kindly contact nearest branch for information regarding you loan Application  - “SFDC Number””_
### The case will be visible to IRO on Document generation stage.
# -Once the documents are generated successfully a Message would be visible to the User - “--_Documents generated successfully. Kindly Validate the same with the OTP Received on Registered Mobile Number_--” with OK button.-

!image-20210402-104229.png|width=50%!

!image-20210412-124445.png|width=50%!



!image-20210402-104234.png|width=50%!
acceptance: # On completing Bank details and landing on Document Screen a popup is visible to the user - “_Mandate is done successfully_”.
# After selecting language & clicking on NEXT, documents are generated as current implementation and list of documents generated is same as MEL+ journey.
# If documents are generated successfully then, a message is displayed as “_Documents generated successfully”_
# *Drop off* - 
## If the user doesn’t select anything and there is an inactivity for 24 hrs, then the user will be consider as a drop off and Case will be visible on Document generation stage to IRO. 
## Reason - Inactivity
## Emorphis API:
### If the API is failed for Emorphis, below error will be visible to User - “S_orry\!\! Facing some technical error. Kindly retry_” with a Retry button. *Drop off* - 
### If Even after 3rd retry if the API is not successful, then the case will be consider as a drop off  with the reason of clickwrap failed and a message will be visible to the User as - _“Dear Customer, Kindly contact nearest branch for information regarding you loan Application  - “SFDC Number””_
### The case will be visible to IRO on Document generation stage.

key: ML-5623
summary: Customer Screen 4: Bank Details - ALL API failure calling Drop off functionality 
description: h3. Customer Screen 4: Bank Details - Retry count stamping + ALL API failure calling Drop off functionality

This is a dev technical story.

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: ALL API failures should be considered as Drop off 

key: ML-5622
summary: Customer Screen 4: Bank Details - Manual Data Entry
description: h1. As a Customer, I should be able to enter Bank Details manually, if I am not found as an existing customer.

h2. Pre-requisite:

Customer received Fresh ECS and *CBS Search was Failed Or Customer did not select any existing Bank details.*

h2. Use Case

# Open ECS - Condition not satisfied → Search CBS API callout auto trigger
# Search CBS → Match Not found → Manual Bank Details Entry

h2. Description

Customer received Fresh ECS and CBS Search was Failed Or Customer did not select any existing Bank details, Then Customer to land on Manual Data Entry screen, where he can enter his bank details manually. 

h3. Manual Data Entry:

h3. 1] Fetch IFSC/MICR (IDFC or Non IDFC)

# Below fields should be visible to User, on landing this screen
## IFSC
## -MICR-
# With an Informative message should be visible “Kindly enter any one details”
# On entry of any one details “Fetch Bank Details” button will be enabled. Clicking on which below scenarios can happen.
# If IFSC -or MICR- Fails:
## Clear & Retry button should be visible to customer on the same screen where IFSC was fetched.
## Retry button should be visible to customer with a customer friendly message as “S_orry\!\! Facing some technical error. Kindly retry_“.
## Customer is allowed to retry for 3 times.
## If still fails or without retry, customer can click on Clear Bank Details buttons, which will clear the details entered by him in above fields and can enter different details to continue.
## Every clear will refresh the retry count.
# After IFSC is successful, below fields will be visible for customer to enter:
## IFSC
## MICR
## Bank Name
## Branch
## Account Number
## Account Holder Name
## Account Type
# Open Mandate check box  -  Not needed to show on front end. Keep it checked always in back end only. 
# All the other fields will be present in backend and not visible on front end.
# Any failure in fetching IFSC/MICR OR IFSC fetched, but received only physical mandate &/or Aadhar Mandate - then below Drop off scenarios to follow:
# *Drop off:*
## If Get IFSC is failed and user is unable to fetch the bank details after 3 retry the case will be treated as Drop off for reason - Get IFSC Failed scenario – Physical mandate
## If GET IFSC is success but the bank is eligible only for “Physical Mandate” @shrikant – Aadhar Mandate will also come in this scenario ? the case will be treated as a Dropoff for reason - Get IFSC Failed scenario – Physical/aadhar mandate

h3. 3] IDFC IMPS or IMPS

# Along with all the above fields, if Bank is eligible for IMPS then below fields will be displayed or Repayment mode dropdown will be visible directly.
# Clear Bank Details & Proceed buttons should be visible
## Clear Bank Details - Will go back to IFSC screen
## Proceed - will run the APIs
## -IMPS Status-
## -Proceed with IMPS button-
# Customer will click on “Proceed -with IMPS-” button to continue the IMPS flow.
## On this click 2 API should run - IMPS & Verify Account (Finnone Dedupe).
# Once proceeded, Proceed button will not be visible and retry will be visible
## Retry - 3 attempts
# IMPS flow is same as existing no change.
# If IMPS is successful, then only below fields will be displayed:
## -IMPS status-
## IMPS Beneficiary name
# If IMPS is failed:
## Retry button should be visible to customer with a customer friendly message as “S_orry\!\! Facing some technical error. Kindly retry_“.
## Clear Bank Details buttons should be visible
## Customer is allowed to retry for 3 times.
## If success, then point 4 to follow.
## If failed, then below point 6 follow. 
# *Drop off:*
## If IMPS Failed due to non technical reason – Same would be consider as Dropoff with the reason – IMPS Failed.

h3. Karza IMPS - At backend

# After IMPS is completed, SFDC should auto trigger the karza API for the customer in the same IMPS loader.
# -Customer will have to complete Karza IMPS-
# -Below fields will be displayed to customer:-
## -Customer Name-
## -Verify button-
# -Customer will have to mandatory click on Verify button-
# If Karza name match is successful, then loader should be stopped and below EMI Day -Repayment mode- flow will follow.
# If Karza API gets failed, then case will be drop off
# If Karza name match is not successful, then Customer should be dropped off.
## Loader should be stopped and message should be displayed on front end.
# *Drop off:*
## If Karza Name Match is < 65%  then case should get dropped off with reason - *Karza Mismatch*

h3. EMI Day - Mandate/SI - Only Digital - No Physical/Aadhar Mandate allowed

# Successful Karza IMPS below fields should be visible
## Repayment Mode - No cash option will be visible in this mode. Default NACH will be allowed and auto selected. 
### Hide Repayment mode form front end.
## EMI Day - display values of NACH option.
# After EMI day selection, the digital Mandate OR Digital SI flow (as applicable) to follow with all existing validations.
## Fields visible as below for Mandate:
### Select Mandate Type - Default Digital Mandate Registration option to be visible. Physical Mandate option is not allowed. No drop down should be there.
### Digital Mandate Mode - Net Banking/Debit Card
### Proceed button
### Status
## Fields visible as below for SI:
### Choose SI Type - Digital/-Physical-. Default Digital option to be visible. Physical option is not allowed. No check box should be there.
### Initiate SI button
### -Status-
## -Fields visible as below for Aadhar Mandate:-
### -Is Aadhar Number linked with your provided Bank account-
### -Aadhar Mandate Mode - Send Link/B2B Journey-
### -Status-
### -Proceed Button-
### -Mandate ID - After success-
# After 1 failure of digital SI Or digital Mandate, Physical SI or Physical Mandate option will not be  visible to customer.
# Aadhar mandate if not allowed for customer journey, along with Physical SI or Physical Mandate.
# *Drop off:*
## If after 3 retry Digital Mandate or Digital SI is failed, the case will be treated as dropoff with reason - Digital Mandate. 
## Digital SI and aadhar Based Mandate Failed scenario - Physical Mandate

*If Digital Mandate/SI is successful the case will Move to next stage of Document generation.*

h3. Drop Off Scenarios Message to be displayed

# For all the above Drop offs, Customer will get below message “Dear Customer, Kindly contact nearest branch for information regarding you loan Application  - “SFDC Number”” and IRO will view the case on disbursement screen.

----

Below screenshots are for reference:

h3. IDFC Account Customer

!image-20210405-164857.png|width=50%!

!image-20210405-164859.png|width=50%!

!image-20210405-164902.png|width=50%!

h3. Other Account Customer - Mandate

!image-20210406-141534.png|width=524,height=800!
acceptance: For below flow, the functionality is working as mentioned in description:

# Open ECS - Condition not satisfied → Search CBS API callout auto trigger
# Search CBS → Match Not found → Manual Bank Details Entry

key: ML-5612
summary: Customer Screen 4: Bank Details - Open ECS Response & flow
description: h1. As a Customer, I should be able to continue the flow as per the ECS callout results.

h2. Pre-requisite:

Customer has “Proceed” from Confirm Loan Details Pop-up, SFDC triggered Open ECS callout immediately on click and this callout is successful and results are found i.e. Open ECS or Fresh ECS.

h2. Use Case

# Open ECS - Condition satisfied → Open ECS flow as existing
# Open ECS - Condition not satisfied → Search CBS API callout auto trigger
## Search CBS → Match found → flow as per existing
## Search CBS → Match Not found → Manual Bank Details Entry

h2. Description

# When the Open ECS callout is in progress, a loader should be visible to customer.

h3. Open ECS condition satisfied:

# If open ECS is successful and current logic of open ECS i.e. balance tenure and Balance Mandate Amount is satisfied, then Open ECS Flow should follow. 
# Open ECS complete flow and logic will be same as existing. NO change.
# When Open ECS is satisfied, below fields are populated to customer & he can click on Next to continue with details.
# Clicking on next, customer will go to next screen.
# Only below fields should be displayed to customer and rest all the fields will be hidden:
## Bank Name
## MICR Code
## Acc No
## Acc type
## Destination Acc holder name
# If multiple mandate accounts are fetched in Open ECS callout then any random account details should be displayed. [~accountid:5e1822e2c578120daca5b494] - Can we keep current logic of displaying 1st record from the array?
# Below screenshot is for reference:

!image-20210401-145205.png|width=50%!

h3. Open ECS condition is NOT satisfied (Fresh ECS):

# If Open ECS is successful but the logic i.e. balance tenure and Balance Mandate Amount is NOT satisfied -or the customer does not want to Move ahead with open ECS-, then SFDC to automatically run CBS_Search Callout.
# CBS_Search callout logic will remain same for Bank and IFBL workflow.

h3. CBS Search Callout Results:

*CBS Search Success:*

# -Below Message should be displayed on Successful search “Congratulations\!\! You are existing IDFC Customer. Kindly select Existing Bank account for disbursal”- - This message is not required anymore.
# If the Data is found in CBS Search, then Customer will be able to see all bank details record and he should be able to either select one record and move ahead OR he can enter bank details Manually. 
# Below columns will be visible with bank records
a.	Account number
b.	Account Type - [~accountid:5e1822e2c578120daca5b494] to confirm on logic
c.	Branch Name
# If the user selects the existing Account from search and click on Next Button, then below APIs should be triggered by SFDC at backend and a loader should be visible to the customer on frontend.
# All the below APIs should be auto triggered by SFDC back to back:
## IMPS/IDFC IMPS
### If Failed: 
#### Retry button should be visible to customer with a customer friendly message as “S_orry\!\! Facing some technical error. Kindly retry_“.
#### Customer is allowed to retry for 3 times.
#### If failed after 3 retries - *Drop off:*
##### If IMPS Failed due to non technical reason – Same would be consider as Dropoff with the reason – IMPS Failed.
### If Success:
#### Karza IMPS 
## Karza IMPS
### If Success below to follow
### *Drop off:* If Karza Name Match is < 65% then case should get dropped off with reason - *Karza Mismatch*
# -then customer will be directed to the Next stage of Bank details, where all details will be auto populated and non-editable. (as current implementation)-
## -Fields to be displayed-
### -IFSC-
### -MICR-
### -Bank Name-
### -Branch Name-
### -Account Type- 
### -Account Number-
### -Account Holder Name-
# Customer will land on EMI Day field after the loader is stopped and all the above APIs are successful.
#  Then, Digital SI to follow as existing.
# After 1 failure of digital SI, Physical SI option will not be visible to customer.
# *Drop off:*
## If after 3 retry of Digital SI is failed, the case will be treated as dropoff with reason - Digital Mandate.
## Digital SI and aadhar Based Mandate Failed scenario reason - Physical Mandate
## For all the above Drop offs, Customer will get below message “Dear Customer, Kindly contact nearest branch for information regarding you loan Application  - “SFDC Number”” and IRO will view the case on disbursement screen.
# If Digital SI is successful, then the case will Move to next stage of Document generation.

*CBS Search Failed Or Customer do not select any existing Bank details:*

# For scenarios:
## If the CBS Search API is failed OR
## If customer does not click on any of the Bank details found and click on “Next” button 
## Then Customer to land on Manual Data Entry screen, where he can enter his bank details manually. Covered in - [https://fincap.atlassian.net/browse/ML-5622|https://fincap.atlassian.net/browse/ML-5622|smart-link] 
## Here, if CBS search is failed then customer should NOT get “Open IDFC account pop-up”.
## Open IDFC Account Pop-up (Create Account flow) is not applicable for Customer Journey.

----

Existing customer screenshots for reference:

!image-20210401-152855.png|width=50%!

!image-20210401-152848.png|width=50%!

----

Queries:

# Related to previous story query, if customer can manually select this option if ECS is failed then only condition -  “_or the customer does not want to Move ahead with open ECS,_” will be satisfied, otherwise not. - _This condition will not be there as there is no checkbox displayed. Customer will have to go ahead with Open ECS only if fetched, otherwise Search CBS will run and flow to follow as per results._
# For Fresh ECS, Once the ECS loader is completed a message to be displayed or immediately search CBS should be triggered at backend in the same ECS loader? - _In the same loader. No Message to display. Back to back calls_
acceptance: # Customer has “Proceed” from Confirm Loan Details Pop-up, SFDC triggered Open ECS callout immediately on click and this callout is successful and results are found i.e. Open ECS or Fresh ECS.

# Below flow is achieved as given in description:
## Open ECS - Condition satisfied → Open ECS flow as existing
## Open ECS - Condition not satisfied → Search CBS API callout auto trigger
### Search CBS → Match found → flow as per existing
### Search CBS → Match Not found → Manual Bank Details Entry

key: ML-5608
summary: Customer Screen 4: Bank Details - Open ECS Callout
description: h1. When customer proceeds from Confirm Your Details screen, SFDC to trigger Open ECS callout immediately on click

h2. Pre-requisite:

Customer has clicked on proceed button on Confirm Loan Details Pop-up

h2. Description

# Once the User Clicks on “Proceed” from Confirm Loan Details Pop-up, SFDC to trigger Open ECS callout immediately on click.
# When Open ECS callout functionality will be as per existing and implemented. No change.
# Only the change with current disbursement flow is instead of CBS Customer search to run at first, we will be running Open ECS callout at first now and then the flow will continue as per response.
# When the callout is in progress, a loader should be visible to customer.
# If Open ECS API is failed:
## Retry button should be visible to customer with a customer friendly message as “S_orry\!\! Facing some technical error. Kindly retry_“.
## Customer is allowed to retry for 3 times.
## Even after 3rd retry if the API fails, then SFDC to hit CBS search callout automatically and flow continues as given in  [https://fincap.atlassian.net/browse/ML-5612|https://fincap.atlassian.net/browse/ML-5612|smart-link] under section “Open ECS condition is NOT satisfied (Fresh ECS)”
# If Open ECS API is success:
## Then The flow will continue as per the response received for Open ECS & is covered in - [https://fincap.atlassian.net/browse/ML-5612|https://fincap.atlassian.net/browse/ML-5612|smart-link] 

----

Queries:

# We have a condition where if somehow Open ECS callout is failed due to any technical reason, we get below error and customer can retry Fetch ECS Details. We need to keep this as is? - {color:#6554c0}If open ecs is failed for any reason even after 3 attempts, then the Search CBS callout will happen automatically in blackened{color}

!image-20210401-134535.png|width=1221,height=608!
acceptance: # Once the User Clicks on “Proceed” from Confirm Loan Details Pop-up, SFDC to trigger Open ECS callout immediately on click.
# When Open ECS callout functionality will be as per existing and implemented. No change.
# When the callout is in progress, a loader should be visible to customer.

key: ML-5601
summary: STP status should be saved if Only tier is received from FICO
description: If in FICO 2nd Call - SFDC Receives the stp status Value in below Manner _x000D_
_x000D_
STPStatus : " ;Platium" _x000D_
_x000D_
Then SFDC to save the Tier and Stp status can be blank
acceptance: SFDC should stamped the tier if STP Status is not received

key: ML-5598
summary: Beneficiary name needs to be unmasked and shown as is
description: Currently Beneficiary name is masked same needs to be unmasked and shown as is
acceptance: Beneficiary name is unmasked and shown as is

key: ML-5597
summary: When Karza API is down SFDC needs to send mentioned data to finnone
description: * When Karza API is down SFDC needs to send below data to finnone._x000D_
* We have to handle the scenario where Karza API is down throughout the flow and no percentage was received._x000D_
* In this case we have to send "N" in name match status. _x000D_
* Name Match percentage can be sent Blank (current functionality). _x000D_
* This is done as the Additional Document Verified field validation has dependency on Name match status field populated with “N” on Instrument details._x000D_

acceptance: When Karza API is down SFDC Needs to send mentioned data to finnone as given in description

key: ML-5589
summary: UI Change: Loan Amount Stage - Terms And Condition Popup
description: UI Change: Loan Amount Stage - Terms And Condition Popup

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Loan Amount Stage - Terms And Condition Popup is developed as per new UI

key: ML-5588
summary: UI Change: Loan Amount Stage - Slider Input & UI Handling
description: UI Change: Loan Amount Stage - Slider Input & UI Handling

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Loan Amount Stage - Slider Input & UI Handling is developed as per new UI

key: ML-5587
summary: UI Change: Loan Amount Stage - Progress Bar
description: UI Change: Loan Amount Stage - Progress Bar

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Loan Amount Stage - Progress Bar is developed as per new UI

key: ML-5583
summary: Address parsing logic for length <40 Characters
description: As per User story - [https://fincap.atlassian.net/browse/ML-1032|https://fincap.atlassian.net/browse/ML-1032] the address parsing logic will remain same with 1 change

If ekyc or ckyc is successful and the combined address is less than 40 characters then the Complete address should be stamped in Line 1 as well as line 2.

There should be no breaking of address into Half
acceptance: If the address is less than 40 characters then the Line 1 and Line 2 should be autopopulated as same

key: ML-5578
summary: On BCM financial details section on loan details section EMI start date and loan closure date there is no validation, system accepted past and future values 
description: For MEL repeat cases in UW in Previous loan details section below field should flow to FICO in below tags



|SFDC Field Name|FICO mapping:- applicants-->previousLoanDetails|Type : PreviousLoanDetail|
|EMI Start Date|previousLoanDetails-->emiStartDate|date|
|Loan Closure Date|previousLoanDetails-->loanClosureDate|date|
|Sanction Loan Amount|previousLoanDetails-->sanctionedLoanAmount|double|
|Total Income of Previoud Loan|previousLoanDetails-->totalIncomeOfPreviousLoan|double|
|% of Increamental cash flow|previousLoanDetails-->percentageIncrCashFlow|double|
|EMIs Paid|previousLoanDetails-->emisPaid|int|
|Peak DPD (Days)|previousLoanDetails-->peakDPD|int|
|No.of DPD Bet 8-14|previousLoanDetails-->noOfDPDbet8and14|int|
|No.of DPD Bet 15-30|previousLoanDetails-->noOfDPDbet15and30|int|
|Last 3 months DPD( Days)|previousLoanDetails-->lastThreeMonthsDPD|int|
|Principal Outstanding|previousLoanDetails-->principalOutstanding|double|
|Business Name|previousLoanDetails-->businessName|string|
acceptance: Tags should flow to FICO and deviation should be raised

key: ML-5576
summary: Multiple bank details to be created for Digital SI Cases
description: For cases where digital SI are failed new bank record is not created._x000D_
_x000D_
Expectation - If Digital SI is failed due to any reason or the user enter new bank details then new bank records should be created._x000D_
_x000D_
The SI should happen on the Latest bank record._x000D_
_x000D_
The flow would be same as digital Mandate
acceptance: For every Digital SI cases fail - new bank record should be initiated._x000D_
Latest bank record details should flow to FinnOne and all the other places - Emorphis and SMS

key: ML-5531
summary: SFDC ID to flow in All DMS API
description: For all DMS API below data should be stamped

# Reference id received from response to be stamped in SFDC Integration record
# SFDC ID should be send in “Loan ID Tag in the request of all DMS (API as attachment) API



Case - 0014255
acceptance: same

key: ML-5484
summary: Customer Screen 2: Confirm your details (Part 3) - Insurance Details - Part 2
description: h1. As a Customer, after completing PSL details section, I am able to view the Insurance details section on the same stage, so that I can verify or edit or submit the same & proceed ahead. 

h2. Pre-requisite: 

Customer has completed the data entry on Confirm your details - PSL details section and clicked on proceed button. 

h2. Description 

h3. Confirm Your Details 

* On clicking on Proceed from Loan details Page the user will land on next stage of “Confirm your details” * User will have 3 Sub Page in this Tab 
** Personal Details 
** PSL Details 
** *Insurance Details*

h3. Insurance Details

*Credit Protect Insurance* 

For Nominee details below Functionality should work: 

* If base loan has Nominee Details entered at Insurance, then those Nominee details should be auto populated & non editable here under Nominee details of customer journey loan.
* If Nominee is not there in base loan then, Co-app 1 details from base loan should be populated and non editable.
* A button should be provided as “Clear”. 
* Clicking on this all nominee details will be removed and user has to Manually enter the nominee details. 
* If base loan does not have CO-app then user have to Mandatory enter the Nominee Details 
* If Nominee age is less than 18 years then Appointee will be mandatory. 
* Nominee & appointee fields should be visible as given in field list 

*Hospicash Insurance*

* If the user ticks the Insurance, then Nominee is Mandatory. Nominee logic remains the same for this insurance as well. 
* If Nominee age is less than 18 years then Appointee will be mandatory. All the functionality mentioned in above insurance for nominee should be present.
acceptance: # For both the insurances, Nominee Functionality should work as described above

key: ML-5483
summary: Customer Screen 2: Confirm your details (Part 2) - PSL Details - Part 2
description: h1. As a Customer, after completing my personal details section, I am able to view the PSL details section on the same stage, so that I can verify or edit or submit the same & proceed ahead.

h2. Pre-requisite:

Customer has completed the data entry on Confirm your details - Personal Details section and clicked on proceed button.

h2. Description

h3. Confirm Your Details

* On clicking on Proceed from Loan details Page the user will land on next stage of *“Confirm your details”*
* User will have 3 Sub Page in this Tab
** Personal Details
** *PSL Details*
** Insurance Details

*PSL Details*

In continuation to story [https://fincap.atlassian.net/browse/ML-3754|https://fincap.atlassian.net/browse/ML-3754|smart-link] 

h3. Case dropped at this stage

# If the case is dropped off due to any reason, then the case will be visible in “MEL+ Self Journey Cases” worklist to IRO
# IRO will take ownership of case & then MEL+ Flow will continue as is to the IRO where IRO will view the case on Loan and Product details Page.
# PSL Details changed by Customer should be saved and visible to IRO on this screen.

----

# -Product to confirm if reference is required?- 
# -Will there be only 1 ref or 2?-

*As confirmed, References are not required in customer journey. No reference section will be visible on this screen.*
acceptance: IRO can take up the case if customer drops off from loan & product screen.

Case drop off scenario is working as mentioned in description

key: ML-5482
summary: Technical Story for Confirm your Details screen for 3 sections
description: Technical Story for Confirm your Details screen for 3 sections_x000D_
_x000D_
As this section will have 3 sections, SFDC will need to handling 3 screens under one progress item._x000D_
_x000D_
Sections should be displayed are:_x000D_
# Personal Details_x000D_
# PSL Details_x000D_
# Insurance Details
acceptance: Confirm your Details screen has 3 sections and hence, all the 3 sections should be visible under 1 progress bar icon "Confirm your details"._x000D_
_x000D_
Sections should be displayed are:_x000D_
# Personal Details_x000D_
# PSL Details_x000D_
# Insurance Details

key: ML-5481
summary: Stage on Customer journey - Part 2
description: h1. As a Customer, I should be able to enter details for my self journey on different pages, so that I can avail my offer received.

h2. Customer journey & IRO journey Stage mapping

Below is mapping of Customer journey Stages and IRO Journey Stages. 

IRO can start the journey from the stage where the customer journey has dropped off. 

Once IRO takes ownership and starts journey from the stage left by customer, then the further journey for IRO will remain as it is for MEL+.

|*Customer Journey*|*IRO Journey*|
|Loan Amount|Applicant details Page Pending|
|Personal Details|Co-applicant details Pending|
|PSL Details|Loan details Pending|
|Insurance Details|Insurance details Pending|
|Confirm Loan Details|Intermediary of Insurance details Pending|
|Bank Details|If search is success then CBS Search Page
If Search is Failed then Disbursement details Pending|
|Review your Details|Document Generation Pending|

[~accountid:5e1822e2c578120daca5b494] : PFB doubts:

# What if the customer dropped off on Loan details & then IRO continues, will the back pages editable to IRO? Can he retrigger?
## Yes, only the thing we need to take case here is IRO should land on the respective screen where customer left. He can then perform all the actions which are allowed to IRO in MEL+ journey e.g. retrigger, cancel etc  
# what stage is this of IRO - Intermediary of Insurance details Pending?
## This stage when IRO clicks next of Insurance screen → loan details pop-up - [~accountid:5e01db1dbc8ab30e98ece94c] - kindly confirm if we can open IRO on this screen.
acceptance: # The Customer stages and IRO stages should be mapped as given in description

key: ML-5480
summary: Drop off Handling - Part 4

description: h1. The self journey’s started by bank customers, should be dropped off automatically after a certain time limit by SFDC. 

h3. In continuation to drop off scenarios mentioned in below stories:

[https://fincap.atlassian.net/browse/ML-3748|https://fincap.atlassian.net/browse/ML-3748|smart-link] [https://fincap.atlassian.net/browse/ML-5478|https://fincap.atlassian.net/browse/ML-5478|smart-link] [https://fincap.atlassian.net/browse/ML-5479|https://fincap.atlassian.net/browse/ML-5479|smart-link] 

h3. Drop off reason should get stamped as per the drop off condition satisfied and message should be displayed to customer, along with SMS to BM.

h2. Reason for Drop off:

# A new Field “Reason for Dropoff” should be stamped at Backend for reporting Purpose.
# Below reason should be stamped for each condition:
## If the case is not submitted to FinnOne with 24 hrs of Case creation will be considered as Dropoff – *Inactivity*
## If Karza Name Match is < 65% - *Karza Mismatch*
## IMPS technical and non technical error cases – *IMPS Error*
## Any change in Demographic data – *Demographic change*
## -Untick on credit protect insurance –- *-Insurance change-*
## Get IFSC Failed scenario – *Physical mandate*
## Digital Mandate. Digital SI and aadhar Based Mandate Failed scenario - *Physical Mandate*
## Clickwrap Failed *– Clickwrap Failed.*

h2. Dropped off applications behaviour:

# If the drop off condition is met due to any above Condition, then below Message should be visible to the Customer “ Dear customer, our Relationship Officer will contact you for further processing of Loan Application - 123456”  *-“-*-_Dear Customer, Kindly contact nearest branch for information regarding your loan Application - “SFDC Number”_-*-”-*
## [~accountid:5e1822e2c578120daca5b494] - Is this an SMS or validation? If validation then will this be visible to customer when he tries to restart journey form offer SMS link?
### Complete screen/background should get blurred and this message should be visible to customer.
### Also, if customer tries to restart the journey, then also same message should be visible to him.
# If the case is dropped off, then an -SMS Should be send to the IRO to whom the case will be visible.- SMS should be sent to BM of the branch.  
#* “_<Customer Name> has been dropped-off from customer journey. MEL Plus offer needs to be processed by IRO. LAN- <SFDC LAN>_*”*
acceptance: In continuation to drop off scenarios mentioned in below stories: [https://fincap.atlassian.net/browse/ML-3748|https://fincap.atlassian.net/browse/ML-3748|smart-link] [https://fincap.atlassian.net/browse/ML-5478|https://fincap.atlassian.net/browse/ML-5478|smart-link] [https://fincap.atlassian.net/browse/ML-5479|https://fincap.atlassian.net/browse/ML-5479|smart-link] 

# Drop off reason is getting stamped as per the drop off condition satisfied as given in description
# A Message is displayed to customer on screen as given in description
# Also, along with that an SMS is triggered to BM of that branch as given in description.

key: ML-5479
summary: Drop off Handling - Part 3
description: h1. The self journey’s started by bank customers, should be dropped off automatically after a certain time limit by SFDC. 

h2. Drop off conditions: Part 3

{panel:bgColor=#deebff}
There are multiple drop off scenarios which needs to be considered by SFDC. In this story only below conditions to be considered:
{panel}

If any of the below condition is true, then the case will be treated as a drop-off case and “Drop off” checkbox will be ticked on SFDC.

# -Untick Credit Insurance for app-
# Get IFSC Failed scenario - *@Yashopriya – Should we give retry to Customer to 1 failure will be consider as dropoff - At least 3 attempts should be given.*
## *<AV> 3 attempts to be given*
# Digital Mandate. Digital SI and aadhar Based Mandate Failed scenario 
#* @Yashopriya – Should we give retry to Customer to 1 failure will be consider as dropoff At least 3 attempts should be given.
## *<AV> 3 attempts to be given*
# Clickwrap Failed 
#* @Yashopriya – Should we give retry to Customer to 1 failure will be consider as dropoff- At least 3 attempts should be given.
## *<AV> 3 attempts to be given*

Once the case is drop-off, then the case will become editable to the IRO and he can continue the journey from the stage where the customer has left.

----

h3. Mentioning all the conditions for reference:

If any of the below condition is true, then the case will be treated as a drop-off case and “Drop off” checkbox will be ticked on SFDC.

# If the case is not submitted to FinnOne with 24 hrs of Case creation will be considered as Dropoff 
# If Karza Name Match is < 65% 
# IMPS technical and non technical error cases
# Any change in Demographic data
# -Untick Credit Insurance for app-
# Get IFSC Failed scenario - retry 3 attempts to be given
# Digital Mandate. Digital SI and aadhar Based Mandate Failed scenario *-* retry 3 attempts to be given
# Clickwrap Failed *-* retry 3 attempts to be given

Once the case is drop-off, then the case will become editable to the IRO and he can continue the journey from the stage where the customer has left.
acceptance: If any of the below condition is true, then the case will be treated as a drop-off case and “Drop off” checkbox will be ticked on SFDC.

# Untick Credit Insurance for app
# Get IFSC Failed scenario - retry 3 attempts to be given
# Digital Mandate. Digital SI and aadhar Based Mandate Failed scenario *-* retry 3 attempts to be given
# Clickwrap Failed *-* retry 3 attempts to be given

Once the case is drop-off, then the case will become editable to the IRO and he can continue the journey from the stage where the customer has left.

key: ML-5478
summary: Drop off Handling - Part 2
description: h1. The self journey’s started by bank customers, should be dropped off automatically after a certain time limit by SFDC. 

h2. Drop off conditions: Part 2

{panel:bgColor=#deebff}
There are multiple drop off scenarios which needs to be considered by SFDC. In this story only below conditions to be considered:
{panel}

If any of the below condition is true, then the case will be treated as a drop-off case and “Drop off” checkbox will be ticked on SFDC.

# If Karza Name Match is < 65% 
# IMPS technical and non technical error cases

Once the case is drop-off, then the case will become editable to the IRO and he can continue the journey from the stage where the customer has left.

----

h3. Mentioning all the conditions for reference:

If any of the below condition is true, then the case will be treated as a drop-off case and “Drop off” checkbox will be ticked on SFDC.

# If the case is not submitted to FinnOne with 24 hrs of Case creation will be considered as Dropoff 
# If Karza Name Match is < 65% 
# IMPS technical and non technical error cases
# Any change in Demographic data
# -Untick Credit Insurance for app-
# Get IFSC Failed scenario - retry 3 attempts to be given
# Digital Mandate. Digital SI and aadhar Based Mandate Failed scenario *-* retry 3 attempts to be given
# Clickwrap Failed *-* retry 3 attempts to be given

Once the case is drop-off, then the case will become editable to the IRO and he can continue the journey from the stage where the customer has left.
acceptance: If any of the below condition is true, then the case will be treated as a drop-off case and “Drop off” checkbox will be ticked on SFDC.

# If Karza Name Match is < 65% 
# IMPS technical and non technical error cases
# Any change in Demographic data

Once the case is drop-off, then the case will become editable to the IRO and he can continue the journey from the stage where the customer has left.

key: ML-5463
summary: Raising Dual Manual Deviation for IFBL FLow
description: Currently for IFBL Flow we have a logic of Dual Deviation getting raised for System generated deviation._x000D_
_x000D_
The same flow will be valid for Manual deviation where the UW when takes a Manual deviation - 2 deviation will be raised _x000D_
_x000D_
1 - for the IFBL UW to approve and 2nd for the Bank UW to approve._x000D_
_x000D_
The prefix of BANK and IFBL will be present for all deviation and  logic will remain same._x000D_
_x000D_
Also for Bulk approve all Bank Devaition till L2 level will be autoapprove and L2 above Manual deviation has to be approved by the UW himself and will not be able to approve the case
acceptance: juy

key: ML-5459
summary: Selection of applicant type should be provided for Income details
description: In UW Screen under financial Tab - For income details section a new field should be created

“Applicant Type” - This field will be a dropdown and will have names of all Applicant - Primary and co-app.

This is a Mandatory field if the user adds any Income.

The Income added for a Particular applicant should flow to FICO in that Applicant Income array.

E.g - If income is added for co-app then the same should flow to FICO in CO-app array
acceptance: tuy

key: ML-5455
summary: Customer Screen 1: Loan Amount Stage (Part 3)
description: h1. As a Customer, when I clicked on self start link from SMS/My Bharat App, I should be landed on SFDC Community page at Loan Amount Stage.

h2. Pre-requisite:

Customer has received the MEL+ offer and clicked on the Community link (self start link) from SMS/My Bharat App

In continuation to [https://fincap.atlassian.net/browse/ML-5454|https://fincap.atlassian.net/browse/ML-5454|smart-link]  , Customer will view below TnC checkbox below EMI amount.

# *TnC Checkbox:*
## Below all they above fields, a checkbox should be given with a Message - “I Accept the +_Terms and Condition_+s”.
## “Terms and Condition” will be a Link, hence once the User clicks on the TnC Link a popup will be visible with TnC Content which is presently used for MEL as below
### !image-20210305-074416.png|width=492,height=430!
## Here, 
### user can select the checkbox either by clicking on the Checkbox manually (point a) or 
### can click on OK button on the TnC popup Page (point b), here then user will land back on loan amount screen with check box as auto selected.
# *Proceed button*
## Once the TnC Checkbox is checked by any of the above scenario, user should get a Proceed Button enabled to move to next stage.
## If TnC is not checked, user should not be able to move ahead.
## Clicking on Proceed, user will move to [https://fincap.atlassian.net/browse/ML-3751|https://fincap.atlassian.net/browse/ML-3751|smart-link] screen

h2. Conditions:

# If the customer has dropped off from this page, then the case should be visible to IRO on Applicant details Page, in editable mode.
# Loan Amount & Tenure selected by customer should be saved and visible to the IRO, but is editable to him.
# On IRO side, the process will remain as is.
acceptance: Customer is able to view TnC checkbox and the functionality is working as mentioned in description.

key: ML-5454
summary: Customer Screen 1: Loan Amount Stage (Part 2)
description: h1. As a Customer, when I clicked on self start link from SMS/My Bharat App, I should be landed on SFDC Community page at Loan Amount Stage.

h2. Pre-requisite:

Customer has received the MEL+ offer and clicked on the Community link (self start link) from SMS/My Bharat App

In continuation to [https://fincap.atlassian.net/browse/ML-3746|https://fincap.atlassian.net/browse/ML-3746|smart-link] , Customer will land on below screen after the congratulations pop-up.

!image-20210305-062054.png|width=884,height=462!

h2. Loan Amount page

Loan amount page will show below 5 items:

# *Loan Amount Field:*
## Loan Amount will be Autopopulated as Max eligible amount present in offer and Customer will have the option to reduce the Loan Amount. 
## The reduction in Loan amount should happen either as a horizontal Scroll bar or user can enter the amount directly in the text Field (upto min 30,000).
# *Tenure Field:*
## Below Loan amount, Tenure field should be present.
## Tenure should be autopopulated as present in offer and customer should have option of increasing the same.
##  as a Dropdown field:
### Tenure Drop-down values: 12, 18, 24, 30, 36, 42, 48
### Tenure Validation-
#### Loans upto Rs. 200000 = 12 to 36 months
#### Loans > Rs. 2,00,000 = 12 to 48 months
# *EMI Amount:*
## Basis LA and Tenure, EMI amount should be auto calculated and Auto-populated.
# Screen to be continued in [https://fincap.atlassian.net/browse/ML-5455|https://fincap.atlassian.net/browse/ML-5455|smart-link] 

----

The screen will show below content on it. Refer column “Update” values to display:

||*Sr. No.*||*Line*||*Update*||*Comments*||
||1|AMOUNT TO BE RECEIVED|APPROVED LOAN AMOUNT| |
||2|The exact amount will be displayed in your account| |To be removed|
||3|Scroll for loan amount selection| |Replace with +/- button|
||4|MONTHLY EMI AMOUNT|YOUR MONTHLY EMI| |
||5|No extra charges monthly| |To be removed|
||6|Drop down for tenure selection| |Replace with +/- button|
||7|I accept the Terms and Conditions to proceed ahead|I accept the Terms and Conditions| |
acceptance: After Confirmation Message, Loan amount page is visible as given in description.

key: ML-5453
summary: Initial Configuration for Customer
description: h1. Initial Configuration for Customer_x000D_
_x000D_
# Create site_x000D_
# User Creation_x000D_
# Profile Creation _x000D_
# Role Creation_x000D_
# Profile settings_x000D_

acceptance: Initial Configuration for Customer are done as mentioned in description

key: ML-5451
summary: API for Whatsapp Opt In
description: If the User has selected the whatsapp opt in Checkbox and the case stage annd substage is disbursed in SFDC. Attached API should be trigger to set up the Whatsapp Functionality.

If the API is failed a batch should be run on fortnight Basis to rehit the failed API.

SVCNAME - WHATSAPP_OPTIN
acceptance: If the User has selected the whatsapp opt in Checkbox and the case stage annd substage is disbursed in SFDC

API should be successful.

Customer UCIC Should be present in Whatsapp Server

key: ML-5386
summary: SFDC Community Link to be send to Customer - Part 2
description: h1. As a Customer, I should be able to initiate a loan journey for my MEL+ offer received.

# For MEL+ cases Offers will be uploaded in SFDC. Customer can self start the journey In 2 ways:
## *By clicking link from SMS*
## By clicking on Offer on My First Bharat App - [https://fincap.atlassian.net/browse/ML-3745|https://fincap.atlassian.net/browse/ML-3745|smart-link] 

h2. *By Clicking Link from SMS*

# Post Offer is uploaded in SFDC, a message is send to Customer for pre-approved Loans. 
# In the same message SFDC Link will be send to Customer. PFB SMS Content:

*‘’*_Dear customer,_                                                                                                                

_We are delighted to inform you that you are now eligible for a pre-approved Vyapaar Vriddhi Loan (MEL) of IDFC FIRST Bank because you are a valued customer with an excellent repayment track record. Please click on given <link> or open MYFIRST-Bharat app or get in touch with your Relationship Officer to avail the offer._ *’’*

# When the user clicks on the link, he will be directed to SFDC Community page to self start the MEL Journey.
acceptance: Customer should get link in SMS so that he can perform journey initiation as mentioned in description

key: ML-5323
summary: Whatsapp Banking Consent by the Customer
description: For All BU on the Consent Page where OTP is entered a checkbox should be present with description

“I Agree for communication through Whatsapp”.

This Checkbox will be autotick annd user will have the option to untick the same
acceptance: iuiu

key: ML-5312
summary: [ALOG-10730011] List index out of bounds: 0 - ReportingUtility
description: {panel:bgColor=#deebff}
Need to Fix the ALOG coming in Production

*List index out of bounds: 0 - ReportingUtility*
{panel}

|Stack Trace|Class.ReportingUtility.captureReportGenerationFields: line 99, column 1
Class.LoanBeforeUpdateTriggerHandler.mainEntry: line 11, column 1
Class.TriggerDispatcherBase.execute: line 119, column 1
Class.Loan_ApplicationTriggerDispatcher.beforeUpdate: line 38, column 1
Class.TriggerFactory.execute: line 58, column 1
Class.TriggerFactory.createTriggerDispatcher: line 24, column 1
Trigger.LoanApplicationTrigger: line 3, column 1|
acceptance: Need to Fix the ALOG coming in Production

key: ML-5310
summary: [ALOG-10728028] Attempt to de-reference a null object - ALL_DocumentUploadResponseProcessor
description: Class.ALL_DocumentUploadResponseProcessor.process: line 137, column 1
Class.CF_ALL_IntegrationResponseProcessor.processServiceResponse: line 85, column 1
Class.CF_ALL_IntegrationResponseProcessor.process: line 124, column 1
Class.IMessageAfterUpdateTriggerHandler.mainEntry: line 50, column 1
Class.TriggerDispatcherBase.execute: line 119, column 1
Class.Integration_MessageTriggerDispatcher.afterUpdate: line 37, column 1
Class.TriggerFactory.execute: line 73, column 1
Class.TriggerFactory.createTriggerDispatcher: line 24, column 1
Trigger.IntegrationMessageTrigger: line 3, column 1
acceptance: nan

key: ML-5305
summary: Move from Financial tab to Results tab - PD Community
description: Once all the comments are filled, the user should be allowed to proceed ahead to the next tab - Results - which would cover both the scenarios

Before proceeding ahead, Pop-Up message (Disclaimer Note) to be displayed to the user, saying "*Final Submission - Cannot edit the PD values post submission*"

Once the user proceeds ahead to the next tab (Results tab) and goes back to the Financial tab, the values should be only in read-only mode and non-editable
acceptance: nan

key: ML-5304
summary: FICO Validations Failure Response handling - PD Community
description: Need to check with the FICO Team and Rural Team

* Timeout Error exception - Text to be displayed
* Mule Downtime - Different Response



*Note*: Message to be displayed for Fico error: 

*Fico Validations failed. Please try again.*

error reason to mentioned below the message.
acceptance: nan

key: ML-5303
summary: FICO Validations Success Response handling - PD Community
description: Once the FICO response comes through, FICO will be sending an array of validations (Expected outcome)- Validations to be displayed as "LABEL" and there should be a free textbox against each validation where credit manager can add his comments/remarks - dynamic display - related list against the case object

Financial tab after summary section - Validations section to be displayed

Once the validations are displayed, the user will have an option to go back to the financial tab questions and change the field values and all fields are to be editable, and click on the next button again to call FICO Validations integration message - the process as described in FICO Request to be followed again [https://fincap.atlassian.net/browse/ML-5302|https://fincap.atlassian.net/browse/ML-5302|smart-link] 

The user without changing the above PD details, can also have an option to fill the FICO validations comments and proceed ahead to the next tab

If FICO doesn't send any validations within the response, PD App will display a toast message or pop-up message saying "*No Validations triggered. Please proceed ahead*". Validations section will not be displayed in such scenarios under the summary section. FICO to return blank array in such scenarios

*Note: 1.PD report should consist of Validations section above the summary*

*2. Applicant Tab to be view only after final submit.*
acceptance: nan

key: ML-5302
summary: FICO Validations Request - PD Community
description: * When the Credit Manager clicks on next button for submitting the questionnaire, after filling all PD details in the financial tab, the user should proceed ahead with the FICO validation. 
* Pop-up message "*These PD details will be sent to FICO for validations. Please check the values*" to be displayed to the end user - Credit Manager
* Once the user clicks on "*Proceed ahead*" - FICO Call to happen from community page
* During the entirety of FICO Call, Loader to be displayed in PD App - "*FICO Call in progress, FICO Validations to be displayed*" - Till we get success/failure response from FICO

Workflow:

FICO to be initiated - Once the fields are saved - PD Team to check the "FICO Persona Data and Case Binding" Metadata (Mapping Document - Persona/Assessment and the respective FICO fields, FICO Tags) and according to the Persona selected, PD App Team (Community page) to prepare the FICO Request and the respective values to be populated and sent to FICO for validation based upon the Personas



FICO call will not happen for below personas and everything would be remain As-IS: we need to show final disclaimer popup and if he proceed on Result tab then we need to make all the financial questionnaires read-only

|Specialized Business Service|
|Specialized Business Manufacturing|
|Specialized Business Trading|
acceptance: nan

key: ML-5297
summary: Bureau Summary to be displayed in Applicant tab of PD Case
description: As a UW I should be to see the Bureau Summary details available for the case - Portrait mode within the applicant tab

Please find the Bureau Summary Details format:

|*Sr No*|*Name*|*Account Type*|*Sanctioned Amount*|*EMI Amount*|*Balance Outstanding*|*Account Status*|*Closed date*|*Highest DPD in last 2 Years*|*KCC/Mudra*|
|1|RamCharan|PL|250000|25000|195000|Live| |120|No|

Please find the new observations for the Bureau Summary:

* Sorting logic on the basis of Status, Applicant, Record Created Timestamp in that order
* Applicant and Co-Applicant Name to be included in the Bureau Summary Details
* Serial Number to be continued for all records - not to be only for the page as per pagination (4 records)
* Bureau Summary details to be displayed after the Summary section in PD Report, post case closure

Both Applicant and Co-Applicant details to be displayed for the PD Cases irrespective of the customer to whom the PD Case is triggered
acceptance: As a UW, the user should be able to view the Bureau summary details in the above specified format in the Applicant tab

As a UW, post submission of PD Case, the user should be able to view the Bureau Summary Details in PD Report with Section label as Bureau Summary Details below the Summary Section in PD Report

key: ML-5296
summary: Results tab for PD Case
description: Results tab to be displayed with the below mentioned fields:

* Case Resolution: Case_Resolution__c
* Decline Reason: PD_Case_Decline_Reason__c
* Business Description
* PD Officer Comments

All the fields would be mandatory to be filled and post filling all the details, the user proceeds ahead to the next image upload section - the user has to traverse back to the native app from community page. Dev Team to handle the redirection to app. Link to be provided.

--Detailed Logic to be mentioned for redirection--
acceptance: nan

key: ML-5295
summary: Applicant Tab for PD Case
description: Applicant tab to be displayed with the basic details of the applicant and Co-Applicant along with the loan application related details as mentioned below:
(Auto-populated Values)

Loan Related Information

* Login Date Case.CreatedDate
* Requested Loan Amount Case.loan_application__r.Requested_Loan_Amount__c
* Scheme Case.loan_application__r.Scheme__c

Applicant Related Information

* Customer Name Applicant__c.Customer_Name__c
* Customer City Address__c.City__c
* Customer State Address__c.State__c
* Address Address__c.Line_1__c, Address__c.Line_2__c, Address__c.Line_3__c
* Landmark Address__c.Landmark__c
* Pincode Address__c.Pincode__c

Co-Applicant Related Information

* Co-Applicant Name Applicant__c.Customer_Name__c
* Relationship with Applicant Applicant__c.Relationship_With_Applicant__c
* Co-Applicant Address Same as above details (City, State, Address, Pincode)

(To be selected by Credit Manager)

* Nature Of Business Case.Nature_of_Business__c
* Business Category Case.Business_Category__c
* Person Contacted Case.Person_Contacted__c
* Other Person Contacted Case.Other_Person_Contacted__c

As a Credit Manager, once I start my PD, I should be able to see the Applicant tab in my PD App with all the above mentioned details. This should be the landing page of the Community to be rendered in my PD App
acceptance: nan

key: ML-5294
summary: Assessment Engine Code Changes - Machine List
description: As a credit manager, I should be able to access a new subsection like Obligation/Assets  under Income, and named as Machine type and  the subsection rendering flow at group level should be handled. 

|Type of Machine|Picklist|*Exhaustive Values:*
Handloom
Power Loom
Rapier
Jacquard
Ribbon|
|No of Machines|Number|*Sample Value:* 4|
|Income from each machine (Rs.)|Currency|*Sample Value:* 26000|

The total income generated (against the Machine List section) would be the cumulative sum of all “Income from each machine”

Fields to be visible in the existing reports
acceptance: nan

key: ML-5293
summary: Business Category and Persona or Assessment Mapping
description: As a credit manager, I should see the Modified settings with respective Rural personas and business category (Same as Persona Names) as drop-down should be available at case level

When the user selects the business category, the Persona or Assessment mapped against the selected business category would be displayed

As opposed to Urban PD Implementation, business categories and Persona mapping would one to one relationship with business categories labels/names similar to that of Persona names/labels

We need to display the “*Persona*” Name on selection of *Business Category* field selection on Applicant Tab for PD Case
acceptance: nan

key: ML-5292
summary: Delete 3 Personas which are not applicable for Rural PD Cases
description: As a credit manager I should not see the below mentioned assessments for Rural PD Cases

For Rural PD Cases, when the business category and the mapped Persona or Assessment, the user should not be able to select below three Personas, the below 3 Personas would not be visible and the 15 Personas (including Others) should be visible within the PD case selected 

* Scrap
* Gems & Jewelry Retailer
* Tours & Travel Agent
acceptance: nan

key: ML-5291
summary: PD Case Report with all PD details
description: PD Case report (pdf report) to be generated only for PD Cases post successful submission from PD App

Out of scope: Office CPV - Salaried and Self Employed; Residence CPV Cases
acceptance: nan

key: ML-5252
summary: Need to remove customer manual consent option for "Aadhar is Linked with Bank details"
description: h2. Actual:

Aadhar is Linked with Bank details - can be found out by 2 methods

# AePs Integration Callout  - Basis the condition eligible for AePS - ML-77: AEps integration callIN QA
# Customer Manual Consent - if the case is not eligible for AePS callout then we have option for Manual Consent

h2. Expected:

Now if Aadhar is Linked with Bank details - can be found out by only 1 method:

# AePs Integration Callout  - Basis the condition eligible for AePS - ML-77: AEps integration callIN QA

Customer Manual Consent option will not be available anymore and needs to removed from front end.
acceptance: Now if Aadhar is Linked with Bank details - can be found out by only 1 method:

# AePs Integration Callout  - Basis the condition eligible for AePS - ML-77: AEps integration callIN QA

Customer Manual Consent option will not be available anymore and needs to removed from front end.

key: ML-4861
summary: Update existing Assessment - Fabrication, Cattle-rearer Survey, Textile Manufacturing and Others
description: As a credit manager, I should see the following changes in the existing assessment for Fabrication, Cattle-rearer Survey, Textile Manufacturing and Others_x000D_
# Delete unwanted questions – Household section questions, questions in other sections_x000D_
# Update group level settings like group level formula, group Sequence, validation message, Validation Condition_x000D_
# Update Persona level settings like formula and other setting_x000D_
# Verifying the entered questions_x000D_
# Update existing personas questions (Total 15)  _x000D_
a. formula at question level_x000D_
b. Max Range_x000D_
c. Min Range_x000D_
d. Threshold range_x000D_
e. Parent child relationship_x000D_
f. Sequence_x000D_
g. Datatype if any_x000D_

acceptance: Credit manager should have access to the mentioned changes in the existing assessment_x000D_


key: ML-4860
summary: Update existing Assessment - Pharmaceutical Retailer, Salon Survey, Kirana Store, Food Business Restaurant, Apparel Retailer
description: As a credit manager, I should see the following changes in the existing assessment for Pharmaceutical Retailer, Salon Survey, Kirana Store, Food Business Restaurant, Apparel Retailer

# Delete unwanted questions – Household section questions, questions in other sections
# Update group level settings like group level formula, group Sequence, validation message, Validation Condition
# Update Persona level settings like formula and other setting
# Verifying the entered questions
# Update existing personas questions (Total 15)  
a. formula at question level
b. Max Range
c. Min Range
d. Threshold range
e. Parent child relationship
f. Sequence
g. Datatype if any
acceptance: Credit manager should have access to the mentioned changes in the existing assessment_x000D_


key: ML-4859
summary: Update existing Assessment - Tailoring, Sanitary & Hardware, Carpenter, Garage, Perishable Goods, Electronics
description: As a credit manager, I should see the following changes in the existing assessment for Tailoring, Sanitary & Hardware, Carpenter, Garage, Perishable Goods, Electronics

# Delete unwanted questions – Household section questions, questions in other sections
# Update group level settings like group level formula, group Sequence, validation message, Validation Condition
# Update Persona level settings like formula and other setting
# Verifying the entered questions (Which were updated)
# Update existing personas questions (Total 15)
a. formula at question level
b. Max Range
c. Min Range
d. Threshold range
e. Parent child relationship
f. Sequence
g. Datatype if any
acceptance: Credit manager should have access to the mentioned changes in the existing assessment_x000D_


key: ML-4858
summary: Photo Upload for CPV Cases - PD App
description: As a UW before the submitting the case, photo option should be available

Mandatory to click 5 photos (Mandatory) and maximum limit set for 8 photos - To have an option to add multiple phots with same view as PD App

The case submission to be dependent on the case submission - cannot close the case, until we upload images to FileNet system

DocType: ResiCPV DocName: ResiCPV - Residence CPV Case
DocType: OfficeCPV DocName: OfficeCPV - Office CPV Case

*Amendment*: Only one mandatory image to be uploaded - The labels to remain As-IS
acceptance: Few mandatory photos should be uploaded before submitting the case_x000D_


key: ML-4857
summary: Photo Upload for PD Case - PD App
description: As a UW before the submitting the case, photo option should be available

Mandatory to click 5 photos (Mandatory) and maximum limit set for 8 photos - 3 Others Non-Mandatory 

* Business / Office
* Residence
* Stock
* Godown
* Business License
* Others - Three Image Place Holders

* These photos to flow in the PDF PD report available in FileNet in form of separate links
* Each photo to be named and captured depending on mandatory nature
* The case submission to be dependent on the image upload - cannot close the case, until we upload images to FileNet system

DocType: OTHERS DocName: OTHERS - PD Case

*Amendment*: Only one mandatory image to be uploaded - The labels to remain As-IS
acceptance: Few mandatory photos should be uploaded before submitting the case_x000D_


key: ML-4856
summary: Co-Applicant PD - PD App
description: As a Credit manager, I should be able to capture the PD for all Applicant and [X] number of co-applicants. There should be different cases with same LAN for the applicant and co-applicant depending upon the FICO recommendations - FICO to send SFDC recommendations, Cases triggered from SFDC to be visible in PD App. _x000D_
_x000D_
No separate flag to be added for identifying the co-applicant cases, will be captured as an identifier within the customer name_x000D_
Cases which are triggered against Co-Applicant will be of the format: Customer Name [C] _x000D_
Cases which are triggered against Applicant will be of the format: Customer Name_x000D_

acceptance: PD for co-applicants should also be available_x000D_


key: ML-4855
summary: Case details of Case list dashboard - PD App
description: As an Underwriter, I should be able to the summary of the Application on the case list dashboard. These summary card includes details such as

* Loan ref no 
* Case Number
* Record Type (Verification Type)
* Customer name (Applicant and Co-Applicant name) \[Co-Applicant Identifier]
* Address (Office or Residence Address)
* Case Created Date
* Call Customer (Direct Call - No number displayed on UI - No Exotel functionality)
* Product Name (BU Name) 

To include all verification types - PD, Office CPV, Resi CPV

Address also to be displayed on basis of verification type - For Resi CPV, Residence address to be displayed and for Office CPV and PD, Office Address to be displayed
acceptance: All the basic details of applicant should be available in the case details_x000D_


key: ML-4854
summary: Search Functionality - PD App
description: As a UW/Credit Manager, I should be able to use Search functionality and find the cases by searching the key values from Primary Applicant Name, Co-applicant Name, LAN, Record Type, Product Name

The user would be able to enter the key value in the search bar and we would search the key word in all the above search parameters - would display all the cases that would match the key word in all the fields/nodes defined
acceptance: Search functionality should work and show appropriate result as per searched parameters

As an underwriter or Branch Credit Manager, after logging into PD App, after the cases list appear on the dashboard, the user should be able to search among the specified parameters by entering the search string or value at a time

key: ML-4853
summary: Underwriter Login and Dashboard - PD App
description: As a Underwriter/Credit manager, I should be able to Log into PD App and view the Dashboard ( list of cases with their respective status - New and Closed)

* Cases to be divided in three sections based on the decision taken by the Underwriter, i.e., Assigned, Saved, Completed
* *Assigned*: Cases sent from the SFDC to the Underwriter, this would also capture the WIP Cases - Cases started and initiated by Credit Manager but still not closed from PD App
* *Saved*: *WIP Case photos, not the cases itself*, not submitted from PD App, still in the verifier queue and not submitted from PD App end
* *Completed*: All cases which have been completed by the Underwriter in the PD App are moved to the “Completed” queue. Cases which were closed from the app for past 90 days will be visible. No further changes will be possible on the completed cases on the (after final submit button click)
acceptance: Case should be listed with all loan details. User on logging in as UW should be able to see cases assigned under his queue_x000D_


key: ML-4821
summary: Aadhar redact for CKYC Success cases
description: Aadhar fetched from CKYC

# From CKYC Download when the document type received is aadhar in the response then - Aadhar redact API should be called for redacting the Aadhar document.
# The redacted API should be saved in the existing document type and Name and original document should be flushed out
# If the aadhar redact is received failed from Karza the below logic should be checked
## If document type received in Karza response is “Aadhar” and redact is failed - then the user should be hard stop on document upload stage and post success response only user should be able to move ahead
## If document type received in Karza response is (anything other than aadhar) and redact is failed - then user should be able to move ahead without retry option on document upload screen
acceptance: CKYC

key: ML-4693
summary: Customer Screen 1 → Proceed → FICO Insurance Callout Success → Customer is able to view a pop-up with application details
description: h2. As a Customer, I should be able to view loan details after clicking proceed on Loan Amount Stage, so that I can make a choice to proceed further with application or not

h2. Pre-requisite:

Customer has clicked on proceed button on Loan Amount stage

h2. Description

# When Customer will click on Proceed button from Loan Amount Stage, then SFDC will trigger FICO insurance callout.
# After FICO insurance callout is success, Customer should see a pop-up to verify loan details.
# Customer should see below details on pop-up in non editable/read only mode:
## Offer Loan Amount
## Tenure
## EMI
### Above 3 will be visible as selected in Loan Amount Stage
## Interest Rate 
### To be auto-filled by system basis RoI Master
## Processing Fee+GST
### Autocalculated
## HDFC Life Insurance Premium
### Received from FICO
## ICICI Lombard Hospicah Premium 
### Received from FICO
## Tentative Amount to be received
# A CONFIRM button should be visible on this pop-up for customer.
# Clicking on confirm, customer will be moved to next stage assuming that customer is ready to go ahead.
# Customer will be moved to Confirm your details satge - [https://fincap.atlassian.net/browse/ML-3751|https://fincap.atlassian.net/browse/ML-3751|smart-link] 

----

[~accountid:5e1822e2c578120daca5b494] Queries:

# Do we need a confirm & cancel button on this pop-up so that -
## if customer wants to proceed, he will click on confirm 
### Here, Do we need any alert/confirmation message on clicking confirm asking customer that “Do you want to proceed ahead with the application?” or we should directly move him to next stage? - {color:#6554c0}Move directly to next page{color}
## if customer do not want to proceed, he will click cancel
### If cancel, what should happen with loan application & will IRO take it from Applicant details Page Pending? - {color:#6554c0}It will be a drop off scenario and IRO will take it from Applicant details Page Pending{color}
# Tentative Amount to be received - this should show - Net Disbursal Amount? - {color:#6554c0}Yes{color}
acceptance: * Customer is able to view loan details after clicking proceed on Loan Amount Stage, so that he can make a choice to proceed further with application or not
* Loan details pop-up shows all the details as mentioned in description.

key: ML-4692
summary: Customer Screen 2: Confirm your details - PSL details section → Proceed → SFDC to trigger FICO Insurance Callout
description: *Customer Screen 2: Confirm your details - PSL details section → Proceed → SFDC to trigger FICO Insurance Callout*

h3. Flow

# When customer clicks on Proceed button from *Customer Screen 2: Confirm your details - PSL details section* [https://fincap.atlassian.net/browse/ML-3754|https://fincap.atlassian.net/browse/ML-3754|smart-link]  , then SFDC should trigger FICO insurance callout.
# FICO insurance callout should be triggered to fetch below details:
## HDFC Life Insurance Premium
## -ICICI Lombard Hospicash Premium-
# When the callout is in progress a loader will be visible.
# If Successful 
## When the callout is success, customer will land on Insurance screen as mentioned in story [https://fincap.atlassian.net/browse/ML-3750|https://fincap.atlassian.net/browse/ML-3750|smart-link] 
# If Failed
## Customer should get 3 retry options to rehit the API.
## If API still gets failed after 3rd retry attempt, consider the case as drop off_._

----

# If this FICO callout is FICO insurance callout ? - {color:#6554c0}Yes this is FICO insurance callout{color}
# We are triggering this only to fetch premium amount only. - {color:#6554c0}We need to fetch only Credit protect premium amount{color}
acceptance: *Customer Screen 2: Confirm your details - PSL details section → Proceed → SFDC to trigger FICO Insurance Callout*

# When customer clicks on Proceed button from *Customer Screen 2: Confirm your details - PSL details section* [https://fincap.atlassian.net/browse/ML-3754|https://fincap.atlassian.net/browse/ML-3754|smart-link] , then SFDC triggers FICO insurance callout.
# FICO insurance callout fetches below details:
## HDFC Life Insurance Premium
## -ICICI Lombard Hospicash Premium-

key: ML-4680
summary: Change in the Digital SI SMS Content for Whitelisting
description: SMS content should also have Brand Name, hence need to change below content : 


+*Current SMS :*+ 

Dear Customer, OTP for digital standing instruction form is #####. 

+*New SMS :*+ 

Dear Customer, OTP for digital standing instruction form is \{#var#} Thanks, IDFC First Bank.
acceptance: SMS should have Brand name as mentioned above.

key: ML-4661
summary: API for Fetching Offer from SFDC to My Bharat App
description: h2. Description

# SFDC will receive an inbound API from My First Bharat app requesting for the available offers for the logged in customer.
# SFDC will respond to app by the list of offer available for the requested customer.
# PFA the request response for the same



[~accountid:5e1822e2c578120daca5b494] - Kindly confirm if there is any specific scenario when the inbound API will be received from My bharat app to SFDC or there is no specific scenario and it can be received anytime. - Request can be received any time. But the response from SFDC will be send when the offer is valid.

If the offer is already taken or used by any means then an error response would be send. [~accountid:5def9dc6ca98940cb900fa99]  - Kindly share the error response structure. for App handling
acceptance: API for Fetching Offer from SFDC to My Bharat App is developed as mentioned in description.

key: ML-4657
summary: As a user when I upload the customer photo then the same should be uploaded in CKYC Photo
description: For scenario where user has to Manually upload the Customer photo below document type should be mandatory in the document screen

“CKYC Photo”

This is applicable for both app and co-app

and same photo should be send to CBS Sign and photo API and Application form geneation
acceptance: CKYC Photo type should be mandatory for the user to uplod photo manually._x000D_
The same should be send in CBS Sign and Photo API And should be visible in Application form.

key: ML-4655
summary: All charges calculated in SFDC needs to be round off
description: When the case is sanction and Loan amount is finalised then all the below Fields which are autocalculated should be round up.

# Premium Amount for credit protect and Hospicash
# Processing Fees
# SGST Amount
# EMI Amount
# Stamp Duty amount

After insurance screen on charges section these data should be visible as below logic

Decimal value <5 -round down

Decimal value >= 5- round up

|Eg|Amount|Rounding off|
|1|10.23888|10.00|
|2|10.51423|11.00|

No decimal value should be present.

Same round up data should be send to FInnOne and document generation

This is applicable for MEL/MEL repeat/ MEL plus and PL
acceptance: All Charges mention in above description should be round up and shown._x000D_
Same should be visible to all documents and finnone submit

key: ML-4624
summary: Self employed Office CPV Field Changes
description: +*Pre Requisite:*+

# Office CPV should be initiated post data verification
# Case Should be initiated in PD App with API - [https://fincap.atlassian.net/browse/ML-2854|https://fincap.atlassian.net/browse/ML-2854|smart-link]
# Case should be completed with API - 2 - [https://fincap.atlassian.net/browse/ML-4621|https://fincap.atlassian.net/browse/ML-4621|smart-link]

Applicable for MEL/MEL+/MEL repeat and PL app and co-app

+*Description:*+

When Office CPV is initiated post Data verification the office CPV case should have fields Mention in Attached Excel Sheet in Work book - “Se - Office CPV” for Office CPV initiated for Employment type as “Self employed”.

# Once the IRO submit Data verification Residence CPV, Office CPV and persona will be initiated to the UW who has completed the Data verification.
# The case initiated for Employment type as Seld Employed, office CPV should have fields mention in attached field list along with the condition.
# The initiated case will not be visible to UW in “CPV” worklist and would be present in backened in Pending stage.
# Once the case is completed in PD App - post receiving the Submit API - [https://fincap.atlassian.net/browse/ML-4621|https://fincap.atlassian.net/browse/ML-4621|smart-link] all the data entered in the App will be autopopulated in this field list and the case will be marked as closed.
# UW will not get an option to complete the CPV in SFDC
# once the Office CPV is completed in the PD App and all verification - (Resi, Office and PD) is closed the case will move to UW stage.
# In UW stage under verification Tab closed office CPV cases will be visible. When the UW clicks on View details in the CPV records he should be able to see all with new Fields with data autopopulated.
# This complete process should be followed when the CPV is reinitiated from UW stage also.
acceptance: Self employed Office CPV Field Changes

key: ML-4623
summary: Salaried Office CPV Field Changes
description: +*Pre Requisite:*+

# Office CPV should be initiated post data verification
# Case Should be initiated in PD App with API - [https://fincap.atlassian.net/browse/ML-2854|https://fincap.atlassian.net/browse/ML-2854|smart-link]
# Case should be completed with API - 2 - [https://fincap.atlassian.net/browse/ML-4621|https://fincap.atlassian.net/browse/ML-4621|smart-link]

Applicable for MEL/MEL+/MEL repeat and PL app and co-app

+*Description:*+

When Office CPV is initiated post Data verification the office CPV case should have fields Mention in Attached Excel Sheet in Work book - “Salaried - Office CPV” for Office CPV initiated for Employment type as “Salaried”.

# Once the IRO submit Data verification Residence CPV, Office CPV and persona will be initiated to the UW who has completed the Data verification.
# The case initiated for Employment type as Salaried, office CPV should have fields mention in attached field list along with the condition.
# The initiated case will not be visible to UW in “CPV” worklist and would be present in backened in Pending stage.
# Once the case is completed in PD App - post receiving the Submit API - [https://fincap.atlassian.net/browse/ML-4621|https://fincap.atlassian.net/browse/ML-4621|smart-link] all the data entered in the App will be autopopulated in this field list and the case will be marked as closed.
# UW will not get an option to complete the CPV in SFDC
# once the Office CPV is completed in the PD App and all verification - (Resi, Office and PD) is closed the case will move to UW stage.
# In UW stage under verification Tab closed office CPV cases will be visible. When the UW clicks on View details in the CPV records he should be able to see all with new Fields with data autopopulated.
# This complete process should be followed when the CPV is reinitiated from UW stage also.
acceptance: Office CPV Fields

key: ML-4622
summary: Residence CPV Field changes
description: +*Pre Requisite:*+

# Resi CPV should be initiated post data verification
# Case Should be initiated in PD App with API - [https://fincap.atlassian.net/browse/ML-2854|https://fincap.atlassian.net/browse/ML-2854|smart-link] 
# Case should be completed with API - 2 - [https://fincap.atlassian.net/browse/ML-4621|https://fincap.atlassian.net/browse/ML-4621|smart-link] 

Applicable for MEL/MEL+/MEL repeat and PL

+*Description:*+

When Residence CPV  is initiated post Data verification the Resi CPV case should have fields Mention in Attached Excel Sheet in Work book - “Residence CPV”.

# Once the IRO submit Data verification Residence CPV, Office CPV and persona will be initiated to the UW who has completed the Data verification.
# The case initiated for residence CPV should have fields mention in attached field list along with the condition.
# The initiated case will not be visible to UW in “CPV” worklist and would be present in backened in Pending stage.
# Once the case is completed in PD App - post receiving the Submit API - [https://fincap.atlassian.net/browse/ML-4621|https://fincap.atlassian.net/browse/ML-4621|smart-link] all the data entered in the App will be autopopulated in this field list and the case will be marked as closed.
# UW will not get an option to complete the CPV in SFDC
# once the Resi CPV is completed in the PD App and all verification - (Resi, Office and PD) is closed the case will move to UW stage.
# In UW stage under verification Tab closed resi CPV cases will be visible. When the UW clicks on View details in the CPV records he should be able to see all with new Fields with data autopopulated.
# This complete process should be followed when the CPV is reinitiated from UW stage also.
acceptance: # Resi CPV should be initiated and completed in PD App
# New fields should be visible in UW screen and data should be autopopulated that is filled in PD App.

key: ML-4621
summary: Persona Submission API - 2
description: Post the Verification (Resi/Office/Persona) is completed in the PD App SFDC will receive a seconf call with SVC NAme - PDApp_Submit_x000D_
_x000D_
In this request SFDC will receive all the documents ID and Case ID which is completed on SO-app_x000D_
_x000D_
SFDC needs to mark that case (resi/office/persona) as completed once the Request is received_x000D_
_x000D_
Once all the task (Resi/Office/Persona) is completed for that case then the case will move to Underwriting.
acceptance: After Case is submitted from PD app API 2 should be  received to SFDC and case should be closed in SFDC also

key: ML-4616
summary: FICO rejection stage and substage for FICO rejection
description: When the case is rejected in FICO a tag is received in response - “Decline Reason”.

Basis the different decline reason received in FICO the stage substage of the case will be defined.

For all scenario stage would be “Reject” and sub stage would depend on “Decline Reason”.

Along with substage - A message should be shown to IRO depending upon the rejection reason

|*Decline Reason*|*Sub-stage*|*Message to shown to IRO*|
|Toxic Rule Reject|Toxic Rule rejection|Credit Bureau norms not met.|
|Scorecard Reject|Scorecard rejection|Scorecard Policy norms not met. Customer Tier- (Bronze etc.),|
|Policy rules Reject|Policy rejection|Product Policy Norms not met- (Reject deviation received in response to be shown like- age/job-stability/income etc.)|
acceptance: Stage and substage should as per description and IRO should be able to see the notification of the rejection

key: ML-4533
summary: URL Shortening API to be trigger for SMS having URL
description: The API should be trigger for All sms which contains URL and this should be trigger before the SMS are send._x000D_
_x000D_
Applicable for MEl/PL/HL and LAP
acceptance: API should be trigger for URL SMS

key: ML-4532
summary: URL Shortening API
description: Need to confgure API - SVC name - GETSHORTURL API_x000D_
_x000D_
Request :_x000D_
{_x000D_
"URL": " https://ruraldev-public.cs57.force.com/GroupCreditProtect?id=a0A0k00000LKXFZEA5"_x000D_
}_x000D_
_x000D_
Response :_x000D_
_x000D_
{"RESPONSEID":1769707,"ISSUCCESS":"True","ERROR":{"ERRORSYSID":null,"ERRORCODE":null, "ERRORDESC":null},"RESPONSE":{"PROCESSOR":null, "DATA":{ "ShortURL":"" }}}_x000D_

acceptance: This API should be trigger for All SMS which has URL

key: ML-4268
summary: API changes in Create Account
description: In create account API need to add below Tag in the request_x000D_
_x000D_
"fdRefNum": "0"_x000D_
_x000D_
it is a non mandatory tag where value will flow as blank.
acceptance: Above tag should flow and create account should be successful

key: ML-4266
summary: Deviation to be saved when case is Rejected by FICO
description: # When the case is rejected by FICO in any FICO response then Deviation received in FICO response should be saved.
# If the case is rejected by FICO and case is at UW stage then the deviation received by FICO should be visible to UW in deviation tab.
# In above scenario the case should be non editable to UW and user can see the deviation in deviation tab to check the rejection reason.
acceptance: Deviation should be stamped at visible to UW when case is rejected by FICO

key: ML-4263
summary: PL - FICO Rejection stage and substage changes for Posidex Refer rejected cases
description: *Current Process:*

Currently all cases rejected in FICO are stamped with suabstage as “Scorecard reject”. Same needs to be changed for MEL/MEL+/MEL repeat/PL and HL and LAP.

*Proposed Process:*

# If the case is posidex refer and the case is rejected in FICO due to posidex then the stage and substage of the case should be Stage - “Reject” Sub stage - “Posidex refer rejection”.
# To Identify if the case is FICO rejected due to posidex will be basis the below deviation in the FICO response.
# If below deviation is raised and Final decision is reject then the Stage - “Reject” Sub stage - “Posidex refer rejection”.
# The Deviation received in FICO response on rejection should be saved in SFDC and visible to UW in UW screen. This will be non editable to the UW.

|Rule Text|DeviationCode|
|Flagged account - Declined|PSX_T2M_001|
|Live loan count reject rule|PSX_LLR_037|
|Application previously rejected to be declined|PSX_PRR_021|
|Bad performance on CFL - Declined|PSX_BAD_003|

5. when the case is rejected by above condition then Message should be visible to IRO

*“Posidex Policy Norms not met- (Deviation received in Response- live loan count etc.)”*
acceptance: Stage and substage changes for FICO Rejection

key: ML-4262
summary: STP Fields to be stamped for Reporting Purppose
description: Currently we have 1 Field “STP Status” which stamps the updated decision of STP received either from FICO or Selected by User.

*Proposed:*

# Need to have 2 different field for reporting purpose which will save 2 different decision
## STP decision received from FICO
## Decision taken by user - The value is currently stored in field “STP Status”

This is only for reporting purpose.
acceptance: Fields should be stamped for reporting purpose

key: ML-4260
summary: Retrigger scenario handling
description: *Current Issue*: For retrigger cases scoring is rerun in FICO which ideally should not happen

*Proposed Process*

# In FICO 1st Policy rule Call FICO will send a STP Random Value in below Tag
## Applicants.consentID  
# The value in that tag needs to be saved in SFDC Backened
# Whenever the case is retrigger and 1st Policy call is rehit from SFDC then the randon Value received earlier and saved in SFDC needs to be resend to FICO in the request in below Tag
## applicationDecision.NodeNo
acceptance: # Above random value should be saved in SFDC when received in 1st Policy call 
# And same should be send to FICO in retrigger 1st Policy call
# If demographic flag is “Yes” and random value is send then scoring logic should run in FICO
# If demographic flag is no and Random value is send then the scoring should not run in FICO

key: ML-4256
summary: MEL CR | Scheme Creation for Govt. Subsidy Cases
description: Kindly make below changes in SFDC UAT_x000D_
_x000D_
1.	For MEL Bank Scheme make the Min Loan amount as 10K_x000D_
2.	Put ROI for 10K-40K as 24%_x000D_
3.	Add “Remarks” field from employment section in reports_x000D_

acceptance: As mentioned above.

key: ML-4199
summary: Worklist view - filter option to be given
description: Filter option to be visible in the worklist which will have product filter option._x000D_
_x000D_
This filter option should be customization and in future we should be able to add more option of filter
acceptance: filter option to be visible in the worklist which will have product filter option._x000D_
_x000D_
This filter option should be customization and in future we should be able to add more option of filter

key: ML-4187
summary: SMS Content changes
description: # SMS Should be trigger basis the excel Attached and Content of the same also should be changed basis that  mention in excel.

Also all the link send in SMS should be short with the help of Link shorter
acceptance: SMS Should be send as per the excel attached in various stages

key: ML-4182
summary: IFSC and MICR should not be added Manually
description: IFSC and MICR should not be added Manually
acceptance: IFSC and MICR should not be added Manually

key: ML-4181
summary: First EMI PDC Tag to be added for ADB Cases
description: Cases which are ADB Yes then below tag should flow in the FinnOne submit request - “FirstEmiPdcFlag”

<Field key="Instrument_Details">

      <Instrument>

        <Dest_Account_Holder>KUMAR KUMAR SHARMA</Dest_Account_Holder>

      {color:#6554c0}  <FirstEmiPdcFlag>Y</FirstEmiPdcFlag> \!--Y for YES <N for NO --\!{color}

        <PDC_By_Name>KUMAR KUMAR SHARMA</PDC_By_Name>

      </Instrument>

This is flow as “Y” for all ADB cases
acceptance: IFSC Should not be allowed to enter manually

key: ML-4040
summary: Workflow when API is down
description: When the API is down below workflow should work

# If user is not able to verify any of the available names from the dropdown, supporting document for any applicant/ coapplicant should bet taken and user should be allowed to go forward.

Pop up : “*IMPS Name Match failure, please proceed with Customer declaration.”*

The pop up notification should be shown on the click of the Checkbox "I hereby....".

Pop up (on checkbox) : “*Please proceed with document submission for repayment account submitted.*“

*Note:* Please check that the names from the dropdown should disappear if Karza is tried (API down) for them. User should not be able to run Karza again and again for same applicant if API is down.

Currently, the user can run Karza for same applicant multiple times when API is down. Only when the page is refreshed, the names are disappearing from dropdown for whom Karza has been tried once.
acceptance: API Fail scenario

key: ML-4039
summary: Validation to run on Checkbox and not Proceed button
description: Mandate related fields should be visible only once below conditions are met

# If user tries to skip Karza and tries to move forward.Here, user should be shown a pop up notification on Click of Checkbox saying "I hereby …". The drop down list should be kept enabled in this case.User should not be allowed to go forward after clicking the Checkbox unless he verifies one name from the Karza match dropdown list. Mandate Initiation field should not be visible in this Case

Pop up : “*Please click on verify button to get Name match status.*“

2. When Karza is done for any Applicant

# Karza >=65% - then Mandate initiation Field should be visible
# Karza < 65% - If user verifies one name from the dropdown and tries to go forward. At click of checkbox, the pop up should be shown to user.

Pop up : *Please try with other name or proceed with Document submission for repayment account submitted* - (Incase Applicant is pending for Karza)

Pop up : *Please proceed with document submission for repayment account submitted.* (in case all Applicant karza is done)

After uploading the document, the user should not be shown notification at click of Checkbox and should be able to initiate mandate.

The document should be mandatory irrespective of the Karza Percentage. The document should be tagged against Applicant irrespective of the percentage

Whichever document is uploaded ,it should tag in Primary applicant –IMPS NAME MATCH Document header.

Only after document upload, on click on Customer declaration, the mandate section will get visible to the user.
acceptance: Mandate fields to be visible for mention condition

key: ML-4038
summary: Status Field to be displayed On Karza Verification
description: A new field to be displayed - "Status" beside Verify button. This field should display the status of Karza._x000D_
_x000D_
If Karza is failed then status should be - "IMPS Name Match for XXX failed"._x000D_
If Karza is success then the status should be - "IMPS Name Match for XXX successful"._x000D_
_x000D_
When initiated for 2nd applicant/ co applicant, the status will refresh and show for the latest verified.
acceptance: New field to be added beside verify button

key: ML-4037
summary: Karza Field on Name Match >= 65%
description: User tries Karza and name match is equal to 65 percent or above.
Here, user should be able to initiate mandate. Disable the Dropdown even if there are other names present in it as soon as Success is achieved.
The Karza fields will be visible but disabled.
Name Match status should be stamped right next to the Verify button as "*IMPS Name Match for XXX "Applicant Name"* successful".
acceptance: Error message to be changed

key: ML-4028
summary: UTR Number to flow in FInnOne submit request
description: In FInnOne Submit request for ADB Cases when IMPS Flag is "Y" then below Tag should flow_x000D_
_x000D_
"UTR_NUMBER" : "",_x000D_
_x000D_
This is the Number received while doing IMPS for the bank details
acceptance: UTR number should flow in the FinnOne submit request

key: ML-3835
summary: Business Unit to be send in below response API
description: For below API Business Unit Tag to be send for Rural hl, LAP MEL and PL

Esign API 1

EKYC API 1

ESTAMP API1

Attached is the sample request and response
acceptance: Business Unit to be send in EKYC, Esign annd Estamp api

key: ML-3830
summary: Validation for Selecting same CRN for app and co-app
description: When the CRN verification Task is raised for app and co-app and user select any CRN for decisioning then SFDC should have below Validation._x000D_
_x000D_
In Maker stage if User has selected same CRN For app and co-app then SFDC To give below Validation_x000D_
_x000D_
"CRN cannot be same as of Applicant/Co-applicant’ _x000D_
_x000D_
This Validation should run on Maker stage to the IRO.
acceptance: Validation of Same CRN Assign on Maker stage

key: ML-3755
summary: UI Change: Welcome Screen pop-up
description: UI Change: Welcome Screen pop-up

This is a dev technical story. 

QA can be done as per flow testing or can be taken here, as per convenience.
acceptance: UI Change: Welcome Screen pop-up is developed as per new UI

key: ML-3754
summary: Customer Screen 2: Confirm your details (Part 2) - PSL Details - Part 1
description: h1. As a Customer, after completing my personal details section, I am able to view the PSL details section on the same stage, so that I can verify or edit or submit the same & proceed ahead.

h2. Pre-requisite:

Customer has completed the data entry on Confirm your details - Personal Details section and clicked on proceed button.

h2. Description

h3. Confirm Your Details

* On clicking on Proceed from Loan details Page the user will land on next stage of *“Confirm your details”*
* User will have 3 Sub Page in this Tab
** Personal Details
** *PSL Details*
** Insurance Details

*PSL Details*

# Fields mention in Field list should be visible to the Customer – All fields will be editable and Autopopulated from base loan
# On backened, the fields autopopulation for all the stage – Employment/Loan details will remain same. There is no change in backened field stamping.
# PSL logic will remain same as currently Working.
# User will have 2 buttons “Edit” and “Confirm”.
# On Click of “Edit”, the fields will become editable to the user to edit the data.
# On click on “Confirm”, below Validation should run:
## If Mandatory Data is not entered then below Validation should be given - “ _Kindly enter Mandatory Data to move ahead_ ”
## If any Data is not present as per PSL Logic of Plan and Machinery or annual Sales turnover then Customised Message should be visible to Customer as per logic.
## If all data is entered then the case should move to next stage

h3. Case dropped at this stage

# Covered in [https://fincap.atlassian.net/browse/ML-5483|https://fincap.atlassian.net/browse/ML-5483|smart-link] 

h3. Open queries: [~accountid:5e1822e2c578120daca5b494] to confirm

# Product to confirm if reference is required? 
# Will there be only 1 ref or 2?

*As confirmed, References are not required in customer journey. No reference section will be visible on this screen.*
acceptance: # After completing Loan Amount Stage, customer is able to view my PSL details on Confirm your details Stage
# Customer can view the details as autopopulated and can edit details.
# Customer can drop off the case or can proceed ahead with the details

key: ML-3753
summary: Customer Screen 3: Insurance Details Proceed -> Get loans API callout auto trigger
description: h2. Pre-requisite:

Customer has clicked on proceed button on Confirm your details stage - Insurance Details

h2. Description

# Once the User Clicks on “Proceed” from Insurance stage, Get loans API should get triggered by SFDC at backend automatically.
# This callout to happen before landing on Confirm loan details to fetch the POS value.
# SFDC to read “POS": 0 tag value from the response of this API
# \{"LAN":"2560125"} is finnone ID of Base loan in response
# When the callout is in progress a loader will be visible.
# If Successful 
## Customer should see the Confirm Loan Details pop-up as given in [https://fincap.atlassian.net/browse/ML-3752|https://fincap.atlassian.net/browse/ML-3752|smart-link] 
# If Failed
## Customer should get 3 retry options to rehit the API.
## If API still gets failed after 3rd retry attempt, user should be navigated to next Confirm Loan Details pop-up as given in [https://fincap.atlassian.net/browse/ML-3752|https://fincap.atlassian.net/browse/ML-3752|smart-link] 
## If POS value is received, then same will be used in calculations on Confirm Loan Details Pop-up otherwise calculations will be done without the same.
## -consider the case as drop off- [~accountid:5e1822e2c578120daca5b494] -Kindly confirm this point. -- -_Yes, case will be dropped off._-
# PFB API details:

[^Get Loan Details API.doc.odt]


acceptance: # When User Clicks on “Proceed” from Insurance stage, Get loans API gets triggered by SFDC at backend automatically
# This callout happens before landing on Confirm loan details to fetch the POS value.
# SFDC reads “POS" tag value from the response of this API
# When the callout is in progress a loader will be visible.
# If Successful - Customer gets navigated to the Confirm Loan Details pop-up
# If Failed - Customer gets 3 retry options to rehit the API.
## If POS value is received, then same will be used in calculations on Confirm Loan Details Pop-up otherwise calculations will be done without the same.

key: ML-3752
summary: Customer Screen 3: Insurance Details Proceed -> Get Loan Details API Success -> Confirm Loan Details Pop-up
description: h2. As a Customer, I should be able to view loan details after clicking proceed on Insurance Details & if Get Loan Details API Success, so that I can make a choice to proceed further with application or not

h2. Pre-requisite:

Customer has clicked on proceed button on Confirm your details stage - Insurance Details

Loan Account Details API callout is triggered and is successful as given in [https://fincap.atlassian.net/browse/ML-3753|https://fincap.atlassian.net/browse/ML-3753|smart-link] 

h2. Description

# Once the User Clicks on “Proceed” from Insurance stage the case will land on *“Confirm Loan Details”.*
# If POS value is received, then same will be used in calculations on Confirm Loan Details Pop-up otherwise calculations will be done without the same.
# This Page will give the Overview of the Loan amount and other Deduction in the Loan amount. Fields will be displayed as:
## Amount to be received = Net Disbursal Amount (excluding all the charges + POS)
## EMI per month
## EMI time period
## Flat Interest Rate
## POS = Fetch from Get loans API callout
## One Time Fees (OTF)
### Processing Fees
### SGST
### CGST
### Other Charges
## Total Loan Amount (Amount to be received + OTF)
# On clicking on “Confirm” Button the case will move to Next Page  “Bank details”
# No details will be editable to the Customer on this page.
# If the User drop off from this page the case will be visible to IRO on the Charges screen post Insurance.
## [~accountid:5e01db1dbc8ab30e98ece94c] - to confirm if same can be achieved

!image-20210311-184421.png|width=978,height=431!

Clicking on Proceed button, customer will land on Bank Details screen [https://fincap.atlassian.net/browse/ML-5608|https://fincap.atlassian.net/browse/ML-5608|smart-link] 

----

[~accountid:5e1822e2c578120daca5b494] 

# As we are already showing the loan details on next of Loan Amount stage - do we need this pop up again?? - {color:#6554c0}Yes we do{color}
# How will customer drop off from this stage? - {color:#6554c0}Inactivity{color}
# We should show the POS as well?? Get loans API callout - kindly explain - {color:#6554c0}Will update on this{color}
acceptance: # Once the User Clicks on “Proceed” from Insurance stage the case will land on *“Confirm Loan Details”.*
# This Page will give the Overview of the Loan amount and other Deduction in the Loan amount. Fields will be displayed as mentioned in description.
# Everything will be read only

key: ML-3751
summary: Customer Screen 2: Confirm your details (Part 1) - Personal Details
description: h1. As a Customer, after completing Loan Amount Stage, I should be able to view my personal details section on Confirm your details Stage, so that I can verify them & proceed or can apply for edit details.

h2. Pre-requisite:

Customer has completed the data entry on Loan Amount page and clicked on proceed button.

h2. Description

h3. Confirm Your Details

* On clicking on Proceed from Loan details Page the user will land on next stage of *“Confirm your details”*
* User will have 3 Sub Page in this Tab
** *Personal Details*
** PSL Details
** Insurance Details

*Personal Details*

# Fields mention in Field list should be visible to the Customer – All fields will be non-editable and Auto-populated.
## First Name, Middle Name, Last Name
## Date Of Birth (dd/mm/yyyy)
## Mobile No
## -Applicant Email ID- - Not required to show on front end
## Resi Address 
# As per the base loan, all the details for applicant will also be auto-populated and non-editable to customer. Also, if there was co-app(s) in base loan then co-app(s) details will also be auto-populated and non-editable to customer.
# On back end the fields auto population will remain same. There is no change in back end field stamping.

!image-20210309-120756.png|width=100%!

h3. Edit personal details

# If customer wishes to edit the auto populated details, then the case will be considered as Dropoff and will be visible to IRO in editable mode. Customer self journey should be ended in such scenario.
## An edit button should be visible to customer so as if the customer wants to change any non-editable details, then he can proceed to do so.
## In this scenario, when customer clicks on edit a confirmation message should be displayed to customer as - -“--_Do you wish to edit the personal details?_--”- “Editing details will require physical verification by our Relationship Officer. Do you wish to continue?” with Yes No option
### If customer clicks on Yes – Customer journey should be Dropped off
#### Customer should land on screen with blurred background & Message visible as - *“*_Dear Customer, Your pre-approved Loan is already initiated by the Sales officer. Kindly contact the Branch for further queries_*”*
### If customer clicks on No – The confirmation pop-up should get closed and customer can continue his self journey.
# The loan application will be visible to IRO in “*MEL+ Customer Journey Cases*” worklist and scheme for such applications will be changed from MEL+ to MEL Repeat.
## Bank - MEL-REPEAT BANK
## IFBL - RURAL MEL REPEAT- IFBL
# Repeat Flow will continue as is to the IRO and loan will be visible to him under “*MEL+ Customer Journey Cases*” worklist.
# IRO will take ownership & will land on Co-applicant details entry Page.

h3. Submit personal details - go ahead

# If the Customer continues with existing data then the case will be moved to next stage.

----

Open Points: [~accountid:5e1822e2c578120daca5b494] to close

# @anjali – To confirm if Mobile number would be editable to the Customer or not? - {color:#6554c0}Same will be non editable{color}
# @vishisht – to confirm if co-app deletion is allowed or not? as currently for existing MEL+ co-app cannot be deleted or added. - {color:#6554c0}No deletion allowed{color}
# User will have 2 Buttons - @yashopriya to confirm the button or message for changing data - {color:#6554c0}Current process is ok{color}
# Product to confirm if co-app is required or not -{color:#6554c0} Yes same is required{color}
acceptance: # After completing Loan Amount Stage, customer is be able to view personal details on Confirm your details Stage as given in description.
# Customer is able to edit and drop off the application as given in description
# Customer is able to proceed ahead without editing details to next stage in self journey.

key: ML-3750
summary: Customer Screen 2: Confirm your details (Part 3) - Insurance Details - Part 1
description: h1. As a Customer, after completing PSL details section, I am able to view the Insurance details section on the same stage, so that I can verify or edit or submit the same & proceed ahead. 

h2. Pre-requisite: 

Customer has completed the data entry on Confirm your details - PSL details section and clicked on proceed button. 

FICO insurance callout is triggered and is successful as given in [https://fincap.atlassian.net/browse/ML-4692|https://fincap.atlassian.net/browse/ML-4692|smart-link] 

h2. Description 

h3. Confirm Your Details 

* On clicking on Proceed from Loan details Page the user will land on next stage of “Confirm your details” * User will have 3 Sub Page in this Tab 
** Personal Details 
** PSL Details 
** *Insurance Details*

h3. Insurance Details

*Credit Protect Insurance* 

* Once the Customer lands on Insurance details, Credit protect insurance should be visible as Autoticked and Premium will be Autopopulated by the amount fetched from FICO Insurance call. 
* All fields mentioned in field list will be visible and autopopulated and non editable/read only:
** Fields Requirement
*** Opting for Credit Protect - Mandatory for Applicant
*** Insurance company - HDFC Life
*** Coverage Type - Life (Fixed value)
*** Premium Amount - To be Given by FICO in Insurance call API
*** Planned Sum assured - Autocalculated basis Loan amount (5% more than the Loan Amount)
*** Policy tenure - same as tenure of Case
* -User will have an option to Untick the Insurance. Customer will not be able to untick this insurance.- This insurance checkbox will be ticked by default and disabled always to customer.
* -If the user untick the Insurance below Message should be visible to Customer - “You are opting out of insurance, our representative would connect with you for further processing of loan. Do you still want to opt out_ ?” with Yes/No option- 
** -This popup will be visible with “Yes” and “NO” option.- 
** -If user clicks on “NO” Then the Checkbox will remain ticked- 
** -If the user click on “Yes” then the case will be treated as Dropoff and the case will be visible to IRO on Insurance screen. MEL+ Flow will follow as is- 
* Nominee details covered in [https://fincap.atlassian.net/browse/ML-5484|https://fincap.atlassian.net/browse/ML-5484|smart-link] 

*Hospicash Insurance*

* All details of insurance should be autopopulated -and user should have option to Tick or untick the Insurance. Same is not mandatory.- 
* This insurance checkbox will be ticked by default, but will be editable to customer. He can untick or tick again the same. Same is not mandatory. 
* All fields mentioned in field list will be visible and autopopulated and non editable/read only:
** Fields Requirement
*** Opting for Hospi-cash - Yes should be autoticked and user should have option to untick it
*** Insurance company - ICICI Lombard
*** Coverage Type
*** Premium Amount - Fixed- 150/-
*** Planned Sum assured - Fixed- 15000/-
*** Policy tenure - Fixed- 1 Year
* Nominee details covered in [https://fincap.atlassian.net/browse/ML-5484|https://fincap.atlassian.net/browse/ML-5484|smart-link] 

At the end of the Page user will have button “Proceed” on clicking the case will be moved to next stage. 

----

[~accountid:5e1822e2c578120daca5b494]  Queries 

* Do we need to call FICO insurance callout again before landing on this screen?  - {color:#6554c0}no same is not needed as premium is already calculated in {color}[https://fincap.atlassian.net/browse/ML-4692|https://fincap.atlassian.net/browse/ML-4692|smart-link]{color:#6554c0} {color}
* Kindly confirm on Co-app insurance - {color:#6554c0}Not required{color}
acceptance: # On clicking the link or offer on app user should be able to move to SFDC Community page
# When the user lands he should see the offer all other loan details
# Functionality should work as described

key: ML-3749
summary: Stage on Customer journey - Part 1
description: h1. As a Customer, I should be able to enter details for my self journey on different pages, so that I can avail my offer received.

h2. Stages/Progress bar visible to the Customer

Below Stages /Progress bar would be visible to the Customer

# Loan Amount
# Confirm your details
## Personal Details
## PSL Details
## Insurance Details (Please refer filed list.)
# Confirm Loan Details 
# Bank details
# Review your details
acceptance: # Above stages/Progress bar should be present in the customer journey

key: ML-3748
summary: Drop off Handling - Part 1
description: h1. The self journey’s started by bank customers, should be dropped off automatically after a certain time limit by SFDC. 

h2. Drop off conditions: Part 1

{panel:bgColor=#deebff}
There are multiple drop off scenarios which needs to be considered by SFDC. In this story only below conditions to be considered:
{panel}

If any of the below condition is true, then the case will be treated as a drop-off case and “Drop off” checkbox will be ticked on SFDC.

# If the case is not submitted to FinnOne with 24 hrs of Case creation will be considered as Dropoff *(This time should be configurable). Non activity -* [~accountid:5e01db1dbc8ab30e98ece94c]  - Kindly confirm the logic of 24 hrs in system
# Any change in Demographic data

Once the case is drop-off, then the case will become editable to the IRO and he can continue the journey from the stage where the customer has left.

----

h3. Mentioning all the conditions for reference:

If any of the below condition is true, then the case will be treated as a drop-off case and “Drop off” checkbox will be ticked on SFDC.

# If the case is not submitted to FinnOne with 24 hrs of Case creation will be considered as Dropoff 
# If Karza Name Match is < 65% 
# IMPS technical and non technical error cases
# Any change in Demographic data
# -Untick Credit Insurance for app-
# Get IFSC Failed scenario - retry 3 attempts to be given
# Digital Mandate. Digital SI and aadhar Based Mandate Failed scenario *-* retry 3 attempts to be given
# Clickwrap Failed *-* retry 3 attempts to be given

Once the case is drop-off, then the case will become editable to the IRO and he can continue the journey from the stage where the customer has left.
acceptance: If any of the below condition is true, then the case will be treated as a drop-off case and “Drop off” checkbox will be ticked on SFDC.

# If the case is not submitted to FinnOne with 24 hrs of Case creation will be considered as Dropoff *(This time should be configurable). Non activity -* [~accountid:5e01db1dbc8ab30e98ece94c] - Kindly confirm the logic of 24 hrs in system

Once the case is drop-off, then the case will become editable to the IRO and he can continue the journey from the stage where the customer has left.

key: ML-3747
summary: Worklist of IRO For Customer Journey
description: h1. IRO worklist configuration for customers who can initiate their self journey.

h2. New worklist visible to IRO:

# Under MEL Product, IRO will have a new Worklist *– “MEL+ Customer Journey Cases”*
# This will be a open pool worklist and cases will be visible to all IRO's assign to that branch.
# New Loan application of MEL+ will be visible to all IROs in open pool present in that branch. “MEL+ Customer Journey Cases“ worklist
# IRO will have option to take ownership of a case.
# If the IRO has taken the ownership of a case, then the case will not be visible to other IRO in Worklist - “MEL+ Customer Journey Cases” and will start showing up in WIP Worklist for MEL cases of that IRO.
# Below Columns will be visible in “MEL+ Customer Journey Cases“ worklist:
## Loan application ID
## Applicant Name
## Created Date
## Stage
## Drop off
## Scheme

h2. MEL+ offers visible to IRO logic:

# Once the customer has clicked on the offer through any mode and started the self journey, then a new loan application will be created in SFDC. 
## To IRO, on community page this application will be visible in “MEL+ Customer Journey Cases“ worklist.
## Once the Customer has initiated the Journey by clicking on the offer, then the offer will not be visible to the IRO in the “Offer worklist”. 
## It should be visible in worklist - *MEL+ Customer Journey Cases as a loan application and not as a offer.*

h2. Drop off checkbox:

# There will be a Flagging – “Drop off” visible on worklist basis which system will define if the case will be editable to IRO or not
## If the Drop off Flag is Untick, the case will be visible to IRO but in non editable mode and in the same stage as the customer is currently on.
## If the Drop off flag is Ticked, then the case will be editable to the IRO from the same stage where the customer has dropped off.
acceptance: # New worklist should be present for MEL IRO only
# MEL+ cases initiated by the customer should be visible here
# The Cases will be visible in open pool and IRO can take ownership for the same

key: ML-3746
summary: Customer Screen 1: Loan Amount Stage (Part 1)
description: h1. As a Customer, when I clicked on self start link from SMS/My Bharat App, I should be landed on SFDC Community page at Loan Amount Stage.

h2. Pre-requisite:

Customer has received the MEL+ offer and clicked on the Community link (self start link) from SMS/My Bharat App

h2. Congratulations alert box

* Once the customer clicks on Community link (self start link) from SMS/My Bharat App, he will be Directed to the SFDC Page at Loan Amount Stage. 
* On landing, below Popup message will be visible to the customer:

!image-20210305-062045.png|width=989,height=483!

* This pop up will be visible for 5 Sec (Configurable) to the customer.
* Post the above pop-up (pop-up auto closed), customer will be able to view the Loan Amount Stage.
* [https://fincap.atlassian.net/browse/ML-5454|https://fincap.atlassian.net/browse/ML-5454|smart-link]  - this flow will continue 

----

The pop-up will show below content on it. Refer column “Update” values to display:

||*Sr. No.*||*Line*||*Update*||*Comments*||
||1|You are eligible for a loan up to|You can avail a pre-approved loan instantly up to| |
||2|Rate of Interest per year|@|Position to be shifted|
||3|GET LOAN IN 4 QUICK STEPS|NO BRANCH VISIT| |
||4|ONLINE & PAPERLESS|ONLINE & PAPERLESS| |
||5|GET MONEY IN 48 HOURS|IMMEDIATE DISBURSEMENT| |
||6|NO HIDDEN CHARGES|ASSURED HEALTH COVER| |
acceptance: Customer is able to view a congratulations pop-up for 5 secs as mentioned in description.

key: ML-3745
summary: SFDC Community Link to be send to Customer - Part 1
description: h1. As a Customer, I should be able to initiate a loan journey for my MEL+ offer received.

# For MEL+ cases Offers will be uploaded in SFDC. Customer can self start the journey In 2 ways:
## By clicking link from SMS - Covered in [https://fincap.atlassian.net/browse/ML-5386|https://fincap.atlassian.net/browse/ML-5386|smart-link] 
## By clicking on Offer on My First Bharat App

h2. *By clicking on the Offer on My First Bharat App*

Once the Customer clicks on the offer from _MYFIRST-Bharat app_, he will be directed to SFDC Community portal.

h2. *If IRO initiates journey for such customers*

# If the Journey has started by the IRO by clicking on interested, then the Message “Link” and Offer on the _MYFIRST-Bharat app_ would be marked as expired and customer will not be able to initiate a self journey anymore. 
# Below Message would be visible on clicking the Link - “_Dear Customer, Your pre-approved Loan is already initiated by the Sales officer. Kindly contact the Branch for further queries._*”*



* If the customer has started the journey by clicking on the message “link”, he should still be able to view the offer on the _MYFIRST-Bharat app_.
* If the customer has left the journey midway, then he should be able to continue the journey from the same stage where he left, on clicking on other mode of Journey initiation i.e. if link then app or vice versa.
acceptance: # Customer should get link in both the Mode of journey initiation
# He should be able to continue the journey from the stage where he has left the journey if the case is not dropped off
# Offer which is already marked interested by IRO Customer should not be bale to initiate the journey again

key: ML-3743
summary: Salary income head Changes
description: 1. For PL cases if App or co-app has employment type as "Salaried" then Adding income head "Salary" should be mandatory on Income details section and UW Income details section._x000D_
_x000D_
2. User should enter M1, M2 and M3 Mandatory for App and co-app as Salaried._x000D_
3. If the User does not enter the Income and tries to Move ahead then a validation should be run "Kindly enter Monthly Income of - "Applicant Name whose Income is not entered""._x000D_
_x000D_
4. If app and co-app both is not entered then both name should show
acceptance: For PL cases if App or co-app has employment type as "Salaried" then Adding income head "Salary" should be mandatory on Income details section and UW Income details section._x000D_


key: ML-3741
summary: ADB Flag to be set Basis Karza Percentage as well
description: *+Current Use case +*

We have considered that all Digital Mandate /Digital SI and Existing open mandate cases for ADB journey.

*+Proposed Flow +*

If Karza % >=65 % for digital Mandate & Digital SI cases then only it will consider for ADB journey.

If Karza < 65% then case will goo in normal flow.
acceptance: ADB Flag to be consider karza percentage as well

key: ML-3740
summary: Dashboard Functionality - Columns visible as mentioned
description: h3. As a BCM, I am able to view specific columns on Credit dashboard report.

h4. Use Case:

# Credit Dashboard

h4. Details:

Below Functionality should work for both the Dashboards mentioned in [https://fincap.atlassian.net/browse/ML-3390|https://fincap.atlassian.net/browse/ML-3390|smart-link] 

# There should be a hyperlink option on pending, completed, in-progress count which will take the credit manager to view the detailed list of cases available under that particular category.
# On clicking on the Hyperlink a report format should be visible with below columns
## Customer Name
## Product 
## Created Date
## Activity Start Date time 
## Application ID and ascending sorting basis Created Date.

No Subtotal field should be visible
acceptance: # For BCM, on credit dashboard, hyperlink option is present which shows the count of particular category.
# Clicking on hyperlink, the report is visible as per the columns mentioned below:
## Customer Name
## Product
## Created Date
## Activity Start Date time
## Application ID and ascending sorting basis Created Date.

key: ML-3464
summary: 588574 : Wrapper Issue : Duplicate Account Number
description: Need to analysis this issue, as no change was done for this part.

+*Issue RCA :*+ 

We have kept "srvc" tag as String only but in Production it is coming as an array. 

*In Production:* 
"rsn": "DUPLICATE ACCOUNT NUMBER",
"srvc": \{
"nm": "cbs-cust-mgmt-sys",
"cntxt": "cbs-cust-mgmt-sys",
"actn": \{
"paradigm": "Reply",
"nm": "createCBSCustomer",
"vrsn": "1"
}

*In PreProd:* 
"rsn": "DUPLICATE ACCOUNT NUMBER",
"srvc": "createCBSCustomer"

As per our discussion on ML -891, 
1.	In production the code was as per the String tag only.
2.	Bug 891 was raised in UAT stating the data type as a wrapper.
3.	When we move this bug to pre-prod, we found that expected data type was String only.
4.	Hence no change was required to deployed to production
acceptance: Array should be accepted in the CBS Response and Create Account API should run post getting duplicate error

key: ML-3434
summary: POI and POA changes for App and Form 60
description: In application form and Form 60 in scenario where POI or POA is not required then the Identifier by which Single KYC/CKYC or EKYC Was successful should be autopopulated_._

for other scenario _the POI or POA selected should be autopopulated._
acceptance: Application and Form 60 should show POI and POA as discribe

key: ML-3433
summary: Promotion to be send to FInnOne
description: Only for MEL

A new Tag to be created in FinnOne Submit request

# <Field key="PMSchemePromotion">PM</Field>

If user has selected the scheme - PM Swanidhi and not selected the check box then “PM” should flow.

If user has selected the scheme - PM Swanidhi and selected the check box then “CM” should flow.
acceptance: Promotion to be send to FInnOne

key: ML-3431
summary: Aadhar reference Number to be send to CBS
description: In CBS Create Customer callout Currently we are calling vault and sending aadhar number in the request.



Same needs to be removed. As per proposed Flow Aadhar vault will not be called out and Reference number would be send to CBS Create customer in the same Tag.

For aadhar reference ID Type would be “56” and ID number would be reference number.

Aadhar vault callout needs to be removed
acceptance: Aadhar reference Number to be send to CBS

key: ML-3428
summary: Promotion field to be visible for MEL
description: For MEL Cases a new scheme should be added for Bank workflow.

# *PM Swanidhi Scheme*

Under which below Validation should run

# Min and Max Loan amount  - 10000
# Letter of confirmation form Local urban body- Mandatory document
# CPV of Residence- mandatory
# Tenure- 12 months
# RoI- 24%

The Workflow will remain the same and no change in the same.

In this Scheme a checkbox should be present for 

# *MP CM Street Vendors Scheme* 

If the user elects the checkbox then below Validation should run.

*MP CM Street Vendors Scheme - This should be present for reporting purpose*

# Min and Max Loan Amount- 10,000
# Letter of confirmation form Local urban body - Mandatory
# CPV of Residence - mandatory
# Tenure- 12 months
# RoI- 24%

This field to be visible in Underwriter as well on loan and product tab beside scheme Field.

The Scheme Should flow to Posidex, FICO and FinnOne.
acceptance: New Fields to be visible for PSL Classification

key: ML-3426
summary: Email communication using Integration Call and not by Workflow/Single Email/Process builder
description: In Rural, there's an Email sent to Case owner during Posidex Reject scenario for Posidex Refer Workflow.

+*Current Approach :*+
Send via Single Message from Apex

+*New Approach :*+ 
Integration API to be used for the same : *EMAIL_COMMUNICATION*
acceptance: For Posidex refer, when CRN case is created and later on Retrigger, Posidex Rejects the loan, then : 

* an Integration record in backend should be created : *EMAIL_COMMUNICATION*, from which user (IRO/BCM) will recieve email

key: ML-3395
summary: Application form related changes for Whatsapp Banking
description: For Application form below changes are required

# Below line marked in blue needs to be added in the Authorization section

|*Authorisation*|
|I hereby authorise the Bank, without any notice to me to conduct credit checks, references, make enquiries, in its sole discretion and also authorise the Bank and its agents to share and obtain information, records from any agencies, statutory bodies, credit bureau, bank, financial institutions, or any third party in respect of the application, as it may consider necessary. The Bank shall not be liable for use/sharing of the information. I/we would like to avail the benefits of various bank loan offers, schemes or loan promotional activities or any other promotional schemes and hereby authorise the Bank, it's employees, agents, representatives and associates to do so. 
I confirm that laws in relation to the unsolicited communication referred in the "National Do Not Call Registry" as laid down by Telecom Regulatory of India will not be applicable for such communications/calls/SMSs received from IDFC FIRST Bank Limited, its representatives, agents. The Bank reserves the right to retain the photograph and documents submitted with the Application and shall not return back. IDFC FIRST Bank Limited shall be entitled at its sole and absolute discretion to approve/reject this Application Form submitted by Applicant/Co-Applicant/Guarantor. 
I/We authorise the Bank to submit application/other relevant documents submitted by me to CERSAI. I/We hereby provide my/our consent to receive information from Central KYC Registry through SMS/mail on the above registered number/email address.
{color:#6554c0}I hereby consent to receive information about my loans and offers on whatsapp on the registered number.{color}|

2. In the “Declaration” Part below content needs to be added additionally

{color:#6554c0}“I/We state, declare, confirm and agree that the Bank has duly explained to me/us that submission of a copy of my/our Proof of Possession of Aadhaar Number (OVD) containing Aadhaar number, as an Officially Valid Document(OVD) is not mandatory and I/We have the option to submit any one of the documents as per the list of Officially Valid Documents (updated by the RBI from time to time){color}

{color:#6554c0} {color}

{color:#6554c0}I/we further state, declare and confirm that I am/We are providing my/our Proof of Possession of Aadhaar number(OVD) as an officially valid document voluntarily in accordance with extant rules and regulations; and I am/We are required to redact/ blacken out the first eight digits of Aadhaar number so that only last four digits of the Aadhaar number are visible; and in case I/We do not redact/ blacken out the first eight digits of Aadhaar number, I/We authorized IDFC FIRST Bank to redact/blacken out the Aadhaar number through appropriate means on my/our behalf”{color}

*Additonal Requirement*

# Remove sampark ID- (last row of app form)
# GST address should not be displayed for ‘Unregistered’. This would become an audit point.
# Nature of Business- Code is being displayed instead of description.
# Co-applicant is non-working still address is getting displayed. Please remove the same.
# Date of application should be login date. Currently it is document generation date.
acceptance: Application form related changes for Whatsapp Banking

key: ML-3390
summary: Credit Dashboard
description: Applicable for HL and LAP/MEl and PL

Credit Dashboard needs to be build which will be visible to All the Credit manager from L1 to L5 level along with Bank and IFBL Credit Manager.

# Dashboard will basically show the Pending cases in Different Stages
## CRN Verification Pending
## Data Verification Pending
## RCU Pending
## UW Pending
## Disbursement Pending
# A different Dashboard will be made for Verification Pending Cases
## Verification Pending
### Resi CPV
### Office CPV
### Tele PD
### Legal
### Technical
### Collateral
### PDD
### Tele PD 
# Dashboard should show the information for all the branches linked to that particular user. For ex. Cluster Credit Manager should be able to view all the branches mapped to them, SCH should be able to view the information for their State, NCM should be able to view for all the states mapped to them.
acceptance: Credit dashboard should be visible as Described

key: ML-3386
summary: AEPS API 2 request and response
description: # Once the AEPS API 1 is received and and responded successfully. then AEPS API 2 request would be send from SO-App to SFDC

*Svc Name: AadharEmandate_AePsStatus*

*Request*              

\{"requestHeaderSource":"SO_APP","ErrorMsg":"Transaction Success","LedgerBalance":"+00000000493000.00","LoanNumber":"70327521912","MainAccountBalance":"+00000000492000.00","StatusOfAEPS":"Success"}

*Response*           

\{"StatusOfAEPS":"Success"}

# If success is received in the 2nd Request in the tag - StatusOfAEPS then SFDC to consider the AePs integration as success and proceed with point 5

10. If the 2nd request is not received within 2 Mins then SFDC to consider it failed and mark status as “Response Time Exceeded”

11. SFDC to store Ledger Balance Value and Main account balance value in admin on bank object
acceptance: AEPS API 2 request and response

key: ML-3385
summary: AEPS API 1 - request and response
description: # If the case is AEPS Eligible and user proceed with the same below API Would be received from SO-app to SFDC
# Once the user clicks on Proceed to initiate AePS  a request would be received from SO-app to SFDC

*Svc name*: Aadhar_Emandate

*Request*              

\{"requestHeaderSource":"SO_APP","LoanNumber":"70327521912","Username":"tw.so.mataprasad.tiwari@capfirst.com.uat"}

*Response*           

\{"Username":"tw.so.mataprasad.tiwari@capfirst.com.uat","Substage":"","Stage":”","LoanNumber":"70327521912","Bin":"508534","AadharRefNumber":"6AAQFwEi5jgiAkA+NwQ5rg=="}
acceptance: AEPS API 1 - request and response - response should be send by SFDC as described

key: ML-3384
summary: CKYC Photo to be uploaded in different document type for CO-app
description: Customer photo received from CKYC /EKYC should be stored in below Documents of coapp

Document Type - Co-Applicant CKYC Photo

                  Document Sub-Type – CKYC Photo

And same should be stamped in applicaton form as well

WIP cases handling needs to be done
acceptance: CKYC Photo to be uploaded in different document type for CO-app

key: ML-3379
summary: Source flag to be send to FinnOne
description: If the case is ADB Value should flow in below Tag

<Field key="Source_Flag">

For MEL the value will flow as - “RMAU”

For PL the value will flow as - 

*<Field key="ProductCode">RPL</Field>*  

*<Field key="Source_Flag">RPAU </Field*
acceptance: Source flag to be send to FinnOne

key: ML-3366
summary: Surrogate scheme configuration for IFBL Workflow
description: |*Flow Type*|*Scheme Group*|*Scheme Group Code*|*Scheme*|*Scheme Code*|*Loan Amount*|*Unnati (Check Box at Loan and Product Tab)*|*Tenure*|*ROI*|
|IFBL|MICRO ENTERPRISE LOAN|332|RURAL SURROGATE MEL – IFBL
This scheme to be configured but disabled for now|57369|>300000-500000|Yes|Tenure Drop-down values: 12, 18, 24, 30, 36,42, 48
Tenure Validation
Loans > Rs.200000-300000- 12 to 48 months|0.24|

And for unnati the ROI will be same no change. same as Bank Unnati surrogate program
acceptance: Surrogate scheme configuration for IFBL Workflow

key: ML-3351
summary: Posidex refer - CRN Merge Demerge API should not be called for No Action decision
description: For scenario of posidex refer where the user is taken decision as “Assign same CRN” and “No action” is send in “CRN merge demerge API” then “CRN Merge Demerge API” should not be called.



This API should be called for other 2 actions only.
acceptance: Posidex refer - CRN Merge Demerge API should not be called for No Action decision

key: ML-3125
summary: Worklist Mobile view - Visible in different Column
description: Worklist in mobile needs to be visible in Different columns same as desktop view.

Currently on Phone worklist are visible like: PFA - image 5

And it should be visible as desktop like below:

!image-20210428-110444.png|width=1276,height=405!
acceptance: Worklist should be visible as per UIUX

key: ML-3114
summary: UW Sprint-3 --> Verifications Screen, Return/Audit History, Document
description: nan
acceptance: None_x000D_


key: ML-3101
summary: UW Sprint-2 --> Income Details, Financials Details, Verifications Screen.
description: nan
acceptance: nan

key: ML-3086
summary: POi and POA document stamping for CKYC and EKYC Cases
description: # All documents received from CKYC or EKYC needs to be stored in below document type

*For Applicant:* 

|*FileNet doc type - POI*|*FileNet doc ttoe - POA*|
|Proof of Identity|Proof of Address|

*For CO-applicant*

|*FileNet doc type - POI*|*FileNet doc ttoe - POA*|
|Co-Applicant Proof of Identity|Co-Applicant Proof of Address|

Document sub type will depend on the document which is getting uploaded. 

example - Aadhar doc received will be saved in Aadhar document subtype of both POI and POA
acceptance: Documents fetched from CKYC or EKYC to be stored in POI and POA document type

key: ML-2984
summary: Loan amount Validation For STP cases
description: For all STP cases There should be a validation on Loan amount at all stages for Min Amount 40K to Max of (STP Eligibile Amount).
acceptance: Validation should run for STP Cases

key: ML-2855
summary: Fields to be added in Expense details section
description: nan
acceptance: Above fields needs to be stamped in SFDC and should be visible to Underwriting 

key: ML-2854
summary: Persona Creation API - 1
description: For Persona a case needs to be created in backened with status as “New”. and would be assigned to the UW who is selected in the Data verification screen.

A request would be received to SFDC (Inbound call) with *SVC Name - PDApp_CaseList_Dashboard.*

# Once this request is received SFDC needs to send data of all the resi, Office and Persona task which is assigned to the UW whose name is received in the request in below Tags - "AgencyCode": "FCH".
# In Response SFDC needs to send data of the case and all the cases in the array to PD-app
acceptance: API should be trigger once the Persona is initiated

key: ML-2853
summary: User selection for Persona Cases
description: If SFDC receives Persona Tag in the FICO response and same needs to be initiated basis [https://fincap.atlassian.net/browse/ML-2852|https://fincap.atlassian.net/browse/ML-2852|smart-link] then on Data verification Tab a new Tab to be visible - “Verification Tab”

# This is the same Tab present at UW but would be visible at Data verification also.
# Sub Tab of “Initiate Verification” Would be present where user will have an option to initiate the verification
# Currently for MEL and PL we have Resi and office CPV option for both app and co-app. We need to add one more option of Persona for both app and co-app
# For resi CPV and office CPV if the verification is received from FICO then the same needs to be autostamped as “Initiated” and should be non editable. If the verification is not received from FICO then “Waive should be autostamped and non editable
# For Persona - 
## If the persona is received from FICO then a dropdown field to be present. Dropdown should have all the UW name mapped to that branch
## If Persona is not received from FICO then that dropdown field shoul dnot be present for that particular applicant
## Example if Persona is received for App and not for co-app then dropdown should be present for app and not co-app
# Resi and office cpv would be initiated to the same user
acceptance: If Persona is received in FICO then UW will have option to select the user for doing Persona on data verification stage

key: ML-2852
summary: Initiation of Persona and Verification Post Data verification
description: In the second FICO Call with Stage as “DDE” SFDC will received below verification in the response

# Resi CPV
# Office CPV
# Persona

The verification will be received in FITypes under applicant section. Basis the verification received from FICO SFDC to initiate the Verification post Data verification is completed.

The stage and substage of the case would be “Verification” “Verification Pending” and all these verification task would be initiated to UW who has completed the Data verification.

If no verification is received from FICO then the case will directly move to Underwriting stage.

post Verification are completed the case will flow to UW and stage and substage would be “Underwriting” “Underwriting Pending”

+*Only for MEL*+

# If the case is STP approved and user has selected STP (with or without Tele PD)  to proceed ahead then eventhough the Verification is received by FICO the same should not be initiated by SFDC post data verification
# Verification shoul dbe initiated if the case is STP approved but user has selected “Non STP” or the case is STP not approved.

This process is Currently present for PL and HL and LAP need to be build for MEL as well
acceptance: Persona and verification to be initiated once the Data verification is completed

key: ML-2850
summary: aadhar based Mandate workflow
description: when below 2 option is successful

# AePs integration and user select Aadhar based Mandate
# Customer consent and user select Aadhar based Mandate 

then below 2 options will be present

# Send Link
# B2B Journey
# Proceed button ( The same would be enabled if Any of the above option is selected)
# If user selects either of the options, the other option to disabled/freezed.
# In case the transaction is failed or response time exceeded then both the option should be enabled again.

+*Send Link Process*+

# If user clicks on “Send Link”, link will be triggered to applicant mobile number (SMS is mention in the PPT)
# through “SENDEMANDATELINK” API as per Digital Mandate functionality. Status will also be received through current E-mandate Inbound API integration and will be stamped in SFDC.
# Esign code received from IFSC API needs to be send in the NSDL link 

+*B2B Link*+

# If B2B is selected and user clicks on Proceed then the NSDL Link will automatically open in new tab rather then sending message to Customer
# The NSDL Link will have ESign Code received from IFSC API
# then SFDC to redirect user to NSDL page via middleware & TPSL.
# User has to enter the Aadhar no on the NSDL page page for authentication- *OTP.*
# If user selects OTP basis the customer consent, then Customer will get an OTP from UIDAI which user has to capture.
# Below details to be samoed at Backened 
# Sample request and response

+*Sample Plain Text Request*+

MERCHENTCODE=SFDCAD|MERCHENTTXNID=TXN001|CONSUMERID=C000001|BANKID=3170|BANKACCOUNTNUMBER=1234567|BANKIFSCCODE=ICIC0000001|TXNAMT=2|MAXAMT=2|BANKACCHOLDERNAME=AMIT KUMAR [GUPTA|BANKACCTYPE=Saving|DEBIRSTARTDATE=25-10-2020|DEBITENDDATE=15-02-2021|CUSTMOBNO=8898455434|CUSTEMAILID=se.amitgupta@gmail.com|mailto:GUPTA|BANKACCTYPE=Saving|DEBIRSTARTDATE=25-10-2020|DEBITENDDATE=15-02-2021|CUSTMOBNO=8898455434|CUSTEMAILID=se.amitgupta@gmail.com]

+*Response Format*+

 

MERCHENTCODE=SFDCAD|MERCHENTTXNID=TXN001|

BANKTRANSID=|TRANSSTATUSCODE=0398|TRANSSTATUS=Initiated|

TRANSERRMSG=NA|TPSLTXNID=1209572658|MANDATEREGNO=864524893|TOKEN=12a58091-fae2-4196-8a77-69d6f74df714|HASH=adfa093e3662f39c54a8253e7c53321f|UMRNNUMBER=na

 

+*Bank detail object:-*+

# Initiate Mandate – the B2B link is stamped here
# B2B Decrypted Request – B2B request is stamped since integration msg is not created
# B2B Response  - B2B response is stamped since Integration msg is not created.
# Aadhar Mandate Mode – As chosen- Send link/B2B/Biometric
# 



# Once Send Link and B2B is validated successfully then success response to be pushed back from MULE to SFDC.
# Once the Status is sync as success then a checkbox to collect Nach to be visible and Mandate ID would be stamped at Backened and on front end as well
# NACH form would be generated for aadhar based Mandate and uploaded in filenet
# In FinnOne submit request all details will flow as is only Digital mandate tag will flow as “E” for aadhar based mandate

("DIGITAL_MANDATE" : "E")
acceptance: 2 options of Completing the mandate should be visible _x000D_
1. Send Link and B2B and user should be able to complete it with the same

key: ML-2847
summary: Aadhar based Mandate eligiblity
description: # Aadhaar Digital option will be enabled ONLY if  below conditions are satisfied:
## *Bank eligibility for Aadhar Based E-mandate*
## *Aadhar is present at Loan Level*
## *IMPS Call = Success*
## Aadhar is Linked with Bank details
# Aadhar based E-Mandate option in scenario 1 and 2 should be visible only if above conditions is true otherwise the option should not be visible.
# Aadhar is Linked with Bank details - can be found out by 2 methods
## AePs Integration Callout  - Basis the condition eligible for AePS - [https://fincap.atlassian.net/browse/ML-77|https://fincap.atlassian.net/browse/ML-77|smart-link]
## Customer Manual Consent - if the case is not eligible for AePS callout then we have option for Manual Consent
# If condition 1.a, 1.b and 1.c is true then a field should be visible “Is Aadhar Number linked with Bank account' as a dropdown with value 
## Yes and NO
# If Case is AePs eligible basis [https://fincap.atlassian.net/browse/ML-77|https://fincap.atlassian.net/browse/ML-77|smart-link] then this field should be autopopulated as “Yes” and non editable and all  condition will be taken as true and Mandate type “Aadhar based E-Mandate” would be visible to User
# If the case is not AePs eligible then Customer manual consent is taken and user have to select from the dropdown. If yes is selected then all  condition will be taken as true and Mandate type “Aadhar based E-Mandate” would be visible to User
# if “No” is selected then user will not be eligible for aadhar mandate option 
# when either Aeps or customer Consent is successful and aadhar based emandate is selected then the User will have below options to be visible

* Send Link
* B2B Journey
* And a proceed button (Visible post user has selected any one of the above option)
acceptance: Eligibility of aadhar based Mandate will be defined and Workflow of the same

key: ML-2846
summary: Mandate type dropdown Basis 3 Scenarios
description: Post IMPS is successful (If eligibile for IMPS) if user selects Repayment mode as “Nach” then in Mandate type field below dropdowns would be visible as per scenario

# +*Scenario 1:  Case is eligible for all 3 mandate Digital/ Aadhar and Physical Mandate*+
## In this scenario once the IMPS call is successful and user select repayment  mode as “NACH”. in Mandate type field first only digital Mandate should be visible
## User should Mandatory try digital Mandate with debit or net Banking option first (Digital Mandate process remain as is)
## If in Digital Mandate user is only eligible for Net banking then User will have both digital Mandate and Aadhar based mandate (If eligible) option in the first attempt
## If digital Mandate is is failed or there is response timeout then User should have 2 options in Mandate type Dropdown
### Digital Mandate
### Aadhar based E-Mandate (If the user is eligibile for aadhar based basis other Parameter) user story [https://fincap.atlassian.net/browse/ML-2847|https://fincap.atlassian.net/browse/ML-2847|smart-link]
## If both digital or aadhar based mandate is failed or its a request timeout then mandate type dropdown should have 3 option
### Digital Mandate
### Aadhar based E-Mandate' [https://fincap.atlassian.net/browse/ML-2847|https://fincap.atlassian.net/browse/ML-2847|smart-link] 
### Physical Mandate
## If user is not eligible for aadhar based e-mandate then only Digital and physical would be visible in dropdown and come in *scenario 2*
# +*Scenario 2: If Bank is eligible for either digital or aadhar and physical Mandate*+
## In this scenario once the IMPS call is successful and user select repayment  mode as “NACH”. in Mandate type field first only digital/Aadhar based Mandate should be visible
## User should Mandatory try digital Mandate (as is flow)/addhar based Mandate  (This would be visible only if other eligibility Parameter is fulfilled)
## If both digital or aadhar based mandate is failed or its a request timeout then mandate type dropdown should have 2 option
### Digital Mandate/ Aadhar based E-Mandate'
### Physical Mandate
# +*Scenario 3: If Bank is eligible for physical Mandate*+
## In this scenario once the IMPS call is successful and user select repayment  mode as “NACH”. in Mandate type dropdown would be Physical Mandate (As is process)
acceptance: Mandate type should be populated basis 3 scenarios

key: ML-2839
summary: GETMANDATEDTLS API creation
description: # Applicability : Org-1, Org-2 and Org-3
# Mule will send request to SFDC with the loan application ID in the API request.
# SFDC to send certain details back to Mule when the request is received.
# API Name - GETMANDATEDTLS
# API - *Request*

*\{"LoanNo":"1234"}*

# API - Response

|*API Tags*|*SFDC Field Name*|*Source Object*|*Remarks*|
|Product: "TW",|Business Unit|Loan Application Detail| |
|RepaymentMode: "NACH",|NACH|-Hardcode Value-
Value selected in Bank details| |
|BranchName: "MAJITHA",|Branch Name|Bank Details| |
|AccountType: "SAVINGS",|Account Type|Bank Details| |
|Co-Applicant_Name: null,|Co-Applicant Name|Applicants|Only the first(immediate next to applicant) co-applicant added to loan to be sent. If no co-applicants, then send null.|
|MICR: "143018005",|MICR Code|Bank Details| |
|ApplicantName: "RAHUL INDERJIT SINGH",|Applicant Name|Applicants| |
|Frequency: "Monthly",|Frequency|Bank Details| |
|FDD: "2019-01-02",|EMI start date|Bank Details| |
|BankAccountNumber: "184510031413",|Account Number|Bank Details| |
|MandateEndDate: "2028-12-02",|EMI end date|Bank Details| |
|IFSCCode: "BKDN0741845",|IFSC Code|Bank Details| |
|BankAccHolderName: "RAHUL INDERJIT SINGH",|Account holder name|Bank Details| |
|MandateCategory: "M",|RegistrationOption|Bank Details|If "Emandate Status" = Success then (stamped on Bank detail object); "RegistrationOption" abbreviation should be pass as per below -
*Digital - D*
*Physical - M*
*eNACH - E*|
|EMI: 2546,|Total Bundled Emi Amount|Loan Application Detail| |
|BankName: "DEB DENA BANK",|Bank Name|Bank Details| |
|OpenMandateAmount: 64880,|EMI amount|Bank Details|If Open Mandate flag is " True" else "NULL". Flag also available on Bank detail|
|LDD: "2021-12-02",|EMI end date|Bank Details| |
|IMPSFLAG: "Y",|IMPS Status|Bank Details|If IMPS Status = Success then " Y" else " N ".|
|LoanNo: "18628126",|Loan Application ID|Loan Application Detail| |
|MandateType: "New Open Mandate"|Open mandate|Bank Details|If Open Mandate flag is " True" then " New Open Mandate" else " No Open Mandate".|

# A tag ISSUCESS to be introduced in Response. If TRUE, then values for fields to be sent. If ERROR, then a new tag “ERRORMSG” to be introduced and “Loan ID not found” value to be sent, if Loan ID is not present, else “Null” to be sent.
acceptance: Same as https://fincap.atlassian.net/browse/HZT-1934

key: ML-2813
summary: UW Sprint-1 --> Applicant Details
description: nan
acceptance: nan

key: ML-2806
summary: UAT-Annual sales turnover not showing as mandatory for psl classification MSME on IRO and BCM loan details section.
description: For PSL Classification as “MSME” Annual sales turnover should be mandatory also validation should run on this field as per the master attached.

Apart from that a new field needs to be added 

# Investment in plant & Machinery/Equipments which would be Mandatory for PSL Classification as “MSME”.
# and validation for this field will also run as per master attached
acceptance: Annual sales turnover should be Mandatory

key: ML-2798
summary: Make Income Details of IRO editable when clicking on View
description: Make income details editable at IRO and UW on click of view button.

For MEL and PL and MEL repeat
acceptance: Make Income Details of IRO editable when clicking on View._x000D_
Screenshots to be attached.

key: ML-2795
summary: Data to be send to FInnOne in FInnOne submit request
description: The fields should flow in finnone in below Tags as per XML
acceptance: Data to be send to FInnOne in FInnOne submit request

key: ML-2794
summary: Fields to be stamped in SFDC for IDFCIMPS
description: In IDFCIMPS Callout below tags are not stamped in SFDC Currently. Same needs to be stamped in SFDC for every bank record created

·         So additional *13 fields (as mentioned in below table)* have to stamped on SFDC along with other SI mode details. Same should be available for tracking purposes.

|*Field Name*|*Mandatory (Y/N)*|*Field Type*|*Tag Name*|*Field Name*|*Field Width*|
|opMd|N|String|OperMode|Mode of Operation|X(20)|
|jtNm1|N|String|JointName1|JointName1|X(120)|
|jtNm2|N|String|JointName2|JointName2|X(120)|
|jtNm3|N|String|JointName3|JointName3|X(120)|
|jtNm4|N|String|JointName4|JointName4|X(120)|
|jtNm5|N|String|JointName5|JointName5|X(120)|
|jtNm6|N|String|JointName6|JointName6|X(120)|
|jtCust1|N|String|JointCust1|Joint Customer1|N9(17)|
|jtCust2|N|String|JointCust2|Joint Customer2|N9(17)|
|jtCust3|N|String|JointCust3|Joint Customer3|N9(17)|
|jtCust4|N|String|JointCust4|Joint Customer4|N9(17)|
|jtCust5|N|String|JointCust5|Joint Customer5|N9(17)|
|jtCust6|N|String|JointCust6|Joint Customer6|N9(17)|

JtCust 1- 6 or JtNm 1-6 is not necessary to cm everytime in the response. depending upon the account details these tags will flow. Corresponding to every JtNm there will be JtCust.

SFDC needs to develop all the fields and depending on the response needs to store the same and send to FInnOne

Can Take reference of  - Jira - [https://fincap.atlassian.net/browse/HZT-18|https://fincap.atlassian.net/browse/HZT-18|smart-link] 
acceptance: Tags mention should be stamped in SFDC Bank details object

key: ML-2764
summary: Change in employment related fields for co-applicants.
description: This is applicable only for co-applicant 1 and co-applicant 2.

# If Employment Type is selected as "Self Employed' then following mandatory fields to follow:

                i)  Type of Business: Category- Drop-down values-same as applicant.

                ii) Type of Business: Sub-Category- Drop-down values-same as applicant.

                iii) Remarks- Input value type- Free Text. (This field should be non-mandatory)

2. If Employment Type is selected as "Salaried' then following mandatory fields to follow:

* Current Employer Name- Input value type- Free Text
* Industry Type- Drop-down values-same as applicant.
* Organisation Type- Drop-down values-same as applicant.
* Duration At Current Job (Years)- Input value type- Numeric.
* Duration At Current Job (Months) - Input value type- Numeric.
* Duration At Previous Job (Years)- - Input value type- Numeric. (This should be a non-mandatory      field)
* Duration At Previous Job (Months) - Input value type- Numeric. (This should be a non-mandatory field)

# If Employment Type is selected as "Non-working'' then no further employment related fields to follow.

Kindly analyse what is the impact for migration mel+ cases in this cr
acceptance: Change in employment related fields for co-applicants.

key: ML-2761
summary: Verhoeff logic for Aadhar Number
description: Verhoeff Logic is basically an algorithm to validate the aadhar number.

If the number is validated basis the algorithm then aadhar vault will be called and refernce would be saved flushing Aadhar number

then the user can move ahead but the the algorithm returns an invalid number then a POp up would be displayed “Please enter valid aadhar” and user will not be able to move ahead of applicant details page.

This logic will run only on Aadhar entered manually

Applicable for app and co-app
acceptance: Verhoeff logic for Aadhar Number

key: ML-2758
summary: 2% ROI Deviation
description: # The max ROI master would be to be maintained at loan amount level
# System should autopopulate the max ROI on selection of scheme and loan amount
# System should allow user to reduce the ROI (to the min level)
# On reducing the ROI system should prompt user to attach approval email in one of the document heads and this document would be mandatory at insurance screen post sanction.

“Kindly approve Approval mail for ROI Deviation”

|100170|Approval Mail|A|

# The final ROI should be send to FinnOne as well as visible in all autogenerated documents.
# This process should be allowed once in the loan journey (it shouldnt be that user has already reduced 2% then he again goes back and reduces more etc)
# Unnati will not be impacted for these CR. For all Unnati cases ROI woul dbe 18% and would not be editable
# For MEL Min ROI would be 23% for all schemes. Min ROI should be Max of (“Loan amount ROI - 2%”and 23%)
# For PL Min ROI would be 18% for all scheme. Min ROI should be Max of (“Loan amount ROI - 2%”and 18%)
# If the user enter ROI more than Max or Less than Min then a validation should be given to User
# “Kindly Enter Valid ROI as per scheme”

Below is the Max ROI to be kept for All schemes

|*Scheme Code*|*Scheme Name*|*Loan Amount*|
|55637|RURAL MICRO ENTERPRISES LOAN-BANK|Rs. 45,000- 50,000            ----------> 27%
Rs. >50,000 – 1,00,000           ---------->26%
Rs. > 1,00,000 – 2,00,000           ---------->24%
Rs. > 2,00,000 – 3,00,000           ---------> 23%|
|58694|MEL-REPEAT BANK|Rs. 45,000- 50,000            ----------> 27%
Rs. >50,000 – 1,00,000           ---------->26%
Rs. > 1,00,000 – 2,00,000           ---------->24%
Rs. > 2,00,000 – 3,00,000           ---------> 23%|
|58695|MEL PLUS BANK|Rs. 45,000- 50,000            ----------> 27%
Rs. >50,000 – 1,00,000           ---------->26%
Rs. > 1,00,000 – 2,00,000           ---------->24%
Rs. > 2,00,000 – 3,00,000           ---------> 23%|
|57368|RURAL SURROGATE MEL – BANK|Rs. >300,000 –5,00,000             ---------->23%|
|55636|RURAL MICRO ENTERPRISES LOAN-IFBL|Rs. 45,000- 50,000            ---------->28%
Rs. >50,000 – 1,00,000            ---------->27%
Rs. > 1,00,000 – 2,00,000            ----------> 25%
Rs. > 2,00,000 – 3,00,000            ---------->24%|
|58697|RURAL MEL REPEAT-IFBL|Rs. 45,000- 50,000            ---------->28%
Rs. >50,000 – 1,00,000            ---------->27%
Rs. > 1,00,000 – 2,00,000            ----------> 25%
Rs. > 2,00,000 – 3,00,000            ---------->24%|
|58696|MEL PLUS IFBL|Rs. 45,000- 50,000            ---------->28%
Rs. >50,000 – 1,00,000            ---------->27%
Rs. > 1,00,000 – 2,00,000            ----------> 25%
Rs. > 2,00,000 – 3,00,000            ---------->24%|
|57369|RURAL SURROGATE MEL – IFBL|Rs. >3,00,000 –5,00,000             ---------->24%|

and user can reduce the ROI 2% less than Max ROI. This “2%” reduction amount should be configurable if in future we need to increase it.
acceptance: 2% ROI Deviation

key: ML-2755
summary: Fetching DOB from alternate Source
description: # When a customer goes through eKYC and the DOB is not in the format of dd-mm-yyyy,
# SFDC to initiate automatic cKYC Download post CKYC search is successfull 
## If the Download call is a failure – user will  land on applicant details page with the details fetched from eKYC and edit the DOB, upon which collection of POI becomes mandatory. (Current AS-IS)
## If the Download call is a success – The Date to be picked up from cKYC download if in the format dd-mm-yyyy and to be populated on the Applicant details page and frozen.
# The details fetched from cKYC to be Stamped at admin end and extra details fetched from CKYC except
## Demographics
## Address (Residence and permanent)
## Identifier
# Should be populated on front end and should be non editable
# Though the CKYC is successfull but the case would be considered as EKYC success case and “KYC Document Type” - would be stamped as EKYC
# So for both scenario with ekyc - Right DOB and Wrong DOB the document type would be stamped as EKYC
acceptance: DOB not in a proper format should be fetched from CKYC and should be Auto populated

key: ML-2752
summary: POI and POA Doc Standardization for co-app
description: *Finnone, Filenet Related Changes:*

The following Doc Types & Doc Names to be configured in Finnone Masters

*Finnone, Filenet Related Changes:*

The following Doc Types & Doc Names to be configured in Finnone Masters

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default"},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"#"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"BUs"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"System"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Document Type"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Document Sub-Type"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"rowspan":6},"content":[{"type":"paragraph","content":[{"type":"text","text":"1"}]}]},{"type":"tableCell","attrs":{"rowspan":6},"content":[{"type":"paragraph","content":[{"type":"text","text":"All"}]}]},{"type":"tableCell","attrs":{"rowspan":6},"content":[{"type":"paragraph","content":[{"type":"text","text":"SFDC, FinnOne & FileNet"}]}]},{"type":"tableCell","attrs":{"rowspan":6},"content":[{"type":"paragraph","content":[{"type":"text","text":"Co-Applicant Proof of Identity"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Aadhaar card"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Passport"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Voter Id Card"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Driving License"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"NREGA Job Card"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"National Population Register Letter"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{"rowspan":5},"content":[{"type":"paragraph","content":[{"type":"text","text":"2"}]}]},{"type":"tableCell","attrs":{"rowspan":5},"content":[{"type":"paragraph","content":[{"type":"text","text":"All"}]}]},{"type":"tableCell","attrs":{"rowspan":5},"content":[{"type":"paragraph","content":[{"type":"text","text":"SFDC, FinnOne & FileNet"}]}]},{"type":"tableCell","attrs":{"rowspan":5},"content":[{"type":"paragraph","content":[{"type":"text","text":"Co-Applicant Proof of Address"}]},{"type":"paragraph","content":[]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Aadhaar card"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Passport"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Voter Id Card"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Driving License"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"NREGA Job Card"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"National Population Register Letter"}]}]}]}]}
{adf}

these document type should be visible in SFDC and document uploaded in SFDC should be visible in Filenet in same doc type.

previous doc type of POI and POA should not be visible.

Handling of WIP Cases should be done
acceptance: POI and POA doc for co-app to be saved as per requirement

key: ML-2749
summary: POI and POA Waiver Basis OCR - Part 1
description: h3. As a IRO/MRO, POI/POA should be waived off as per the OCR result. - Part 1

h3. Use Case:

# Applicant/Co-app Details screen

h3. Details:

+*Scenario 1 - OCR document is uploaded (Front or Back Side)*+

# if User select any POI from below list
## Voter ID
## Aadhar Card
## Passport
# Upload option to be present against these documents
# User will have option to upload Front side or back side of the document. if any one of the side is uploaded and OCR is success full then Success type would be stamped as “OCR”.
# If only Demographic details are fetched from OCR then 
## KYC Document Type : OCR
## KYC Status Type: Address Proof Required
## Mandatory document: POA document would be mandatory 
## OVD Captured: POI not required ; POA (As per identifier selected in address proof)
# If only address details are fetched from OCR then
## KYC Document Type : OCR
## KYC Status Type: Identifier Required
## Mandatory document: POI document would be mandatory 
## OVD Captured: POA not required ; POI (As per identifier selected in Identifier proof)
# If both are uploaded and data is fetched then
## KYC Document Type : OCR
## KYC Status Type: KYC not required
## Mandatory document: no Docs
## OVD Captured: POA not required ; POI Not required
# If post fetching the data if any details are changed in identifier or address then OVD captured and KYC Status type should be changed as per current process
# *If user re-uploads a fresh new data then the old data should be overridden by new one and Scenario 1 should rerun from fresh*

+*Scenario 2: OCR is success but then the user deletes the identifier from the identifier screen*+

The data auto-populated remain same but POI and POA woul dbe mandatory and below Changes will happen in admin

# KYC Document Type : Digital
# KYC Status Type: KYC required
# Mandatory document: POI and POA mandatory
# OVD Captured: POI (As per identifier selected in Idnetifier proof) ; POA (As per identifier selected in address proof)

All these scenario will also work for retrigger scenario

# address received from OCR should be parsed in SFDC in such a way that no special character (Which SFDC does not accept in address line 1,2,3) should be autopopulated on front end and max 40 character should be stamped in one field.
acceptance: POI and POA should be waived for OCR Success cases

key: ML-2746
summary: Borrower category Stamping
description: * A new field needs to be stamped in PSL Subcategory master - “Borrower Category”.
* For every PSL Subcategory a borrower sub cateogry would be present and same would be stamped at backened for each loan application basis the PSL Subcategory selected for that case
* the borrowe subcategory selected at backened would be send to FInnOne in below tag
** "BorrowerCategory" : "",
* Attached is a sample sheet for the master
acceptance: Borrower category should be send and send to FInnOne

key: ML-2743
summary: Aadhar uploaded in Document page - manually
description: *User Story – 3* (Aadhaar Card uploaded in Document Upload page)

On the document upload screen –

If the user selects

# DocType = Proof of Address/ Proof of Identity/
# DocSubType = Aadhaar Card
# And selects a file to upload,
# The file to be stored on the SFDC DMS temporarily and Karza Aadhaar Redaction API to be hit.
## This API would be trigger automatically as soon as the Aadhar doc is uploaded 
## A loader would be visible beside upload button for indicating the redacting in progress
## Response time to be configured as two minutes
## In case of the API failure, one retry to be permitted.
### a pop up message to be displayed “aadhar redacting Failed. Kindly retry”
#### Retry option should be visible to the user
### User cannot move ahead without 1 retry for aadhar redacting.
### If user clicks on Next before 1 retry or before the API response is received a POp up message should be given
#### “Aadhar redacting in process Kindly Wait”
## If the API fails twice, the Aadhaar Card to be pushed AS-IS to filenet and purged from SFDC DMS.
## If the redaction is successful, the redacted Aadhaar Card to be pushed to Filenet and original document purged from SFDC DMS.

The Aadhaar Redaction API request structure and the End points are mentioned below

*SVC NAME*: KARZA_AADHAR_MASKING
acceptance: aadhar uploaded manually should be masked and uploaded in system and filenet

key: ML-2742
summary: Fetching Mandate type Basis IFSC API Call
description: For scenario where user has entered bank details other than IDFC bank details below flow will be applicable

# For Fresh ECS cases when user enters MICR or IFSC Code and click on “Fetch Bank details” Button Get IFSC API is called.
# In Get IFSC API call out basisi the code recieived in tag  - {color:#6554c0}*NACH_FLAG":"D",* {color}Mandate type dropdown would be decided.
# Below is the table for the same -

{adf:display=block}
{"type":"table","attrs":{"isNumberColumnEnabled":false,"layout":"default"},"content":[{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"FLAG"}]}]},{"type":"tableCell","attrs":{"colspan":4},"content":[{"type":"paragraph","content":[{"type":"text","text":"APPLICABLE TO"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"A"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"IMPS"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"E-MANDATE"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"e-NACH"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"B"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"IMPS"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"e-NACH"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"C"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"e-NACH"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"D"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"IMPS"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"E-MANDATE"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"E"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"E-MANDATE"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"F"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"IMPS"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical"}]}]}]},{"type":"tableRow","content":[{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"X & Blank"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"-"}]}]},{"type":"tableCell","attrs":{},"content":[{"type":"paragraph","content":[{"type":"text","text":"Physical"}]}]}]}]}
{adf}

4. In Get IFSC API below 2 tags will also be received which needs to be stamped in sfdc

# “ESIGN_CODE”:”8650”
#  aeps Bin Number - AEPS_BIN_NUMBER

Basis Nach Flag below scenarios can be possible

# Scenario 1 : Case is eligible for Digital Mandate, Aadhar mandate and physical Mandate
# Scenario 2: Case is eligibile for either digital or aadhar mandate and physical mandate
# Scenario 3 : Case is eligibile for only physical Mandate
acceptance: Mandate type to be fetched from IFSCDetails API and basis that dropdown should be visible

key: ML-2741
summary: Aadhar redact for EKYC Success cases
description: *Aadhar fetched from EKYC*

# For scenario where Aadhar document is fetched from EKYC callout, the aadhar received from ekyc should be send to Karza for karza redaction with API SVC NAme as - “Karza_Redact”
# The redacted Document should be uploaded in the same document type and name and non redacted document should be deleted from SFDC.
# If the redaction API failed then there should be a hardstop on document upload screen and user should have retry option there
acceptance: Masked aadhar should be uploaded in the filenet

key: ML-2645
summary: SFDC Access - Hindsighting Purpose
description: Users, with specific access, should be able to view UW details of disbursed cases. 

This will be done by cloning UW profile.

Profile and stage checks need to be made configurable

List of profiles and stages need to be maintained ass per requirement, so that addition of a new stage also does not require any code changes

Below stages are considered currently:

Underwriting

Data Verification

We need to put additional stage checks for PDOC and disbursed stages as well

This is required for internal audit purpose, i.e. access of UW will be provided for auditing details of disbursed cases. Changing the profile of these audit users to Underwriter, would not work in Production, as the user would still get blocked during stage validation of “Disbursed” and other PDOC stages.

Kindly refer - [https://fincap.atlassian.net/browse/SEP-253|https://fincap.atlassian.net/browse/SEP-253|smart-link] 
acceptance: In SFDC Access

key: ML-2643
summary: Improvement in CBS Photo and sign Error/Success message on New Account opening screen
description: *Steps to Reproduce:*

* Login with IRO and punch loan till new account opening screen 
* Click on the “Open Account” button.
* Observe the result

*Actual:* Below Incorrect error/success message are displayed on New Account opening screen

* CBS_SigandPhoto has initiated.
* CBS_SigandPhoto failed. Please retry.

*Expected:* Correct error message should be displayed

*Loan Id #543046*

Please find the movie for the same.
acceptance: Description should be satisfied

key: ML-2624
summary: Loan amount validation in Tele PD for STP Cases
description: # In TelePD Cases User can have option only to approve loan amount max upto Scorecard eligible amount. 
He should have an option to decrease the amount less than Scorecard eligible amount and user cannot enter loan amount more than scorecard eligible amount.

If user tries to enter Amount more than eligible amount then a validation should be given
"Kindly Proceed with Non STP for Loan amount more than eligible"

# Number of years in Business should be mandatory in employment details and flow to FICO in below Tag - +*For all Scenarios*+

*No of years in business :* _applicants.<businessDetails>_

_<lengthOfBusiness> some real value </lengthOfBusiness>_

_</businessDetails>_

*Also For No Hit cases*

2. In Asset Section  - Number of collateral field to be added this field would be numeric and would be mandatory if we receive “No-Hit” in FICO response. This field will flow to FICO in below Tag

*Collateral count :* _applicants.<incomes>_

_<head>NoOfCollateral</head>_

_<amount> some real value </amount>_

_</incomes>_

3. Below Purpose of loan Sub category should be send as other in FICO

|others|Others|
|Purchase of Farm Transport Vehicles/accessories|Others|
|Fishery|Others|
|Hospitals|Others|
|Fleet Operators|Others|
acceptance: Validation on Loan amount for Tele PD

key: ML-2479
summary: Changes in mailing address checkbox
description: h2. Current approach 

In current approach we are having Mailing address as picklist (Yes and No

h2. New Approach

Changes in Mailing address as checkbox. (Set as Mailing Address)

!image-20210209-071707.png|width=1566,height=446!



!image-20210128-052710.png|width=633,height=244!
acceptance: -Changes in mailing address checkbox-

New approach is implemented

key: ML-2478
summary: Permanent Address - Copy address buttons
description: Currently, *Copy From* is a picklist dropdown, on select of which address gets copied.
Need to convert it to radio button as per below screenshot.

!image-20210209-062609.png|width=1071,height=282!
acceptance: If radio button selected as yes, then rest details is copied in backend. 

If No, then other fields will be visible for User entry.

key: ML-2461
summary: Title to be autopopulated basis gender
description: For gender as “Male” MR. Should be autopopulated in title and be non editable

For gender as “Female” Title field should have dropdown as “MRS.” and “Miss.” and user can select the same
acceptance: Title to be autopopulated basis Gender

key: ML-2377
summary: Customer Declaration for 'Adhaar as OVD
description: In the Consent SMS - the terms and condition content needs to be modified

{color:#6554c0}*Content to be added-*{color}

I/We state, declare, confirm and agree IDFC Param (ALSA) _account will be converted to Vishesh Savings account and Minimum Annual Balance (MAB) of Rs. 5,000/- required to be maintained and other charges basis the latest schedule of charges related to the account will apply if:_

# Loan account not set-up within 3 months of Asset Linked Savings Account opened and/or
# Loan account closed and no other Live Asset relationship with IDFC FIRST Bank

*Declaration of Aadhaar as OVD*

“I/We state, declare, confirm and agree that the Bank has duly explained to me/us that submission of a copy of my/our Proof of Possession of Aadhaar Number (OVD) containing Aadhaar number, as an Officially Valid Document(OVD) is not mandatory and I/We have the option to submit any one of the documents as per the list of Officially Valid Documents (updated by the RBI from time to time) 

I/we further state, declare and confirm that I am/We are providing my/our Proof of Possession of Aadhaar number(OVD) as an officially valid document voluntarily in accordance with extant rules and regulations; and I am/We are required to redact/ blacken out the first eight digits of Aadhaar number so that only last four digits of the Aadhaar number are visible; and in case I/We do not redact/ blacken out the first eight digits of Aadhaar number, I/We authorized IDFC FIRST Bank to redact/blacken out the Aadhaar number through appropriate means on my/our behalf”

* Existing content to remain as is, above part is in addition of exiting.
acceptance: Consent content to be changed as per description

key: ML-2373
summary: Insurance Nomiee same as CO-app
description: # for both App and co-app and for both insurance user should have an option to select the Nomiee same as any other applicant
# For Example - applicant insurance can have an option to select the nomiee details same as co-app and co-app insurance should have an option to select the insurance same as App.
# User when adds insurance should have an field name “Same as “ - same would be dropdown with value same as Applicant \[primary as well as co-app] apart from the applicant for which insurance is being added.
## e.x - if co-app insurance is being added then user should have an dropdown value with applicant and 2nd co-app name \[if present].
## if any value is selected then the data for that applicant should be populated
## user should also have value “blank” in the dropdown - if the user selects the same then the user have to enter the values manually.
## this is applicable for both credit protect and hospicash
acceptance: Nomiee same as coapp option should be present for insurance

key: ML-2368
summary: Karza Name Match IMPS Part-2
description: nan
acceptance: Same as HZT-218

key: ML-2367
summary: Karza Name Match IMPS Part-1
description: nan
acceptance: Same as HZT-218

key: ML-2364
summary: OTP SMS API To be changed
description: For all below SMS the API needs to be changed 

# OTP Sign - the content of OTP Sign needs to be changed to 

TnC link: _link would contain the auto-filled DoGH/policy document._
OTP: xxxx
Regards,
IDFC FIRST Bank

# SI Mandate SMS with OTP and Link

API Service as “SendSMS”.

All other SMS with normal content would remain as is.

Applicable for MEL all cases/PL and HL and LAP
acceptance: OTP SMS API To be changed

key: ML-2269
summary: Open mandate check box and SI Changes
description: When repayment mode is selected as “Cash” then open mandate check box should be untick by default and should be non editable.

The same data should flow to finnone

Also the Documents generated for Digital and Physical mandate - has 2 dates in the form. Both dates should be Document generated date. Currently both are different dates.
acceptance: Working should be as per description

key: ML-2157
summary: [Updates] Part 2 : On Doing OCR POI and POA docs to be waived off
description: This User Story is the updated version of ML-1627_x000D_
_x000D_
When user lands on applicant screen post Single KYC/EKYC and CKYC failed, user will have an option to add additional identifier and select POI from the dropdown. _x000D_
_x000D_
In case selected POI is Aadhar, Voter Id or Passport then user will get a button besides the identifier added and selected to upload the document for OCR._x000D_
_x000D_
If user wants to waive off both POI and POA then it mandatory for user to upload both front and back of the document in point 2._x000D_
_x000D_
Once the user has successfully completed OCR and makes any change to the POI selected. And the changed option is any of the option from the point 2 documents then user can again perform OCR with the new document and information from old OCR will be discarded._x000D_
_x000D_
If user has uploaded only one side of the document and clicks on next, then user will get an error message to upload another side of the document and will not move further.
acceptance: Same as 1627

key: ML-2147
summary: Extra fields for No Hit to be send to FICO
description: If the Case is “NO Hit” case and below fields are mandatory in SFDC then the value for the same should flow to FICO in 2nd and UW FICO Call

*House price :* _application.<propertyDetails>_

_<propertyType>House</propertyType>  -_ {color:#36b37e}_For all cases hard code “House”_{color}

_<propertyValue> some real value <propertyValue>  -_{color:#36b37e} _Value entered in “House Price field”_{color}

_</propertyDetails>_

*Collateral count :* _applicants.<incomes>_

_<head>NoOfCollateral</head> - “_{color:#36b37e}_Number of asset in asset section”_{color}

_<amount> some real value </amount> -_{color:#36b37e} _“Amount entered in that Section”_{color}

_</incomes>_

*No of years in business :* _applicants.<businessDetails>_

_<lengthOfBusiness> some real value </lengthOfBusiness> - “_{color:#36b37e}_employement details section years “_{color}

_</businessDetails>_

*Rent and Electricity expenses :* _applicants.<incomes>_

_<head>Rent_Electricity_Expense</head>_ 

_<amount> some real value </amount>_

_</incomes>_

*No of dependents :* Sum off number of adults and child

_applicants.noOfDependents_

Tier would be  received in FICO 2nd Call under below Tags as a second value with Semicolon 

# applicationDecision.stpStatus Semicolon(;) as separator

                  e.g <stpStatus>STP;Platinum</stpStatus>

Same should be visible to IROand BCM on Front end
acceptance: if the case is no hit then below field value should be send to FICO

key: ML-2126
summary: Add Reference details modal
description: Screen : Loan & Product Screen_x000D_
Section : Reference Details_x000D_
_x000D_
While clicking on 'ADD' button of Reference details, a modal should open to capture the data.
acceptance: While clicking on 'ADD' button of Reference details, a modal should open to capture the data.

!image-20210209-063249.png|width=1191,height=281!

!image-20210209-063300.png|width=1279,height=736!

key: ML-2125
summary: Add additional identifier modal
description: *Screen *: Applicant Screen_x000D_
*Section *: Personal Identifiers_x000D_
_x000D_
While clicking on 'Add Additional Identifier', a modal should open to add details.
acceptance: While clicking on 'Add Additional Identifier', a modal should open to add details.

!image-20210209-063202.png|width=1580,height=685!

key: ML-2121
summary: Aadhar reference number to be Mandatory
description: Currently On applicant details Page SFDC has 2 retry to fetch reference number if the same is not received then user can move ahead

Proposed:

# Without aadhar reference number user cannot move ahead o applicant details Page
# If aadhar is entered manually and User doesnot get reference number by clicking on “Get reference” button then user cannot move ahead and a validation should run “Aadhar reference number is mandatory”
# If the case is EKYC and CKYC Success and Reference number is not received in the Response then also On applicant screen the validation should run
# This is applicable for app and co-app
# and for all Workflow and Cases - Migrated as well as normal
acceptance: Fetching reference number should be mandatory and user shoul dnot be able to move ahead without it

key: ML-2120
summary: EUC Workflow
description: # In Verification Tab a new queue to be created “EUC Cases”
# For all disbursed Cases EUC Task should be initiated and be visible in this Queue
# The cases which are punched in that branch should be visible to All users of that Particular branch in open pool.
# IRO will have an option to take ownership oof that particular case and work on it.
# Once the IRO has taken ownership of any one case then other IRO of that branch should not be able to view or take ownership of that case.
# The queue ownership would be same as MEL+ for offers
# Once the IRO has taken ownership of the case he will have the option to access the same
# Case should not appear in list view of EUC tab once task is completed. Only cases where EUC is yet to be completed should be given in the list.
# This functionality should be available for all schemes and for migrated cases as well.
# Also A report should be generated for the same as attached
acceptance: For disbursed Cases EUC Cases should be initiated to IRO and be visible in his Queue

key: ML-2119
summary: EUC UI UX
description: # Once the IRO has taken a Ownership of the case he should be able to view below details in the case
# After selection of a case, new page should be opened with below auto-filled details:
## Name of Customer
## LAN Number - SFDC Number
## FInnOne ID
##  Date of Disbursement
##    Purpose of Loan Category
##  Purpose of Loan Sub-category
## Residence Address
## Office Address
## Mobile Number
# Above all these Autopopulated and noneditable fields and user should have below Options
## Loan Purpose Met- “Yes/No” (Drop-Down)
## User should be able to select any of the values.
##  If ‘No’ is selected than ‘Submit’ button should become active.
### User should be able to click on ‘Submit’ button and case should get saved with response for EUC.
## If ‘Yes’ is selected than an option should be given to upload ‘Proof of EUC’.
### User should be able to upload JPEG, PNG, PDF as ‘Proof of EUC’.
###  The uploaded file should be stored on Filenet with ‘Proof of EUC’ tag.
### Uploading ‘Proof of EUC’ should be mandatory, submit button should not become active until this is uploaded by user.
### User should be able to submit the response once file is uploaded.
acceptance: UIUX Of EUC should be as descriped._x000D_
The Cases should be visible to IRO only for disbursed cases

key: ML-2102
summary: Applicant level documents to be uploaded in different document type in Filenet
description: +*Description:*+

# Currently the common docs of app and co-app is uploaded in same document type and name
## Form 60
## Hospicash application form
## Hospicash Insurance form

2. in this CR the App and co-app docs will be uploaded in different document name.

3. Docuemnt type would remain same for app and co-app but for document name - “App” and “CO-app” prefix will be added at the end

E.G - for Form 60 Document type will be Form 60 but the document name would be “Form 60 App” and “Form 60 Co-app” for app and co-app respectively.

This will happen for all the document which are generated for both ap and co-app.

Emorphis API and Esign API will undergo changes for these document types.
acceptance: Documents should be uploaded in new document type and all esign docs should be visible for both app and co-app in filenet

key: ML-2098
summary: For PL cases, income head chosen while adding income should be unique
description: {panel:bgColor=#deebff}
For PL cases, income head chosen while adding income should be unique
{panel}
acceptance: For Salaried PL cases, only one income column should be allowed to add.

key: ML-2076
summary: FinnOne tag changes for split Payment
description: +*Acceptance Criteria:*+

# In FinnOne request the Splitpayment tag should flow as per updated tags
# Case should be successfully Submitted to finnone

+*Description:*+

# SplitPayment" : \{
                                "SplitPayment" : \[]
                }
+*Updated JSON Request Structure:*+

All tags in the Above image should flow to finnone in the new array of splitpayment.
acceptance: nan

key: ML-2069
summary: In retriggered case, system displaying old insurance premium and old planned sum assured means old insurance details even if requested loan amount changed
description: In retriggered case, system displaying old insurance premium and old planned sum assured means old insurance details even if requested loan amount changed

Linked to PL CR - [https://fincap.atlassian.net/browse/RUR-789|https://fincap.atlassian.net/browse/RUR-789|smart-link] 
acceptance: nan

key: ML-2066
summary:  SC/ST Rejection at L2 Level 
description: +*Acceptance Criteria:*+

# Cases with CAtegory as SC/ST should be rejected at L2 and above level

+*Description:*+

# Cases with Category as SC/ST should be rejected at L2 and above level
# Currently the logic is working in L3 and Above UW level
acceptance: nan

key: ML-2061
summary: MSME loan rejection and curtailment logic
description: +*Acceptance Criteria*+

# MSME Profile Loan rejection and Curtailment to happen at higher level.

+*Description:*+

# Below are the profile which needs to be included in MSME - this list should be configurable and values can be added or deleted from the same
##            PSL Main Category:
i)                     Manufacturer or Engineering
ii)                   Medical and Health Services
iii)                  Other Services
iv)                  Retail Trade
v)                   Tourism
vi)                  Wholesale Trade
# If the case is MSME and UW tries to reject the case then below Popup message should be visible when the UWtakes reject decision.
## “This is an MSME profile case. Please forward to next authority for loan curtailment/rejection.”
# If the UW tries to approve the Case where Loan amount is less than requested loan amount (Called loan curtailment) then also bellow message should be visible
## “This is an MSME profile case. Please forward to next authority for loan curtailment/rejection.”
# System should allow the user to forward the case.
# The case can be rejected or approved (in decision section at UW stage) by L2 and above stage
# This logic is to be built at UW stage
acceptance: nan

key: ML-2048
summary: Annual Sales turnover Tag to be added in FinnOne submit
description: Acceptance Criteria:

Annual Sales turnover Field value to be send in new tag in FinnOne request

Description:

Annual sales turnover field value to be send in below Tag in finnone submit request

<Field key="ApplicantCategory">

      <Applicant_Category>

                              <SEAnnualSaleTurnover>15000.00</SEAnnualSaleTurnover>

                        </Applicant_Category>

                  </Field>
acceptance: nan

key: ML-1974
summary: Change in ROI for MEL unnati loans from 20% to 18%.
description: For MEL Unnati cases, currently 20% RoI is applicable, same needs to be changed to 18%.

*Please note this change in ROI is needs to updated only for MEL Unnati loans

Please find attached mail for reference
acceptance: nan

key: ML-1973
summary: MEL Unnati - Change in ROI for MEL Unnati loans from 20 % to 18%
description: For MEL Unnati cases, currently 20% RoI is applicable, same needs to be changed to 18%.

**Please note this change in ROI is needs to updated only for MEL Unnati loans*

Please find attached mail for reference
acceptance: nan

key: ML-1967
summary:  Base Loan Logic - SFDC to Finnone for MEL
description: SFDC to use the below logic of picking up base loan ID in case MEL Plus and Repeat loan journeys.

 Implementation : 

# For any customer (CRN) applying for a repeat/ Plus loan, if none of the base loans are in ‘Active’ status, then the FCRB flag and base loan details to not be passed to Finnone

# For any customer (CRN) applying for a repeat/ Plus loan, where one (most recent) loan is in ‘Active’ status, then the FCRB flag and base loan details to be passed as expected to Finnone
acceptance: nan

key: ML-1827
summary: DevOps Trial Story 4
description: Created on 27-Nov for demo
acceptance: nan

key: ML-1800
summary: typeofsigning tag should be flown at customer level in FinnOne request
description: *Current Implemented:*

The typeofsigning tag is being passed at application level in FinnOne request

*Change Required:*

The typeofsigning tag is being passed at application level whereas it must be at customer level.
acceptance: nan

key: ML-1799
summary: Multiple insurance should not be sent at Application level
description: *Current Implemented:*

The insurance details are sent to FinnOne at Application level as well as Applicant level, post the implementation of the Multiple Insurance CR.

*Change Required:*

* The insurance details are supposed to be sent to FinnOne at Applicant level only.
* Application level tag should be sent as BLANK and should not flow to FinnOne.
acceptance: nan

key: ML-1784
summary: Title Logic should be Changed
description: Current Logic:

# Gender is received as an input from EKYC/CKYC
# On receiving the input from EKYC/CKYC - the title is automatically updated - if Male then Mr. gets auto-populated and for Female Mrs. gets auto-populated. 
# The user has an option to change the title , which also means the gender changes 



Expected change:

# The linking of gender and title to be removed 
# Title field should be entered manually by user
# Gender field to be auto-populated from EKYC/CKYC or entered manually as the case be. 
# This change is applicable for PL, MEL and HL and LAP.
acceptance: nan

key: ML-1765
summary: DevOps Trial Story 3
description: nan
acceptance: nan

key: ML-1764
summary: DevOps Trial Story 1
description: nan
acceptance: nan

key: ML-1763
summary: DevOps Trial Story 2
description: nan
acceptance: nan

key: ML-1753
summary: Customer photo receive from CKYC and EKYC to be stored in different document type
description: +*Acceptance Criteria:*+

# Customer photo received from CKYC and EKYC should be saved in Document type - “CKYC Photo”
# Same should be uploaded in Filenet
# And same should flow to CBS in Sign and photo API

+*Description:*+

# When CKYC or EKYC is Successful then the Customer photo received from Response should be stored in Document type - “CKYC Photo”
# A new document type should be visible in Document upload screen and same document should be visible in filenet also.
# The customer photo uploaded should be send in CBS Sign and photo API Also.

This is valid only for CKYC and EKYC success case. FOr Manual entry the Customer photo document type remain Unchanged
acceptance: nan

key: ML-1745
summary: Extra changes for STP Process
description: +*Acceptance Criteria:*+

# For STP Cases UW screen should have a field to identify STP case
# For repeat cases if base loan is of STP Approved then the same should be visible at UW
# STP flag should flow to FinnOne in FInnOne submit request
# Branch Tier to be maintain in branch Master
acceptance: nan

key: ML-1744
summary: DevOps Trial Story
description: DevOps trial story
acceptance: nan

key: ML-1666
summary: STP Case - Workflow
description: +*Acceptance Criteria:*+

# If the decision is selected as STP then the STP flow should follow
# Loan amount should be autostamped as Scorecard eligible amount
# If Tele PD is received in response then the same would be initiated post Data Verification
# Post Tele PD If the case is Negative then the Case would be rejected
# Post Tele PD if case moves to Non STP then UW task would be initiated.

+*Description:*+

# Once the decision is taken if the case is STP or Non STP by the IRO basis the button selected by IRO. The case will follow the Workflow basis that
# If NON STP is selected there is no change and case will move as is
# If the Case is selected as STP by IRO then Loan amount would be stamped as request to scorecard eligible amount.
# Document screen, Insurance and New account opening flow would be same.
# Post Data Verification is completed SFDC Needs to check if Tele PD is received from FICO Or not in below Tag

Tele PD : _applicants.<cpvOrTVRChecks>_

                                                                 _<fiType>Tele_PD</fiType>_

                                                                 _<isInitiated>false</isInitiated>_

                                                                _<isWaived>false</isWaived>_

                                                                _<isRequired>true</isRequired>_

                                                                _<tobeInitiated>true</tobeInitiated>_

                                                               _</cpvOrTVRChecks>_

# if Tele PD is received from FICO then the case becomes “STP with Tele PD”
# Tele PD needs to be initiated by SFDC.  Basis the decision taken by User on Tele PD the Further process would be defined
# If Tele PD Is not received in response then the case would be “STP without Tele PD”.
# And the case will skip UW Stage completely and move to Iro Insurance screen.
# Underwriter record would be stamped with Approval name as system Approved. (Same as MEL+)
# Post that the flow would be same.
acceptance: nan

key: ML-1665
summary: Tele PD Verification Screen
description: +*Acceptance Criteria:*+

# If Tele PD is received from FICO then same should be initiated post Data verification
# Basis the decision taken by User on Data verification the workflow should follow

+*Description:*+

# If the Tele PD is received from FICO then the same should be initiated by SFDC post data verification is completed
# Tele PD should be assigned to same user who has completed the data verification
# Below fields should be visible to BCM on Tele PD screen - Autopopulated 

i)                     No. of years in current business - Editable

ii)                   Type of Business Category - Dropdown (This should be auto-filled and editable as per existing master)

iii)                  Loan Amount - editable

iv)                  Mobile Number - Non editable

v)                   Name of applicant - Non editable

vi)                  Name of co-applicant - Non editable

_vii)_                Reference details - non editable

viii)              Tele Pd Status - Dropdown

4. Drop-down values- i) Positive Tele PD ii) Negative Tele PD iii) Proceed with Non-STP. 

If negative Tele PD – then this case to be Hard rejected and reason for rejection to be auto stamped as ‘Negative Tele PD’.

*iv*. If user selects i) Positive Tele PD then steps mentioned in next points from v to ix   should be followed.

*v.* The case will be auto approved by system for both Bank and IFBL and UW task would be Skipped.

*vi.* Further flow of ‘IRO Insurance screen till submit to FinnOne should work as per existing process by the IRO.

*xi.* If at point no. iv, user selects “Proceed with Non-STP” then steps mentioned 

If user selects i) Proceed with Non-STP, then a field should be visible “Reason for the same” - drop down should be shown to enter reason to move the case to Non-STP flow; 

drop-down values: i) Customer wants higher loan amount, ii) Not contactable iii) Customer is not interested.

*Xii.* The case will move to UW for CPV and manual sanctioning of case. CPV will be manually triggered by UW.

*Xiii.* Further flow of ‘Insurance completion till submit to FinnOne should work as per existing process.
acceptance: nan

key: ML-1664
summary: Policy rule FICO Call - New tags to be send in request and response
description: +*Acceptance Criteria:*+

# In 2nd FICO Call new Tag values should flow in FICO request
# In FICO Response if the case is scorecard eligible then the scorecard eligibility should be visible on Front end along with Max eligibility
# Tier received from FICO should be visible on front end
# IRO should have an option to select if the user wants to proceed with Scorecard or not
# If the case is rejected by Scorecard then the Case should be rejected by SFDC 

+*Description:*+

# in the Policy rule call - At IRO and UW Stage below Values should flow
## Branch Tier:  _application.pslCategory_ (if not currently mapped with other field).
# Possible values are below.


|*Branch Tier*|
|Low Population|
|Low|
|Medium|
|High|
|New|



2. Loan Purpose :  _loanDetails.loanPurpose_

       Possible values are below.

 

|loan_purpose_nam| | | | | |
|Dairy|Textile|Artisans|Edibleitems-FoodGrains|Edibleitems-FoodOilorFoodPulses|Artisans|
|Trader|Tailor|PowerLooms|fruitsorVegetables|PetroProduct|PowerLooms|
|Kirana|Furnitureworkshops|Hardwareproducts|Laundry|Chemist|Hardwareproducts|
|Other|SmallHotel|AutomobileRepair|SmallAndMediumRestaurants|FoodAndCondiments|AutomobileRepair|
|others|AutoRepairWorks|SawMillsandwood|Clinics|FoodandAgro-processing|SawMillsandwood|

3. From FICO response below additional fields needs to be read

# Output Fields(FICO will send)
## STP Flag:  _applicationDecision.stpStatus_  
### Possible values : STP / NonSTP
### Tele PD : _applicants.<cpvOrTVRChecks>_

                                                                 _<fiType>Tele_PD</fiType>_

                                                                 _<isInitiated>false</isInitiated>_

                                                                _<isWaived>false</isWaived>_

                                                                _<isRequired>true</isRequired>_

                                                                _<tobeInitiated>true</tobeInitiated>_

                                                               _</cpvOrTVRChecks>_

c. Scorecard Eligibility :  _<eligibleLoanDetails>_

                                                         _<eligibleLoanAmount>75000.0</eligibleLoanAmount>  <eligibleLoanAmountType>Scorecard Eligibility</eligibleLoanAmountType>_

                                         _</eligibleLoanDetails>_

3. On FICO intermediary screen below fields to be Visible and Autopopulated

# Tier - This field would be visible if Decision is STP
# Scorecard eligiblity - This field would be visible if the decision is STP
# Decision - STP/No STP

4. There could be three decisions by score-card (FICO) 

i) Case is eligible for STP Flow without Tele PD  - Where the Decision would be STP and no TelePD would be send in Verification Array 

 ii) Case is eligible for STP flow with Tele PD  - Where the Decision would be STP and TelePD would be send in Verification Array

iii) Case if not eligible for STP flow  - Non STP would be send in the Tag

iv) Rejected due to scorecard.  - Final decision would be reject

These decisions would be sent by FICO to SFDC. Decision stamping should be done on SFDC to extract reports.

5. Score-card rejection logic- FICO would give rejection decision and accordingly case should be automatically rejected by SFDC. System should display an informative message- “This case is rejected basis Score-card.” This reason should also be stamped and available on SFDC to analyse data in future.

6. STP Approved Case - 

When case is eligible for STP Flow-  System should show a pop-up that ‘Customer is eligible for direct disbursal of Rs. X *(this amount X should be coming from FICO scorecard)*,

When the case is eligible for STP then User will get 2 buttons on the FICO intermediary screen

a. Proceed with STP

b. Proceed with Non STP

# If the user clicks on Proceeds with STP - then the case would be treated as STP case and Workflow of STP would be followed and case would land on document upload screen
# In this case Loan amount would be autostamped as the scorecard eligible amount
# If the user clicks on Proceeds without STP - then the case would be treated as Non STP case and Workflow of Non STP would be followed. and no change in process.
acceptance: nan

key: ML-1663
summary: Post Bureau FICO Call - Rejection of cases and New fields to be visible
description: +*Acceptance Criteria:*+

# In 1st FICO  the case would be rejected by FICO then the same should be hard reject in SFDC
# Rejection date and rejection reason should be stamped at backened.

+*Description:*+

# post posidex when FICO is called There are scenarios and logic build in FICO due to which the case would be rejected by FICO.
# The FInal Decision received from FICO would be “Reject”. In this scenario the case in SFDC should be hard Reject. 
# The stage and substage should be “Reject” “Scorecard Reject”
# Once the case is rejected a Pop up message should be displayed “Case is rejected by Toxic Rules” to the IRO on the front end.
# This rejection to the stamped at Admin with the rejection reason as “ Toxic rule rejection”. [~accountid:5e3bbd873f647d0c99d7fc51]  - Kindly confirm the tag in FICO response for Rejection reason
# Rejection date should also be stamped in SFDC
# If the case is “NO Hit” - [~accountid:5e3bbd873f647d0c99d7fc51]  - to confirm on the Tag for the same
# then below fields to be displayed in Loan and product details section under expense details
## Rent Expense - Free text and mandatory and numeric field
## Electricity Expense - Free text and mandatory and numeric field
## House Price - Free text and mandatory and numeric field
## Asset details section (Already Available) to be made mandatory
# These fields to be added in Residence CPV and be autopopulated and editable
# Same fields should be present at Underwriter under Income details - Expense section should be made mandatory and autopopulated and editable
acceptance: nan

key: ML-1629
summary: For an ADB Process Tags value have to be send to FInnOne for Auto Disbursal
description: +*Acceptance Criteria:*+

# If Case is ADB Eligible then below tags will flow to FinnOne in FInnOne submit request

+*Description:*+

# If case is eligible for ADB then below Tags should flow to FinnOne

|Section|Field Name|List of Values/Field Type|Flowing from SFDC Y/N|Mandatory/Non mandatory / Conditional fields|User Input|Tag Available|Tag Name|Remark|Final Remarks|
| |Account Number on Mandate form| |No|Mandatory|Yes|Yes|"ACcountNoOnMandateForm"|No values is flowing in this tag|Account # of customer|
| |Freeze|Dropdown|Yes|Conditional Mandatory|No|Yes|Freeze|If instrument type is "SI"|currently its disable|
| |Disbursal Description|Text Field|No|Mandatory|Yes|Yes|Disbursal_Description| |Applicant full name|
| |Disbursal Date|Auto populate|No|Mandatory|No|Yes|Disbursal_Date| |If flag is ADB Yes, then date is equal to Finnone submit date|
|Split Payment|Disbursal To|Architect
Customer
Builder
Insurance Company|No|Mandatory|Yes|Yes|Disbursal_To|For Top Up Cases Disbursal To flows from SFDC|For MEL , LS data to flow. Top cases remain the same|
| |Payment Mode|Cash
Fund transfer
Draft
Cheque|No|Mandatory|Yes|Yes|Payment_Mode|# For Top Up Cases Payment Mode flows from SFDC|SFDC to send ''F''|
| |Cash/Bank Account|As per Masters configured|No|Mandatory|Yes|Yes|Cash_Bank_Account|For Top Up Cases Cash /Bank Account flows from SFDC|For MEL , SFDC to send ''121''|
| |FT Mode|INTERNAL TRANSFER
NEFT
RTGS|No|Conditional Mandatory|Yes|Yes|FT_Mode|# If Payment mode  Fund Transfer is selected the field is Cond Mandatory
# For Top Up cases  FT Mode flows from SFDC|For MEL - if IDFC bank account - then SFDC to send Internal Transfer, if non IDFC bank account - then SFDC to send NT|
| |Account no|Text Field|No|Mandatory|Yes|Yes|Account_No|# For Top Up cases  A/c No flows from SFDC|For MEL, SFDC to send ''Account no''
For Top up - it should go as is|
| |IFSC Detail|Text Field|No|Conditional Mandatory|Yes|Yes|IFSC_C|If Payment mode is Fund Transfer|SFDC to send IFSC code|
| |In Favor Of|Text Field|No|Mandatory|No|Yes|In_favour_of|# For Top Up cases In favour of flows from SFDC|SFDC  to Name on mandate|

Have attached the sheet as well for reference.

Kindly filter - Mandatory and SFDC not send Tags
acceptance: nan

key: ML-1628
summary: Conditions in which the case will become Eligible for ADB
description: +*Acceptance Criteria:*+

# If the Mention condition is true then the case would be treated as ADB Case. and Flag for the same would be Maintain at Backened and send to FinnOne

+*Description:*+

# If below condition is true then the case would be Treated as ADB and a Flag for the same would be Maintain in Admin
## KYC Status - KYC Not required
## OTP sign for Credit protect is successful for both App and co-app
## Case is Digital SI and Digital Mandate successful or Open ECS case
## Estamp is successful or Estamp is not eligible
## Esign is successful for both app and co-app
# If all the above mention scenario is true then the case is treated as ADB eligible and Same should be stamped in Admin.
# A field name - “ADB Flag” to be present at Loan application and same would be ticked if the case is ADB Eligible
acceptance: nan

key: ML-1627
summary: On Doing OCR POI and POA docs to be waived off
description: +*Acceptance Criteria:*+

# When CKYC/EKYC/Single KYC is failed and user lands on Applicant details Page - OCR FUnctionality should be available for below ID
## Voter ID
## Aadhar
## Passport
## PAN
# If the OCR is completed then Details should be autopopulated in Personal details and Permanent and residence Address
# Fields which are autopopulated should be non editable and user should have edit button to edit any data
# On editing any data POI and POA document should be made mandatory and OVD and KYC Status should change as per logic
# If there is no change then PO and POA should be waived off

+*Description:*+

# Once the User lands on Applicant details page post CKYC/EKYC or Single KYC Fail the user shoudl have option to run OCR
# If User has selected PAN and Single KYC /EKYC and CKYC is not successful for that PAN. User will land on Applicant details Page.
# User will select An POI from the dropdown field and if the user has selected below Identifier then OCR functionality should be available
## Aadhar
## Passport
## Voter ID
# If user has selected any other Identifier then the OCR Functionality will not be visible
# If User has selected Form 60 and Single KYC/EKYC and CKYC is failed and POI field  would be autostamped and editable as the Identifier selected in POI [~accountid:5e65f17a308ac10ced39d6d4]  - Kindly confirm the current functionality of the same
# the POI Selected would have OCR Functionality as per point 3.
# Once the user runs OCR and and same is successful then demographics and permanent and residence address is autostamped.
# The fields would be non editable if the same is autopopulated with “EDIT” button in each section.
# In this scenario below details would be autostamped at Backened
## KYC Status - KYC Not required
## KYC Document Type - OCR
## OVD Captured: POI - Not required  , POA - Not required
## Document Mandatory : No Document Mandatory
# If user wants to edit any data user will click on edit button against Demographic details or residence address details.
# On editing below details Backened tags would change as per current Functionality of POI and POA mandatory.
## POI Mndatory - First Name, Last Name, Middle Name, DOB or gender is changed
## POA becomes Mandatory - Address line 1, 2 or 3 and Pincode is changed
# Document upload will also me mandatory for such Scenario.
acceptance: nan

key: ML-1624
summary: The changes to be implemented only for NACH Cases
description: The addition of 7 in the dropdown for due day is only applicable where repayment mode is “NACH”.



For SI and Cash cases the dropdown remains same
acceptance: nan

key: ML-1623
summary: Slowness Improvement Rural - IRO screens
description: nan
acceptance: nan

key: ML-1622
summary: Slowness Improvement Rural- Underwriting 
description: nan
acceptance: nan

key: ML-1606
summary: Slowness Improvement in Rural - Multiple apex call of load of the screen

description: # *Afterscriptlaoded and invoke init issue:*

So on load of BCM/underwriting screen “ApplicationDetails” get render by default, in which we found below list of component where this is issue present:

* IFB_ALL_PersonalDetailsBCM
* IFB_ALL_AddressDetailsBCM
* IFB_ALL_FamilyDetails
* IFB_ALL_EmploymentDetails
* IFB_all_ApplicationDetails

 

2. *Multiple apex call of load of the screen:*

Mainly below methods are getting called multiple times

* apex://CF_ALL_FieldDataService_CC/ACTION$getFieldValidations
* apex://CF_ALL_FieldDataService_CC/ACTION$getFieldAccessibilities
* apex://CF_ALL_FieldDataService_CC/ACTION$getPicklistValues

 

a. Here, as we did for Global data list, we have to do something for getPicklistValues(to fetch object specific picklist value), number of calls are increasing due to this.(*need discussion for better approach*)

b. If we resolve the first issue then we can minimize the redundant call of getPicklistValues, getFieldAccessibilities and getFieldValidations

 

3. *Network payload issue consideration due to commented code:*

* we have checked the commented code present on the components which are getting render on load of the page, those are around 16 components and its size is *58 KB(commented code)*. PFA file.

 
acceptance: nan

key: ML-1605
summary: Old CRN data to be send to FICO at UW FICO Call
description: +*Acceptance Criteria:*+

# For Posidex refer cases in FICO call at UW Old CRN shoudl be send in Request

+*Description:*+

# For all posidex refer call when the UW calls FICO below tag should flow in the request
# "oldCrn": "9002931748"
# This data is already stamped in SFDC. 
# Basis the FICO response received the case could be approved or reject at UW.
acceptance: nan

key: ML-1586
summary: EKYC Retry Option on EKYC Timer
description: +*Acceptance Criteria:*+

# After EKYC timer complete user should get an option to re initiate the Timer or skip the timer
# First Time Timer initiation is Mandatory and would be done by System
# API 2 and API 1 of EKYC should be accepted by SFDC only when the EKYC timer is on

+*Description*+

# Post Single KYC is done EKYC timer should be On as is. When the Timer is on SFDC can Accept API 1 or API 2 of EKYC.
# Once the Timer is completed User will get an option to retry the Timer or Skip the Timer onn the same Timer pop up Box.
# If User Retry the Timer the Timer will restart again for the same Time which is configured in system.
# User will have option to retry the Timer 2 times.
# If the EKYC is not completed post 2 retry the Case will flow the CKYC workflow
# If user skips the Timer then the case will flow CKYC workflow.
# If EKYC is successful the Timer should be off and user should land of Applicant details page with all details Autopopulated
# If EKCY is failed then CKYC will would be automated if PAN is added and If Form 60 is selected then KYC Page should be Displayed
acceptance: nan

key: ML-1492
summary: Sprint 11
description: Sprint 11 will involve UI improvement for the below subtask screens for mobile and Desktop.
acceptance: nan

key: ML-1491
summary: Sprint 10
description: Sprint 10 will involve UI improvement for the below subtask screens for mobile and Desktop.
acceptance: nan

key: ML-1490
summary: Sprint 9
description: Sprint 9 will involve UI improvement for the below subtask screens for mobile and Desktop.
acceptance: nan

key: ML-1489
summary: Sprint 8
description: Sprint 8 will involve UI improvement for the below subtask screens for mobile and Desktop.
acceptance: nan

key: ML-1488
summary: Sprint 7
description: Sprint 7 will involve UI improvement for the below subtask screens for mobile and Desktop
acceptance: nan

key: ML-1487
summary: Sprint 6
description: Sprint 6 will involve UI improvement for the below subtask screens for mobile and Desktop
acceptance: nan

key: ML-1486
summary: Sprint 5
description: Sprint 5 will involve UI improvement for the below subtask screens for mobile and Desktop
acceptance: nan

key: ML-1485
summary: Sprint 4
description: Sprint 4 will involve UI improvement for the below subtask screens for mobile and Desktop
acceptance: nan

key: ML-1484
summary: Sprint 3
description: Sprint 3 will involve UI improvement for the below subtask screens for mobile and Desktop
acceptance: nan

key: ML-1483
summary: Sprint 2
description: Sprint 2 will involve UI improvement for the below subtask screens for mobile and Desktop.
acceptance: nan

key: ML-1482
summary: Sprint 1
description: Sprint 1 will involve improvement for the below subtask screens for mobile and Desktop. 
acceptance: nan

key: ML-1476
summary: Field to be made Non -Mandatory
description: +*Acceptance Criteria:*+

# Below two fields to be made Non Mandatory in obligation section
# The Obligation which are autopopulated from FICO should be sorted basis Active loans on top and Closed loan Below.

+*Description:*+

# In Obligation section below two fields to be made Non Mandatory
## Highest DPD in last 2 years
##  KCC/Mudra loan
# Also the obligation which are autopopulating should be Sorted as per below Logic
## Active loans should be visible first and then all close loans should be visible
## Loans with Blank Status should be shown at Last
## All obligation entered manually should be additional to autopopulated obligations
## The sorting logic is only for Automated deviation
acceptance: nan

key: ML-1475
summary: CKYC/EKYC documents to be saved in different document type
description: +*Acceptance Criteria:*+

# EKYC - Aadhar Document and CKYC POI document should be saved in new Document type “KYC”
# The same should be visible to MRO/ DV and BCM
# Same should be uploaded in Filenet
# Below Scenarios -issue- should be resolved in this CR

[https://fincap.atlassian.net/browse/ML-1441|https://fincap.atlassian.net/browse/ML-1441|smart-link] 

[https://fincap.atlassian.net/browse/ML-1442|https://fincap.atlassian.net/browse/ML-1442|smart-link] 

+*Description*+

# Documents received in EKYC and CKYC should be uploaded in Document type “KYC”
# This document would be visible in IRO BCM and Data verification stage
# All docuemnts except below shoudl be uploaded in this document type
## Customer photo
## PAN
## Signature Proof
acceptance: nan

key: ML-1467
summary: Data Verification reallocation should happen by UW User
description: +*Acceptance Criteria:*+

# BCM Manager should have the option to reallocate the Case to another BCM.
# New BCM should be able to Access the case and Take Action
# The old BCM should have have the Access to the case
# Data Verification Cases should be allocated to L1 UW only

+*Description:*+

# BCM Manager should have the access to reallocate the Data verification cases for the branches mapped to that manager.
# On reallocate Page BCM will have a field called “stage”  With dropdown value  “Data Verification” and “Underwriting”
# This field would be mandatory for user to select
# When the user selects “Data verification” All cases assign at Data verification stage should be visible.
# BCM will have access to select 1 or multiple cases. When the user select the Loan application for reallocation the “reallocate To” field would be enabled.
## In Reallocate field dropdown value will be available where L1 UW would be visible which is mapped to that Branch.
# Once the Data verification is reallocated the case should be editable to the new user and the old user should not be able to access the case
# On retrigger of the case from Data verification the case should again be assign to the BCM who has returned the case.
# *Fields visible will be for Both DV & UW:*
## Product Name
## Stage
## UW Name
## Branch
## Sales Officer
## Created Date
## Reallocate To
# *Results Column Names for DV will be as below:*
## Loan Application Name
## Loan Amount
## BCM Ownership
## Applicant Name
## Location
## Sales Officer
## Scheme
## Created Date Time
# Results Column Names for UW will be as currently visible. No change.
acceptance: nan

key: ML-1040
summary: OTP Sign flag to flow to FInnOne
description: *Acceptance Criteria*:
1. OTP Sign credit protect - flag should flow in finnOne
2. Same should be visible in FinnOne

*Description:*

1. If OTP based eSign is successful for Credit Protect in a case, then below data should flow in FinnOne

{{<TypeSigning>O</TypeSigning> }} - O if OTP Sign is successful & if OTP is failed then, Blank value will be sent
{{<E_SignDocument>PAN Numner#Aadhar Number/E_SignDocument>}} - along with Esign docs need to send “Credit Protect” if -Esign- OTP Sign is successful
{{<E_SignDocument_Status>YES#NO</E_SignDocument_Status>}} - Need to send "Yes" in first place, if OTP sign is successful otherwise NO
acceptance: nan

key: ML-1036
summary: CKYC Address Parsing Logic
description: +*Acceptance Criteria*+

# CKYC Address should be stamped and populated correctly
# POA tagging should remain same

+*Description*+

# If customer selects any of the CKYC Address as Current Residence Address/Permanent/Office Address on Pre-QDE CKYC Download Screen,
# Remove all special characters (including , -,(,/, .etc) from the CKYC address string except for spaces.
# The address to be concatenated in the below manner in a single string.

Line 1+” “+Line 2+” “+Line 3

# Break the above string into address line 1, 2 & 3 basis the below logic:

a. Address should get auto appended to next line if it exceeds 40 characters. If the 40 character split comes between the words then the entire word should move to next line.

b. If the 40 character split comes at a space then remove that space and move the word after the space to the next line.

c. Since there will be no other special character except space therefore the above 2 are the only scenarios that can happen.

# The logic for populating pincode and landmark from Aadhar address remains unchanged.
# State and city will continue to be picked from Pincode master as per existing logic.
# After parsing the address as above, the address to be autopopulated and non editable on QDE with edit button. 
# If the Address is changed then POA will be updated
acceptance: nan

key: ML-1035
summary: EKYC Address Parsing Logic
description: +*Acceptance Criteria*+

# Address should be parsed as per logic
# POA tagging should be done in similar manner.

+*Description*+

For EKYC:

# If customer selects Aadhar Address as Current Residence Address/Permanent/Office Address on EKYC Download screen, then the below changes need to be made to parse the address.

i. Remove all special characters (including , -,(,/, .etc) from the Aadhar address string except for spaces an replace these special chars with spaces. Ensure that there should only be single space between all the words.

ii. The address to be concatenated in the below manner in a single string.

house +” “+street+” “+loc+” “+vtc+” “+subdist+” “+dist

iii. Break the above string into address line 1,2 & 3 basis the below logic:

a. Address should get auto appended to next line if it exceeds 40 characters. If the 40 character split comes between the words then the entire word should move to next line.

b. If the 40 character split comes at a space then remove that space and move the word after the space to the next line.

c. Since there will be no other special character except space therefore the above 2 are the only scenarios that can happen.



iv. The logic for populating pincode and landmark from Aadhar address remains unchanged.

v. State and city will continue to be picked from Pincode master as per existing logic.

vi. After parsing the address as above, the address to be non editable on QDE with edit button. 

ix. There should not be 2 back to back spaces in Line 1/Line 2/Line 3.

x. If there any special characters in the name obtained from EKYC then remove them.
acceptance: nan

key: ML-1031
summary: Due Day Master to be Updated
description: +*Acceptance Criteria*+

# For IFBL Cases 7 should be visible in Due day dropdown for SI and NACH Scenario.
# Applicable for MEL/ MEL+/MEL repeat and PL

+*Description:*+

# For IFBL Cases where the Bank is eligible for SI and NACH the due day master should have below data
## 2
## 5
## 7
## 10
# Also, all value of Due day will have "Prefix" 0 for number from 1-9 while submitting in Finnone API
acceptance: 1. For IFBL Cases 7 should be visible in Due day dropdown for SI and NACH Scenario
2. Applicable for MEL/ MEL+/MEL repeat and PL

key: ML-969
summary: API 2 changes with error description stamping in SFDC
description: +*Acceptance Criteria*+

# Esign error message at applicant level should be stamped at SFDC
# Same should be available in reports

+*Description:*+

# API 2 structural changes are there in request wrapper
# Esign status and Failure description received in request needs to be stamped in SFDC at applicant level.
# Attached is the API request and response
acceptance: nan

key: ML-967
summary: Posidex match details API
description: +*Acceptance criteria*+

# After posidex refer is received from Posidex Below API to be called
# Matches found in response should be stamped at admin

+*Description*+

The MatchDetails API is to be called only after successful DeDupe response from Mule. So the DeDupe & MatchDetails API calls should be sequential.

The Request is simple as below to just pass the Loan Application number & Mule will send the Match Details in the attachment format.

\{"LoanApplicationNo":"500033934"}
acceptance: nan

key: ML-961
summary: Field names to be changed
description: |7|Peak DPD in existing loan.|Peak DPD (Days_|Numeric field| |
|8|No. of times when DPD is between 8-14 in previous loan|No. of DPD Bet 8-14|Numeric field| |
|9|No. of times when DPD is between 15-30 in previous loan|No. of DPD bet 15-30|Numeric field| |
|10|Any DPD reported in last 3 months.|Last 3 months DPD (Days)|Numeric field| |

Above field Name to be changed as per mention table
acceptance: nan

key: ML-960
summary: % of incremental income formula to be changed
description: Formula of incremental income field to be changed to 

(Current income - previous income)/Previous Income
acceptance: value of this field should be populated as per the given formula

key: ML-945
summary: Demographics change
description: Applicable for MEL/ MEL repeat and PL

+*Acceptance Criteria*+

# Demographic details should be editable
# POI field should be mandatory in that case
# POI document should be mandatory
# OVD should be stamped basis POI selected
# KYC Status should be changed as per basic logic

+*Description*+

# Below fields in demographic details would be editable if EKYC/CKYC or single KYC is success
## Title
## Gender 
## First Name
## Middle Name
## Last Name
## DoB
# If any details are changed then POI Field in identifier section would become mandatory for user to select.
# Any identifier selected in POI field should be present in Identifier section
# If POI is selected - below fields would change
## OVD - POI - will be stamped as identifier selected in POI field
## POI document would be mandatory
## KYC Status 
### “Identifier Required” if only demographic details are changed
### “KYC Required” - will be stamped if demographic and address both are changed
acceptance: nan

key: ML-944
summary: CRN Assignment for MEL repeat/PL
description: +*Description*+

Following details should be editable at applicant details page:

# Title
# Gender (Auto-filled by system as per title)
# First Name
# Middle Name
# Last Name
# DoB

If any details are edited, then PoI selection should be mandatory. (This is an existing functionality)

*CRN Assignment:*

# Once data is edited, in case new CRN is created after Posidex is completed, then system should highlight new CRN is assigned for app/co-app.
# For cases with Posidex decision as “isRefer” - Y = The Posidex workflow will follow.
# If posidex decision is “Approve” & “isRefer” - N, then below message will be displayed. (Posidex will give only 1 CRN, which will be New CRN)
# System should give informative message-
## _“Customer <Name> has been assigned a new CRN._
_Existing CRN- xxxxxnnnnn_
_New CRN- xxxxxnnnnn_
_Please follow below steps:_
_i) Get the new CRN merged with OLD CRN ii) Re-login the case after CRN merger is completed. “_
# System should not allow user to move ahead with the case if new CRN is assigned.
# System should auto-cancel the case with NEW CRN.
# After merger of CRN, user should be able to search the case with name or CRN and should be able to initiate repeat case again- as per existing process.
# -After CRN merger is completed, the case on SFDC should be available with OLD CRN and and user can enter new details and move ahead.-
# If details are edited again and NEW CRN is assigned then same process as mentioned from point no. 1 to 6 should be followed.
acceptance: nan

key: ML-914
summary: EKYC Biometric reference ID field
description: +*Acceptance criteria*+

# Biometric API Reference number should be stamped in SFDC
# Same should be available in reports

+*Description:*+

# a new field to be created -  +*Transaction_ID__c*+.
# Reference number would be update in the same by Mule in biometric API call out
# The field should be visible in reports for Product reporting purpose
acceptance: nan

key: ML-909
summary: New Field to be added - Annual sales turnover
description: Applicable for MEL/MEL+ and MEL repeat

+*Acceptance Criteria*+

# A new field should be visible in loan and product at IRO and UW
# Same should flow in FinnOne

+*Description*+

# A new mandatory field with header- ‘Annual Sales Turnover’ to be added at ‘Loan Detail Entry’ stage and -Income- Loan tab in Underwriting.
# Below fields to be visible in PSL Section for both IRO & BCM. 
## Purpose of loan category and 
## Purpose of loan sub category 
## PSL Flag
## PSL Classification
## PSL SubClassification
## Annual Sales Turnover
# The field would be mandatory when PSL Classification is “MSME”
# It should be a manual data entry field, mandatory for all schemes of MEL, MEL Plus, MEL Repeat, for bank and IFBL both. In case of MEL Plus this field should be editable. As this field is being introduced now, existing loan will not have any value and hence it should be blank to edit for both repeat and Mel Plus cases
# Input value should be numeric only.
# Same field should be passed-on to FinnOne. This field is already available in FinnOne.
# This is required for all variants of bank and IFBL
# This field should be given at below highlighted place: 

IRO: Loan & Product Screen

!image-20201006-151451.png|width=1259,height=222!

BCM: Loan Tab

!image-20201006-151459.png|width=1346,height=369!
acceptance: nan

key: ML-905
summary: Mobile number tag to flow in create Customer API
description: +*Acceptance Criteria:*+

# Mobile number should flow in new Tag
# CBS Should be able to send SMS in that mobile number
# Customer account should be created

+*Description*+

# In Customer Create API a new tag to be added “attrb7” under main tag - “"attrb":\{“.
# Primary customer mobile number should be send in that tag
acceptance: nan

key: ML-404
summary: Filenet View Doc API Changes
description: Filenet View Doc API - Response changes as a attachment.

SVC Name: VIEWDOC_ATTACH



Request:



\{

"txnId":"a0g1s000000UeusAAC", ---- This should be SFDC integration ID to receive the attachment response from Mule

"role":"View_Upload_Restrict",

"project":"Loan App",

"documentType":"OTHERS",

"documentId":"80E4AF74-0000-CD3C-938B-4D798A526574"

}
acceptance: nan

key: ML-365
summary: Retrigger workflow 
description: +*Description*+

# For scenario where the case is retrigger from Various stages (employment stage/Loan and product stage/ Data verification stage/ Underwriting stage) post Posidex call, below process should follow:
## If Case was Posidex approve earlier and then on retrigger the case becomes Posidex refer:
### Posidex refer workflow will follow.
## if case was Posidex refer and post retrigger the case is again Posidex refer:
### -If Maker check stage is not cleared –-
#### -If there is no change in data received from Posidex and then the old task of maker checker will remain as is. --> Is this about CRN records or any other data    What to compare?? - Need to compare CRN-
##### -If old CRN=New CRN - Update data of new CR. Same as deviation logic.-
##### -If there is a change in data, then old task will get cancel and new status with new data will be initiated for maker checker.-
### -if Maker checker stage is cleared, then a new task of maker checker is initiated with the new Posidex match data.-
### {color:#ff5630}Everytime Posidex API is triggered again, in any scenario then:{color}
#### {color:#ff5630}SFDC should cancel all the old CRN verification cases, irrespective of their status.{color}
#### {color:#ff5630}SFDC should Initiate new CRN verification cases, as per the details received in latest Posidex API.{color}
#### {color:#ff5630}Old CRN verification cases should be visible but with cancel status.{color}
#### {color:#ff5630}User should be able to work on new CRN cases only.{color}
## If case was Posidex refer and Now it is Posidex approve:
###  If maker checker stage is not cleared, then - 
#### The Maker checker Task will get cancel and latest received CRN will be assigned to the Customer.
#### The case will move ahead of insurance screen, without CRN verification stage.
## If case was Posidex approved/refer and now reject:
### Then loan application will be marked Posidex Reject.
### IRO will not be able to take this ahead.
### SMS to IRO/BCM mobile number and Email to IRO/BCM Email - to be triggered to the below users informing them about Posidex Rejection Status:
#### IRO
#### BCM
#### Message:

_“Dear <User Name(IRO name)>,_

_The Loan Application <SFDCID> has been updated with the latest CRN Verification Status and rejected as per the latest Posidex Rules._

_Regards,_

_IDFC FIRST Bank”_
acceptance: nan

key: ML-364
summary: Posidex New service post checker task is completed
description: +*Acceptance Criteria*+

# Posidex Update API should be send after Checker stage is approved
# Basis the IRO Decision Different Action to be send in API
# Post API success the case should move ahead in IRO Workflow
# If API is failed then Checker should have retry option

+*Description*+

# Attached is the Posidex request Post Checker approves the Task
# Below is the logic for sending the Tag “Action”
## If IRO selects the decision as “Assign selected CRN” - “Action” tag to be send as “Merge”
### \{ 	"ExistingCRN": 5000028373
"NewCRN": 5400002728
"Action" : "Merge"
},
## If Iro selects the decision as “Retain & Mark Complete” - “action” tag to be send as “No Action”
### \{ 	"ExistingCRN": 5000028373
"NewCRN": 5400002728
"Action" : "NoAction"
}
## If IRO selects the decision as “Assign new CRN” - “Action” tag to be send as “Demerge”
### \{ 	"ExistingCRN": 5000028373
"NewCRN": 5400002728
"Action" : "DMerge"
},
# If the success response is received from posidex then the Normal MEL case will move ahead automatically (without manual intervention) to CBS Search API.
# If Error message is received from posidex then BCM should have the option to retry on BCM checker page. A loader shoudl run on the page till the time POsidex response is received.
# SVC Name - “Posidexrefer_Update”
acceptance: nan

key: ML-363
summary: BCM workflow once the IRO maker decision is completed
description: +*Acceptance Criteria*+

# BCM should be able to return the case to IRO
# BCM should be able to Approve the decision
# Message should be send to IRO and BCM
# Posidex callout to happen Post BCM approves the Case

+*Description:*+

# If BCM is not ok with what is selected by IRO then, he can return the case to IRO in maker stage. --> What will happen then? Will the maker checker screen become editable for IRO again or there will be some other flow? And do we have to save the decision of BCM on rejection of any CRN. – all comments should be visible to both IRO & BCM (complete trail)

# If BCM has approved the option, below action will happen depending on what IRO has selected:

a. Retain & Mark Complete – Already assigned CRN would be assigned to the Customer. A Posidex call to be made.

b. Assign Selected CRN – a Posidex call to be made post Checker approval\[RB1] .

c. Assign New CRN – Posidex call to be made to assign new CRN.



# Final Decision – Change in the CRN. CRN received in response <> CRN attached to the loan application:

a. Posidex Callout to be done again.

-b.- SFDC will trigger Posidex call – Update Posidex API – Immediately after BCM 

-c.- Approve decision.

# If Posidex is failed due to any reason, user should be given an option to retry the Posidex call. – On BCM screen. BCM will have to retry if API gets failed.
# a. Post Posidex call decision, the regular process flow for the product will happen.
## *Approve*: Then loan application will move ahead in the journey AS-IS.
## *Reject*: Then loan application will be marked Posidex Reject.
## IRO will not be able to take this ahead.
## SMS – IRO mobile number and Email – IRO Email IRO to be triggered to the below users informing them about Posidex Rejection Status:
## IRO
## BCM
## Message:
# “Dear <User Name(IRO name)>,

The Loan Application <SFDCID> has been updated with the latest CRN Verification Status and rejected as per the latest Posidex Rules.

Regards,
IDFC FIRST Bank”
b. Loan Application to be tagged to the new CRN, similar to the handling in Retrigger workflow when CRN flips.
acceptance: nan

key: ML-362
summary: BCM Checker screen UI UX
description: +*Acceptance Criteria*+

# Checker Task to be initiated once the Maker task is completed.
# All Match data received from Posidex should be visible
# IRO Maker decision should be visible to Checker
# Checker should be able to Approve or return the case back to IRO with comments
# Checker stage should be able to retry the fail posidex

+*Description*+

Pre-Requisite:

# For Posidex refer cases a parallel task would be initiated for assigning the CRN to the customer.
# Maker would be the: IRO & Checker would be the BCM - L1
# Once SFDC received "IsRefer" tag are true (Y), then a Maker task would be initiated where the user would be able to take decision of CRN Assigning.
# Post IRO takes decision on Maker task checker task should be initiated to BCM L1 UW
# Below are the data and UI/UX of the Maker screen.
# -A new QUEUE - “CRN Checker” should be visible in loan application-
# “CRN Open Pool” queue will be visible in Case Tab. All the checker tasks should be visible in open pool - to all UW Mapped to that branch. the CRN task should be initially visible in open pool Queue.
# UW should be able to take ownership of that task - in the similar manner as that of Data verification.
# Once the Ownership is taken, the task should be visible in “CRN Verification” Queue visible under Case Tab. This task would be visible only to this user and no other user post the ownership is taken.
## . Ownership will be retained for DV or not – Ownership will not be retained.
# The Screen of checker should be same as Maker - [https://fincap.atlassian.net/browse/ML-361|https://fincap.atlassian.net/browse/ML-361|smart-link] 
# Complete screen will be non-editable/read only and BCM can take only 2 decisions.
# Checker would have different decision option than what was visible to IRO
## Approve - On taking this decision user will be able to Approve the stage and Posidex update API would be called.
## Return - on taking this decision the Case will move back to IRO Checker stage. UW will have the option to add comments in the same and same comments should be visible to IRO in Maker stage.

h3. Underwriting Screen/Data verification screen

a. Posidex refer Banner To be shown at the UW Stage and the DV Stage. – Applicant Tab

b. To be shown only if ‘IsRefer’ Tag in Posidex Response is received as ‘Y’.

c. Message Content to be shown:

# This is a Posidex Refer Case.

# CRN assigned by Posidex: <Mention CRN received in Posidex Response>.

# Re-assigned CRN as verifiedhard by the Credit Team: <Mention CRN received in manual eyeballing Portal Response>.
acceptance: nan

key: ML-361
summary: IRO maker Screen UI/UX
description: +*Acceptance Criteria*+

# Maker Task to be initiated once the posidex decision is received as “Refer”
# Maker screen should be mobile responsive
# All Match data received from Posidex should be visible
# IRO should be able to take decision of the task along with other MEL/MEL+ or repeat or PL case

+*Description*+

Pre-Requisite:

# For Posidex refer cases a parallel task would be initiated for assigning the CRN to the customer.
# Maker would be the: IRO & Checker would be the BCM \[RB1] - L1
# Once SFDC received "IsRefer" tag are true (Y), then a Maker task would be initiated where the user would be able to take decision of CRN Assigning.
# Below are the data and UI/UX of the Maker screen.
# IRO would be able to see Multiple assigned CRN to the customer as well as the details of these CRN received from posidex response under “Match” details
## The list of matches should be in the order of Maximum % match to Min % match.
## The % would be received in Posidex response in tag  "Weightage": null, . The match with highest weightage would be visible on top.
### The best possible match should be on top in the list. (The matches should be in order of maximum % match to minimum % match.)
## _List of the matches in the dropdown should be sorted basis the number of fields matching. The record with highest number of fields matching to be kept on top of the list in dropdown. For example there are two records, Name, DOB and Pin code are matching with 1_^_st_^ _record and Name, DOB, pin code and Aadhaar number is matching with the 2ns record, then 2_^_nd_^ _record should be displayed on top. Similar sorting to be done if there are more than 2 records._
# User will also see the CRN which is currently assigned to the Customer for that case.
# User will have an option of selection of one of the CRN to the customer basis the Demographic details visible.
# By default, the Assigned CRN for that case would be auto Selected. The Eyeballing process needs to be done here by the IRO for selecting on CRN.
# IRO will have 3 options/buttons:
## *Retain & Mark Complete* - On selecting this CRN, the already assigned CRN for that case would Assigned to the Customer.
### This option would be visible only if Assign CRN is selected and all other option should be disabled.
### If User select any other CRN apart from Assigned CRN, then this option would be disabled.
## *Assign Selected CRN*: On selecting this option the CRN selected by the user would be assigned. This option would be enabled only if any one CRN is selected apart from already assigned CRN.
## *Create New CRN:* this option would be selected if none of the CRN data matches the Existing Loan application data. and IRO selects none of the data which is received from Posidex. This option should be enabled only if none of the option is selected
# The selection of CRN should be on record level. If any one CRN is selected, then all records responding to that CRN would be selected.
# There will be no change in Data entered by IRO in the demographics, the Data will be retained as per user entered. This is the task only for CRN assignment
# On selection any of the above option the case will go to Checker stage to BCM.
# The complete Maker screen should be Mobile Compatible
## The screen will have multiple Tabs - Depending on Number of Matches.
### Each Tab would be below fields to be visible
#### CRN number
#### Customer Name
#### DOB
### On clicking on the Tab the tab will open and other details of the match customer would be visible. As per the excel sheet
### the tab opening functionality should be such the when IRO clicks anywhere on the tab the tab should open
acceptance: nan

key: ML-360
summary: IRO workflow For Cases where posidex has given Refer decision 
description: +*Acceptance Criteria*+

# If posidex decision is “Refer” then Parallely a new task would be initiated for IRO - called IRO maker
# Posidex status field to be visible in the ribbon for all stages with value “Refer”
# If maker checker stage is not completed the Normal case workflow to be Hard stop before CBS search API
# New stage substage to be visible post insurance if Maker checker is not completed

+*Description*+

+*Case Flow for Posidex Refer scenario*+

# If the posidex decision is “Refer” then the stage and substage of the case would be “Posidex” “Posidex Refer” and highmark call would happen post that as is in existing workflow.
# When the case is Posidex refer a new task parallel to case workflow should be initiated called Posidex Maker Task
# In the Case, on the ribbon a new field to be visible “Posiex decision” with the Value as Refer.
## This field would be visible in all the stages of the screen
# The case will flow till insurance screen as is and IRO can parallely complete the Maker checker tasks.
# Post the IRO clicks on “Continue” from the insurance screen system to check in Maker checker task is completed or not
## If the task is not completed a New stage to be made Stage - “Insurance” Sub stage” - “Posidex refer”
## The user will land on intermediary screen
## message would be shown on this stage as “Kindly Complete CRN Assigning Task”.
## If Maker stage is not completed, then a link would be visible to the IRO on that Page. On clicking on that link IRO would be redirected to the Maker Page. – Link or view button
## If checker stage is not completed but the maker is completed for the case, then a message would be visible to IRO “Posidex refer checker stage pending”.
## Post the Posidex refer workflow is completed, the case will directly move to CBS Search API Callout. – Can be done
## There will be no manual click for IRO to move to next stage

6. If Maker checker stage is completed Before the IRO lands “CBS Search API” or completed thhe insurance stage the case will flow will go as is.

+*IRO Queue for Maker Task*+

# In the verification Tab in IRO Screen a new Queue would be made “Posidex Refer Cases” along with MEL+ verification cases.
# There should be a Product wise filter for viewing cases in this tab “MEL” and “PL”.
# Sorting option should also be present for the user to sort the cases Date Wise ([~accountid:5f0d6001e5efc1001ba00fff]  - to check once on this Part from UI Perspective)
# All maker tasks would be visible in the Queue
# Columns visible in this Queue would be
## SFDC loan number
## Customer name - App or CO-app for whom the refer workflow is initiated
## Product
## Date of initiation
acceptance: nan

key: ML-359
summary: New posidex API 3.0 to be build
description: +*Acceptance criteria*+

# For normal cases this new Posidex API should be called
# “IsRefer” tag should be received in response
# All match details received in the response should be stored in SFDC if the tag “Isrefer” is “y”

+*Description*+

# the SVC “Dedupe” API response structure to be changed as per the attached structure
# a new tag “IsRefer” would be received in the response with valus “Y” and “N”.
# If the tag value is “N” then the case would flow as is basis the decision received from posidex and there is no change in the workflow
# If the tag value is “Y” then the case would go in Posidex refer workflow.
## All the match details received from the Posidex response needs to be stored in SFDC
## Demographics and address details under each match will be saved in SFDC
## This will be saved at applicant level - each for Primary applicant and co-applicant
acceptance: nan

key: ML-344
summary: Addition of tag in request
description: in the request Kindly add one tag - 

“flg” will be non mandatory
acceptance: nan

key: ML-340
summary: CBS City name to flow as Branch Name
description: +*Current Functionality*+

In CBS create customer API Applicant residence address city and state is flowing to CBS

+*Acceptance criteria*+

# Branch code to flow in CBS Create customer
# Account should be open for the customer

+*Proposed Functionality*+

# Rather than customer residence address city flowing to CBS create customer SFDC will flow the branch code in which the case is been punched (IRO mapped Branch)
# CBS code for that branch will flow in the integration
acceptance: nan

key: ML-259
summary: Changes in NACH Form
description: Below two points to be developed in NACH Form

# Do not print Bank Name on Printed NACH form.
# Account holder name should be in *Bold* format.
acceptance: nan

key: ML-256
summary: CBS Branch to be autopopulated on Account creation
description: +*Summary*+

CBS Branch  field to be autopopulated same as the Branch in which IRO is mapped.

+*Acceptance Criteria*+

# On New account opening page the branch in which the IRO is mapped should be autopopulated
# The branch which is selected - CBS code for the same should flow in New account creation API
# Account of the customer should be open

+*Description*+

# When the user lands on Account opening stage currently a dropdown is visible in branch for user to select the branch name
# Now rather than dropdown branch in which IRO is mapped would be autopopulated and non editable
# IRO would be able to open account only in branch he is mapped to 
# If the branch in which IRO is not mapped the field would be blank
# on sending New account opening API the Branch code of CBS will flow rather than FinnOne branch Code
# This auto population should happen in both Pre and post sanction
acceptance: nan

key: ML-209
summary: UIUX Design for worklist & Select product Modal
description: nan
acceptance: nan

key: ML-158
summary: OTP Based E-sign for Credit Protect on Document Generation Screen
description: +*Acceptance Criteria:*+

# If OTP Signed is successful for any Applicant then digitally signed document should be generated by Emorphis
# Digitally signed tagging to be done at applicant level.

+*Description*+

# Once the User lands on document generation stage a new tag will flow in Emorphis API
## "applicant": \[
\{
"isDigitallySigned": null, value will be Yes/No for credit protect insurance form else null.
}]
## This will send at Applicant level
# After successful OTP validation, the DoGH document should be shown with ‘Digitally signed by customer’ with date and time stamp of the OTP validation. this will be done by Emorphis and digitally signed doc will be uploaded in Filenet
# This Digitally signed DoGH document, should be auto-saved on Filenet.
# If OTP is not validated for any of the applicant/co-applicant(s) then ‘Digitally signed by customer’ should not appear on that particular applicant/co-applicant(s)’ DoGH document.
# If OTP Validation is not successful for any App  or co-app Kindly provide an Informatory message at the bottom of the Page
# “Kindly Proceed with Physical Sign of “Applicant/CO-app Name” (Whose OTP Validation is unsuccessful)
acceptance: nan

key: ML-133
summary: Obligation data to be fetched from FICO Tags and autopopulate
description: +*Summary:*+
Obligation to be captured from the FICO response

+*Acceptance Criteria:*+

# All details fetch from FICO response should be auto-populated in BCM
# Details should be editable at BCM
# Updated data should flow in FICO

+*Description:*+

In FICO response, under below Tags at *Applicant level Obligation data would be received:*

"customBureauResponse": \{
"customResponse": \{
"accountList": \[
\{

{noformat}            "accountType": "TWO-WHEELER LOAN",
           
            "dateClosed": null,
            
            "sanctionAmount": "53000",
                                                            
            "currentBalance": "0",

          },{noformat}

# Data visible for Primary applicant should auto-populate Primary applicant name in column “Applicant” of obligation table and same for Co-applicants.
# Current balance should be auto-populated in auto-standing balance.
# All fields auto-populated and below data should be editable.
# User should have option to delete as well as add the obligation.
# EMI amount and Account status Field would also be auto-populated from FICO and editable. **the tag will be available by 17th Sept
# When BCM clicks on Calculate Eligibility, then in FICO request - *Total value of field EMI amount* (Total of EMI Amount of App & Co-app) would be send under Liability array of FICO request.
acceptance: nan

key: ML-132
summary: BCM Obligation to be fetched from FICO and visible at UW
description: Applicable for MEL / MEL Repeat and PL

+*Summary:*+

Currently BCM is able to see total Highmark EMI in the Income section. The requirement is to provide the Bifurcation of the customer Liability

+*Acceptance Criteria*+

# Obligation field should be present to BCM at “Income” section.
# BCM should be able to add/Delete or edit the data in the fields
# The data should be auto-populated from FICO response
# the updated data should flow to FICO

+*Description*+

# For MEL and Repeat cases, in “Income” tab - below Income details section, a new section to be made as ”Obligations”
# Obligation section will have below functionality:
## Add
## Edit/View
## Delete
# User can add multiple obligation by clicking on “Add Obligation” button.
# He can view as well as edit the obligation by clicking on “Edit” button under Action column.
# And delete already present obligation by clicking on “Dustbin” icon under Action column.
# Below are the fields to be present on the section:
## As per the response received from FICO, all the applicant level entries/rows will be auto created by SFDC and visible in the table, with the values received as auto-populated in the respective fields. 
### 2 fields values will not be received in response and same should be kept as blank while creating a row:
#### Highest DPD in last 2 years
#### KCC / Mudra loan
## User can also add a new row in the table.

|*Name (Applicant / Co-app)*|*Account Type*|*Sanctioned Amount*|*EMI Amount*|*Balance Outstanding*|*Account Status*|*Closed Date*|*Highest DPD in last 2 years*|*KCC / Mudra loan*|*Action*|
|Surbhi Devi|KCC|45000|2500|3000|Active|-|45|Yes|*Edit*
*Delete*|
|Surbhi Devi|Others|20000|1000|0|Closed|30/03/2020|0|Yes|*Edit*
*Delete*|
|Surbhi Devi|Personal Loan|100000|2500|80000|Active|-|10|No|*Edit*
*Delete*|
|Surbhi Devi|Personal Loan|100000|2500|80000|Active|-|SMA|No|*Edit*
*Delete*|



*A] Clicking on “Add Obligation” button, a pop-up will get opened with below fields and a ADD button at bottom:*

# ** Name* - 
## Auto-populate from FICO Response
## Dropdown field with Primary applicant or co-app name dropdown
# ** Account Type* - 
## Auto-populate from FICO Response tag - {{"accountType"}}
## Free text - while adding a new entry
# ** Sanction amount* - 
## Auto-populate from FICO Response tag - {{"sanctionAmount"}}
## Numeric field - while adding a new entry
# ** EMI amount* - 
## Auto-populate from FICO Response tag - the tag will be available by 17th Sept
## Numeric field - while adding a new entry
# ** Balance outstanding Amount* - 
## Auto-populate from FICO Response tag - {{"currentBalance"}}
## Numeric field - while adding a new entry
# ** Account status* - 
## Auto-populate from FICO Response tag - the tag will be available by 17th Sept
## Dropdown - while adding a new entry
### Active
### Closed
# *Highest DPD in last 2 years* - Numeric field
# *KCC / Mudra loan* - Dropdown 
## Yes
## No
# *Closed Date* - 
## Auto-populate from FICO Response tag - {{"dateClosed"}}
## Calendar date picker - while adding a new entry

7. All fields would be mandatory in the section except below fields:

# Closed date
# Highest DPD in last 2 Years
# KCC/Mudra Loan

*B] Clicking on “Edit” button of a particular row:*

* The same Add Obligation pop-up will get opened, where all the fields will show the already entered values and a SAVE button at bottom. 
* All the fields will be editable and user can edit the same, *including the fields auto-populated from FICO response.*

*B] Clicking on Delete (Dust Bin) icon of a particular row:*

* Clicking on icon, a confirmation pop-up should get displayed as “Delete obligation?“, with a Confirm and Cancel button.
* Clicking on Confirm button, will delete the entry and clicking on Cancel button, will close the box.
acceptance: nan

key: ML-129
summary: EKYC Message priority
description: Applicable for MEL/MEL repeat

+*Acceptance criteria*+

# If API 1 of EKYC is failed then below messages should be send in the Response 
# The EKYC Fail woul dbe checked in below priority order

E-KYC Message with Priority

Below message would be visible when the below scenario holds true

|*Scenario*|*Message*|
|Invalid Loan number|Invalid Loan Number|
|Invalid SO User|Invalid IRO|
|EKYC Status – Completed|EKYC Already done successfully|
|EKYC Timer not on|Kindly initiate timer|
acceptance: nan

key: ML-104
summary: Application form changes
description: Application form needs to changed as per attached format.

Same is valid for MEL/MEl+ and MEL repeat

----

* PFA MEL Application Form.PDF, which is generated by the system currently.
* The Application form.xlsx is the updated form and our current form needs to be updated accordingly.
* Fields highlighted in BLUE, YELLOW and GREEN are the new fields which needs to be added.
* Co-applicant sections were not present earlier in the form, same needs to be added as given in new form - highlighted in green.
* Also, please go through complete form if any field level change is there and needs to done, then please raise it.
acceptance: nan

key: ML-94
summary: Master Global Data List changes
description: nan
acceptance: nan

key: ML-93
summary: API Simulation in Salesforce
description: +*API Simulation using Salesforce*+
acceptance: nan

key: ML-85
summary: Karza name Match
description: +*Description*+

The details fetched from PAN NSDL (Customer first name and last name) would be compared with the data fetched by EKYC/CKYC or manually enter data.

If the Match percentage is above a certain limit then the PAN document would be made non mandatory

# If Name match % on comparing the data with ckyc and manually enter is above 90% then Pan document would be non mandatory otherwise same would be mandatory
# If Name match % on comparing the data with EKYC is above 65% then PAN document would be nonmandatory otherwise the same would be Mandatory
# If Last name is not received from EKYC/CKYC and the same is autopopulated from PAN then PAN document would be Mandatory
acceptance: nan

key: ML-81
summary: Name mismatch for EKYC/CKYC
description: +*Scenario*+

# All MEL cases /MEL repeat and PL case where co-app is added
# Valid for scenario where last name is not fetched from EKYC and CKYC Data

+*Acceptance criteria*+

# For all cases with PAN Last name should be populated for CKYC/EKYC Success scenario where last name is not fetched from CKYC/EKYC API
# PAN document Should be mandatory for above scenario is true
# For form 60 cases Last name should be editable and POI should be made mandatory/ “Is required” basis the name/DOB match of the customer than with the  bureau data.

+*Description*+

The Name received from PAN Would be stamped if case complete name from CKYC/EKYC is not received

*Scenario 1* (Customer selects PAN on the Add new application Screen)

# On successful PAN validation, all the details received to be stamped in the fields as per existing process
# After the customer lands on Applicant details page either through eKYC or cKYC and even after applying the Name parsing logic if the name is found to be incomplete (eg. - Last name missing, etc.)
## All scenarios - Backend Field - a new field “name as per kyc” - Value of incomplete name (received by eKYC/cKYC) to be stamped in this
## On the front end on the Applicant page, the *name to be populated by picking the PAN NSDL returned name*:
### The name is complete and the same would be editable (First name and last name). If the user edits the name then POI would be mandatory
### If the name is not complete – the customer to be given the option of adding last name received by eKYC/cKYC and proceed as per existing process and POI for this case would be mandatory
## If the name is populated from PAN then collection of digital copy of PAN becomes mandatory.

*Scenario 2* (Customer selects Form 60 on the Add new application Screen)

# After the customer lands on Applicant Details page either through eKYC or cKYC and even after applying the Name parsing logic if the name is found to be incomplete (eg. – Last name missing, etc.)
# The Last Name if the applicant would be editable– on doing which the flag “IsPOIChange” = Yes (as per current AS-IS)
# When the Bureau callout happens and the mobile no. and DOB received from Bureau to be compared with the mobile no and DOB entered by the customer.
## If matched the flag IsPOIChange = No (POI Waiver)
## If not matched the flag IsPOIChange = Yes (as per Current AS-IS)

This is applicable for both Primary Applicant and Co-applicant
acceptance: nan

key: ML-77
summary: AEps integration call
description: Below is the Eligiblity criteria for bank to be AePs Eligibile

# EKYC is successful for the case
# And AePs Token is received in GetIFSC API Callout

If the case is AePs eligible and User selects aadhar based E-Mandate then a Proceed button would be visible to the User.

# A field to be present on backened - “AePs EligibilityStatus” same should be ticked if above conditions are true
# User has to Mandatory do a AePs callout to move ahead.
# On Clicking on Proceed button a Popup would be displayed with a timer of 2 Min (Configurable) where user will initiate Biometric Process on So-app
# If SFDC does not get response in 2 Mins then the Status should be stamped as “Response Time exceeded” or if AePs response received is Failed the it will be considered as failed scenario.
## Skip button would be visible in the popup and on clicking on that button
## User will then Have Mandate type option as per [https://fincap.atlassian.net/browse/ML-2846|https://fincap.atlassian.net/browse/ML-2846|smart-link]
## If user still wants to proceed with aadhar based Mandate then the same process from Point 2 will follow
# If SFDC Gets AePs Response in 2 Mins and the response is a success Then user will 2 option on the UI
## Send Link
## B2B Journey
# AePs status to be stamped in the Admin - True (Is success received from SOApp) or False (If failed)
# Once the user clicks on Proceed to initiate AePS  a request would be received from SO-app to SFDC

*Svc name*: Aadhar_Emandate

8. Post Aadhar_Emandate is success below Service is called by SO_App
acceptance: nan

key: ML-76
summary: BCM Field creation at Underwriting Stage
description: +*Summary*+

At Underwriting pending stage below fields should be visible to Underwriting and data entered by Underwriter in these fields should flow to FICO

+*Acceptance Criteria*+

# For Repeat cases of Bank and IFBL at Underwriting pending stage below fields should be visible in “Financial” Tab
# Underwriter should be able to add data in these fields
# -Data in these fields should flow to FICO for raising deviation-
# Data in these fields should be available for future in terms of report

+*Description*+

# For Repeat IFBL  and bank cases when the case reaches Underwriting Pending stage then on “Financial Tab” below fields should be visible
# Below the income section a new section should be visible “Existing Loan details” with below Fields
## EMI start date for previous loan.   {color:#6554c0}- Date field{color}
## Loan closure date of previous loan   - {color:#6554c0}Date field{color}
## Sanctioned Loan amount of previous loan. - {color:#6554c0}Numeric field{color}
## Total Income of previous loan.   - {color:#6554c0}Numeric field{color}
## Percentage of Cash flow increment (Current cash flow v/s previous cash flow). Negative percentage values can also come here.   - {color:#6554c0}Autopopulated{color}
## {color:#6554c0}Calculation field - Current total Income/Previous Total Income{color}
## No. of EMIs paid till date of previous loan.{color:#6554c0} - Numeric field{color}
## Peak DPD in existing loan. - {color:#6554c0}Numeric field{color}
## No. of times when DPD is between 8-14 in previous loan -{color:#6554c0} Numeric field{color}
## No. of times when DPD is between 15-30 in previous loan - {color:#6554c0}Numeric field{color}
## Any DPD reported in last 3 months.  - {color:#6554c0}Numeric field{color}
## Principal OutStanding of previous loan. - {color:#6554c0}Numeric field{color}
## Business name mentioned in previous loan. - {color:#6554c0}Autopopulated from previous base loan{color}

3. these fields would be mandatory for all repeat cases. -and the data should flow to FICO in respective tags.-

4. Any change in data would system would ask the user to click on eligibility mandatory before taking any decision.

5. The data should be autosaved as done for other tabs
acceptance: nan

key: ML-41
summary: API to be send for Customer photo and Signature : API handling for UI
description: nan
acceptance: nan

key: ML-30
summary: "Relationship With Applicant" tag to be send in FinnOne API
description: Applicable for MEL. MEL+ and MEL repeat and PL

Relationship with Applicant tag to be send in FinnOne submit request

----

Need to pass value of relation in “RelationshipWithApplicant” tag of XML. Kindly do the necessary changes in SFDC xml to accommodate this tag.

!image-20200925-062407.png|width=478,height=250!
acceptance: nan

key: ML-26
summary: SOID Field to be created for Sending the same to FinnOne
description: nan
acceptance: nan

key: ML-24
summary: OTP Based E-sign for Credit Protect on Insurance Screen
description: Applicable for - MEL, MEL+, MEL repeat and PL

*Acceptance criteria:*

# Credit protect insurance form to be generated English on the OTP SMS Send to Customer.
# User should be able to do OTP validation for all the Applicants & Co-applicants who have opted for ‘Credit Protect/Group Suraksha’ insurance in the loan.
# User should have Retry option of OTP Validation

*Description*

# On Post Sanction when the IRO lands on insurance screen the user will click on Calculate premium and move  to next stage by clicking on “NEXT”
# User will land on Charges screen and will click on continue
#  On clicking on continue the IRO will land again on insurance page where all the Insurance details would be non editable and user will see the component for OTP Verification
# There should be a drop-down of Applicant Type, which will show the list of Applicant & Co-applicants.
# Once user selects a Applicant Type then below Generate OTP field should be displayed.
# User should be able to do OTP validation for all the Applicants & Co-applicants who have opted for ‘Credit Protect/Group Suraksha’ insurance in the loan.
# Whosoever OTP validation is done should be disabled for selection and a result should be displayed for all the list of applicants. 
# Post Applicant selection a field to enter the OTP should be visible and a button “Generate OTP” should be visible
# This should be a mandatory button. “Next” button should be disabled without clicking on this button.
# An OTP should be sent to the customer’s mobile number (same mobile number taken at the time of customer consent) once this button is clicked.
# SMS content- 
_Dear Customer,_

_Thanks for opting for “Insurance Product Name (Credit Protect Plus for all MEL cases. And for PL- Credit Protect Plus for loan amount more than 2 lac and ‘Group Suraksha’ for loan amount up to 2 lac.) Please share this consent code with our Relationship Officer to complete the process. Sharing this code means that you have read and understood the terms and conditions/declaration given in below link._
_TnC link: link would contain the auto-filled DoGH/policy document generated in english._

_Sum Assured:_
_Premium Amount:_
_Consent Code: xxxx_

_Regards,_
_IDFC FIRST Bank_
# A place holder should be provided to enter the OTP. 
# ‘Validate OTP’ button should be activated once OTP is entered by user.
# The user should be able to validate the OTP. If wrong OTP is entered, then following error message should pop-up “Incorrect OTP. Please try again.”
# If wrong OTP is entered 3 times, then system should give an option to resend OTP.
# ‘Resend OTP’ button should be activated in 2 scenarios:
## Only after clicking on ‘Generate OTP’ button total of 4 times OR
## If OTP is not entered within 30 seconds.
# User should be able to ‘Resend OTP’ 5 times. After 5th attempt system should ask the user to proceed with physical sign.
# After 5th attempt - a Message should be given- ‘Proceed with physical sign’ and enable “NEXT” button on which the case will go to next stage
# This whole process should run for applicant and all co-applicants, who have opted for ‘Credit Protect/Group Suraksha’ insurance in the loan.
# If there are two co-applicants’ then system should run this process- 1st for applicant, 2nd for co-applicant 1 and 3rd for co-applicant 2
acceptance: nan

key: ML-17
summary: BCM should be able to see the Blaze error message with reason, if received while calculating Eligibility
description: BCM should be able to see the Blaze error message with reason, if received while calculating Eligibility

h3. Current approach

# Once, user lands on Underwriting screen, if he clicks on “Calculate Eligibility” button and BLAZE_ERROR is received in CDRule’s response. Then, a generalized message of “BLAZE_ERROR: Something went wrong” is displayed.

h3. New Approach

# If  user  clicks  on  “Calculate  Eligibility”  button  and  “BLAZE_ERROR”  in  CDRule’s response, then following will be done: 
# “reasonText”  received  from  CDRule’s  response  for  cases  where  “ruleAction”  - “ERROR”  will  be  displayed  as  toast  message  in  case  BLAZE_ERROR  occurs. Example:

{noformat}"applicationDecision": {          
"deviations": [  
{             
"ruleID": null,              
"ruleName": "yearCheck",              
"ruleGroup": null,              
"reasonText": "GTP's year is greater than GTC's year",
"deviationCode": "50001",              
"escalationLevel": null,              
"ruleAction": "ERROR"            
},{noformat}

3. In case there are multiple “ruleAction” = “ERROR”, then “reasonText” on the first index will be displayed in the UI.
acceptance: nan

key: ML-16
summary: Sending Insurance Details For Multiple Applicant at Applicant level in FInnOne
description: nan
acceptance: nan

key: ML-15
summary: EMI should be visible in the insurance screen rather than Net EMI
description: Currently after insurance screen - “A pop up comes with value - Net disbursement amount, processing fees etc.

In that screen - net EMI field needs to be changed to EMI Field and GST Field needs to be visible

This is for all MEL, MEL+ and repeat
acceptance: nan

key: ML-14
summary: CBS Search Flow for IFBL and Bank
description: nan
acceptance: nan

key: ML-13
summary: Manual aadhar to be allowed to enter on Applicant details Page
description: [https://fincap.atlassian.net/browse/RK-355|https://fincap.atlassian.net/browse/RK-355|smart-link] 
acceptance: nan

key: ML-11
summary: API to be send for Customer photo and Signature : API Creation
description: Acceptance Criteria:

1. Create account should be successful for the case

Description:

1. When the customer CBS create account is successful An API along with Cheque book should be send to CBS in which Customer photo and Signature Proof would be send.
API details are attached

2. In Document screen Customer photo and Signature document type should be made mandatory and same should be send in this API

3. Need to do error handling- if the API is failed then there should be a hard stop there with an error message - “Photo and signature not updated”.

User should be able to retry the same and on clicking “NEXT” only the photo and signature API should be recalled.
acceptance: nan

key: ML-8
summary: NACH and disbursement form changes
description: changes in NACH form attached - the border needs to be highlighted

for Physical SI - currently the direct debit mandate form is generated by emorphis in vernacular languages. same needs to be generated by SFDC in english language like in Digital SI

1. if user proceed with Physical SI then direct debit mandate form (generated in Digital SI) should be generated by sfdc and uploaded in filent.
2. the API call to emorphis for Direct Debit Mandate form (Physical SI) of document generation should not be send.
acceptance: nan

key: ML-6
summary: Cancel button to be present in all screens on IRO and BCM
description: Current Process:

Cancel button is present only on employment screen, loan and product and UW screen

Proposed process:

Cancel button should be present in below screen

Consent Page

KYC Page

1. applicant screen
2. List of applicant screen
3. employment screen
4. loan and product screen
5. document upload screen
6. insurance screen data entry
7. new account opening screen data entry
8. data verification screen
9. underwriting screen.

Post Underwriter all screens

 same needs to be refer while the user cancel the case.

Need to be done for MEL/MEL+ and repeat
acceptance: nan

key: ML-4
summary: Applicant name validation
description: applicant first name, middle name and last name should not accept special character or space in any of the fields on KYC page and applicant details page
acceptance: nan

key: ML-2
summary: Rural/Urban Pincode tagging
description: Current process:_x000D_
_x000D_
Pincodes master have stage and city with other data uploaded._x000D_
_x000D_
Proposed:_x000D_
_x000D_
Pincodes master will have one more Field which will have tagging Rural/Urban. This data will be uploaded by the user._x000D_
The same data should be stamped at applicant level for residence address at backened._x000D_
This field would be required for reporting purpose.
acceptance: nan

